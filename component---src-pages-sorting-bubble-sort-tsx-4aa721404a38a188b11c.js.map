{"version":3,"sources":["webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/core-js/modules/es6.array.fill.js","webpack:///./node_modules/core-js/modules/_array-fill.js","webpack:///./node_modules/core-js/modules/es6.math.log2.js","webpack:///./src/workers/sorting/bubble-sort.worker.js","webpack:///./node_modules/workerize-loader/dist/rpc-wrapper.js","webpack:///./src/visualizers/index.ts","webpack:///./src/workers/buffered-worker.ts","webpack:///./src/components/visualization-page.tsx","webpack:///./src/visualizers/common/numbered-circle.ts","webpack:///./src/utils/clamp.ts","webpack:///./src/visualizers/animations/empty-animation.ts","webpack:///./src/visualizers/animations/slide-animation.ts","webpack:///./src/visualizers/common/camera.ts","webpack:///./src/visualizers/animations/idle-animation.ts","webpack:///./src/visualizers/animations/swap-animation.ts","webpack:///./src/visualizers/animations/immediate-animation.ts","webpack:///./src/visualizers/animations/composite-animation.ts","webpack:///./src/visualizers/drawers/sorting/bubble-sort-drawer.ts","webpack:///./src/configs/sorting/bubble-sort-config.ts","webpack:///./src/pages/sorting/bubble-sort.tsx","webpack:///./node_modules/paper/dist/paper-core.js"],"names":["runtime","exports","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","value","makeInvokeMethod","fn","obj","call","err","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","Promise","resolve","reject","invoke","result","__await","then","unwrapped","error","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","keys","object","key","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","$export","P","fill","toObject","toAbsoluteIndex","toLength","O","aLen","arguments","index","end","endPos","S","log2","x","Math","log","LN2","addMethods","require","methods","w","Worker","__webpack_public_path__","worker","c","callbacks","addEventListener","e","d","data","id","f","assign","message","evt","document","createEvent","initEvent","params","dispatchEvent","len","a","b","postMessage","Visualizer","canvas","DrawerFactory","animation","finishAnimation","project","paper","Project","activate","view","onFrame","bind","drawer","event","run","delta","isFinished","start","step","animate","handleStep","terminate","clear","remove","BufferedWorker","size","buffer","init","bufferNext","shift","DrawingArea","VisualizationPage","WorkerFactory","inputs","width","height","useState","canvasRef","useRef","useEffect","current","visualizer","ref","data-paper-resize","NumberedCircle","number","position","radius","color","fontSize","fontWeight","circle","Path","Circle","strokeColor","strokeWidth","text","PointText","content","String","justification","fillColor","y","bounds","addChild","changeColor","children","Group","clamp","min","max","EmptyAnimation","dt","SlideAnimation","seconds","item","prevTranslate","nextTranslate","t","diff","subtract","progress","add","multiply","matrix","Matrix","Camera","xmax","ymax","translate","Point","ensureVisible","items","map","reduce","union","rect","unite","viewSize","top","left","bottom","right","isVisible","xmid","ymid","IdleAnimation","SwapAnimation","item1","item2","through1","path1","Arc","through2","path2","getPointAt","ImmediateAnimation","hasRun","CompositeAnimation","animations","BubbleSortDrawer","handleInit","handleComp","handleSwap","handleNoSwap","arr","payload","RADIUS","padding","PADDING","margin","MARGIN","circles","INITIAL_COLOR","camera","INIT_IDLE","pos","HIGHLIGHTED_COLOR","SLIDE_DURATION","COMP_IDLE","lastSwapped","SWAP_DURATION","SWAP_IDLE","markFinished","NOSWAP_IDLE","from","FINISHED_COLOR","Color","colors","Array","floor","random","BubbleSortPage","BubbleSortWorker","config","window","Base","hidden","array","_slice","describe","getOwnPropertyDescriptor","define","defineProperty","l","forIn","set","dst","src","_each","desc","_inject","dest","enumerable","beans","preserve","beansNames","field","val","get","substring","bean","isFunc","res","base","match","toLowerCase","isPlainObject","writable","configurable","test","part","inject","statics","extend","proto","initialize","apply","each","clone","pick","list","begin","_id","_class","_name","Formatter","instance","join","getClassName","importJSON","json","exportJSON","options","toJSON","serialize","props","exclude","filter","_prioritize","equals","obj1","obj2","isArray","read","amount","peek","__index","readIndex","_readIndex","readNull","__read","filtered","__filtered","remain","readList","readNamed","getNamed","hasValue","source","getSource","__unfiltered","readSupported","that","__source","hasNamed","prioritize","processed","handleKey","isPlainValue","asString","compact","dictionary","isRoot","formatter","precision","definitions","references","unshift","_serialize","_compactSerialize","deserialize","_data","_setDictionary","_isRoot","isFirst","hasDictionary","isDictionary","args","JSON","stringify","target","parse","useTarget","Item","Layer","insert","concat","itemsLength","startLength","splice","append","_index","removed","capitalize","str","replace","toUpperCase","camelize","chr","hyphenate","Emitter","on","func","types","_eventTypes","handlers","_callbacks","indexOf","install","off","uninstall","once","handler","emit","setTarget","currentTarget","responds","attach","detach","fire","_installEvents","events","_events","isString","PaperScope","settings","applyMatrix","insertItems","handleSize","hitTolerance","projects","tools","_scopes","support","ctx","CanvasProvider","getContext","nativeDash","nativeBlendModes","BlendMode","nativeModes","release","agent","user","navigator","userAgent","os","exec","platform","browser","n","v1","v2","rv","chrome","v","version","versionNumber","parseFloat","trident","jsdom","webkit","atom","getView","_view","getPaper","execute","code","scope","setup","element","createCanvas","getCanvas","handleAttribute","el","attr","getAttribute","hasAttribute","PaperScopeItem","_scope","_list","_reference","isActive","CollisionDetection","findItemBoundsCollisions","items1","items2","tolerance","getBounds","bounds1","bounds2","findBoundsCollisions","findCurveBoundsCollisions","curves1","curves2","bothAxis","curves","hor","ver","boundsA","boundsB","sweepVertical","onlySweepAxisCollisions","allBounds","lengthA","lengthAll","binarySearch","indices","coord","lo","hi","mid","pri0","pri1","sec0","sec1","allIndicesByPri0","sort","i1","i2","activeIndicesByPri1","allCollisions","curIndex","curBounds","origIndex","isCurrentA","isCurrentB","curCollisions","pruneCount","j","activeIndex","curSec1","curSec0","activeBounds","isActiveA","isActiveB","collisions","multiplier","pow","round","pair","val1","val2","separator","point","rectangle","Numerical","abscissas","weights","abs","sqrt","LOG2E","getDiscriminant","split","D","E","ad","bd","cd","p","q","getNormalizationFactor","norm","EPSILON","MACHINE_EPSILON","CURVETIME_EPSILON","GEOMETRIC_EPSILON","TRIGONOMETRIC_EPSILON","KAPPA","isZero","isMachineZero","integrate","A","B","m","sum","Ax","findRoot","df","fx","dx","nx","solveQuadratic","roots","x1","x2","Infinity","Q","R","count","boundless","minB","maxB","isFinite","solveCubic","b1","c2","qd","evaluate","x0","tmp","r","s","td","rd","UID","_pools","pool","arg0","arg1","reading","hasY","_set","setAngle","angle","getLength","setLength","_angle","cos","sin","scale","getAngle","getAngleInRadians","PI","setAngleInRadians","getAngleInDegrees","setAngleInDegrees","div","NaN","dot","acos","atan2","getQuadrant","getDirectedAngle","cross","getDistance","squared","normalize","rotate","center","transform","_transformPoint","divide","modulo","negate","isInside","_Rectangle","contains","isClose","isCollinear","isColinear","isOrthogonal","_isNaN","isInQuadrant","point1","point2","y1","y2","op","LinkedPoint","owner","setter","_x","_y","_owner","_setter","_dontNotify","getX","setX","getY","setY","isSelected","_selection","_getSelection","setSelected","selected","_changeSelection","Size","hasHeight","_isNaN2","size1","size2","LinkedSize","_width","_height","getWidth","setWidth","getHeight","setHeight","arg2","arg3","to","frm","rt","getPoint","_dontLink","setPoint","getSize","_fw","_fh","setSize","sx","_sx","sy","_sy","h","getLeft","setLeft","getTop","setTop","getRight","setRight","getBottom","setBottom","getCenterX","setCenterX","getCenterY","setCenterY","getCenter","setCenter","getArea","isEmpty","_containsRectangle","_containsPoint","intersects","epsilon","intersect","include","expand","parts","xFirst","LinkedRectangle","internal","ok","_a","_b","_c","_d","_tx","_ty","tx","ty","_changed","getValues","_applyMatrix","mx","recursively","_setApplyMatrix","isIdentity","shear","skew","toRadians","tan","a1","c1","d1","a2","b2","d2","tx2","ty2","prepend","tx1","ty1","appended","prepended","invert","det","inverted","concatenate","preConcatenate","chain","_shiftless","_orNullIfIdentity","isInvertible","isSingular","_transformCoordinates","_transformCorners","coords","_transformBounds","inverseTransform","_inverseTransform","decompose","degrees","asin","translation","getTranslation","rotation","scaling","skewing","getScaling","getRotation","applyToContext","prop","Line","arg4","asVector","_px","_py","_vx","_vy","getVector","line","isInfinite","getSide","getSignedDistance","p1x","p1y","v1x","v1y","p2x","p2y","v2x","v2y","dy","u1","u2","px","py","vx","vy","ccw","_children","_namedChildren","_activeLayer","_currentStyle","Style","View","_selectionItems","_selectionCount","_updateVersion","flags","_needsUpdate","_requested","_autoUpdate","requestUpdate","changes","_changes","changesById","_changesById","getCurrentStyle","setCurrentStyle","style","getIndex","getOptions","getLayers","getActiveLayer","getSymbolDefinitions","ids","getItems","SymbolItem","definition","_definition","getSymbols","getSelectedItems","selectionItems","selection","isInserted","_updateSelection","selectAll","setFullySelected","deselectAll","addLayer","layer","insertLayer","_remove","_setProject","setName","_insertItem","_created","NO_INSERT","insertChild","_getItems","getItem","removeOn","sets","_removeSets","mousedrag","other","draw","pixelRatio","save","param","offset","viewMatrix","matrices","updateMatrix","restore","_drawSelection","_serializeFields","_canApplyMatrix","_canScaleStroke","_pivot","_visible","_blendMode","_opacity","_locked","_guide","_clipMask","_selectBounds","_selectChildren","pivot","visible","blendMode","opacity","locked","guide","clipMask","_countItemEvent","_animateItem","onLoad","onError","_itemHandlers","_initialize","hasProps","_matrix","_parent","_style","parent","fields","_defaults","symbol","_symbol","cacheParent","_project","_bounds","_position","_decomposed","_globalMatrix","_clearBoundsCache","getId","getName","_removeNamed","_getOwner","namedChildren","getStyle","setStyle","getSelection","setSelection","flag","isFullySelected","isClipMask","setClipMask","setFillColor","setStrokeColor","getData","setData","getPosition","_getPositionFromBounds","setPosition","getPivot","setPivot","getStrokeBounds","stroke","getHandleBounds","getInternalBounds","hasMatrix","opts","_boundsOptions","getStrokeScaling","cacheItem","_getCachedBounds","setBounds","_backup","_getBounds","_updateBoundsCache","_getBoundsCacheKey","noInternal","cacheKey","cached","nonscaling","hasStroke","_getStrokeMatrix","_item","getViewMatrix","_boundsCache","cache","_decompose","decomposed","setRotation","setScaling","getMatrix","setMatrix","getGlobalMatrix","_dontClone","parents","getApplyMatrix","setApplyMatrix","getTransformContent","setTransformContent","getProject","installEvents","getLayer","getParent","setParent","getChildren","setChildren","removeChildren","addChildren","getFirstChild","getLastChild","getNextSibling","getPreviousSibling","_equals","copy","deep","copyAttributes","copyContent","insertAbove","orig","excludeMatrix","rasterize","resolution","getResolution","topLeft","getTopLeft","bottomRight","getBottomRight","ceil","raster","Raster","setCanvas","_contains","_asPathItem","Rectangle","getIntersections","hitTest","_hitTest","HitResult","hitTestAll","all","hitTestChildren","_exclude","child","_hitTestChildren","parentViewMatrix","guides","tolerancePadding","_tolerancePadding","_getStrokePadding","checkSelf","hit","checkPoint","pt","checkPosition","checkCenter","checkBounds","points","_hitTestSelf","hasFill","matches","compare","matchObject","firstOnly","overlapping","inside","recursive","path","childMatrix","insertChildren","inserted","notifySelf","_insertAt","insertBelow","sendToBack","bringToFront","appendTop","appendBottom","moveAbove","moveBelow","addTo","copyTo","namedArray","notifyParent","_dispose","replaceWith","reverseChildren","numChildren","isEditable","hasShadow","_getOrder","getList","list1","list2","hasChildren","isAbove","isBelow","isParent","isChild","isDescendant","isAncestor","isSibling","isGroupedWith","_applyRecursively","transformMatrix","getFillColor","getStrokeColor","_transformContent","decomp","applyRecursively","globalToLocal","localToGlobal","parentToLocal","localToParent","fitBounds","itemRatio","rectRatio","newBounds","_setStyles","fillStyle","toCanvasStyle","strokeStyle","lineWidth","getStrokeWidth","strokeJoin","getStrokeJoin","strokeCap","getStrokeCap","miterLimit","getMiterLimit","lineJoin","lineCap","dashArray","getDashArray","dashOffset","getDashOffset","setLineDash","lineDashOffset","mozDash","mozDashOffset","blur","getShadowBlur","getShadowOffset","shadowColor","getShadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","parentStrokeMatrix","globalMatrix","mainCtx","itemOffset","prevOffset","normalBlend","nativeBlend","direct","dontStart","clip","_canComposite","strokeMatrix","clipItem","globalAlpha","globalCompositeOperation","setTransform","_draw","dontFinish","getFillRule","process","_isUpdated","updateVersion","CompoundPath","updated","itemSelected","boundsSelected","positionSelected","_drawSelected","getSelectedColor","half","beginPath","arc","deltas","moveTo","lineTo","closePath","fillRect","hash","tween","easing","duration","Tween","_handleFrame","time","running","tweenTo","tweenFrom","_clipItem","_getClipItem","isClipped","setClipped","clipped","Shape","_type","_size","_radius","setType","setRadius","getType","getShape","setShape","getRadius","rad","toPath","toShape","dontPaint","untransformed","isCircle","rx","ry","kappa","cx","cy","bezierCurveTo","getCornerCenter","halfSize","dir","corner","quadrant","isOnEllipseStroke","vector","hitStroke","hitFill","strokeRadius","strokePadding","outer","inner","createShape","Ellipse","ellipse","_readEllipse","crossOrigin","_smoothing","image","getElementById","getContent","naturalHeight","setImage","setSource","_loaded","_image","_canvas","_setImage","copyCanvas","drawImage","_crossOrigin","getElement","getLoaded","u","getPpi","getImage","Event","setTimeout","DomEvent","load","naturalWidth","_context","_change","setContext","toDataURL","Image","getCrossOrigin","setCrossOrigin","getSmoothing","setSmoothing","smoothing","getSubCanvas","getSubRaster","getAverageColor","PathItem","_sampleContext","clearRect","sampleSize","pixels","getImageData","channels","total","alpha","getPixel","setPixel","components","_convert","_alpha","imageData","createImageData","putImageData","setImageData","DomElement","setPrefixed","setDefinition","SymbolDefinition","getDefinition","getSymbol","setSymbol","dontCenter","setItem","_dontCenter","place","segments","handles","ends","Segment","arg5","handleIn","handleOut","SegmentPoint","_point","hasHandles","_handleIn","_handleOut","_path","curve","_curves","_closed","getHandleIn","setHandleIn","getHandleOut","setHandleOut","isSmooth","clearHandles","oldSelection","getPath","getCurve","_segments","getCurves","getLocation","CurveLocation","_segment1","getNext","smooth","_first","_last","factor","getPrevious","p0","p1","p2","k","d1_a","d1_2a","d2_a","d2_2a","N","isLast","reversed","removeSegment","segment","interpolate","handleIn1","handleIn2","handleOut2","handleOut1","change","Curve","arg6","arg7","seg1","seg2","handle1","handle2","segment1","segment2","_segment2","getPoint1","getHandle1","getHandle2","getPoint2","_length","classify","setPoint1","setPoint2","setHandle1","setHandle2","getSegment1","getSegment2","getPoints","getLine","getPart","getPartLength","divideAt","location","divideAtTime","getTimeAt","_setHandles","subdivide","setHandles","splitAt","splitAtTime","getLocationAtTime","isTime","straight","h1","h2","y0","x3","y3","x4","y4","x5","y5","x6","y6","x7","y7","x8","y8","x9","y9","getMonoCurves","io","o0","o1","o2","o3","isStraight","v0","v3","getTimeOf","p3","getNearestTime","minDist","minT","refine","dist","flip","isFlatEnough","flatness","ux","uy","_addBounds","minPad","maxPad","s1","s2","isLinear","third","hasLength","isHorizontal","getTangentAtTime","isVertical","getLocationAt","_isTime","getParameterAt","getTimesWithTangent","tangent","getOffsetAtTime","getLocationOf","getOffsetOf","getOffset","getParameterOf","getNearestLocation","getNearestPoint","_evaluateMethods","getLengthIntegrand","ax","bx","ay","by","getIterations","normalized","d3","t1","t2","hasRoots","t1Ok","t2Ok","f1","f2","ds","forward","rangeLength","guess","getTangent","getWeightedTangent","getNormal","getWeightedNormal","getCurvature","getPeaks","addLocation","locations","overlap","excludeStart","excludeEnd","loc1","loc2","_intersection","addCurveIntersections","recursion","calls","tMin","tMax","uMin","uMax","tMinClip","tMaxClip","q0x","q0y","q3x","q3y","dMin","dMax","dp0","dp1","dp2","dp3","hull","dq0","dq1","dq2","dq3","dist1","dist2","distRatio","getConvexHull","clipConvexHull","tMinNew","tMaxNew","uDiff","hullTop","hullBottom","clipConvexHullPart","threshold","qx","qy","getCurveLineIntersections","addCurveLineIntersections","addLineIntersection","getCurveIntersections","overlaps","getOverlaps","straight1","straight2","before","getSelfIntersection","getSquaredLineLength","straightBoth","l1","l2","pairs","matrix1","matrix2","_returnFirst","length1","length2","values1","values2","boundsCollisions","index1","curve1","collisions1","index2","curve2","den","times","t0","_overlap","_distance","_setCurve","_time","getPointAtTime","_next","_previous","_version","_curve","_segment","_setSegment","getSegment","getTime","trySegment","_offset","_curveOffset","getParameter","getCurveOffset","getIntersection","getLastSegment","_ignoreOther","isTouching","inter","isCrossing","t1Inside","t2Inside","c4","c3","offsets","addOffsets","isInRange","v4","a3","a4","hasOverlap","merge","search","found","expanded","compound","pathData","first","isClockwise","setClockwise","clockwise","setPathData","previous","control","relative","getCoord","command","lower","move","cubicCurveTo","quadraticCurveTo","arcTo","winding","_getWinding","onPath","windingL","windingR","getCrossings","minLoc","isPath","itemsFrom","itemsTo","setClosed","paths1","paths2","matched","boundsOverlaps","findBoundsOverlaps","pathBoundsOverlaps","closed","setSegments","_segmentSelection","_area","getSegments","fullySelected","last","_add","getFirstSegment","_countCurves","getFirstCurve","getLastCurve","isClosed","getPathData","_precision","curX","curY","prevX","prevY","inX","inY","outX","outY","addSegment","skipLine","segs","_adjustCurves","insertSegment","addSegments","insertSegments","removeSegments","_includeCurves","area","_selectSegments","newSelection","last1","last2","first2","first1","simplify","flatten","PathFlattener","PathFitter","fit","_default","loop","asymmetric","paddingLeft","paddingRight","knots","n_1","rf","hx","hy","topCenter","seg3","seg4","isArc","pt1","pt2","shape","pos2","end2","pos1","end1","start2","cap","numSegments","hitCurves","isCloseEnough","checkSegmentPoint","seg","anchor","checkSegmentPoints","addToArea","checkSegmentStroke","isJoin","_addBevelJoin","_addSquareCap","getOffsetsWithTangent","curveStart","curveTimes","drawSegments","drawSegment","dashLength","flattener","drawPart","pX","pY","miniSize","miniHalf","drawHandle","hX","hY","drawHandles","getCurrentSegment","moveBy","curveTo","through","extent","middle","large","rxSq","rySq","xSq","ySq","throughSide","centerSide","ext","inc","z","out","_in","lineBy","curveBy","parameter","cubicCurveBy","quadraticCurveBy","arcBy","prevCoords","processSegment","joinBounds","addPoint","addRound","addJoin","addCap","phi","isArea","normal1","getNormalAtTime","normal2","normal","joinPadding","joinRadius","SQRT2","paddingX","paddingY","xn","xx","yn","yx","ellipseSegments","createPath","createEllipse","bl","getBottomLeft","tl","tr","getTopRight","br","RoundRectangle","Oval","RegularPolygon","sides","three","Star","radius1","radius2","paths","getCurrentPath","check","operators","getPaths","preparePath","resolveCrossings","reorient","createResult","filterIntersection","traceBoolean","operation","trace","splitBoolean","_path1","_path2","operator","crossings","divideLocations","collectPaths","_overlapsOnly","curvesValues","curveCollisions","curveCollisionsMap","propagateWinding","_winding","tracePaths","reorientPaths","added","addPath","linkIntersections","clearCurveHandles","lookup","container","sorted","entry1","containerWinding","getInteriorPoint","entry2","clearLater","renormalizeLocs","prevCurve","prevTime","results","clearCurves","clearLookup","origTime","newCurve","getWinding","dontFlip","vPrev","vClose","curvesList","ia","pv","pa","po","qualityEpsilon","paL","paR","pathWindingL","pathWindingR","onAnyPath","quality","addWinding","a0","windingPrev","a3Prev","handleCurve","monoCurves","totalLength","curveLength","operand","SQRT1_2","wind","pathWinding","starts","isValid","_visited","isStart","visitPath","getCrossingSegments","collectStarts","collect","nextInter","_prev","inter1","inter2","over1","over2","branch","visited","valid","finished","branches","hasOverlaps","hasCrossings","intersections","nonZero","intercepts","mv","mo0","mo3","maxRecursion","ignoreStraight","minSpan","addCurve","computeParts","halves","tMid","_get","fitCubic","tan1","tan2","uPrime","chordLengthParameterize","maxError","parametersInOrder","generateBezier","findMaxError","reparameterize","tanCenter","C","X","b0","b3","alpha1","alpha2","detC0C1","detC0X","c0","segLength","eps","degree","maxDist","TextItem","_content","_lines","setContent","getCharacterStyle","setCharacterStyle","getParagraphStyle","setParagraphStyle","lines","leading","getLeading","font","getFontStyle","textAlign","getJustification","fillText","strokeText","numLines","getTextWidth","colorCtx","gray","rgb","hsb","hsl","gradient","componentParsers","namedColors","transparent","fromCSS","string","parseInt","trim","isHSL","component","unit","turn","grad","hsbIndices","converters","g","achromatic","t3s","t3","properties","parser","_components","Gradient","_removeOwner","_addOwner","_properties","argType","converted","parsers","stops","radial","getComponents","_canvasStyle","converter","convert","getAlpha","setAlpha","hasAlpha","col","isGradient","toCSS","hex","canvasGradient","_stops","origin","destination","highlight","inverse","_radial","createRadialGradient","createLinearGradient","addColorStop","_color","_types","_setOwner","components1","components2","setStops","setRadial","_owners","getStops","GradientStop","getRadial","stops1","stops2","rampPoint","setColor","setOffset","getRampPoint","setRampPoint","getColor","itemDefaults","fillRule","strokeScaling","shadowOffset","selectedColor","groupDefaults","fontFamily","textDefaults","_values","isColor","isPoint","applyToChildren","old","_dontMerge","childValue","Font","WindingRule","isStyle","style1","style2","secondary","defaults2","value1","value2","getFontSize","getFontWeight","getFontFamily","getFont","setFont","getPixelSize","handlePrefix","prefixes","suffix","prefix","getStyles","doc","nodeType","ownerDocument","defaultView","getComputedStyle","viewport","body","html","documentElement","getBoundingClientRect","clientLeft","clientTop","pageXOffset","scrollLeft","pageYOffset","scrollTop","getViewportBounds","innerWidth","clientWidth","innerHeight","clientHeight","isInvisible","isInView","getPrefixed","passive","removeEventListener","targetTouches","changedTouches","pageX","clientX","pageY","clientY","getTarget","srcElement","getRelatedTarget","relatedTarget","toElement","requestAnimationFrame","timer","nativeRequest","requested","handleCallbacks","functions","callback","setInterval","getCanvasSize","setAttribute","_viewEvents","userDrag","userSelect","touchCallout","contentZooming","tapHighlightColor","_windowEvents","resize","setViewSize","Stats","_stats","stats","domElement","appendChild","_element","_pixelRatio","devicePixelRatio","_setElementSize","_viewSize","_views","_viewsById","_focused","_frameItems","_frameItemCount","_itemEvents","virtual","node","_animate","play","pause","_count","getAutoUpdate","setAutoUpdate","autoUpdate","update","now","Date","_handleFrameItems","getPixelRatio","getViewSize","parentNode","temp","createElement","removeChild","getZoom","setZoom","zoom","scrollBy","projectToView","viewToProject","getEventPoint","CanvasView","prevFocus","tempFocus","mousedown","mousemove","mouseup","dragging","mouseDown","pointerEnabled","msPointerEnabled","viewEvents","docEvents","mouseout","nodeName","handleMouseMove","scroll","updateFocus","_handleMouseEvent","downPoint","lastPoint","downItem","overItem","dragItem","clickItem","clickTime","dblClick","called","prevented","fallbacks","doubleclick","wasInView","itemEventsMap","click","mouseenter","mouseleave","itemEvents","hitItems","nativeMove","tool","inView","hitItem","mouse","substr","emitMouseEvent","drag","emitMouseEvents","down","up","cancelable","preventDefault","_handleKeyEvent","character","keyEvent","KeyEvent","sign","_native","_resetState","prevPoint","stopItem","mouseEvent","stopped","MouseEvent","fallback","HTMLCanvasElement","deviceRatio","backingStoreRatio","firefox","prevFont","measureText","stopPropagation","getTimeStamp","timeStamp","getModifiers","Key","modifiers","metaFixMap","downKey","keyLookup","charLookup","keyMap","charMap","alt","meta","capsLock","space","option","mac","getKey","keyIdentifier","fromCharCode","keyCode","keydown","altKey","metaKey","ctrlKey","keypress","charCode","keyup","isDown","ToolEvent","_choosePoint","toolPoint","getLastPoint","_lastPoint","setLastPoint","getDownPoint","_downPoint","setDownPoint","getMiddlePoint","_middlePoint","setMiddlePoint","middlePoint","getDelta","_delta","setDelta","getCount","setCount","_moveCount","_downCount","getMinDistance","_minDistance","setMinDistance","minDistance","_maxDistance","getMaxDistance","setMaxDistance","maxDistance","getFixedDistance","setFixedDistance","distance","easings","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","isFunction","_then","_startTime","_keys","_parsedKeys","_parseKeys","_from","_getState","_to","getValue","__add","__subtract","__multiply","_setProperty","onUpdate","startTime","_getProperty","resolved","_resolveValue","_calculate","parsed","PaperScript","calculateBinary","Http","request","xhr","XMLHttpRequest","open","url","mimeType","overrideMimeType","onload","status","responseText","onerror","send","canvases","sr","sg","sb","sa","bg","bb","ba","dr","dg","db","getLum","setLum","mn","lmn","ln","mxl","getSat","setSat","md","modes","screen","overlay","darken","lighten","difference","exclusion","hue","saturation","luminosity","average","negation","mode","srcContext","dstContext","srcCanvas","dstData","SvgElement","svg","xmlns","xlink","attributeNamespace","href","attributes","namespace","setAttributeNS","tag","createElementNS","getAttributeNS","SvgStyles","property","attribute","toSVG","fromSVG","exportFilter","getTransform","coordinates","attrs","trans","exportGroup","childNode","_exportSVG","exportShape","exporters","embedImages","matchShapes","definitionItem","viewBox","overflow","textContent","applyStyle","gradientNode","getGradient","getOrigin","getDestination","getHighlight","fy","gradientUnits","stopColor","exportGradient","visibility","svgs","__id","typeId","exportDefinitions","defs","insertBefore","firstChild","XMLSerializer","serializeToString","exporter","onExport","setOptions","exportSVG","rootSize","allowNull","allowPercent","defaultValue","defaultX","defaultY","convertValue","importGroup","nodes","childNodes","isClip","isDefs","currentStyle","applyAttributes","querySelectorAll","importNode","importPoly","importGradient","scaleToBounds","_scaleToBounds","importers","clippath","polygon","polyline","lineargradient","radialgradient","use","applyTransform","transforms","applyOpacity","gradientTransform","setVisible","display","percent","styles","group","tagName","isElement","nextSibling","importer","onImport","expandShapes","_importSVG","DOMParser","parseFromString","File","reader","FileReader","readAsText","importSVG","PlacedSymbol"],"mappings":"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","file":"component---src-pages-sorting-bubble-sort-tsx-4aa721404a38a188b11c.js","sourcesContent":["require(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar runtime = function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n    return generator;\n  }\n\n  exports.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n\n  var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n\n\n  var IteratorPrototype = {};\n\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n  if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      prototype[method] = function (arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function (genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n  };\n\n  exports.mark = function (genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  }; // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n\n\n  exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n\n        if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function (value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function (err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function (unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function (error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n      // invocations of the iterator.\n      callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    } // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n\n\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n\n  exports.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n\n  exports.async = function (innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n    return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        } // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n        var record = tryCatch(innerFn, self, context);\n\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted; // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  } // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (!info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n      context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    } // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n\n\n    context.delegate = null;\n    return ContinueSentinel;\n  } // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n\n\n  defineIteratorMethods(Gp);\n  Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n  Gp[iteratorSymbol] = function () {\n    return this;\n  };\n\n  Gp.toString = function () {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    keys.reverse(); // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      } // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n\n\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n          return next;\n        };\n\n        return next.next = next;\n      }\n    } // Return an iterator with no values.\n\n\n    return {\n      next: doneResult\n    };\n  }\n\n  exports.values = values;\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: true\n    };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      this.prev = 0;\n      this.next = 0; // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n      this.method = \"next\";\n      this.arg = undefined;\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n    stop: function stop() {\n      this.done = true;\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" || record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      } // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  }; // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n\n  return exports;\n}( // If this script is executing as a CommonJS module, use module.exports\n// as the regeneratorRuntime namespace. Otherwise create a new empty\n// object. Either way, the resulting object will be used to initialize\n// the regeneratorRuntime variable at the top of this file.\ntypeof module === \"object\" ? module.exports : {});\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}","module.exports = require(\"regenerator-runtime\");\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","// 20.2.2.22 Math.log2(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log2: function log2(x) {\n    return Math.log(x) / Math.LN2;\n  }\n});\n","\n\t\t\t\tvar addMethods = require(\"../../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"init\",\"run\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"built-sort.135ed4.worker.js\", { name: \"built-sort.[hash:6].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","require(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nfunction addMethods(worker, methods) {\n  var c = 0;\n  var callbacks = {};\n  worker.addEventListener('message', function (e) {\n    var d = e.data;\n\n    if (d.type !== 'RPC') {\n      return;\n    }\n\n    if (d.id) {\n      var f = callbacks[d.id];\n\n      if (f) {\n        delete callbacks[d.id];\n\n        if (d.error) {\n          f[1](Object.assign(Error(d.error.message), d.error));\n        } else {\n          f[0](d.result);\n        }\n      }\n    } else {\n      var evt = document.createEvent('Event');\n      evt.initEvent(d.method, false, false);\n      evt.data = d.params;\n      worker.dispatchEvent(evt);\n    }\n  });\n  methods.forEach(function (method) {\n    worker[method] = function () {\n      var params = [],\n          len = arguments.length;\n\n      while (len--) {\n        params[len] = arguments[len];\n      }\n\n      return new Promise(function (a, b) {\n        var id = ++c;\n        callbacks[id] = [a, b];\n        worker.postMessage({\n          type: 'RPC',\n          id: id,\n          method: method,\n          params: params\n        });\n      });\n    };\n  });\n}\n\nmodule.exports = addMethods;","import paper from 'paper';\n\nimport Worker from 'workers';\nimport Drawer, { DrawerConstructor } from 'visualizers/drawers'\nimport Animation from 'visualizers/animations';\n\nexport default class Visualizer {\n    private animation: Animation = null;\n    private finishAnimation: () => void = null;\n    private done: boolean = false;\n    private project: paper.Project;\n    private drawer: Drawer;\n\n    constructor(\n        private canvas: HTMLCanvasElement,\n        private worker: Worker,\n        DrawerFactory: DrawerConstructor,\n    ) {\n        this.project = new paper.Project(canvas);\n        this.project.activate();\n        this.project.view.onFrame = this.onFrame.bind(this);\n        this.drawer = new DrawerFactory(this.project.view);\n    }\n\n    private onFrame(event: any) {\n        if (this.animation) {\n            this.animation.run(event.delta)\n            if (this.animation.isFinished()) {\n                this.finishAnimation();\n                this.finishAnimation = null;\n                this.animation = null;\n            }\n        }\n    }\n\n    async start(): Promise<void> {\n        let step = await this.worker.run();\n        while (true) {\n            if (step.done || this.done) {\n                this.done = true;\n                break;\n            }\n            await this.animate(this.drawer.handleStep(step));\n            step = await this.worker.run();\n        }\n    }\n\n    private animate(animation: Animation): Promise<void> {\n        this.animation = animation;\n        if (!this.animation) {\n            return Promise.resolve();\n        }\n        return new Promise((resolve) => {\n            this.finishAnimation = resolve;\n        });\n    }\n\n    terminate(): void {\n        this.drawer.terminate();\n        this.project.view.onFrame = null;\n        this.project.clear();\n        this.project.remove();\n        this.worker.terminate();\n        this.done = true;\n        this.worker = null;\n        this.project = null;\n    }\n}\n","import Worker from 'workers';\nimport Step from 'algorithms/step';\n\nexport default class BufferedWorker implements Worker {\n    private buffer: Array<Promise<Step>> = [];\n    \n    constructor(private size: number, private worker: Worker) {\n    }\n\n    async init(data: any) {\n        await this.worker.init(data);\n        this.buffer.push(this.worker.run());\n        while (this.buffer.length < this.size) {\n            this.bufferNext();\n        }\n        await this.buffer[this.buffer.length - 1];\n    }\n\n    async run() {\n        const step = await this.buffer.shift();\n        this.bufferNext();\n        return step;\n    }\n\n    terminate() {\n        this.worker.terminate();\n        this.buffer = [];\n    }\n\n    private bufferNext(): void {\n        this.buffer.push(\n            this.buffer[this.buffer.length - 1].then(() => this.worker.run())\n        )\n    }\n}\n","import React, { useState, useEffect, useRef } from 'react';\nimport styled from '@emotion/styled';\n\nimport Worker from 'workers';\nimport Visualizer from 'visualizers';\nimport { DrawerConstructor } from 'visualizers/drawers';\nimport BufferedWorker from 'workers/buffered-worker';\n\nconst DrawingArea = styled.canvas`\n    width: 100%;\n`;\n\ninterface Props {\n    WorkerFactory: new () => Worker;\n    DrawerFactory: DrawerConstructor;\n    inputs: any;\n    width?: number;\n    height?: number;\n}\n\nconst VisualizationPage = ({\n    WorkerFactory,\n    DrawerFactory,\n    inputs,\n    width = 1920,\n    height = 1080,\n}: Props) => {\n    const [data, setData] = useState(inputs);\n    const canvasRef = useRef(null);\n\n    useEffect(() => {\n        let worker = new BufferedWorker(20, new WorkerFactory());\n        const canvas = canvasRef.current;\n        let visualizer = new Visualizer(canvas, worker, DrawerFactory);\n        worker.init(data).then(() => {\n            if (visualizer) {\n                visualizer.start();\n            }\n        });\n\n        return () => {\n            visualizer.terminate();\n            visualizer = null;\n            worker = null;\n        }\n    }, [data]);\n\n    return (\n        <>\n            <DrawingArea\n                ref={canvasRef}\n                width={width}\n                height={height}\n                data-paper-resize\n            />\n        </>\n    );\n};\n\nexport default VisualizationPage;\n","import paper from 'paper';\n\ninterface Params {\n    number: number;\n    position: paper.Point;\n    radius: number;\n    color: paper.Color;\n    fontSize?: number;\n    fontWeight?: number;\n}\n\nexport default class NumberedCircle extends paper.Group {\n    constructor({\n        number,\n        position,\n        radius,\n        color,\n        fontSize = radius,\n        fontWeight = 700,\n    }: Params) {\n        super();\n        const circle = new paper.Path.Circle(position, radius);\n        circle.strokeColor = color;\n        circle.strokeWidth = 5;\n        const text = new paper.PointText(position);\n        text.content = String(number);\n        text.justification = 'center';\n        text.fillColor = color;\n        text.fontSize = fontSize;\n        text.fontWeight = fontWeight;\n        text.position.y += text.bounds.height / 3;\n        this.addChild(circle);\n        this.addChild(text);\n    }\n\n    changeColor(color: paper.Color) {\n        const [circle, text] = this.children;\n        circle.strokeColor = color;\n        text.fillColor = color;\n    }\n}\n","export default function clamp(x: number, min: number, max: number) {\n    return Math.max(Math.min(x, max), min);\n}\n","import Animation from \"visualizers/animations\";\n\nexport default class EmptyAnimation implements Animation {\n    run(dt) {\n    }\n\n    isFinished() {\n        return true;\n    }\n}\n","import paper from 'paper';\n\nimport clamp from 'utils/clamp';\nimport Animation from 'visualizers/animations';\n\nexport default class SlideAnimation implements Animation {\n    private t = 0;\n    private diff: paper.Point;\n\n    constructor(\n        private seconds: number,\n        private item: paper.Item | paper.View,\n        private prevTranslate: paper.Point,\n        private nextTranslate: paper.Point,\n    ) {\n        this.diff = nextTranslate.subtract(this.prevTranslate);\n    }\n\n    run(dt: number) {\n        this.t = this.t + dt;\n        const progress = clamp(this.t / this.seconds, 0, 1);\n        const { x, y } = this.prevTranslate.add(this.diff.multiply(progress));\n        this.item.matrix = new paper.Matrix(1, 0, 0, 1, x, y);\n    }\n\n    isFinished() {\n        return this.t >= this.seconds;\n    }\n}\n","import paper from 'paper';\n\nimport clamp from 'utils/clamp'\nimport Animation from 'visualizers/animations';\nimport EmptyAnimation from 'visualizers/animations/empty-animation';\nimport SlideAnimation from 'visualizers/animations/slide-animation';\n\nexport default class Camera {\n    private translate = new paper.Point(0, 0);\n\n    constructor(private view: paper.View, private xmax: number, private ymax: number) {\n    }\n\n    ensureVisible(seconds: number, ...items: paper.Item[]): Animation {\n        const bounds = items\n            .map((item) => item.bounds)\n            .reduce((union, rect) => union.unite(rect));\n        const { width, height } = this.view.viewSize;\n        const top = -this.translate.y;\n        const left = -this.translate.x;\n        const bottom = top + height;\n        const right = left + width;\n        const isVisible = top <= bounds.top &&\n            left <= bounds.left &&\n            bottom >= bounds.bottom &&\n            right >= bounds.right;\n        if (isVisible) {\n            return new EmptyAnimation();\n        }\n        const xmid = (bounds.left + bounds.right) / 2;\n        const ymid = (bounds.top + bounds.bottom) / 2;\n        const prevTranslate = this.translate;\n        this.translate = new paper.Point(\n            clamp(-xmid + width / 2, -this.xmax + width, 0),\n            clamp(-ymid + height / 2, -this.ymax + height, 0),\n        );\n        return new SlideAnimation(seconds, this.view, prevTranslate, this.translate);\n    }\n}\n","import Animation from 'visualizers/animations';\n\nexport default class IdleAnimation implements Animation {\n    constructor(private seconds: number) {\n    }\n\n    run(dt) {\n        this.seconds -= dt;\n    }\n\n    isFinished() {\n        return this.seconds <= 0;\n    }\n}\n","import paper from 'paper';\n\nimport Animation from 'visualizers/animations';\nimport clamp from 'utils/clamp'\n\nexport default class SwapAnimation implements Animation {\n    private t: number = 0;\n    private path1: paper.Path;\n    private path2: paper.Path;\n\n    constructor(private seconds: number, private item1: paper.Item, private item2: paper.Item) {\n        const through1: paper.Point = new paper.Point(\n            (item1.position.x + item2.position.x) / 2,\n            item1.position.y - 2 * item1.bounds.height / 3,\n        );\n        this.path1 = new paper.Path.Arc(\n            item1.position,\n            through1,\n            item2.position,\n        );\n        const through2: paper.Point = new paper.Point(\n            (item1.position.x + item2.position.x) / 2,\n            item2.position.y + 2 * item2.bounds.height / 3,\n        );\n        this.path2 = new paper.Path.Arc(\n            item2.position,\n            through2,\n            item1.position,\n        );\n    }\n\n    run(dt: number) {\n        this.t = this.t + dt;\n        const progress = clamp(this.t / this.seconds, 0, 1);\n        this.item1.position = this.path1.getPointAt(this.path1.length * progress);\n        this.item2.position = this.path2.getPointAt(this.path2.length * progress);\n    }\n\n    isFinished() {\n        return this.t >= 1;\n    }\n}\n","import Animation from 'visualizers/animations';\n\ninterface VoidFunction {\n    (): void;\n}\n\nexport default class ImmediateAnimation implements Animation {\n    private hasRun = false;\n\n    constructor(private fn: VoidFunction) {\n    }\n\n    run(dt) {\n        if (!this.isFinished()) {\n            this.hasRun = true;\n            this.fn();\n        }\n    }\n\n    isFinished() {\n        return !this.fn || this.hasRun;\n    }\n};\n","import Animation from 'visualizers/animations';\n\nexport default class CompositeAnimation implements Animation {\n    private animations: Animation[];\n\n    constructor(...animations: Animation[]) {\n        this.animations = animations;\n    }\n\n    run(dt: number) {\n        while (this.animations[0] && this.animations[0].isFinished()) {\n            this.animations.shift();\n        }\n        if (this.animations.length === 0) {\n            return;\n        }\n        this.animations[0].run(dt);\n    }\n\n    isFinished() {\n        return this.animations.length === 0;\n    }\n}\n","import paper from 'paper';\n\nimport Step from 'algorithms/step';\nimport Drawer from 'visualizers/drawers';\nimport NumberedCircle from 'visualizers/common/numbered-circle';\nimport Camera from 'visualizers/common/camera';\nimport Animation from 'visualizers/animations';\nimport IdleAnimation from 'visualizers/animations/idle-animation';\nimport EmptyAnimation from 'visualizers/animations/empty-animation';\nimport SwapAnimation from 'visualizers/animations/swap-animation';\nimport ImmediateAnimation from 'visualizers/animations/immediate-animation';\nimport CompositeAnimation from 'visualizers/animations/composite-animation';\nimport * as colors from 'utils/colors';\n\nexport default class BubbleSortDrawer implements Drawer {\n    static readonly INITIAL_COLOR = new paper.Color(colors.white);\n    static readonly HIGHLIGHTED_COLOR = new paper.Color(colors.orange);\n    static readonly FINISHED_COLOR = new paper.Color(colors.lightGreen);\n    static readonly INIT_IDLE = 0.5;\n    static readonly COMP_IDLE = 1;\n    static readonly SWAP_DURATION = 0.6;\n    static readonly SWAP_IDLE = 0.5;\n    static readonly NOSWAP_IDLE = 0.5;\n    static readonly SLIDE_DURATION = 0.8;\n    static readonly RADIUS = 1 / 30; // in terms of width\n    static readonly MARGIN = 1 / 30; // in terms of width\n    static readonly PADDING = 1 / 30; // in terms of width\n\n    private circles: NumberedCircle[];\n    private camera: Camera;\n\n    constructor(private view: paper.View) {\n    }\n\n    handleStep(step: Step): Animation {\n        switch (step.type) {\n            case 'init':\n                return this.handleInit(step);\n            case 'comp':\n                return this.handleComp(step);\n            case 'swap':\n                return this.handleSwap(step);\n            case 'noswap':\n                return this.handleNoSwap(step);\n        }\n        return new EmptyAnimation();\n    }\n\n    private handleInit(step: Step): Animation {\n        const { width, height } = this.view.viewSize;\n        const arr = step.payload.data;\n        const radius = width * BubbleSortDrawer.RADIUS;\n        const padding = width * BubbleSortDrawer.PADDING;\n        const margin = width * BubbleSortDrawer.MARGIN;\n        const position = new paper.Point(radius + padding, height / 2);\n        this.circles = arr.map((number: number, i: number) => {\n            const circle = new NumberedCircle({\n                number,\n                radius,\n                color: BubbleSortDrawer.INITIAL_COLOR,\n                position: position.add(new paper.Point((radius * 2 + margin) * i, 0)),\n            });\n            return circle;\n        });\n        const xmax = this.circles[this.circles.length - 1].bounds.right + padding;\n        const ymax = height;\n        this.camera = new Camera(this.view, xmax, ymax);\n        return new IdleAnimation(BubbleSortDrawer.INIT_IDLE);\n    }\n\n    private handleComp(step: Step): Animation {\n        const { pos } = step.payload;\n        this.circles[pos].changeColor(BubbleSortDrawer.HIGHLIGHTED_COLOR);\n        this.circles[pos + 1].changeColor(BubbleSortDrawer.HIGHLIGHTED_COLOR);\n        return new CompositeAnimation(\n            this.camera.ensureVisible(\n                BubbleSortDrawer.SLIDE_DURATION,\n                this.circles[pos],\n                this.circles[pos + 1],\n            ),\n            new IdleAnimation(BubbleSortDrawer.COMP_IDLE),\n        );\n    }\n\n    private handleSwap(step: Step): Animation {\n        const { pos, end, lastSwapped } = step.payload;\n        const left = this.circles[pos];\n        const right = this.circles[pos + 1];\n        this.circles[pos] = right;\n        this.circles[pos + 1] = left;\n        return new CompositeAnimation(\n            new SwapAnimation(BubbleSortDrawer.SWAP_DURATION, left, right),\n            new IdleAnimation(BubbleSortDrawer.SWAP_IDLE / 2),\n            new ImmediateAnimation(() => {\n                this.circles[pos].changeColor(BubbleSortDrawer.INITIAL_COLOR);\n                this.circles[pos + 1].changeColor(BubbleSortDrawer.INITIAL_COLOR);\n                if (pos + 1 === end) {\n                    this.markFinished(lastSwapped + 1);\n                }\n            }),\n            new IdleAnimation(BubbleSortDrawer.SWAP_IDLE / 2),\n        );\n    }\n\n    private handleNoSwap(step: Step): Animation {\n        const { pos, end, lastSwapped } = step.payload;\n        this.circles[pos].changeColor(BubbleSortDrawer.INITIAL_COLOR);\n        this.circles[pos + 1].changeColor(BubbleSortDrawer.INITIAL_COLOR);\n        if (pos + 1 === end) {\n            this.markFinished(lastSwapped + 1);\n        }\n        return new IdleAnimation(BubbleSortDrawer.NOSWAP_IDLE);\n    }\n\n    private markFinished(from: number) {\n        for (let i = from; i < this.circles.length; ++i) {\n            this.circles[i].changeColor(BubbleSortDrawer.FINISHED_COLOR);\n        }\n    }\n\n    terminate(): void {\n        for (let circle of this.circles) {\n            circle.remove();\n        }\n    }\n}\n","export default {\n    params: [(x: number, y: number) => x <= y],\n    data: Array(8).fill(null).map(() => Math.floor(Math.random() * 100)),\n};\n","/**\n  * Automatically generated with `node ./generate-page.js`\n  * Please do not edit this file directly\n  * Last updated: 2019-12-25T13:47:58.891Z\n  */\n\nimport React from 'react';\n\nimport VisualizationPage from 'components/visualization-page';\nimport BubbleSortWorker from 'workers/sorting/bubble-sort.worker.js';\nimport BubbleSortDrawer from 'visualizers/drawers/sorting/bubble-sort-drawer';\nimport config from 'configs/sorting/bubble-sort-config';\n\nconst BubbleSortPage = () => {\n    return (\n        <VisualizationPage\n            WorkerFactory={BubbleSortWorker}\n            DrawerFactory={BubbleSortDrawer}\n            inputs={config.data}\n        />\n    );\n};\n\nexport default BubbleSortPage;\n    ","require(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.array.reduce\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.regexp.flags\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.math.log2\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\n/*!\n * Paper.js v0.12.4 - The Swiss Army Knife of Vector Graphics Scripting.\n * http://paperjs.org/\n *\n * Copyright (c) 2011 - 2019, Juerg Lehni & Jonathan Puckey\n * http://scratchdisk.com/ & https://puckey.studio/\n *\n * Distributed under the MIT license. See LICENSE file for details.\n *\n * All rights reserved.\n *\n * Date: Sun Dec 15 21:25:00 2019 +0100\n *\n ***\n *\n * Straps.js - Class inheritance library with support for bean-style accessors\n *\n * Copyright (c) 2006 - 2019 Juerg Lehni\n * http://scratchdisk.com/\n *\n * Distributed under the MIT license.\n *\n ***\n *\n * Acorn.js\n * https://marijnhaverbeke.nl/acorn/\n *\n * Acorn is a tiny, fast JavaScript parser written in JavaScript,\n * created by Marijn Haverbeke and released under an MIT license.\n *\n */\nvar paper = function (self, undefined) {\n  self = self || require('./node/self.js');\n  var window = self.window,\n      document = self.document;\n  var Base = new function () {\n    var hidden = /^(statics|enumerable|beans|preserve)$/,\n        array = [],\n        _slice = array.slice,\n        create = Object.create,\n        describe = Object.getOwnPropertyDescriptor,\n        define = Object.defineProperty,\n        forEach = array.forEach || function (iter, bind) {\n      for (var i = 0, l = this.length; i < l; i++) {\n        iter.call(bind, this[i], i, this);\n      }\n    },\n        forIn = function forIn(iter, bind) {\n      for (var i in this) {\n        if (this.hasOwnProperty(i)) iter.call(bind, this[i], i, this);\n      }\n    },\n        set = Object.assign || function (dst) {\n      for (var i = 1, l = arguments.length; i < l; i++) {\n        var src = arguments[i];\n\n        for (var key in src) {\n          if (src.hasOwnProperty(key)) dst[key] = src[key];\n        }\n      }\n\n      return dst;\n    },\n        _each = function each(obj, iter, bind) {\n      if (obj) {\n        var desc = describe(obj, 'length');\n        (desc && typeof desc.value === 'number' ? forEach : forIn).call(obj, iter, bind = bind || obj);\n      }\n\n      return bind;\n    };\n\n    function _inject(dest, src, enumerable, beans, preserve) {\n      var beansNames = {};\n\n      function field(name, val) {\n        val = val || (val = describe(src, name)) && (val.get ? val : val.value);\n        if (typeof val === 'string' && val[0] === '#') val = dest[val.substring(1)] || val;\n        var isFunc = typeof val === 'function',\n            res = val,\n            prev = preserve || isFunc && !val.base ? val && val.get ? name in dest : dest[name] : null,\n            bean;\n\n        if (!preserve || !prev) {\n          if (isFunc && prev) val.base = prev;\n          if (isFunc && beans !== false && (bean = name.match(/^([gs]et|is)(([A-Z])(.*))$/))) beansNames[bean[3].toLowerCase() + bean[4]] = bean[2];\n\n          if (!res || isFunc || !res.get || typeof res.get !== 'function' || !Base.isPlainObject(res)) {\n            res = {\n              value: res,\n              writable: true\n            };\n          }\n\n          if ((describe(dest, name) || {\n            configurable: true\n          }).configurable) {\n            res.configurable = true;\n            res.enumerable = enumerable != null ? enumerable : !bean;\n          }\n\n          define(dest, name, res);\n        }\n      }\n\n      if (src) {\n        for (var name in src) {\n          if (src.hasOwnProperty(name) && !hidden.test(name)) field(name);\n        }\n\n        for (var name in beansNames) {\n          var part = beansNames[name],\n              set = dest['set' + part],\n              get = dest['get' + part] || set && dest['is' + part];\n          if (get && (beans === true || get.length === 0)) field(name, {\n            get: get,\n            set: set\n          });\n        }\n      }\n\n      return dest;\n    }\n\n    function Base() {\n      for (var i = 0, l = arguments.length; i < l; i++) {\n        var src = arguments[i];\n        if (src) set(this, src);\n      }\n\n      return this;\n    }\n\n    return _inject(Base, {\n      inject: function inject(src) {\n        if (src) {\n          var statics = src.statics === true ? src : src.statics,\n              beans = src.beans,\n              preserve = src.preserve;\n          if (statics !== src) _inject(this.prototype, src, src.enumerable, beans, preserve);\n\n          _inject(this, statics, null, beans, preserve);\n        }\n\n        for (var i = 1, l = arguments.length; i < l; i++) {\n          this.inject(arguments[i]);\n        }\n\n        return this;\n      },\n      extend: function extend() {\n        var base = this,\n            ctor,\n            proto;\n\n        for (var i = 0, obj, l = arguments.length; i < l && !(ctor && proto); i++) {\n          obj = arguments[i];\n          ctor = ctor || obj.initialize;\n          proto = proto || obj.prototype;\n        }\n\n        ctor = ctor || function () {\n          base.apply(this, arguments);\n        };\n\n        proto = ctor.prototype = proto || create(this.prototype);\n        define(proto, 'constructor', {\n          value: ctor,\n          writable: true,\n          configurable: true\n        });\n\n        _inject(ctor, this);\n\n        if (arguments.length) this.inject.apply(ctor, arguments);\n        ctor.base = base;\n        return ctor;\n      }\n    }).inject({\n      enumerable: false,\n      initialize: Base,\n      set: Base,\n      inject: function inject() {\n        for (var i = 0, l = arguments.length; i < l; i++) {\n          var src = arguments[i];\n\n          if (src) {\n            _inject(this, src, src.enumerable, src.beans, src.preserve);\n          }\n        }\n\n        return this;\n      },\n      extend: function extend() {\n        var res = create(this);\n        return res.inject.apply(res, arguments);\n      },\n      each: function each(iter, bind) {\n        return _each(this, iter, bind);\n      },\n      clone: function clone() {\n        return new this.constructor(this);\n      },\n      statics: {\n        set: set,\n        each: _each,\n        create: create,\n        define: define,\n        describe: describe,\n        clone: function clone(obj) {\n          return set(new obj.constructor(), obj);\n        },\n        isPlainObject: function isPlainObject(obj) {\n          var ctor = obj != null && obj.constructor;\n          return ctor && (ctor === Object || ctor === Base || ctor.name === 'Object');\n        },\n        pick: function pick(a, b) {\n          return a !== undefined ? a : b;\n        },\n        slice: function slice(list, begin, end) {\n          return _slice.call(list, begin, end);\n        }\n      }\n    });\n  }();\n  if (typeof module !== 'undefined') module.exports = Base;\n  Base.inject({\n    enumerable: false,\n    toString: function toString() {\n      return this._id != null ? (this._class || 'Object') + (this._name ? \" '\" + this._name + \"'\" : ' @' + this._id) : '{ ' + Base.each(this, function (value, key) {\n        if (!/^_/.test(key)) {\n          var type = typeof value;\n          this.push(key + ': ' + (type === 'number' ? Formatter.instance.number(value) : type === 'string' ? \"'\" + value + \"'\" : value));\n        }\n      }, []).join(', ') + ' }';\n    },\n    getClassName: function getClassName() {\n      return this._class || '';\n    },\n    importJSON: function importJSON(json) {\n      return Base.importJSON(json, this);\n    },\n    exportJSON: function exportJSON(options) {\n      return Base.exportJSON(this, options);\n    },\n    toJSON: function toJSON() {\n      return Base.serialize(this);\n    },\n    set: function set(props, exclude) {\n      if (props) Base.filter(this, props, exclude, this._prioritize);\n      return this;\n    }\n  }, {\n    beans: false,\n    statics: {\n      exports: {},\n      extend: function extend() {\n        var res = extend.base.apply(this, arguments),\n            name = res.prototype._class;\n        if (name && !Base.exports[name]) Base.exports[name] = res;\n        return res;\n      },\n      equals: function equals(obj1, obj2) {\n        if (obj1 === obj2) return true;\n        if (obj1 && obj1.equals) return obj1.equals(obj2);\n        if (obj2 && obj2.equals) return obj2.equals(obj1);\n\n        if (obj1 && obj2 && typeof obj1 === 'object' && typeof obj2 === 'object') {\n          if (Array.isArray(obj1) && Array.isArray(obj2)) {\n            var length = obj1.length;\n            if (length !== obj2.length) return false;\n\n            while (length--) {\n              if (!Base.equals(obj1[length], obj2[length])) return false;\n            }\n          } else {\n            var keys = Object.keys(obj1),\n                length = keys.length;\n            if (length !== Object.keys(obj2).length) return false;\n\n            while (length--) {\n              var key = keys[length];\n              if (!(obj2.hasOwnProperty(key) && Base.equals(obj1[key], obj2[key]))) return false;\n            }\n          }\n\n          return true;\n        }\n\n        return false;\n      },\n      read: function read(list, start, options, amount) {\n        if (this === Base) {\n          var value = this.peek(list, start);\n          list.__index++;\n          return value;\n        }\n\n        var proto = this.prototype,\n            readIndex = proto._readIndex,\n            begin = start || readIndex && list.__index || 0,\n            length = list.length,\n            obj = list[begin];\n        amount = amount || length - begin;\n\n        if (obj instanceof this || options && options.readNull && obj == null && amount <= 1) {\n          if (readIndex) list.__index = begin + 1;\n          return obj && options && options.clone ? obj.clone() : obj;\n        }\n\n        obj = Base.create(proto);\n        if (readIndex) obj.__read = true;\n        obj = obj.initialize.apply(obj, begin > 0 || begin + amount < length ? Base.slice(list, begin, begin + amount) : list) || obj;\n\n        if (readIndex) {\n          list.__index = begin + obj.__read;\n          var filtered = obj.__filtered;\n\n          if (filtered) {\n            list.__filtered = filtered;\n            obj.__filtered = undefined;\n          }\n\n          obj.__read = undefined;\n        }\n\n        return obj;\n      },\n      peek: function peek(list, start) {\n        return list[list.__index = start || list.__index || 0];\n      },\n      remain: function remain(list) {\n        return list.length - (list.__index || 0);\n      },\n      readList: function readList(list, start, options, amount) {\n        var res = [],\n            entry,\n            begin = start || 0,\n            end = amount ? begin + amount : list.length;\n\n        for (var i = begin; i < end; i++) {\n          res.push(Array.isArray(entry = list[i]) ? this.read(entry, 0, options) : this.read(list, i, options, 1));\n        }\n\n        return res;\n      },\n      readNamed: function readNamed(list, name, start, options, amount) {\n        var value = this.getNamed(list, name),\n            hasValue = value !== undefined;\n\n        if (hasValue) {\n          var filtered = list.__filtered;\n\n          if (!filtered) {\n            var source = this.getSource(list);\n            filtered = list.__filtered = Base.create(source);\n            filtered.__unfiltered = source;\n          }\n\n          filtered[name] = undefined;\n        }\n\n        return this.read(hasValue ? [value] : list, start, options, amount);\n      },\n      readSupported: function readSupported(list, dest) {\n        var source = this.getSource(list),\n            that = this,\n            read = false;\n\n        if (source) {\n          Object.keys(source).forEach(function (key) {\n            if (key in dest) {\n              var value = that.readNamed(list, key);\n\n              if (value !== undefined) {\n                dest[key] = value;\n              }\n\n              read = true;\n            }\n          });\n        }\n\n        return read;\n      },\n      getSource: function getSource(list) {\n        var source = list.__source;\n\n        if (source === undefined) {\n          var arg = list.length === 1 && list[0];\n          source = list.__source = arg && Base.isPlainObject(arg) ? arg : null;\n        }\n\n        return source;\n      },\n      getNamed: function getNamed(list, name) {\n        var source = this.getSource(list);\n\n        if (source) {\n          return name ? source[name] : list.__filtered || source;\n        }\n      },\n      hasNamed: function hasNamed(list, name) {\n        return !!this.getNamed(list, name);\n      },\n      filter: function filter(dest, source, exclude, prioritize) {\n        var processed;\n\n        function handleKey(key) {\n          if (!(exclude && key in exclude) && !(processed && key in processed)) {\n            var value = source[key];\n            if (value !== undefined) dest[key] = value;\n          }\n        }\n\n        if (prioritize) {\n          var keys = {};\n\n          for (var i = 0, key, l = prioritize.length; i < l; i++) {\n            if ((key = prioritize[i]) in source) {\n              handleKey(key);\n              keys[key] = true;\n            }\n          }\n\n          processed = keys;\n        }\n\n        Object.keys(source.__unfiltered || source).forEach(handleKey);\n        return dest;\n      },\n      isPlainValue: function isPlainValue(obj, asString) {\n        return Base.isPlainObject(obj) || Array.isArray(obj) || asString && typeof obj === 'string';\n      },\n      serialize: function serialize(obj, options, compact, dictionary) {\n        options = options || {};\n        var isRoot = !dictionary,\n            res;\n\n        if (isRoot) {\n          options.formatter = new Formatter(options.precision);\n          dictionary = {\n            length: 0,\n            definitions: {},\n            references: {},\n            add: function add(item, create) {\n              var id = '#' + item._id,\n                  ref = this.references[id];\n\n              if (!ref) {\n                this.length++;\n                var res = create.call(item),\n                    name = item._class;\n                if (name && res[0] !== name) res.unshift(name);\n                this.definitions[id] = res;\n                ref = this.references[id] = [id];\n              }\n\n              return ref;\n            }\n          };\n        }\n\n        if (obj && obj._serialize) {\n          res = obj._serialize(options, dictionary);\n          var name = obj._class;\n\n          if (name && !obj._compactSerialize && (isRoot || !compact) && res[0] !== name) {\n            res.unshift(name);\n          }\n        } else if (Array.isArray(obj)) {\n          res = [];\n\n          for (var i = 0, l = obj.length; i < l; i++) {\n            res[i] = Base.serialize(obj[i], options, compact, dictionary);\n          }\n        } else if (Base.isPlainObject(obj)) {\n          res = {};\n          var keys = Object.keys(obj);\n\n          for (var i = 0, l = keys.length; i < l; i++) {\n            var key = keys[i];\n            res[key] = Base.serialize(obj[key], options, compact, dictionary);\n          }\n        } else if (typeof obj === 'number') {\n          res = options.formatter.number(obj, options.precision);\n        } else {\n          res = obj;\n        }\n\n        return isRoot && dictionary.length > 0 ? [['dictionary', dictionary.definitions], res] : res;\n      },\n      deserialize: function deserialize(json, create, _data, _setDictionary, _isRoot) {\n        var res = json,\n            isFirst = !_data,\n            hasDictionary = isFirst && json && json.length && json[0][0] === 'dictionary';\n        _data = _data || {};\n\n        if (Array.isArray(json)) {\n          var type = json[0],\n              isDictionary = type === 'dictionary';\n\n          if (json.length == 1 && /^#/.test(type)) {\n            return _data.dictionary[type];\n          }\n\n          type = Base.exports[type];\n          res = [];\n\n          for (var i = type ? 1 : 0, l = json.length; i < l; i++) {\n            res.push(Base.deserialize(json[i], create, _data, isDictionary, hasDictionary));\n          }\n\n          if (type) {\n            var args = res;\n\n            if (create) {\n              res = create(type, args, isFirst || _isRoot);\n            } else {\n              res = new type(args);\n            }\n          }\n        } else if (Base.isPlainObject(json)) {\n          res = {};\n          if (_setDictionary) _data.dictionary = res;\n\n          for (var key in json) {\n            res[key] = Base.deserialize(json[key], create, _data);\n          }\n        }\n\n        return hasDictionary ? res[1] : res;\n      },\n      exportJSON: function exportJSON(obj, options) {\n        var json = Base.serialize(obj, options);\n        return options && options.asString == false ? json : JSON.stringify(json);\n      },\n      importJSON: function importJSON(json, target) {\n        return Base.deserialize(typeof json === 'string' ? JSON.parse(json) : json, function (ctor, args, isRoot) {\n          var useTarget = isRoot && target && target.constructor === ctor,\n              obj = useTarget ? target : Base.create(ctor.prototype);\n\n          if (args.length === 1 && obj instanceof Item && (useTarget || !(obj instanceof Layer))) {\n            var arg = args[0];\n\n            if (Base.isPlainObject(arg)) {\n              arg.insert = false;\n\n              if (useTarget) {\n                args = args.concat([{\n                  insert: true\n                }]);\n              }\n            }\n          }\n\n          (useTarget ? obj.set : ctor).apply(obj, args);\n          if (useTarget) target = null;\n          return obj;\n        });\n      },\n      push: function push(list, items) {\n        var itemsLength = items.length;\n\n        if (itemsLength < 4096) {\n          list.push.apply(list, items);\n        } else {\n          var startLength = list.length;\n          list.length += itemsLength;\n\n          for (var i = 0; i < itemsLength; i++) {\n            list[startLength + i] = items[i];\n          }\n        }\n\n        return list;\n      },\n      splice: function splice(list, items, index, remove) {\n        var amount = items && items.length,\n            append = index === undefined;\n        index = append ? list.length : index;\n        if (index > list.length) index = list.length;\n\n        for (var i = 0; i < amount; i++) {\n          items[i]._index = index + i;\n        }\n\n        if (append) {\n          Base.push(list, items);\n          return [];\n        } else {\n          var args = [index, remove];\n          if (items) Base.push(args, items);\n          var removed = list.splice.apply(list, args);\n\n          for (var i = 0, l = removed.length; i < l; i++) {\n            removed[i]._index = undefined;\n          }\n\n          for (var i = index + amount, l = list.length; i < l; i++) {\n            list[i]._index = i;\n          }\n\n          return removed;\n        }\n      },\n      capitalize: function capitalize(str) {\n        return str.replace(/\\b[a-z]/g, function (match) {\n          return match.toUpperCase();\n        });\n      },\n      camelize: function camelize(str) {\n        return str.replace(/-(.)/g, function (match, chr) {\n          return chr.toUpperCase();\n        });\n      },\n      hyphenate: function hyphenate(str) {\n        return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n      }\n    }\n  });\n  var Emitter = {\n    on: function on(type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.on(key, value);\n        }, this);\n      } else {\n        var types = this._eventTypes,\n            entry = types && types[type],\n            handlers = this._callbacks = this._callbacks || {};\n        handlers = handlers[type] = handlers[type] || [];\n\n        if (handlers.indexOf(func) === -1) {\n          handlers.push(func);\n          if (entry && entry.install && handlers.length === 1) entry.install.call(this, type);\n        }\n      }\n\n      return this;\n    },\n    off: function off(type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.off(key, value);\n        }, this);\n        return;\n      }\n\n      var types = this._eventTypes,\n          entry = types && types[type],\n          handlers = this._callbacks && this._callbacks[type],\n          index;\n\n      if (handlers) {\n        if (!func || (index = handlers.indexOf(func)) !== -1 && handlers.length === 1) {\n          if (entry && entry.uninstall) entry.uninstall.call(this, type);\n          delete this._callbacks[type];\n        } else if (index !== -1) {\n          handlers.splice(index, 1);\n        }\n      }\n\n      return this;\n    },\n    once: function once(type, func) {\n      return this.on(type, function handler() {\n        func.apply(this, arguments);\n        this.off(type, handler);\n      });\n    },\n    emit: function emit(type, event) {\n      var handlers = this._callbacks && this._callbacks[type];\n      if (!handlers) return false;\n      var args = Base.slice(arguments, 1),\n          setTarget = event && event.target && !event.currentTarget;\n      handlers = handlers.slice();\n      if (setTarget) event.currentTarget = this;\n\n      for (var i = 0, l = handlers.length; i < l; i++) {\n        if (handlers[i].apply(this, args) == false) {\n          if (event && event.stop) event.stop();\n          break;\n        }\n      }\n\n      if (setTarget) delete event.currentTarget;\n      return true;\n    },\n    responds: function responds(type) {\n      return !!(this._callbacks && this._callbacks[type]);\n    },\n    attach: '#on',\n    detach: '#off',\n    fire: '#emit',\n    _installEvents: function _installEvents(install) {\n      var types = this._eventTypes,\n          handlers = this._callbacks,\n          key = install ? 'install' : 'uninstall';\n\n      if (types) {\n        for (var type in handlers) {\n          if (handlers[type].length > 0) {\n            var entry = types[type],\n                func = entry && entry[key];\n            if (func) func.call(this, type);\n          }\n        }\n      }\n    },\n    statics: {\n      inject: function inject(src) {\n        var events = src._events;\n\n        if (events) {\n          var types = {};\n          Base.each(events, function (entry, key) {\n            var isString = typeof entry === 'string',\n                name = isString ? entry : key,\n                part = Base.capitalize(name),\n                type = name.substring(2).toLowerCase();\n            types[type] = isString ? {} : entry;\n            name = '_' + name;\n\n            src['get' + part] = function () {\n              return this[name];\n            };\n\n            src['set' + part] = function (func) {\n              var prev = this[name];\n              if (prev) this.off(type, prev);\n              if (func) this.on(type, func);\n              this[name] = func;\n            };\n          });\n          src._eventTypes = types;\n        }\n\n        return inject.base.apply(this, arguments);\n      }\n    }\n  };\n  var PaperScope = Base.extend({\n    _class: 'PaperScope',\n    initialize: function PaperScope() {\n      paper = this;\n      this.settings = new Base({\n        applyMatrix: true,\n        insertItems: true,\n        handleSize: 4,\n        hitTolerance: 0\n      });\n      this.project = null;\n      this.projects = [];\n      this.tools = [];\n      this._id = PaperScope._id++;\n      PaperScope._scopes[this._id] = this;\n      var proto = PaperScope.prototype;\n\n      if (!this.support) {\n        var ctx = CanvasProvider.getContext(1, 1) || {};\n        proto.support = {\n          nativeDash: 'setLineDash' in ctx || 'mozDash' in ctx,\n          nativeBlendModes: BlendMode.nativeModes\n        };\n        CanvasProvider.release(ctx);\n      }\n\n      if (!this.agent) {\n        var user = self.navigator.userAgent.toLowerCase(),\n            os = (/(darwin|win|mac|linux|freebsd|sunos)/.exec(user) || [])[0],\n            platform = os === 'darwin' ? 'mac' : os,\n            agent = proto.agent = proto.browser = {\n          platform: platform\n        };\n        if (platform) agent[platform] = true;\n        user.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\\/?\\s*([.\\d]+)(?:.*version\\/([.\\d]+))?(?:.*rv\\:v?([.\\d]+))?/g, function (match, n, v1, v2, rv) {\n          if (!agent.chrome) {\n            var v = n === 'opera' ? v2 : /^(node|trident)$/.test(n) ? rv : v1;\n            agent.version = v;\n            agent.versionNumber = parseFloat(v);\n            n = {\n              trident: 'msie',\n              jsdom: 'node'\n            }[n] || n;\n            agent.name = n;\n            agent[n] = true;\n          }\n        });\n        if (agent.chrome) delete agent.webkit;\n        if (agent.atom) delete agent.chrome;\n      }\n    },\n    version: \"0.12.4\",\n    getView: function getView() {\n      var project = this.project;\n      return project && project._view;\n    },\n    getPaper: function getPaper() {\n      return this;\n    },\n    execute: function execute(code, options) {},\n    install: function install(scope) {\n      var that = this;\n      Base.each(['project', 'view', 'tool'], function (key) {\n        Base.define(scope, key, {\n          configurable: true,\n          get: function get() {\n            return that[key];\n          }\n        });\n      });\n\n      for (var key in this) {\n        if (!/^_/.test(key) && this[key]) scope[key] = this[key];\n      }\n    },\n    setup: function setup(element) {\n      paper = this;\n      this.project = new Project(element);\n      return this;\n    },\n    createCanvas: function createCanvas(width, height) {\n      return CanvasProvider.getCanvas(width, height);\n    },\n    activate: function activate() {\n      paper = this;\n    },\n    clear: function clear() {\n      var projects = this.projects,\n          tools = this.tools;\n\n      for (var i = projects.length - 1; i >= 0; i--) {\n        projects[i].remove();\n      }\n\n      for (var i = tools.length - 1; i >= 0; i--) {\n        tools[i].remove();\n      }\n    },\n    remove: function remove() {\n      this.clear();\n      delete PaperScope._scopes[this._id];\n    },\n    statics: new function () {\n      function handleAttribute(name) {\n        name += 'Attribute';\n        return function (el, attr) {\n          return el[name](attr) || el[name]('data-paper-' + attr);\n        };\n      }\n\n      return {\n        _scopes: {},\n        _id: 0,\n        get: function get(id) {\n          return this._scopes[id] || null;\n        },\n        getAttribute: handleAttribute('get'),\n        hasAttribute: handleAttribute('has')\n      };\n    }()\n  });\n  var PaperScopeItem = Base.extend(Emitter, {\n    initialize: function initialize(activate) {\n      this._scope = paper;\n      this._index = this._scope[this._list].push(this) - 1;\n      if (activate || !this._scope[this._reference]) this.activate();\n    },\n    activate: function activate() {\n      if (!this._scope) return false;\n      var prev = this._scope[this._reference];\n      if (prev && prev !== this) prev.emit('deactivate');\n      this._scope[this._reference] = this;\n      this.emit('activate', prev);\n      return true;\n    },\n    isActive: function isActive() {\n      return this._scope[this._reference] === this;\n    },\n    remove: function remove() {\n      if (this._index == null) return false;\n      Base.splice(this._scope[this._list], null, this._index, 1);\n      if (this._scope[this._reference] == this) this._scope[this._reference] = null;\n      this._scope = null;\n      return true;\n    },\n    getView: function getView() {\n      return this._scope.getView();\n    }\n  });\n  var CollisionDetection = {\n    findItemBoundsCollisions: function findItemBoundsCollisions(items1, items2, tolerance) {\n      function getBounds(items) {\n        var bounds = new Array(items.length);\n\n        for (var i = 0; i < items.length; i++) {\n          var rect = items[i].getBounds();\n          bounds[i] = [rect.left, rect.top, rect.right, rect.bottom];\n        }\n\n        return bounds;\n      }\n\n      var bounds1 = getBounds(items1),\n          bounds2 = !items2 || items2 === items1 ? bounds1 : getBounds(items2);\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findCurveBoundsCollisions: function findCurveBoundsCollisions(curves1, curves2, tolerance, bothAxis) {\n      function getBounds(curves) {\n        var min = Math.min,\n            max = Math.max,\n            bounds = new Array(curves.length);\n\n        for (var i = 0; i < curves.length; i++) {\n          var v = curves[i];\n          bounds[i] = [min(v[0], v[2], v[4], v[6]), min(v[1], v[3], v[5], v[7]), max(v[0], v[2], v[4], v[6]), max(v[1], v[3], v[5], v[7])];\n        }\n\n        return bounds;\n      }\n\n      var bounds1 = getBounds(curves1),\n          bounds2 = !curves2 || curves2 === curves1 ? bounds1 : getBounds(curves2);\n\n      if (bothAxis) {\n        var hor = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, false, true),\n            ver = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, true, true),\n            list = [];\n\n        for (var i = 0, l = hor.length; i < l; i++) {\n          list[i] = {\n            hor: hor[i],\n            ver: ver[i]\n          };\n        }\n\n        return list;\n      }\n\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findBoundsCollisions: function findBoundsCollisions(boundsA, boundsB, tolerance, sweepVertical, onlySweepAxisCollisions) {\n      var self = !boundsB || boundsA === boundsB,\n          allBounds = self ? boundsA : boundsA.concat(boundsB),\n          lengthA = boundsA.length,\n          lengthAll = allBounds.length;\n\n      function binarySearch(indices, coord, value) {\n        var lo = 0,\n            hi = indices.length;\n\n        while (lo < hi) {\n          var mid = hi + lo >>> 1;\n\n          if (allBounds[indices[mid]][coord] < value) {\n            lo = mid + 1;\n          } else {\n            hi = mid;\n          }\n        }\n\n        return lo - 1;\n      }\n\n      var pri0 = sweepVertical ? 1 : 0,\n          pri1 = pri0 + 2,\n          sec0 = sweepVertical ? 0 : 1,\n          sec1 = sec0 + 2;\n      var allIndicesByPri0 = new Array(lengthAll);\n\n      for (var i = 0; i < lengthAll; i++) {\n        allIndicesByPri0[i] = i;\n      }\n\n      allIndicesByPri0.sort(function (i1, i2) {\n        return allBounds[i1][pri0] - allBounds[i2][pri0];\n      });\n      var activeIndicesByPri1 = [],\n          allCollisions = new Array(lengthA);\n\n      for (var i = 0; i < lengthAll; i++) {\n        var curIndex = allIndicesByPri0[i],\n            curBounds = allBounds[curIndex],\n            origIndex = self ? curIndex : curIndex - lengthA,\n            isCurrentA = curIndex < lengthA,\n            isCurrentB = self || !isCurrentA,\n            curCollisions = isCurrentA ? [] : null;\n\n        if (activeIndicesByPri1.length) {\n          var pruneCount = binarySearch(activeIndicesByPri1, pri1, curBounds[pri0] - tolerance) + 1;\n          activeIndicesByPri1.splice(0, pruneCount);\n\n          if (self && onlySweepAxisCollisions) {\n            curCollisions = curCollisions.concat(activeIndicesByPri1);\n\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j];\n              allCollisions[activeIndex].push(origIndex);\n            }\n          } else {\n            var curSec1 = curBounds[sec1],\n                curSec0 = curBounds[sec0];\n\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j],\n                  activeBounds = allBounds[activeIndex],\n                  isActiveA = activeIndex < lengthA,\n                  isActiveB = self || activeIndex >= lengthA;\n\n              if (onlySweepAxisCollisions || (isCurrentA && isActiveB || isCurrentB && isActiveA) && curSec1 >= activeBounds[sec0] - tolerance && curSec0 <= activeBounds[sec1] + tolerance) {\n                if (isCurrentA && isActiveB) {\n                  curCollisions.push(self ? activeIndex : activeIndex - lengthA);\n                }\n\n                if (isCurrentB && isActiveA) {\n                  allCollisions[activeIndex].push(origIndex);\n                }\n              }\n            }\n          }\n        }\n\n        if (isCurrentA) {\n          if (boundsA === boundsB) {\n            curCollisions.push(curIndex);\n          }\n\n          allCollisions[curIndex] = curCollisions;\n        }\n\n        if (activeIndicesByPri1.length) {\n          var curPri1 = curBounds[pri1],\n              index = binarySearch(activeIndicesByPri1, pri1, curPri1);\n          activeIndicesByPri1.splice(index + 1, 0, curIndex);\n        } else {\n          activeIndicesByPri1.push(curIndex);\n        }\n      }\n\n      for (var i = 0; i < allCollisions.length; i++) {\n        var collisions = allCollisions[i];\n\n        if (collisions) {\n          collisions.sort(function (i1, i2) {\n            return i1 - i2;\n          });\n        }\n      }\n\n      return allCollisions;\n    }\n  };\n  var Formatter = Base.extend({\n    initialize: function initialize(precision) {\n      this.precision = Base.pick(precision, 5);\n      this.multiplier = Math.pow(10, this.precision);\n    },\n    number: function number(val) {\n      return this.precision < 16 ? Math.round(val * this.multiplier) / this.multiplier : val;\n    },\n    pair: function pair(val1, val2, separator) {\n      return this.number(val1) + (separator || ',') + this.number(val2);\n    },\n    point: function point(val, separator) {\n      return this.number(val.x) + (separator || ',') + this.number(val.y);\n    },\n    size: function size(val, separator) {\n      return this.number(val.width) + (separator || ',') + this.number(val.height);\n    },\n    rectangle: function rectangle(val, separator) {\n      return this.point(val, separator) + (separator || ',') + this.size(val, separator);\n    }\n  });\n  Formatter.instance = new Formatter();\n  var Numerical = new function () {\n    var abscissas = [[0.5773502691896257645091488], [0, 0.7745966692414833770358531], [0.3399810435848562648026658, 0.8611363115940525752239465], [0, 0.5384693101056830910363144, 0.9061798459386639927976269], [0.2386191860831969086305017, 0.6612093864662645136613996, 0.9324695142031520278123016], [0, 0.4058451513773971669066064, 0.7415311855993944398638648, 0.9491079123427585245261897], [0.1834346424956498049394761, 0.5255324099163289858177390, 0.7966664774136267395915539, 0.9602898564975362316835609], [0, 0.3242534234038089290385380, 0.6133714327005903973087020, 0.8360311073266357942994298, 0.9681602395076260898355762], [0.1488743389816312108848260, 0.4333953941292471907992659, 0.6794095682990244062343274, 0.8650633666889845107320967, 0.9739065285171717200779640], [0, 0.2695431559523449723315320, 0.5190961292068118159257257, 0.7301520055740493240934163, 0.8870625997680952990751578, 0.9782286581460569928039380], [0.1252334085114689154724414, 0.3678314989981801937526915, 0.5873179542866174472967024, 0.7699026741943046870368938, 0.9041172563704748566784659, 0.9815606342467192506905491], [0, 0.2304583159551347940655281, 0.4484927510364468528779129, 0.6423493394403402206439846, 0.8015780907333099127942065, 0.9175983992229779652065478, 0.9841830547185881494728294], [0.1080549487073436620662447, 0.3191123689278897604356718, 0.5152486363581540919652907, 0.6872929048116854701480198, 0.8272013150697649931897947, 0.9284348836635735173363911, 0.9862838086968123388415973], [0, 0.2011940939974345223006283, 0.3941513470775633698972074, 0.5709721726085388475372267, 0.7244177313601700474161861, 0.8482065834104272162006483, 0.9372733924007059043077589, 0.9879925180204854284895657], [0.0950125098376374401853193, 0.2816035507792589132304605, 0.4580167776572273863424194, 0.6178762444026437484466718, 0.7554044083550030338951012, 0.8656312023878317438804679, 0.9445750230732325760779884, 0.9894009349916499325961542]];\n    var weights = [[1], [0.8888888888888888888888889, 0.5555555555555555555555556], [0.6521451548625461426269361, 0.3478548451374538573730639], [0.5688888888888888888888889, 0.4786286704993664680412915, 0.2369268850561890875142640], [0.4679139345726910473898703, 0.3607615730481386075698335, 0.1713244923791703450402961], [0.4179591836734693877551020, 0.3818300505051189449503698, 0.2797053914892766679014678, 0.1294849661688696932706114], [0.3626837833783619829651504, 0.3137066458778872873379622, 0.2223810344533744705443560, 0.1012285362903762591525314], [0.3302393550012597631645251, 0.3123470770400028400686304, 0.2606106964029354623187429, 0.1806481606948574040584720, 0.0812743883615744119718922], [0.2955242247147528701738930, 0.2692667193099963550912269, 0.2190863625159820439955349, 0.1494513491505805931457763, 0.0666713443086881375935688], [0.2729250867779006307144835, 0.2628045445102466621806889, 0.2331937645919904799185237, 0.1862902109277342514260976, 0.1255803694649046246346943, 0.0556685671161736664827537], [0.2491470458134027850005624, 0.2334925365383548087608499, 0.2031674267230659217490645, 0.1600783285433462263346525, 0.1069393259953184309602547, 0.0471753363865118271946160], [0.2325515532308739101945895, 0.2262831802628972384120902, 0.2078160475368885023125232, 0.1781459807619457382800467, 0.1388735102197872384636018, 0.0921214998377284479144218, 0.0404840047653158795200216], [0.2152638534631577901958764, 0.2051984637212956039659241, 0.1855383974779378137417166, 0.1572031671581935345696019, 0.1215185706879031846894148, 0.0801580871597602098056333, 0.0351194603317518630318329], [0.2025782419255612728806202, 0.1984314853271115764561183, 0.1861610000155622110268006, 0.1662692058169939335532009, 0.1395706779261543144478048, 0.1071592204671719350118695, 0.0703660474881081247092674, 0.0307532419961172683546284], [0.1894506104550684962853967, 0.1826034150449235888667637, 0.1691565193950025381893121, 0.1495959888165767320815017, 0.1246289712555338720524763, 0.0951585116824927848099251, 0.0622535239386478928628438, 0.0271524594117540948517806]];\n\n    var abs = Math.abs,\n        sqrt = Math.sqrt,\n        pow = Math.pow,\n        log2 = Math.log2 || function (x) {\n      return Math.log(x) * Math.LOG2E;\n    },\n        EPSILON = 1e-12,\n        MACHINE_EPSILON = 1.12e-16;\n\n    function clamp(value, min, max) {\n      return value < min ? min : value > max ? max : value;\n    }\n\n    function getDiscriminant(a, b, c) {\n      function split(v) {\n        var x = v * 134217729,\n            y = v - x,\n            hi = y + x,\n            lo = v - hi;\n        return [hi, lo];\n      }\n\n      var D = b * b - a * c,\n          E = b * b + a * c;\n\n      if (abs(D) * 3 < E) {\n        var ad = split(a),\n            bd = split(b),\n            cd = split(c),\n            p = b * b,\n            dp = bd[0] * bd[0] - p + 2 * bd[0] * bd[1] + bd[1] * bd[1],\n            q = a * c,\n            dq = ad[0] * cd[0] - q + ad[0] * cd[1] + ad[1] * cd[0] + ad[1] * cd[1];\n        D = p - q + (dp - dq);\n      }\n\n      return D;\n    }\n\n    function getNormalizationFactor() {\n      var norm = Math.max.apply(Math, arguments);\n      return norm && (norm < 1e-8 || norm > 1e8) ? pow(2, -Math.round(log2(norm))) : 0;\n    }\n\n    return {\n      EPSILON: EPSILON,\n      MACHINE_EPSILON: MACHINE_EPSILON,\n      CURVETIME_EPSILON: 1e-8,\n      GEOMETRIC_EPSILON: 1e-7,\n      TRIGONOMETRIC_EPSILON: 1e-8,\n      KAPPA: 4 * (sqrt(2) - 1) / 3,\n      isZero: function isZero(val) {\n        return val >= -EPSILON && val <= EPSILON;\n      },\n      isMachineZero: function isMachineZero(val) {\n        return val >= -MACHINE_EPSILON && val <= MACHINE_EPSILON;\n      },\n      clamp: clamp,\n      integrate: function integrate(f, a, b, n) {\n        var x = abscissas[n - 2],\n            w = weights[n - 2],\n            A = (b - a) * 0.5,\n            B = A + a,\n            i = 0,\n            m = n + 1 >> 1,\n            sum = n & 1 ? w[i++] * f(B) : 0;\n\n        while (i < m) {\n          var Ax = A * x[i];\n          sum += w[i++] * (f(B + Ax) + f(B - Ax));\n        }\n\n        return A * sum;\n      },\n      findRoot: function findRoot(f, df, x, a, b, n, tolerance) {\n        for (var i = 0; i < n; i++) {\n          var fx = f(x),\n              dx = fx / df(x),\n              nx = x - dx;\n\n          if (abs(dx) < tolerance) {\n            x = nx;\n            break;\n          }\n\n          if (fx > 0) {\n            b = x;\n            x = nx <= a ? (a + b) * 0.5 : nx;\n          } else {\n            a = x;\n            x = nx >= b ? (a + b) * 0.5 : nx;\n          }\n        }\n\n        return clamp(x, a, b);\n      },\n      solveQuadratic: function solveQuadratic(a, b, c, roots, min, max) {\n        var x1,\n            x2 = Infinity;\n\n        if (abs(a) < EPSILON) {\n          if (abs(b) < EPSILON) return abs(c) < EPSILON ? -1 : 0;\n          x1 = -c / b;\n        } else {\n          b *= -0.5;\n          var D = getDiscriminant(a, b, c);\n\n          if (D && abs(D) < MACHINE_EPSILON) {\n            var f = getNormalizationFactor(abs(a), abs(b), abs(c));\n\n            if (f) {\n              a *= f;\n              b *= f;\n              c *= f;\n              D = getDiscriminant(a, b, c);\n            }\n          }\n\n          if (D >= -MACHINE_EPSILON) {\n            var Q = D < 0 ? 0 : sqrt(D),\n                R = b + (b < 0 ? -Q : Q);\n\n            if (R === 0) {\n              x1 = c / a;\n              x2 = -x1;\n            } else {\n              x1 = R / a;\n              x2 = c / R;\n            }\n          }\n        }\n\n        var count = 0,\n            boundless = min == null,\n            minB = min - EPSILON,\n            maxB = max + EPSILON;\n        if (isFinite(x1) && (boundless || x1 > minB && x1 < maxB)) roots[count++] = boundless ? x1 : clamp(x1, min, max);\n        if (x2 !== x1 && isFinite(x2) && (boundless || x2 > minB && x2 < maxB)) roots[count++] = boundless ? x2 : clamp(x2, min, max);\n        return count;\n      },\n      solveCubic: function solveCubic(a, b, c, d, roots, min, max) {\n        var f = getNormalizationFactor(abs(a), abs(b), abs(c), abs(d)),\n            x,\n            b1,\n            c2,\n            qd,\n            q;\n\n        if (f) {\n          a *= f;\n          b *= f;\n          c *= f;\n          d *= f;\n        }\n\n        function evaluate(x0) {\n          x = x0;\n          var tmp = a * x;\n          b1 = tmp + b;\n          c2 = b1 * x + c;\n          qd = (tmp + b1) * x + c2;\n          q = c2 * x + d;\n        }\n\n        if (abs(a) < EPSILON) {\n          a = b;\n          b1 = c;\n          c2 = d;\n          x = Infinity;\n        } else if (abs(d) < EPSILON) {\n          b1 = b;\n          c2 = c;\n          x = 0;\n        } else {\n          evaluate(-(b / a) / 3);\n          var t = q / a,\n              r = pow(abs(t), 1 / 3),\n              s = t < 0 ? -1 : 1,\n              td = -qd / a,\n              rd = td > 0 ? 1.324717957244746 * Math.max(r, sqrt(td)) : r,\n              x0 = x - s * rd;\n\n          if (x0 !== x) {\n            do {\n              evaluate(x0);\n              x0 = qd === 0 ? x : x - q / qd / (1 + MACHINE_EPSILON);\n            } while (s * x0 > s * x);\n\n            if (abs(a) * x * x > abs(d / x)) {\n              c2 = -d / x;\n              b1 = (c2 - c) / x;\n            }\n          }\n        }\n\n        var count = Numerical.solveQuadratic(a, b1, c2, roots, min, max),\n            boundless = min == null;\n        if (isFinite(x) && (count === 0 || count > 0 && x !== roots[0] && x !== roots[1]) && (boundless || x > min - EPSILON && x < max + EPSILON)) roots[count++] = boundless ? x : clamp(x, min, max);\n        return count;\n      }\n    };\n  }();\n  var UID = {\n    _id: 1,\n    _pools: {},\n    get: function get(name) {\n      if (name) {\n        var pool = this._pools[name];\n        if (!pool) pool = this._pools[name] = {\n          _id: 1\n        };\n        return pool._id++;\n      } else {\n        return this._id++;\n      }\n    }\n  };\n  var Point = Base.extend({\n    _class: 'Point',\n    _readIndex: true,\n    initialize: function Point(arg0, arg1) {\n      var type = typeof arg0,\n          reading = this.__read,\n          read = 0;\n\n      if (type === 'number') {\n        var hasY = typeof arg1 === 'number';\n\n        this._set(arg0, hasY ? arg1 : arg0);\n\n        if (reading) read = hasY ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('angle' in obj) {\n          this._set(obj.length || 0, 0);\n\n          this.setAngle(obj.angle || 0);\n        } else {\n          this._set(0, 0);\n\n          read = 0;\n        }\n      }\n\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function _set(x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n    equals: function equals(point) {\n      return this === point || point && (this.x === point.x && this.y === point.y || Array.isArray(point) && this.x === point[0] && this.y === point[1]) || false;\n    },\n    clone: function clone() {\n      return new Point(this.x, this.y);\n    },\n    toString: function toString() {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ' }';\n    },\n    _serialize: function _serialize(options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y)];\n    },\n    getLength: function getLength() {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n    setLength: function setLength(length) {\n      if (this.isZero()) {\n        var angle = this._angle || 0;\n\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      } else {\n        var scale = length / this.getLength();\n        if (Numerical.isZero(scale)) this.getAngle();\n\n        this._set(this.x * scale, this.y * scale);\n      }\n    },\n    getAngle: function getAngle() {\n      return this.getAngleInRadians.apply(this, arguments) * 180 / Math.PI;\n    },\n    setAngle: function setAngle(angle) {\n      this.setAngleInRadians.call(this, angle * Math.PI / 180);\n    },\n    getAngleInDegrees: '#getAngle',\n    setAngleInDegrees: '#setAngle',\n    getAngleInRadians: function getAngleInRadians() {\n      if (!arguments.length) {\n        return this.isZero() ? this._angle || 0 : this._angle = Math.atan2(this.y, this.x);\n      } else {\n        var point = Point.read(arguments),\n            div = this.getLength() * point.getLength();\n\n        if (Numerical.isZero(div)) {\n          return NaN;\n        } else {\n          var a = this.dot(point) / div;\n          return Math.acos(a < -1 ? -1 : a > 1 ? 1 : a);\n        }\n      }\n    },\n    setAngleInRadians: function setAngleInRadians(angle) {\n      this._angle = angle;\n\n      if (!this.isZero()) {\n        var length = this.getLength();\n\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      }\n    },\n    getQuadrant: function getQuadrant() {\n      return this.x >= 0 ? this.y >= 0 ? 1 : 4 : this.y >= 0 ? 2 : 3;\n    }\n  }, {\n    beans: false,\n    getDirectedAngle: function getDirectedAngle() {\n      var point = Point.read(arguments);\n      return Math.atan2(this.cross(point), this.dot(point)) * 180 / Math.PI;\n    },\n    getDistance: function getDistance() {\n      var args = arguments,\n          point = Point.read(args),\n          x = point.x - this.x,\n          y = point.y - this.y,\n          d = x * x + y * y,\n          squared = Base.read(args);\n      return squared ? d : Math.sqrt(d);\n    },\n    normalize: function normalize(length) {\n      if (length === undefined) length = 1;\n      var current = this.getLength(),\n          scale = current !== 0 ? length / current : 0,\n          point = new Point(this.x * scale, this.y * scale);\n      if (scale >= 0) point._angle = this._angle;\n      return point;\n    },\n    rotate: function rotate(angle, center) {\n      if (angle === 0) return this.clone();\n      angle = angle * Math.PI / 180;\n      var point = center ? this.subtract(center) : this,\n          sin = Math.sin(angle),\n          cos = Math.cos(angle);\n      point = new Point(point.x * cos - point.y * sin, point.x * sin + point.y * cos);\n      return center ? point.add(center) : point;\n    },\n    transform: function transform(matrix) {\n      return matrix ? matrix._transformPoint(this) : this;\n    },\n    add: function add() {\n      var point = Point.read(arguments);\n      return new Point(this.x + point.x, this.y + point.y);\n    },\n    subtract: function subtract() {\n      var point = Point.read(arguments);\n      return new Point(this.x - point.x, this.y - point.y);\n    },\n    multiply: function multiply() {\n      var point = Point.read(arguments);\n      return new Point(this.x * point.x, this.y * point.y);\n    },\n    divide: function divide() {\n      var point = Point.read(arguments);\n      return new Point(this.x / point.x, this.y / point.y);\n    },\n    modulo: function modulo() {\n      var point = Point.read(arguments);\n      return new Point(this.x % point.x, this.y % point.y);\n    },\n    negate: function negate() {\n      return new Point(-this.x, -this.y);\n    },\n    isInside: function isInside() {\n      return _Rectangle.read(arguments).contains(this);\n    },\n    isClose: function isClose() {\n      var args = arguments,\n          point = Point.read(args),\n          tolerance = Base.read(args);\n      return this.getDistance(point) <= tolerance;\n    },\n    isCollinear: function isCollinear() {\n      var point = Point.read(arguments);\n      return Point.isCollinear(this.x, this.y, point.x, point.y);\n    },\n    isColinear: '#isCollinear',\n    isOrthogonal: function isOrthogonal() {\n      var point = Point.read(arguments);\n      return Point.isOrthogonal(this.x, this.y, point.x, point.y);\n    },\n    isZero: function isZero() {\n      var isZero = Numerical.isZero;\n      return isZero(this.x) && isZero(this.y);\n    },\n    isNaN: function (_isNaN) {\n      function isNaN() {\n        return _isNaN.apply(this, arguments);\n      }\n\n      isNaN.toString = function () {\n        return _isNaN.toString();\n      };\n\n      return isNaN;\n    }(function () {\n      return isNaN(this.x) || isNaN(this.y);\n    }),\n    isInQuadrant: function isInQuadrant(q) {\n      return this.x * (q > 1 && q < 4 ? -1 : 1) >= 0 && this.y * (q > 2 ? -1 : 1) >= 0;\n    },\n    dot: function dot() {\n      var point = Point.read(arguments);\n      return this.x * point.x + this.y * point.y;\n    },\n    cross: function cross() {\n      var point = Point.read(arguments);\n      return this.x * point.y - this.y * point.x;\n    },\n    project: function project() {\n      var point = Point.read(arguments),\n          scale = point.isZero() ? 0 : this.dot(point) / point.dot(point);\n      return new Point(point.x * scale, point.y * scale);\n    },\n    statics: {\n      min: function min() {\n        var args = arguments,\n            point1 = Point.read(args),\n            point2 = Point.read(args);\n        return new Point(Math.min(point1.x, point2.x), Math.min(point1.y, point2.y));\n      },\n      max: function max() {\n        var args = arguments,\n            point1 = Point.read(args),\n            point2 = Point.read(args);\n        return new Point(Math.max(point1.x, point2.x), Math.max(point1.y, point2.y));\n      },\n      random: function random() {\n        return new Point(Math.random(), Math.random());\n      },\n      isCollinear: function isCollinear(x1, y1, x2, y2) {\n        return Math.abs(x1 * y2 - y1 * x2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      },\n      isOrthogonal: function isOrthogonal(x1, y1, x2, y2) {\n        return Math.abs(x1 * x2 + y1 * y2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n\n    this[key] = function () {\n      return new Point(op(this.x), op(this.y));\n    };\n  }, {}));\n  var LinkedPoint = Point.extend({\n    initialize: function Point(x, y, owner, setter) {\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function _set(x, y, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getX: function getX() {\n      return this._x;\n    },\n    setX: function setX(x) {\n      this._x = x;\n\n      this._owner[this._setter](this);\n    },\n    getY: function getY() {\n      return this._y;\n    },\n    setY: function setY(y) {\n      this._y = y;\n\n      this._owner[this._setter](this);\n    },\n    isSelected: function isSelected() {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function setSelected(selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function _getSelection() {\n      return this._setter === 'setPosition' ? 4 : 0;\n    }\n  });\n  var Size = Base.extend({\n    _class: 'Size',\n    _readIndex: true,\n    initialize: function Size(arg0, arg1) {\n      var type = typeof arg0,\n          reading = this.__read,\n          read = 0;\n\n      if (type === 'number') {\n        var hasHeight = typeof arg1 === 'number';\n\n        this._set(arg0, hasHeight ? arg1 : arg0);\n\n        if (reading) read = hasHeight ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else {\n          this._set(0, 0);\n\n          read = 0;\n        }\n      }\n\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function _set(width, height) {\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    equals: function equals(size) {\n      return size === this || size && (this.width === size.width && this.height === size.height || Array.isArray(size) && this.width === size[0] && this.height === size[1]) || false;\n    },\n    clone: function clone() {\n      return new Size(this.width, this.height);\n    },\n    toString: function toString() {\n      var f = Formatter.instance;\n      return '{ width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function _serialize(options) {\n      var f = options.formatter;\n      return [f.number(this.width), f.number(this.height)];\n    },\n    add: function add() {\n      var size = Size.read(arguments);\n      return new Size(this.width + size.width, this.height + size.height);\n    },\n    subtract: function subtract() {\n      var size = Size.read(arguments);\n      return new Size(this.width - size.width, this.height - size.height);\n    },\n    multiply: function multiply() {\n      var size = Size.read(arguments);\n      return new Size(this.width * size.width, this.height * size.height);\n    },\n    divide: function divide() {\n      var size = Size.read(arguments);\n      return new Size(this.width / size.width, this.height / size.height);\n    },\n    modulo: function modulo() {\n      var size = Size.read(arguments);\n      return new Size(this.width % size.width, this.height % size.height);\n    },\n    negate: function negate() {\n      return new Size(-this.width, -this.height);\n    },\n    isZero: function isZero() {\n      var isZero = Numerical.isZero;\n      return isZero(this.width) && isZero(this.height);\n    },\n    isNaN: function (_isNaN2) {\n      function isNaN() {\n        return _isNaN2.apply(this, arguments);\n      }\n\n      isNaN.toString = function () {\n        return _isNaN2.toString();\n      };\n\n      return isNaN;\n    }(function () {\n      return isNaN(this.width) || isNaN(this.height);\n    }),\n    statics: {\n      min: function min(size1, size2) {\n        return new Size(Math.min(size1.width, size2.width), Math.min(size1.height, size2.height));\n      },\n      max: function max(size1, size2) {\n        return new Size(Math.max(size1.width, size2.width), Math.max(size1.height, size2.height));\n      },\n      random: function random() {\n        return new Size(Math.random(), Math.random());\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n\n    this[key] = function () {\n      return new Size(op(this.width), op(this.height));\n    };\n  }, {}));\n  var LinkedSize = Size.extend({\n    initialize: function Size(width, height, owner, setter) {\n      this._width = width;\n      this._height = height;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function _set(width, height, _dontNotify) {\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getWidth: function getWidth() {\n      return this._width;\n    },\n    setWidth: function setWidth(width) {\n      this._width = width;\n\n      this._owner[this._setter](this);\n    },\n    getHeight: function getHeight() {\n      return this._height;\n    },\n    setHeight: function setHeight(height) {\n      this._height = height;\n\n      this._owner[this._setter](this);\n    }\n  });\n\n  var _Rectangle = Base.extend({\n    _class: 'Rectangle',\n    _readIndex: true,\n    beans: true,\n    initialize: function Rectangle(arg0, arg1, arg2, arg3) {\n      var args = arguments,\n          type = typeof arg0,\n          read;\n\n      if (type === 'number') {\n        this._set(arg0, arg1, arg2, arg3);\n\n        read = 4;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0, 0, 0);\n\n        read = arg0 === null ? 1 : 0;\n      } else if (args.length === 1) {\n        if (Array.isArray(arg0)) {\n          this._set.apply(this, arg0);\n\n          read = 1;\n        } else if (arg0.x !== undefined || arg0.width !== undefined) {\n          this._set(arg0.x || 0, arg0.y || 0, arg0.width || 0, arg0.height || 0);\n\n          read = 1;\n        } else if (arg0.from === undefined && arg0.to === undefined) {\n          this._set(0, 0, 0, 0);\n\n          if (Base.readSupported(args, this)) {\n            read = 1;\n          }\n        }\n      }\n\n      if (read === undefined) {\n        var frm = Point.readNamed(args, 'from'),\n            next = Base.peek(args),\n            x = frm.x,\n            y = frm.y,\n            width,\n            height;\n\n        if (next && next.x !== undefined || Base.hasNamed(args, 'to')) {\n          var to = Point.readNamed(args, 'to');\n          width = to.x - x;\n          height = to.y - y;\n\n          if (width < 0) {\n            x = to.x;\n            width = -width;\n          }\n\n          if (height < 0) {\n            y = to.y;\n            height = -height;\n          }\n        } else {\n          var size = Size.read(args);\n          width = size.width;\n          height = size.height;\n        }\n\n        this._set(x, y, width, height);\n\n        read = args.__index;\n      }\n\n      var filtered = args.__filtered;\n      if (filtered) this.__filtered = filtered;\n      if (this.__read) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function _set(x, y, width, height) {\n      this.x = x;\n      this.y = y;\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    clone: function clone() {\n      return new _Rectangle(this.x, this.y, this.width, this.height);\n    },\n    equals: function equals(rect) {\n      var rt = Base.isPlainValue(rect) ? _Rectangle.read(arguments) : rect;\n      return rt === this || rt && this.x === rt.x && this.y === rt.y && this.width === rt.width && this.height === rt.height || false;\n    },\n    toString: function toString() {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ', width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function _serialize(options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y), f.number(this.width), f.number(this.height)];\n    },\n    getPoint: function getPoint(_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.x, this.y, this, 'setPoint');\n    },\n    setPoint: function setPoint() {\n      var point = Point.read(arguments);\n      this.x = point.x;\n      this.y = point.y;\n    },\n    getSize: function getSize(_dontLink) {\n      var ctor = _dontLink ? Size : LinkedSize;\n      return new ctor(this.width, this.height, this, 'setSize');\n    },\n    _fw: 1,\n    _fh: 1,\n    setSize: function setSize() {\n      var size = Size.read(arguments),\n          sx = this._sx,\n          sy = this._sy,\n          w = size.width,\n          h = size.height;\n\n      if (sx) {\n        this.x += (this.width - w) * sx;\n      }\n\n      if (sy) {\n        this.y += (this.height - h) * sy;\n      }\n\n      this.width = w;\n      this.height = h;\n      this._fw = this._fh = 1;\n    },\n    getLeft: function getLeft() {\n      return this.x;\n    },\n    setLeft: function setLeft(left) {\n      if (!this._fw) {\n        var amount = left - this.x;\n        this.width -= this._sx === 0.5 ? amount * 2 : amount;\n      }\n\n      this.x = left;\n      this._sx = this._fw = 0;\n    },\n    getTop: function getTop() {\n      return this.y;\n    },\n    setTop: function setTop(top) {\n      if (!this._fh) {\n        var amount = top - this.y;\n        this.height -= this._sy === 0.5 ? amount * 2 : amount;\n      }\n\n      this.y = top;\n      this._sy = this._fh = 0;\n    },\n    getRight: function getRight() {\n      return this.x + this.width;\n    },\n    setRight: function setRight(right) {\n      if (!this._fw) {\n        var amount = right - this.x;\n        this.width = this._sx === 0.5 ? amount * 2 : amount;\n      }\n\n      this.x = right - this.width;\n      this._sx = 1;\n      this._fw = 0;\n    },\n    getBottom: function getBottom() {\n      return this.y + this.height;\n    },\n    setBottom: function setBottom(bottom) {\n      if (!this._fh) {\n        var amount = bottom - this.y;\n        this.height = this._sy === 0.5 ? amount * 2 : amount;\n      }\n\n      this.y = bottom - this.height;\n      this._sy = 1;\n      this._fh = 0;\n    },\n    getCenterX: function getCenterX() {\n      return this.x + this.width / 2;\n    },\n    setCenterX: function setCenterX(x) {\n      if (this._fw || this._sx === 0.5) {\n        this.x = x - this.width / 2;\n      } else {\n        if (this._sx) {\n          this.x += (x - this.x) * 2 * this._sx;\n        }\n\n        this.width = (x - this.x) * 2;\n      }\n\n      this._sx = 0.5;\n      this._fw = 0;\n    },\n    getCenterY: function getCenterY() {\n      return this.y + this.height / 2;\n    },\n    setCenterY: function setCenterY(y) {\n      if (this._fh || this._sy === 0.5) {\n        this.y = y - this.height / 2;\n      } else {\n        if (this._sy) {\n          this.y += (y - this.y) * 2 * this._sy;\n        }\n\n        this.height = (y - this.y) * 2;\n      }\n\n      this._sy = 0.5;\n      this._fh = 0;\n    },\n    getCenter: function getCenter(_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.getCenterX(), this.getCenterY(), this, 'setCenter');\n    },\n    setCenter: function setCenter() {\n      var point = Point.read(arguments);\n      this.setCenterX(point.x);\n      this.setCenterY(point.y);\n      return this;\n    },\n    getArea: function getArea() {\n      return this.width * this.height;\n    },\n    isEmpty: function isEmpty() {\n      return this.width === 0 || this.height === 0;\n    },\n    contains: function contains(arg) {\n      return arg && arg.width !== undefined || (Array.isArray(arg) ? arg : arguments).length === 4 ? this._containsRectangle(_Rectangle.read(arguments)) : this._containsPoint(Point.read(arguments));\n    },\n    _containsPoint: function _containsPoint(point) {\n      var x = point.x,\n          y = point.y;\n      return x >= this.x && y >= this.y && x <= this.x + this.width && y <= this.y + this.height;\n    },\n    _containsRectangle: function _containsRectangle(rect) {\n      var x = rect.x,\n          y = rect.y;\n      return x >= this.x && y >= this.y && x + rect.width <= this.x + this.width && y + rect.height <= this.y + this.height;\n    },\n    intersects: function intersects() {\n      var rect = _Rectangle.read(arguments),\n          epsilon = Base.read(arguments) || 0;\n\n      return rect.x + rect.width > this.x - epsilon && rect.y + rect.height > this.y - epsilon && rect.x < this.x + this.width + epsilon && rect.y < this.y + this.height + epsilon;\n    },\n    intersect: function intersect() {\n      var rect = _Rectangle.read(arguments),\n          x1 = Math.max(this.x, rect.x),\n          y1 = Math.max(this.y, rect.y),\n          x2 = Math.min(this.x + this.width, rect.x + rect.width),\n          y2 = Math.min(this.y + this.height, rect.y + rect.height);\n\n      return new _Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    unite: function unite() {\n      var rect = _Rectangle.read(arguments),\n          x1 = Math.min(this.x, rect.x),\n          y1 = Math.min(this.y, rect.y),\n          x2 = Math.max(this.x + this.width, rect.x + rect.width),\n          y2 = Math.max(this.y + this.height, rect.y + rect.height);\n\n      return new _Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    include: function include() {\n      var point = Point.read(arguments);\n      var x1 = Math.min(this.x, point.x),\n          y1 = Math.min(this.y, point.y),\n          x2 = Math.max(this.x + this.width, point.x),\n          y2 = Math.max(this.y + this.height, point.y);\n      return new _Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    expand: function expand() {\n      var amount = Size.read(arguments),\n          hor = amount.width,\n          ver = amount.height;\n      return new _Rectangle(this.x - hor / 2, this.y - ver / 2, this.width + hor, this.height + ver);\n    },\n    scale: function scale(hor, ver) {\n      return this.expand(this.width * hor - this.width, this.height * (ver === undefined ? hor : ver) - this.height);\n    }\n  }, Base.each([['Top', 'Left'], ['Top', 'Right'], ['Bottom', 'Left'], ['Bottom', 'Right'], ['Left', 'Center'], ['Top', 'Center'], ['Right', 'Center'], ['Bottom', 'Center']], function (parts, index) {\n    var part = parts.join(''),\n        xFirst = /^[RL]/.test(part);\n    if (index >= 4) parts[1] += xFirst ? 'Y' : 'X';\n    var x = parts[xFirst ? 0 : 1],\n        y = parts[xFirst ? 1 : 0],\n        getX = 'get' + x,\n        getY = 'get' + y,\n        setX = 'set' + x,\n        setY = 'set' + y,\n        get = 'get' + part,\n        set = 'set' + part;\n\n    this[get] = function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this[getX](), this[getY](), this, set);\n    };\n\n    this[set] = function () {\n      var point = Point.read(arguments);\n      this[setX](point.x);\n      this[setY](point.y);\n    };\n  }, {\n    beans: true\n  }));\n\n  var LinkedRectangle = _Rectangle.extend({\n    initialize: function Rectangle(x, y, width, height, owner, setter) {\n      this._set(x, y, width, height, true);\n\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function _set(x, y, width, height, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    }\n  }, new function () {\n    var proto = _Rectangle.prototype;\n    return Base.each(['x', 'y', 'width', 'height'], function (key) {\n      var part = Base.capitalize(key),\n          internal = '_' + key;\n\n      this['get' + part] = function () {\n        return this[internal];\n      };\n\n      this['set' + part] = function (value) {\n        this[internal] = value;\n        if (!this._dontNotify) this._owner[this._setter](this);\n      };\n    }, Base.each(['Point', 'Size', 'Center', 'Left', 'Top', 'Right', 'Bottom', 'CenterX', 'CenterY', 'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'], function (key) {\n      var name = 'set' + key;\n\n      this[name] = function () {\n        this._dontNotify = true;\n        proto[name].apply(this, arguments);\n        this._dontNotify = false;\n\n        this._owner[this._setter](this);\n      };\n    }, {\n      isSelected: function isSelected() {\n        return !!(this._owner._selection & 2);\n      },\n      setSelected: function setSelected(selected) {\n        var owner = this._owner;\n\n        if (owner._changeSelection) {\n          owner._changeSelection(2, selected);\n        }\n      }\n    }));\n  }());\n\n  var Matrix = Base.extend({\n    _class: 'Matrix',\n    initialize: function Matrix(arg, _dontNotify) {\n      var args = arguments,\n          count = args.length,\n          ok = true;\n\n      if (count >= 6) {\n        this._set.apply(this, args);\n      } else if (count === 1 || count === 2) {\n        if (arg instanceof Matrix) {\n          this._set(arg._a, arg._b, arg._c, arg._d, arg._tx, arg._ty, _dontNotify);\n        } else if (Array.isArray(arg)) {\n          this._set.apply(this, _dontNotify ? arg.concat([_dontNotify]) : arg);\n        } else {\n          ok = false;\n        }\n      } else if (!count) {\n        this.reset();\n      } else {\n        ok = false;\n      }\n\n      if (!ok) {\n        throw new Error('Unsupported matrix parameters');\n      }\n\n      return this;\n    },\n    set: '#initialize',\n    _set: function _set(a, b, c, d, tx, ty, _dontNotify) {\n      this._a = a;\n      this._b = b;\n      this._c = c;\n      this._d = d;\n      this._tx = tx;\n      this._ty = ty;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    _serialize: function _serialize(options, dictionary) {\n      return Base.serialize(this.getValues(), options, true, dictionary);\n    },\n    _changed: function _changed() {\n      var owner = this._owner;\n\n      if (owner) {\n        if (owner._applyMatrix) {\n          owner.transform(null, true);\n        } else {\n          owner._changed(25);\n        }\n      }\n    },\n    clone: function clone() {\n      return new Matrix(this._a, this._b, this._c, this._d, this._tx, this._ty);\n    },\n    equals: function equals(mx) {\n      return mx === this || mx && this._a === mx._a && this._b === mx._b && this._c === mx._c && this._d === mx._d && this._tx === mx._tx && this._ty === mx._ty;\n    },\n    toString: function toString() {\n      var f = Formatter.instance;\n      return '[[' + [f.number(this._a), f.number(this._c), f.number(this._tx)].join(', ') + '], [' + [f.number(this._b), f.number(this._d), f.number(this._ty)].join(', ') + ']]';\n    },\n    reset: function reset(_dontNotify) {\n      this._a = this._d = 1;\n      this._b = this._c = this._tx = this._ty = 0;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    apply: function apply(recursively, _setApplyMatrix) {\n      var owner = this._owner;\n\n      if (owner) {\n        owner.transform(null, Base.pick(recursively, true), _setApplyMatrix);\n        return this.isIdentity();\n      }\n\n      return false;\n    },\n    translate: function translate() {\n      var point = Point.read(arguments),\n          x = point.x,\n          y = point.y;\n      this._tx += x * this._a + y * this._c;\n      this._ty += x * this._b + y * this._d;\n\n      this._changed();\n\n      return this;\n    },\n    scale: function scale() {\n      var args = arguments,\n          scale = Point.read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      if (center) this.translate(center);\n      this._a *= scale.x;\n      this._b *= scale.x;\n      this._c *= scale.y;\n      this._d *= scale.y;\n      if (center) this.translate(center.negate());\n\n      this._changed();\n\n      return this;\n    },\n    rotate: function rotate(angle) {\n      angle *= Math.PI / 180;\n      var center = Point.read(arguments, 1),\n          x = center.x,\n          y = center.y,\n          cos = Math.cos(angle),\n          sin = Math.sin(angle),\n          tx = x - x * cos + y * sin,\n          ty = y - x * sin - y * cos,\n          a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d;\n      this._a = cos * a + sin * c;\n      this._b = cos * b + sin * d;\n      this._c = -sin * a + cos * c;\n      this._d = -sin * b + cos * d;\n      this._tx += tx * a + ty * c;\n      this._ty += tx * b + ty * d;\n\n      this._changed();\n\n      return this;\n    },\n    shear: function shear() {\n      var args = arguments,\n          shear = Point.read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      if (center) this.translate(center);\n      var a = this._a,\n          b = this._b;\n      this._a += shear.y * this._c;\n      this._b += shear.y * this._d;\n      this._c += shear.x * a;\n      this._d += shear.x * b;\n      if (center) this.translate(center.negate());\n\n      this._changed();\n\n      return this;\n    },\n    skew: function skew() {\n      var args = arguments,\n          skew = Point.read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      }),\n          toRadians = Math.PI / 180,\n          shear = new Point(Math.tan(skew.x * toRadians), Math.tan(skew.y * toRadians));\n      return this.shear(shear, center);\n    },\n    append: function append(mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n            b1 = this._b,\n            c1 = this._c,\n            d1 = this._d,\n            a2 = mx._a,\n            b2 = mx._c,\n            c2 = mx._b,\n            d2 = mx._d,\n            tx2 = mx._tx,\n            ty2 = mx._ty;\n        this._a = a2 * a1 + c2 * c1;\n        this._c = b2 * a1 + d2 * c1;\n        this._b = a2 * b1 + c2 * d1;\n        this._d = b2 * b1 + d2 * d1;\n        this._tx += tx2 * a1 + ty2 * c1;\n        this._ty += tx2 * b1 + ty2 * d1;\n        if (!_dontNotify) this._changed();\n      }\n\n      return this;\n    },\n    prepend: function prepend(mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n            b1 = this._b,\n            c1 = this._c,\n            d1 = this._d,\n            tx1 = this._tx,\n            ty1 = this._ty,\n            a2 = mx._a,\n            b2 = mx._c,\n            c2 = mx._b,\n            d2 = mx._d,\n            tx2 = mx._tx,\n            ty2 = mx._ty;\n        this._a = a2 * a1 + b2 * b1;\n        this._c = a2 * c1 + b2 * d1;\n        this._b = c2 * a1 + d2 * b1;\n        this._d = c2 * c1 + d2 * d1;\n        this._tx = a2 * tx1 + b2 * ty1 + tx2;\n        this._ty = c2 * tx1 + d2 * ty1 + ty2;\n        if (!_dontNotify) this._changed();\n      }\n\n      return this;\n    },\n    appended: function appended(mx) {\n      return this.clone().append(mx);\n    },\n    prepended: function prepended(mx) {\n      return this.clone().prepend(mx);\n    },\n    invert: function invert() {\n      var a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d,\n          tx = this._tx,\n          ty = this._ty,\n          det = a * d - b * c,\n          res = null;\n\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        this._a = d / det;\n        this._b = -b / det;\n        this._c = -c / det;\n        this._d = a / det;\n        this._tx = (c * ty - d * tx) / det;\n        this._ty = (b * tx - a * ty) / det;\n        res = this;\n      }\n\n      return res;\n    },\n    inverted: function inverted() {\n      return this.clone().invert();\n    },\n    concatenate: '#append',\n    preConcatenate: '#prepend',\n    chain: '#appended',\n    _shiftless: function _shiftless() {\n      return new Matrix(this._a, this._b, this._c, this._d, 0, 0);\n    },\n    _orNullIfIdentity: function _orNullIfIdentity() {\n      return this.isIdentity() ? null : this;\n    },\n    isIdentity: function isIdentity() {\n      return this._a === 1 && this._b === 0 && this._c === 0 && this._d === 1 && this._tx === 0 && this._ty === 0;\n    },\n    isInvertible: function isInvertible() {\n      var det = this._a * this._d - this._c * this._b;\n      return det && !isNaN(det) && isFinite(this._tx) && isFinite(this._ty);\n    },\n    isSingular: function isSingular() {\n      return !this.isInvertible();\n    },\n    transform: function transform(src, dst, count) {\n      return arguments.length < 3 ? this._transformPoint(Point.read(arguments)) : this._transformCoordinates(src, dst, count);\n    },\n    _transformPoint: function _transformPoint(point, dest, _dontNotify) {\n      var x = point.x,\n          y = point.y;\n      if (!dest) dest = new Point();\n      return dest._set(x * this._a + y * this._c + this._tx, x * this._b + y * this._d + this._ty, _dontNotify);\n    },\n    _transformCoordinates: function _transformCoordinates(src, dst, count) {\n      for (var i = 0, max = 2 * count; i < max; i += 2) {\n        var x = src[i],\n            y = src[i + 1];\n        dst[i] = x * this._a + y * this._c + this._tx;\n        dst[i + 1] = x * this._b + y * this._d + this._ty;\n      }\n\n      return dst;\n    },\n    _transformCorners: function _transformCorners(rect) {\n      var x1 = rect.x,\n          y1 = rect.y,\n          x2 = x1 + rect.width,\n          y2 = y1 + rect.height,\n          coords = [x1, y1, x2, y1, x2, y2, x1, y2];\n      return this._transformCoordinates(coords, coords, 4);\n    },\n    _transformBounds: function _transformBounds(bounds, dest, _dontNotify) {\n      var coords = this._transformCorners(bounds),\n          min = coords.slice(0, 2),\n          max = min.slice();\n\n      for (var i = 2; i < 8; i++) {\n        var val = coords[i],\n            j = i & 1;\n\n        if (val < min[j]) {\n          min[j] = val;\n        } else if (val > max[j]) {\n          max[j] = val;\n        }\n      }\n\n      if (!dest) dest = new _Rectangle();\n      return dest._set(min[0], min[1], max[0] - min[0], max[1] - min[1], _dontNotify);\n    },\n    inverseTransform: function inverseTransform() {\n      return this._inverseTransform(Point.read(arguments));\n    },\n    _inverseTransform: function _inverseTransform(point, dest, _dontNotify) {\n      var a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d,\n          tx = this._tx,\n          ty = this._ty,\n          det = a * d - b * c,\n          res = null;\n\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        var x = point.x - this._tx,\n            y = point.y - this._ty;\n        if (!dest) dest = new Point();\n        res = dest._set((x * d - y * c) / det, (y * a - x * b) / det, _dontNotify);\n      }\n\n      return res;\n    },\n    decompose: function decompose() {\n      var a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d,\n          det = a * d - b * c,\n          sqrt = Math.sqrt,\n          atan2 = Math.atan2,\n          degrees = 180 / Math.PI,\n          rotate,\n          scale,\n          skew;\n\n      if (a !== 0 || b !== 0) {\n        var r = sqrt(a * a + b * b);\n        rotate = Math.acos(a / r) * (b > 0 ? 1 : -1);\n        scale = [r, det / r];\n        skew = [atan2(a * c + b * d, r * r), 0];\n      } else if (c !== 0 || d !== 0) {\n        var s = sqrt(c * c + d * d);\n        rotate = Math.asin(c / s) * (d > 0 ? 1 : -1);\n        scale = [det / s, s];\n        skew = [0, atan2(a * c + b * d, s * s)];\n      } else {\n        rotate = 0;\n        skew = scale = [0, 0];\n      }\n\n      return {\n        translation: this.getTranslation(),\n        rotation: rotate * degrees,\n        scaling: new Point(scale),\n        skewing: new Point(skew[0] * degrees, skew[1] * degrees)\n      };\n    },\n    getValues: function getValues() {\n      return [this._a, this._b, this._c, this._d, this._tx, this._ty];\n    },\n    getTranslation: function getTranslation() {\n      return new Point(this._tx, this._ty);\n    },\n    getScaling: function getScaling() {\n      return this.decompose().scaling;\n    },\n    getRotation: function getRotation() {\n      return this.decompose().rotation;\n    },\n    applyToContext: function applyToContext(ctx) {\n      if (!this.isIdentity()) {\n        ctx.transform(this._a, this._b, this._c, this._d, this._tx, this._ty);\n      }\n    }\n  }, Base.each(['a', 'b', 'c', 'd', 'tx', 'ty'], function (key) {\n    var part = Base.capitalize(key),\n        prop = '_' + key;\n\n    this['get' + part] = function () {\n      return this[prop];\n    };\n\n    this['set' + part] = function (value) {\n      this[prop] = value;\n\n      this._changed();\n    };\n  }, {}));\n  var Line = Base.extend({\n    _class: 'Line',\n    initialize: function Line(arg0, arg1, arg2, arg3, arg4) {\n      var asVector = false;\n\n      if (arguments.length >= 4) {\n        this._px = arg0;\n        this._py = arg1;\n        this._vx = arg2;\n        this._vy = arg3;\n        asVector = arg4;\n      } else {\n        this._px = arg0.x;\n        this._py = arg0.y;\n        this._vx = arg1.x;\n        this._vy = arg1.y;\n        asVector = arg2;\n      }\n\n      if (!asVector) {\n        this._vx -= this._px;\n        this._vy -= this._py;\n      }\n    },\n    getPoint: function getPoint() {\n      return new Point(this._px, this._py);\n    },\n    getVector: function getVector() {\n      return new Point(this._vx, this._vy);\n    },\n    getLength: function getLength() {\n      return this.getVector().getLength();\n    },\n    intersect: function intersect(line, isInfinite) {\n      return Line.intersect(this._px, this._py, this._vx, this._vy, line._px, line._py, line._vx, line._vy, true, isInfinite);\n    },\n    getSide: function getSide(point, isInfinite) {\n      return Line.getSide(this._px, this._py, this._vx, this._vy, point.x, point.y, true, isInfinite);\n    },\n    getDistance: function getDistance(point) {\n      return Math.abs(this.getSignedDistance(point));\n    },\n    getSignedDistance: function getSignedDistance(point) {\n      return Line.getSignedDistance(this._px, this._py, this._vx, this._vy, point.x, point.y, true);\n    },\n    isCollinear: function isCollinear(line) {\n      return Point.isCollinear(this._vx, this._vy, line._vx, line._vy);\n    },\n    isOrthogonal: function isOrthogonal(line) {\n      return Point.isOrthogonal(this._vx, this._vy, line._vx, line._vy);\n    },\n    statics: {\n      intersect: function intersect(p1x, p1y, v1x, v1y, p2x, p2y, v2x, v2y, asVector, isInfinite) {\n        if (!asVector) {\n          v1x -= p1x;\n          v1y -= p1y;\n          v2x -= p2x;\n          v2y -= p2y;\n        }\n\n        var cross = v1x * v2y - v1y * v2x;\n\n        if (!Numerical.isMachineZero(cross)) {\n          var dx = p1x - p2x,\n              dy = p1y - p2y,\n              u1 = (v2x * dy - v2y * dx) / cross,\n              u2 = (v1x * dy - v1y * dx) / cross,\n              epsilon = 1e-12,\n              uMin = -epsilon,\n              uMax = 1 + epsilon;\n\n          if (isInfinite || uMin < u1 && u1 < uMax && uMin < u2 && u2 < uMax) {\n            if (!isInfinite) {\n              u1 = u1 <= 0 ? 0 : u1 >= 1 ? 1 : u1;\n            }\n\n            return new Point(p1x + u1 * v1x, p1y + u1 * v1y);\n          }\n        }\n      },\n      getSide: function getSide(px, py, vx, vy, x, y, asVector, isInfinite) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n\n        var v2x = x - px,\n            v2y = y - py,\n            ccw = v2x * vy - v2y * vx;\n\n        if (!isInfinite && Numerical.isMachineZero(ccw)) {\n          ccw = (v2x * vx + v2x * vx) / (vx * vx + vy * vy);\n          if (ccw >= 0 && ccw <= 1) ccw = 0;\n        }\n\n        return ccw < 0 ? -1 : ccw > 0 ? 1 : 0;\n      },\n      getSignedDistance: function getSignedDistance(px, py, vx, vy, x, y, asVector) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n\n        return vx === 0 ? vy > 0 ? x - px : px - x : vy === 0 ? vx < 0 ? y - py : py - y : ((x - px) * vy - (y - py) * vx) / (vy > vx ? vy * Math.sqrt(1 + vx * vx / (vy * vy)) : vx * Math.sqrt(1 + vy * vy / (vx * vx)));\n      },\n      getDistance: function getDistance(px, py, vx, vy, x, y, asVector) {\n        return Math.abs(Line.getSignedDistance(px, py, vx, vy, x, y, asVector));\n      }\n    }\n  });\n  var Project = PaperScopeItem.extend({\n    _class: 'Project',\n    _list: 'projects',\n    _reference: 'project',\n    _compactSerialize: true,\n    initialize: function Project(element) {\n      PaperScopeItem.call(this, true);\n      this._children = [];\n      this._namedChildren = {};\n      this._activeLayer = null;\n      this._currentStyle = new Style(null, null, this);\n      this._view = View.create(this, element || CanvasProvider.getCanvas(1, 1));\n      this._selectionItems = {};\n      this._selectionCount = 0;\n      this._updateVersion = 0;\n    },\n    _serialize: function _serialize(options, dictionary) {\n      return Base.serialize(this._children, options, true, dictionary);\n    },\n    _changed: function _changed(flags, item) {\n      if (flags & 1) {\n        var view = this._view;\n\n        if (view) {\n          view._needsUpdate = true;\n          if (!view._requested && view._autoUpdate) view.requestUpdate();\n        }\n      }\n\n      var changes = this._changes;\n\n      if (changes && item) {\n        var changesById = this._changesById,\n            id = item._id,\n            entry = changesById[id];\n\n        if (entry) {\n          entry.flags |= flags;\n        } else {\n          changes.push(changesById[id] = {\n            item: item,\n            flags: flags\n          });\n        }\n      }\n    },\n    clear: function clear() {\n      var children = this._children;\n\n      for (var i = children.length - 1; i >= 0; i--) {\n        children[i].remove();\n      }\n    },\n    isEmpty: function isEmpty() {\n      return !this._children.length;\n    },\n    remove: function remove() {\n      if (!remove.base.call(this)) return false;\n      if (this._view) this._view.remove();\n      return true;\n    },\n    getView: function getView() {\n      return this._view;\n    },\n    getCurrentStyle: function getCurrentStyle() {\n      return this._currentStyle;\n    },\n    setCurrentStyle: function setCurrentStyle(style) {\n      this._currentStyle.set(style);\n    },\n    getIndex: function getIndex() {\n      return this._index;\n    },\n    getOptions: function getOptions() {\n      return this._scope.settings;\n    },\n    getLayers: function getLayers() {\n      return this._children;\n    },\n    getActiveLayer: function getActiveLayer() {\n      return this._activeLayer || new Layer({\n        project: this,\n        insert: true\n      });\n    },\n    getSymbolDefinitions: function getSymbolDefinitions() {\n      var definitions = [],\n          ids = {};\n      this.getItems({\n        \"class\": SymbolItem,\n        match: function match(item) {\n          var definition = item._definition,\n              id = definition._id;\n\n          if (!ids[id]) {\n            ids[id] = true;\n            definitions.push(definition);\n          }\n\n          return false;\n        }\n      });\n      return definitions;\n    },\n    getSymbols: 'getSymbolDefinitions',\n    getSelectedItems: function getSelectedItems() {\n      var selectionItems = this._selectionItems,\n          items = [];\n\n      for (var id in selectionItems) {\n        var item = selectionItems[id],\n            selection = item._selection;\n\n        if (selection & 1 && item.isInserted()) {\n          items.push(item);\n        } else if (!selection) {\n          this._updateSelection(item);\n        }\n      }\n\n      return items;\n    },\n    _updateSelection: function _updateSelection(item) {\n      var id = item._id,\n          selectionItems = this._selectionItems;\n\n      if (item._selection) {\n        if (selectionItems[id] !== item) {\n          this._selectionCount++;\n          selectionItems[id] = item;\n        }\n      } else if (selectionItems[id] === item) {\n        this._selectionCount--;\n        delete selectionItems[id];\n      }\n    },\n    selectAll: function selectAll() {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].setFullySelected(true);\n      }\n    },\n    deselectAll: function deselectAll() {\n      var selectionItems = this._selectionItems;\n\n      for (var i in selectionItems) {\n        selectionItems[i].setFullySelected(false);\n      }\n    },\n    addLayer: function addLayer(layer) {\n      return this.insertLayer(undefined, layer);\n    },\n    insertLayer: function insertLayer(index, layer) {\n      if (layer instanceof Layer) {\n        layer._remove(false, true);\n\n        Base.splice(this._children, [layer], index, 0);\n\n        layer._setProject(this, true);\n\n        var name = layer._name;\n        if (name) layer.setName(name);\n        if (this._changes) layer._changed(5);\n        if (!this._activeLayer) this._activeLayer = layer;\n      } else {\n        layer = null;\n      }\n\n      return layer;\n    },\n    _insertItem: function _insertItem(index, item, _created) {\n      item = this.insertLayer(index, item) || (this._activeLayer || this._insertItem(undefined, new Layer(Item.NO_INSERT), true)).insertChild(index, item);\n      if (_created && item.activate) item.activate();\n      return item;\n    },\n    getItems: function getItems(options) {\n      return Item._getItems(this, options);\n    },\n    getItem: function getItem(options) {\n      return Item._getItems(this, options, null, null, true)[0] || null;\n    },\n    importJSON: function importJSON(json) {\n      this.activate();\n      var layer = this._activeLayer;\n      return Base.importJSON(json, layer && layer.isEmpty() && layer);\n    },\n    removeOn: function removeOn(type) {\n      var sets = this._removeSets;\n\n      if (sets) {\n        if (type === 'mouseup') sets.mousedrag = null;\n        var set = sets[type];\n\n        if (set) {\n          for (var id in set) {\n            var item = set[id];\n\n            for (var key in sets) {\n              var other = sets[key];\n              if (other && other != set) delete other[item._id];\n            }\n\n            item.remove();\n          }\n\n          sets[type] = null;\n        }\n      }\n    },\n    draw: function draw(ctx, matrix, pixelRatio) {\n      this._updateVersion++;\n      ctx.save();\n      matrix.applyToContext(ctx);\n      var children = this._children,\n          param = new Base({\n        offset: new Point(0, 0),\n        pixelRatio: pixelRatio,\n        viewMatrix: matrix.isIdentity() ? null : matrix,\n        matrices: [new Matrix()],\n        updateMatrix: true\n      });\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].draw(ctx, param);\n      }\n\n      ctx.restore();\n\n      if (this._selectionCount > 0) {\n        ctx.save();\n        ctx.strokeWidth = 1;\n        var items = this._selectionItems,\n            size = this._scope.settings.handleSize,\n            version = this._updateVersion;\n\n        for (var id in items) {\n          items[id]._drawSelection(ctx, matrix, size, items, version);\n        }\n\n        ctx.restore();\n      }\n    }\n  });\n  var Item = Base.extend(Emitter, {\n    statics: {\n      extend: function extend(src) {\n        if (src._serializeFields) src._serializeFields = Base.set({}, this.prototype._serializeFields, src._serializeFields);\n        return extend.base.apply(this, arguments);\n      },\n      NO_INSERT: {\n        insert: false\n      }\n    },\n    _class: 'Item',\n    _name: null,\n    _applyMatrix: true,\n    _canApplyMatrix: true,\n    _canScaleStroke: false,\n    _pivot: null,\n    _visible: true,\n    _blendMode: 'normal',\n    _opacity: 1,\n    _locked: false,\n    _guide: false,\n    _clipMask: false,\n    _selection: 0,\n    _selectBounds: true,\n    _selectChildren: false,\n    _serializeFields: {\n      name: null,\n      applyMatrix: null,\n      matrix: new Matrix(),\n      pivot: null,\n      visible: true,\n      blendMode: 'normal',\n      opacity: 1,\n      locked: false,\n      guide: false,\n      clipMask: false,\n      selected: false,\n      data: {}\n    },\n    _prioritize: ['applyMatrix']\n  }, new function () {\n    var handlers = ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onClick', 'onDoubleClick', 'onMouseMove', 'onMouseEnter', 'onMouseLeave'];\n    return Base.each(handlers, function (name) {\n      this._events[name] = {\n        install: function install(type) {\n          this.getView()._countItemEvent(type, 1);\n        },\n        uninstall: function uninstall(type) {\n          this.getView()._countItemEvent(type, -1);\n        }\n      };\n    }, {\n      _events: {\n        onFrame: {\n          install: function install() {\n            this.getView()._animateItem(this, true);\n          },\n          uninstall: function uninstall() {\n            this.getView()._animateItem(this, false);\n          }\n        },\n        onLoad: {},\n        onError: {}\n      },\n      statics: {\n        _itemHandlers: handlers\n      }\n    });\n  }(), {\n    initialize: function Item() {},\n    _initialize: function _initialize(props, point) {\n      var hasProps = props && Base.isPlainObject(props),\n          internal = hasProps && props.internal === true,\n          matrix = this._matrix = new Matrix(),\n          project = hasProps && props.project || paper.project,\n          settings = paper.settings;\n      this._id = internal ? null : UID.get();\n      this._parent = this._index = null;\n      this._applyMatrix = this._canApplyMatrix && settings.applyMatrix;\n      if (point) matrix.translate(point);\n      matrix._owner = this;\n      this._style = new Style(project._currentStyle, this, project);\n\n      if (internal || hasProps && props.insert == false || !settings.insertItems && !(hasProps && props.insert === true)) {\n        this._setProject(project);\n      } else {\n        (hasProps && props.parent || project)._insertItem(undefined, this, true);\n      }\n\n      if (hasProps && props !== Item.NO_INSERT) {\n        this.set(props, {\n          internal: true,\n          insert: true,\n          project: true,\n          parent: true\n        });\n      }\n\n      return hasProps;\n    },\n    _serialize: function _serialize(options, dictionary) {\n      var props = {},\n          that = this;\n\n      function serialize(fields) {\n        for (var key in fields) {\n          var value = that[key];\n\n          if (!Base.equals(value, key === 'leading' ? fields.fontSize * 1.2 : fields[key])) {\n            props[key] = Base.serialize(value, options, key !== 'data', dictionary);\n          }\n        }\n      }\n\n      serialize(this._serializeFields);\n      if (!(this instanceof Group)) serialize(this._style._defaults);\n      return [this._class, props];\n    },\n    _changed: function _changed(flags) {\n      var symbol = this._symbol,\n          cacheParent = this._parent || symbol,\n          project = this._project;\n\n      if (flags & 8) {\n        this._bounds = this._position = this._decomposed = undefined;\n      }\n\n      if (flags & 16) {\n        this._globalMatrix = undefined;\n      }\n\n      if (cacheParent && flags & 72) {\n        Item._clearBoundsCache(cacheParent);\n      }\n\n      if (flags & 2) {\n        Item._clearBoundsCache(this);\n      }\n\n      if (project) project._changed(flags, this);\n      if (symbol) symbol._changed(flags);\n    },\n    getId: function getId() {\n      return this._id;\n    },\n    getName: function getName() {\n      return this._name;\n    },\n    setName: function setName(name) {\n      if (this._name) this._removeNamed();\n      if (name === +name + '') throw new Error('Names consisting only of numbers are not supported.');\n\n      var owner = this._getOwner();\n\n      if (name && owner) {\n        var children = owner._children,\n            namedChildren = owner._namedChildren;\n        (namedChildren[name] = namedChildren[name] || []).push(this);\n        if (!(name in children)) children[name] = this;\n      }\n\n      this._name = name || undefined;\n\n      this._changed(256);\n    },\n    getStyle: function getStyle() {\n      return this._style;\n    },\n    setStyle: function setStyle(style) {\n      this.getStyle().set(style);\n    }\n  }, Base.each(['locked', 'visible', 'blendMode', 'opacity', 'guide'], function (name) {\n    var part = Base.capitalize(name),\n        key = '_' + name,\n        flags = {\n      locked: 256,\n      visible: 265\n    };\n\n    this['get' + part] = function () {\n      return this[key];\n    };\n\n    this['set' + part] = function (value) {\n      if (value != this[key]) {\n        this[key] = value;\n\n        this._changed(flags[name] || 257);\n      }\n    };\n  }, {}), {\n    beans: true,\n    getSelection: function getSelection() {\n      return this._selection;\n    },\n    setSelection: function setSelection(selection) {\n      if (selection !== this._selection) {\n        this._selection = selection;\n        var project = this._project;\n\n        if (project) {\n          project._updateSelection(this);\n\n          this._changed(257);\n        }\n      }\n    },\n    _changeSelection: function _changeSelection(flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function isSelected() {\n      if (this._selectChildren) {\n        var children = this._children;\n\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (children[i].isSelected()) return true;\n        }\n      }\n\n      return !!(this._selection & 1);\n    },\n    setSelected: function setSelected(selected) {\n      if (this._selectChildren) {\n        var children = this._children;\n\n        for (var i = 0, l = children.length; i < l; i++) {\n          children[i].setSelected(selected);\n        }\n      }\n\n      this._changeSelection(1, selected);\n    },\n    isFullySelected: function isFullySelected() {\n      var children = this._children,\n          selected = !!(this._selection & 1);\n\n      if (children && selected) {\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (!children[i].isFullySelected()) return false;\n        }\n\n        return true;\n      }\n\n      return selected;\n    },\n    setFullySelected: function setFullySelected(selected) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) {\n          children[i].setFullySelected(selected);\n        }\n      }\n\n      this._changeSelection(1, selected);\n    },\n    isClipMask: function isClipMask() {\n      return this._clipMask;\n    },\n    setClipMask: function setClipMask(clipMask) {\n      if (this._clipMask != (clipMask = !!clipMask)) {\n        this._clipMask = clipMask;\n\n        if (clipMask) {\n          this.setFillColor(null);\n          this.setStrokeColor(null);\n        }\n\n        this._changed(257);\n\n        if (this._parent) this._parent._changed(2048);\n      }\n    },\n    getData: function getData() {\n      if (!this._data) this._data = {};\n      return this._data;\n    },\n    setData: function setData(data) {\n      this._data = data;\n    },\n    getPosition: function getPosition(_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n\n      var position = this._position || (this._position = this._getPositionFromBounds());\n\n      return new ctor(position.x, position.y, this, 'setPosition');\n    },\n    setPosition: function setPosition() {\n      this.translate(Point.read(arguments).subtract(this.getPosition(true)));\n    },\n    _getPositionFromBounds: function _getPositionFromBounds(bounds) {\n      return this._pivot ? this._matrix._transformPoint(this._pivot) : (bounds || this.getBounds()).getCenter(true);\n    },\n    getPivot: function getPivot() {\n      var pivot = this._pivot;\n      return pivot ? new LinkedPoint(pivot.x, pivot.y, this, 'setPivot') : null;\n    },\n    setPivot: function setPivot() {\n      this._pivot = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n      this._position = undefined;\n    }\n  }, Base.each({\n    getStrokeBounds: {\n      stroke: true\n    },\n    getHandleBounds: {\n      handle: true\n    },\n    getInternalBounds: {\n      internal: true\n    }\n  }, function (options, key) {\n    this[key] = function (matrix) {\n      return this.getBounds(matrix, options);\n    };\n  }, {\n    beans: true,\n    getBounds: function getBounds(matrix, options) {\n      var hasMatrix = options || matrix instanceof Matrix,\n          opts = Base.set({}, hasMatrix ? options : matrix, this._boundsOptions);\n      if (!opts.stroke || this.getStrokeScaling()) opts.cacheItem = this;\n\n      var rect = this._getCachedBounds(hasMatrix && matrix, opts).rect;\n\n      return !arguments.length ? new LinkedRectangle(rect.x, rect.y, rect.width, rect.height, this, 'setBounds') : rect;\n    },\n    setBounds: function setBounds() {\n      var rect = _Rectangle.read(arguments),\n          bounds = this.getBounds(),\n          _matrix = this._matrix,\n          matrix = new Matrix(),\n          center = rect.getCenter();\n\n      matrix.translate(center);\n\n      if (rect.width != bounds.width || rect.height != bounds.height) {\n        if (!_matrix.isInvertible()) {\n          _matrix.set(_matrix._backup || new Matrix().translate(_matrix.getTranslation()));\n\n          bounds = this.getBounds();\n        }\n\n        matrix.scale(bounds.width !== 0 ? rect.width / bounds.width : 0, bounds.height !== 0 ? rect.height / bounds.height : 0);\n      }\n\n      center = bounds.getCenter();\n      matrix.translate(-center.x, -center.y);\n      this.transform(matrix);\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var children = this._children;\n      if (!children || !children.length) return new _Rectangle();\n\n      Item._updateBoundsCache(this, options.cacheItem);\n\n      return Item._getBounds(children, matrix, options);\n    },\n    _getBoundsCacheKey: function _getBoundsCacheKey(options, internal) {\n      return [options.stroke ? 1 : 0, options.handle ? 1 : 0, internal ? 1 : 0].join('');\n    },\n    _getCachedBounds: function _getCachedBounds(matrix, options, noInternal) {\n      matrix = matrix && matrix._orNullIfIdentity();\n\n      var internal = options.internal && !noInternal,\n          cacheItem = options.cacheItem,\n          _matrix = internal ? null : this._matrix._orNullIfIdentity(),\n          cacheKey = cacheItem && (!matrix || matrix.equals(_matrix)) && this._getBoundsCacheKey(options, internal),\n          bounds = this._bounds;\n\n      Item._updateBoundsCache(this._parent || this._symbol, cacheItem);\n\n      if (cacheKey && bounds && cacheKey in bounds) {\n        var cached = bounds[cacheKey];\n        return {\n          rect: cached.rect.clone(),\n          nonscaling: cached.nonscaling\n        };\n      }\n\n      var res = this._getBounds(matrix || _matrix, options),\n          rect = res.rect || res,\n          style = this._style,\n          nonscaling = res.nonscaling || style.hasStroke() && !style.getStrokeScaling();\n\n      if (cacheKey) {\n        if (!bounds) {\n          this._bounds = bounds = {};\n        }\n\n        var cached = bounds[cacheKey] = {\n          rect: rect.clone(),\n          nonscaling: nonscaling,\n          internal: internal\n        };\n      }\n\n      return {\n        rect: rect,\n        nonscaling: nonscaling\n      };\n    },\n    _getStrokeMatrix: function _getStrokeMatrix(matrix, options) {\n      var parent = this.getStrokeScaling() ? null : options && options.internal ? this : this._parent || this._symbol && this._symbol._item,\n          mx = parent ? parent.getViewMatrix().invert() : matrix;\n      return mx && mx._shiftless();\n    },\n    statics: {\n      _updateBoundsCache: function _updateBoundsCache(parent, item) {\n        if (parent && item) {\n          var id = item._id,\n              ref = parent._boundsCache = parent._boundsCache || {\n            ids: {},\n            list: []\n          };\n\n          if (!ref.ids[id]) {\n            ref.list.push(item);\n            ref.ids[id] = item;\n          }\n        }\n      },\n      _clearBoundsCache: function _clearBoundsCache(item) {\n        var cache = item._boundsCache;\n\n        if (cache) {\n          item._bounds = item._position = item._boundsCache = undefined;\n\n          for (var i = 0, list = cache.list, l = list.length; i < l; i++) {\n            var other = list[i];\n\n            if (other !== item) {\n              other._bounds = other._position = undefined;\n              if (other._boundsCache) Item._clearBoundsCache(other);\n            }\n          }\n        }\n      },\n      _getBounds: function _getBounds(items, matrix, options) {\n        var x1 = Infinity,\n            x2 = -x1,\n            y1 = x1,\n            y2 = x2,\n            nonscaling = false;\n        options = options || {};\n\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i];\n\n          if (item._visible && !item.isEmpty(true)) {\n            var bounds = item._getCachedBounds(matrix && matrix.appended(item._matrix), options, true),\n                rect = bounds.rect;\n\n            x1 = Math.min(rect.x, x1);\n            y1 = Math.min(rect.y, y1);\n            x2 = Math.max(rect.x + rect.width, x2);\n            y2 = Math.max(rect.y + rect.height, y2);\n            if (bounds.nonscaling) nonscaling = true;\n          }\n        }\n\n        return {\n          rect: isFinite(x1) ? new _Rectangle(x1, y1, x2 - x1, y2 - y1) : new _Rectangle(),\n          nonscaling: nonscaling\n        };\n      }\n    }\n  }), {\n    beans: true,\n    _decompose: function _decompose() {\n      return this._applyMatrix ? null : this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    getRotation: function getRotation() {\n      var decomposed = this._decompose();\n\n      return decomposed ? decomposed.rotation : 0;\n    },\n    setRotation: function setRotation(rotation) {\n      var current = this.getRotation();\n\n      if (current != null && rotation != null) {\n        var decomposed = this._decomposed;\n        this.rotate(rotation - current);\n\n        if (decomposed) {\n          decomposed.rotation = rotation;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getScaling: function getScaling() {\n      var decomposed = this._decompose(),\n          s = decomposed && decomposed.scaling;\n\n      return new LinkedPoint(s ? s.x : 1, s ? s.y : 1, this, 'setScaling');\n    },\n    setScaling: function setScaling() {\n      var current = this.getScaling(),\n          scaling = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n\n      if (current && scaling && !current.equals(scaling)) {\n        var rotation = this.getRotation(),\n            decomposed = this._decomposed,\n            matrix = new Matrix(),\n            center = this.getPosition(true);\n        matrix.translate(center);\n        if (rotation) matrix.rotate(rotation);\n        matrix.scale(scaling.x / current.x, scaling.y / current.y);\n        if (rotation) matrix.rotate(-rotation);\n        matrix.translate(center.negate());\n        this.transform(matrix);\n\n        if (decomposed) {\n          decomposed.scaling = scaling;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getMatrix: function getMatrix() {\n      return this._matrix;\n    },\n    setMatrix: function setMatrix() {\n      var matrix = this._matrix;\n      matrix.initialize.apply(matrix, arguments);\n    },\n    getGlobalMatrix: function getGlobalMatrix(_dontClone) {\n      var matrix = this._globalMatrix;\n\n      if (matrix) {\n        var parent = this._parent;\n        var parents = [];\n\n        while (parent) {\n          if (!parent._globalMatrix) {\n            matrix = null;\n\n            for (var i = 0, l = parents.length; i < l; i++) {\n              parents[i]._globalMatrix = null;\n            }\n\n            break;\n          }\n\n          parents.push(parent);\n          parent = parent._parent;\n        }\n      }\n\n      if (!matrix) {\n        matrix = this._globalMatrix = this._matrix.clone();\n        var parent = this._parent;\n        if (parent) matrix.prepend(parent.getGlobalMatrix(true));\n      }\n\n      return _dontClone ? matrix : matrix.clone();\n    },\n    getViewMatrix: function getViewMatrix() {\n      return this.getGlobalMatrix().prepend(this.getView()._matrix);\n    },\n    getApplyMatrix: function getApplyMatrix() {\n      return this._applyMatrix;\n    },\n    setApplyMatrix: function setApplyMatrix(apply) {\n      if (this._applyMatrix = this._canApplyMatrix && !!apply) this.transform(null, true);\n    },\n    getTransformContent: '#getApplyMatrix',\n    setTransformContent: '#setApplyMatrix'\n  }, {\n    getProject: function getProject() {\n      return this._project;\n    },\n    _setProject: function _setProject(project, installEvents) {\n      if (this._project !== project) {\n        if (this._project) this._installEvents(false);\n        this._project = project;\n        var children = this._children;\n\n        for (var i = 0, l = children && children.length; i < l; i++) {\n          children[i]._setProject(project);\n        }\n\n        installEvents = true;\n      }\n\n      if (installEvents) this._installEvents(true);\n    },\n    getView: function getView() {\n      return this._project._view;\n    },\n    _installEvents: function _installEvents(install) {\n      _installEvents.base.call(this, install);\n\n      var children = this._children;\n\n      for (var i = 0, l = children && children.length; i < l; i++) {\n        children[i]._installEvents(install);\n      }\n    },\n    getLayer: function getLayer() {\n      var parent = this;\n\n      while (parent = parent._parent) {\n        if (parent instanceof Layer) return parent;\n      }\n\n      return null;\n    },\n    getParent: function getParent() {\n      return this._parent;\n    },\n    setParent: function setParent(item) {\n      return item.addChild(this);\n    },\n    _getOwner: '#getParent',\n    getChildren: function getChildren() {\n      return this._children;\n    },\n    setChildren: function setChildren(items) {\n      this.removeChildren();\n      this.addChildren(items);\n    },\n    getFirstChild: function getFirstChild() {\n      return this._children && this._children[0] || null;\n    },\n    getLastChild: function getLastChild() {\n      return this._children && this._children[this._children.length - 1] || null;\n    },\n    getNextSibling: function getNextSibling() {\n      var owner = this._getOwner();\n\n      return owner && owner._children[this._index + 1] || null;\n    },\n    getPreviousSibling: function getPreviousSibling() {\n      var owner = this._getOwner();\n\n      return owner && owner._children[this._index - 1] || null;\n    },\n    getIndex: function getIndex() {\n      return this._index;\n    },\n    equals: function equals(item) {\n      return item === this || item && this._class === item._class && this._style.equals(item._style) && this._matrix.equals(item._matrix) && this._locked === item._locked && this._visible === item._visible && this._blendMode === item._blendMode && this._opacity === item._opacity && this._clipMask === item._clipMask && this._guide === item._guide && this._equals(item) || false;\n    },\n    _equals: function _equals(item) {\n      return Base.equals(this._children, item._children);\n    },\n    clone: function clone(options) {\n      var copy = new this.constructor(Item.NO_INSERT),\n          children = this._children,\n          insert = Base.pick(options ? options.insert : undefined, options === undefined || options === true),\n          deep = Base.pick(options ? options.deep : undefined, true);\n      if (children) copy.copyAttributes(this);\n      if (!children || deep) copy.copyContent(this);\n      if (!children) copy.copyAttributes(this);\n      if (insert) copy.insertAbove(this);\n      var name = this._name,\n          parent = this._parent;\n\n      if (name && parent) {\n        var children = parent._children,\n            orig = name,\n            i = 1;\n\n        while (children[name]) {\n          name = orig + ' ' + i++;\n        }\n\n        if (name !== orig) copy.setName(name);\n      }\n\n      return copy;\n    },\n    copyContent: function copyContent(source) {\n      var children = source._children;\n\n      for (var i = 0, l = children && children.length; i < l; i++) {\n        this.addChild(children[i].clone(false), true);\n      }\n    },\n    copyAttributes: function copyAttributes(source, excludeMatrix) {\n      this.setStyle(source._style);\n      var keys = ['_locked', '_visible', '_blendMode', '_opacity', '_clipMask', '_guide'];\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i];\n        if (source.hasOwnProperty(key)) this[key] = source[key];\n      }\n\n      if (!excludeMatrix) this._matrix.set(source._matrix, true);\n      this.setApplyMatrix(source._applyMatrix);\n      this.setPivot(source._pivot);\n      this.setSelection(source._selection);\n      var data = source._data,\n          name = source._name;\n      this._data = data ? Base.clone(data) : null;\n      if (name) this.setName(name);\n    },\n    rasterize: function rasterize(resolution, insert) {\n      var bounds = this.getStrokeBounds(),\n          scale = (resolution || this.getView().getResolution()) / 72,\n          topLeft = bounds.getTopLeft().floor(),\n          bottomRight = bounds.getBottomRight().ceil(),\n          size = new Size(bottomRight.subtract(topLeft)),\n          raster = new Raster(Item.NO_INSERT);\n\n      if (!size.isZero()) {\n        var canvas = CanvasProvider.getCanvas(size.multiply(scale)),\n            ctx = canvas.getContext('2d'),\n            matrix = new Matrix().scale(scale).translate(topLeft.negate());\n        ctx.save();\n        matrix.applyToContext(ctx);\n        this.draw(ctx, new Base({\n          matrices: [matrix]\n        }));\n        ctx.restore();\n        raster.setCanvas(canvas);\n      }\n\n      raster.transform(new Matrix().translate(topLeft.add(size.divide(2))).scale(1 / scale));\n      if (insert === undefined || insert) raster.insertAbove(this);\n      return raster;\n    },\n    contains: function contains() {\n      var matrix = this._matrix;\n      return matrix.isInvertible() && !!this._contains(matrix._inverseTransform(Point.read(arguments)));\n    },\n    _contains: function _contains(point) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          if (children[i].contains(point)) return true;\n        }\n\n        return false;\n      }\n\n      return point.isInside(this.getInternalBounds());\n    },\n    isInside: function isInside() {\n      return _Rectangle.read(arguments).contains(this.getBounds());\n    },\n    _asPathItem: function _asPathItem() {\n      return new Path.Rectangle({\n        rectangle: this.getInternalBounds(),\n        matrix: this._matrix,\n        insert: false\n      });\n    },\n    intersects: function intersects(item, _matrix) {\n      if (!(item instanceof Item)) return false;\n      return this._asPathItem().getIntersections(item._asPathItem(), null, _matrix, true).length > 0;\n    }\n  }, new function () {\n    function hitTest() {\n      var args = arguments;\n      return this._hitTest(Point.read(args), HitResult.getOptions(args));\n    }\n\n    function hitTestAll() {\n      var args = arguments,\n          point = Point.read(args),\n          options = HitResult.getOptions(args),\n          all = [];\n\n      this._hitTest(point, new Base({\n        all: all\n      }, options));\n\n      return all;\n    }\n\n    function hitTestChildren(point, options, viewMatrix, _exclude) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          var child = children[i];\n\n          var res = child !== _exclude && child._hitTest(point, options, viewMatrix);\n\n          if (res && !options.all) return res;\n        }\n      }\n\n      return null;\n    }\n\n    Project.inject({\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTest: hitTestChildren\n    });\n    return {\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTestChildren: hitTestChildren\n    };\n  }(), {\n    _hitTest: function _hitTest(point, options, parentViewMatrix) {\n      if (this._locked || !this._visible || this._guide && !options.guides || this.isEmpty()) {\n        return null;\n      }\n\n      var matrix = this._matrix,\n          viewMatrix = parentViewMatrix ? parentViewMatrix.appended(matrix) : this.getGlobalMatrix().prepend(this.getView()._matrix),\n          tolerance = Math.max(options.tolerance, 1e-12),\n          tolerancePadding = options._tolerancePadding = new Size(Path._getStrokePadding(tolerance, matrix._shiftless().invert()));\n      point = matrix._inverseTransform(point);\n\n      if (!point || !this._children && !this.getBounds({\n        internal: true,\n        stroke: true,\n        handle: true\n      }).expand(tolerancePadding.multiply(2))._containsPoint(point)) {\n        return null;\n      }\n\n      var checkSelf = !(options.guides && !this._guide || options.selected && !this.isSelected() || options.type && options.type !== Base.hyphenate(this._class) || options[\"class\"] && !(this instanceof options[\"class\"])),\n          match = options.match,\n          that = this,\n          bounds,\n          res;\n\n      function filter(hit) {\n        if (hit && match && !match(hit)) hit = null;\n        if (hit && options.all) options.all.push(hit);\n        return hit;\n      }\n\n      function checkPoint(type, part) {\n        var pt = part ? bounds['get' + part]() : that.getPosition();\n\n        if (point.subtract(pt).divide(tolerancePadding).length <= 1) {\n          return new HitResult(type, that, {\n            name: part ? Base.hyphenate(part) : type,\n            point: pt\n          });\n        }\n      }\n\n      var checkPosition = options.position,\n          checkCenter = options.center,\n          checkBounds = options.bounds;\n\n      if (checkSelf && this._parent && (checkPosition || checkCenter || checkBounds)) {\n        if (checkCenter || checkBounds) {\n          bounds = this.getInternalBounds();\n        }\n\n        res = checkPosition && checkPoint('position') || checkCenter && checkPoint('center', 'Center');\n\n        if (!res && checkBounds) {\n          var points = ['TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'];\n\n          for (var i = 0; i < 8 && !res; i++) {\n            res = checkPoint('bounds', points[i]);\n          }\n        }\n\n        res = filter(res);\n      }\n\n      if (!res) {\n        res = this._hitTestChildren(point, options, viewMatrix) || checkSelf && filter(this._hitTestSelf(point, options, viewMatrix, this.getStrokeScaling() ? null : viewMatrix._shiftless().invert())) || null;\n      }\n\n      if (res && res.point) {\n        res.point = matrix.transform(res.point);\n      }\n\n      return res;\n    },\n    _hitTestSelf: function _hitTestSelf(point, options) {\n      if (options.fill && this.hasFill() && this._contains(point)) return new HitResult('fill', this);\n    },\n    matches: function matches(name, compare) {\n      function matchObject(obj1, obj2) {\n        for (var i in obj1) {\n          if (obj1.hasOwnProperty(i)) {\n            var val1 = obj1[i],\n                val2 = obj2[i];\n\n            if (Base.isPlainObject(val1) && Base.isPlainObject(val2)) {\n              if (!matchObject(val1, val2)) return false;\n            } else if (!Base.equals(val1, val2)) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      }\n\n      var type = typeof name;\n\n      if (type === 'object') {\n        for (var key in name) {\n          if (name.hasOwnProperty(key) && !this.matches(key, name[key])) return false;\n        }\n\n        return true;\n      } else if (type === 'function') {\n        return name(this);\n      } else if (name === 'match') {\n        return compare(this);\n      } else {\n        var value = /^(empty|editable)$/.test(name) ? this['is' + Base.capitalize(name)]() : name === 'type' ? Base.hyphenate(this._class) : this[name];\n\n        if (name === 'class') {\n          if (typeof compare === 'function') return this instanceof compare;\n          value = this._class;\n        }\n\n        if (typeof compare === 'function') {\n          return !!compare(value);\n        } else if (compare) {\n          if (compare.test) {\n            return compare.test(value);\n          } else if (Base.isPlainObject(compare)) {\n            return matchObject(compare, value);\n          }\n        }\n\n        return Base.equals(value, compare);\n      }\n    },\n    getItems: function getItems(options) {\n      return Item._getItems(this, options, this._matrix);\n    },\n    getItem: function getItem(options) {\n      return Item._getItems(this, options, this._matrix, null, true)[0] || null;\n    },\n    statics: {\n      _getItems: function _getItems(item, options, matrix, param, firstOnly) {\n        if (!param) {\n          var obj = typeof options === 'object' && options,\n              overlapping = obj && obj.overlapping,\n              inside = obj && obj.inside,\n              bounds = overlapping || inside,\n              rect = bounds && _Rectangle.read([bounds]);\n\n          param = {\n            items: [],\n            recursive: obj && obj.recursive !== false,\n            inside: !!inside,\n            overlapping: !!overlapping,\n            rect: rect,\n            path: overlapping && new Path.Rectangle({\n              rectangle: rect,\n              insert: false\n            })\n          };\n\n          if (obj) {\n            options = Base.filter({}, options, {\n              recursive: true,\n              inside: true,\n              overlapping: true\n            });\n          }\n        }\n\n        var children = item._children,\n            items = param.items,\n            rect = param.rect;\n        matrix = rect && (matrix || new Matrix());\n\n        for (var i = 0, l = children && children.length; i < l; i++) {\n          var child = children[i],\n              childMatrix = matrix && matrix.appended(child._matrix),\n              add = true;\n\n          if (rect) {\n            var bounds = child.getBounds(childMatrix);\n            if (!rect.intersects(bounds)) continue;\n            if (!(rect.contains(bounds) || param.overlapping && (bounds.contains(rect) || param.path.intersects(child, childMatrix)))) add = false;\n          }\n\n          if (add && child.matches(options)) {\n            items.push(child);\n            if (firstOnly) break;\n          }\n\n          if (param.recursive !== false) {\n            _getItems(child, options, childMatrix, param, firstOnly);\n          }\n\n          if (firstOnly && items.length > 0) break;\n        }\n\n        return items;\n      }\n    }\n  }, {\n    importJSON: function importJSON(json) {\n      var res = Base.importJSON(json, this);\n      return res !== this ? this.addChild(res) : res;\n    },\n    addChild: function addChild(item) {\n      return this.insertChild(undefined, item);\n    },\n    insertChild: function insertChild(index, item) {\n      var res = item ? this.insertChildren(index, [item]) : null;\n      return res && res[0];\n    },\n    addChildren: function addChildren(items) {\n      return this.insertChildren(this._children.length, items);\n    },\n    insertChildren: function insertChildren(index, items) {\n      var children = this._children;\n\n      if (children && items && items.length > 0) {\n        items = Base.slice(items);\n        var inserted = {};\n\n        for (var i = items.length - 1; i >= 0; i--) {\n          var item = items[i],\n              id = item && item._id;\n\n          if (!item || inserted[id]) {\n            items.splice(i, 1);\n          } else {\n            item._remove(false, true);\n\n            inserted[id] = true;\n          }\n        }\n\n        Base.splice(children, items, index, 0);\n        var project = this._project,\n            notifySelf = project._changes;\n\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i],\n              name = item._name;\n          item._parent = this;\n\n          item._setProject(project, true);\n\n          if (name) item.setName(name);\n          if (notifySelf) item._changed(5);\n        }\n\n        this._changed(11);\n      } else {\n        items = null;\n      }\n\n      return items;\n    },\n    _insertItem: '#insertChild',\n    _insertAt: function _insertAt(item, offset) {\n      var owner = item && item._getOwner(),\n          res = item !== this && owner ? this : null;\n\n      if (res) {\n        res._remove(false, true);\n\n        owner._insertItem(item._index + offset, res);\n      }\n\n      return res;\n    },\n    insertAbove: function insertAbove(item) {\n      return this._insertAt(item, 1);\n    },\n    insertBelow: function insertBelow(item) {\n      return this._insertAt(item, 0);\n    },\n    sendToBack: function sendToBack() {\n      var owner = this._getOwner();\n\n      return owner ? owner._insertItem(0, this) : null;\n    },\n    bringToFront: function bringToFront() {\n      var owner = this._getOwner();\n\n      return owner ? owner._insertItem(undefined, this) : null;\n    },\n    appendTop: '#addChild',\n    appendBottom: function appendBottom(item) {\n      return this.insertChild(0, item);\n    },\n    moveAbove: '#insertAbove',\n    moveBelow: '#insertBelow',\n    addTo: function addTo(owner) {\n      return owner._insertItem(undefined, this);\n    },\n    copyTo: function copyTo(owner) {\n      return this.clone(false).addTo(owner);\n    },\n    reduce: function reduce(options) {\n      var children = this._children;\n\n      if (children && children.length === 1) {\n        var child = children[0].reduce(options);\n\n        if (this._parent) {\n          child.insertAbove(this);\n          this.remove();\n        } else {\n          child.remove();\n        }\n\n        return child;\n      }\n\n      return this;\n    },\n    _removeNamed: function _removeNamed() {\n      var owner = this._getOwner();\n\n      if (owner) {\n        var children = owner._children,\n            namedChildren = owner._namedChildren,\n            name = this._name,\n            namedArray = namedChildren[name],\n            index = namedArray ? namedArray.indexOf(this) : -1;\n\n        if (index !== -1) {\n          if (children[name] == this) delete children[name];\n          namedArray.splice(index, 1);\n\n          if (namedArray.length) {\n            children[name] = namedArray[0];\n          } else {\n            delete namedChildren[name];\n          }\n        }\n      }\n    },\n    _remove: function _remove(notifySelf, notifyParent) {\n      var owner = this._getOwner(),\n          project = this._project,\n          index = this._index;\n\n      if (this._style) this._style._dispose();\n\n      if (owner) {\n        if (this._name) this._removeNamed();\n\n        if (index != null) {\n          if (project._activeLayer === this) project._activeLayer = this.getNextSibling() || this.getPreviousSibling();\n          Base.splice(owner._children, null, index, 1);\n        }\n\n        this._installEvents(false);\n\n        if (notifySelf && project._changes) this._changed(5);\n        if (notifyParent) owner._changed(11, this);\n        this._parent = null;\n        return true;\n      }\n\n      return false;\n    },\n    remove: function remove() {\n      return this._remove(true, true);\n    },\n    replaceWith: function replaceWith(item) {\n      var ok = item && item.insertBelow(this);\n      if (ok) this.remove();\n      return ok;\n    },\n    removeChildren: function removeChildren(start, end) {\n      if (!this._children) return null;\n      start = start || 0;\n      end = Base.pick(end, this._children.length);\n      var removed = Base.splice(this._children, null, start, end - start);\n\n      for (var i = removed.length - 1; i >= 0; i--) {\n        removed[i]._remove(true, false);\n      }\n\n      if (removed.length > 0) this._changed(11);\n      return removed;\n    },\n    clear: '#removeChildren',\n    reverseChildren: function reverseChildren() {\n      if (this._children) {\n        this._children.reverse();\n\n        for (var i = 0, l = this._children.length; i < l; i++) {\n          this._children[i]._index = i;\n        }\n\n        this._changed(11);\n      }\n    },\n    isEmpty: function isEmpty(recursively) {\n      var children = this._children;\n      var numChildren = children ? children.length : 0;\n\n      if (recursively) {\n        for (var i = 0; i < numChildren; i++) {\n          if (!children[i].isEmpty(recursively)) {\n            return false;\n          }\n        }\n\n        return true;\n      }\n\n      return !numChildren;\n    },\n    isEditable: function isEditable() {\n      var item = this;\n\n      while (item) {\n        if (!item._visible || item._locked) return false;\n        item = item._parent;\n      }\n\n      return true;\n    },\n    hasFill: function hasFill() {\n      return this.getStyle().hasFill();\n    },\n    hasStroke: function hasStroke() {\n      return this.getStyle().hasStroke();\n    },\n    hasShadow: function hasShadow() {\n      return this.getStyle().hasShadow();\n    },\n    _getOrder: function _getOrder(item) {\n      function getList(item) {\n        var list = [];\n\n        do {\n          list.unshift(item);\n        } while (item = item._parent);\n\n        return list;\n      }\n\n      var list1 = getList(this),\n          list2 = getList(item);\n\n      for (var i = 0, l = Math.min(list1.length, list2.length); i < l; i++) {\n        if (list1[i] != list2[i]) {\n          return list1[i]._index < list2[i]._index ? 1 : -1;\n        }\n      }\n\n      return 0;\n    },\n    hasChildren: function hasChildren() {\n      return this._children && this._children.length > 0;\n    },\n    isInserted: function isInserted() {\n      return this._parent ? this._parent.isInserted() : false;\n    },\n    isAbove: function isAbove(item) {\n      return this._getOrder(item) === -1;\n    },\n    isBelow: function isBelow(item) {\n      return this._getOrder(item) === 1;\n    },\n    isParent: function isParent(item) {\n      return this._parent === item;\n    },\n    isChild: function isChild(item) {\n      return item && item._parent === this;\n    },\n    isDescendant: function isDescendant(item) {\n      var parent = this;\n\n      while (parent = parent._parent) {\n        if (parent === item) return true;\n      }\n\n      return false;\n    },\n    isAncestor: function isAncestor(item) {\n      return item ? item.isDescendant(this) : false;\n    },\n    isSibling: function isSibling(item) {\n      return this._parent === item._parent;\n    },\n    isGroupedWith: function isGroupedWith(item) {\n      var parent = this._parent;\n\n      while (parent) {\n        if (parent._parent && /^(Group|Layer|CompoundPath)$/.test(parent._class) && item.isDescendant(parent)) return true;\n        parent = parent._parent;\n      }\n\n      return false;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n\n    this[key] = function () {\n      var args = arguments,\n          value = (rotate ? Base : Point).read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      return this.transform(new Matrix()[key](value, center || this.getPosition(true)));\n    };\n  }, {\n    translate: function translate() {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    transform: function transform(matrix, _applyRecursively, _setApplyMatrix) {\n      var _matrix = this._matrix,\n          transformMatrix = matrix && !matrix.isIdentity(),\n          applyMatrix = _setApplyMatrix && this._canApplyMatrix || this._applyMatrix && (transformMatrix || !_matrix.isIdentity() || _applyRecursively && this._children);\n      if (!transformMatrix && !applyMatrix) return this;\n\n      if (transformMatrix) {\n        if (!matrix.isInvertible() && _matrix.isInvertible()) _matrix._backup = _matrix.getValues();\n\n        _matrix.prepend(matrix, true);\n\n        var style = this._style,\n            fillColor = style.getFillColor(true),\n            strokeColor = style.getStrokeColor(true);\n        if (fillColor) fillColor.transform(matrix);\n        if (strokeColor) strokeColor.transform(matrix);\n      }\n\n      if (applyMatrix && (applyMatrix = this._transformContent(_matrix, _applyRecursively, _setApplyMatrix))) {\n        var pivot = this._pivot;\n        if (pivot) _matrix._transformPoint(pivot, pivot, true);\n\n        _matrix.reset(true);\n\n        if (_setApplyMatrix && this._canApplyMatrix) this._applyMatrix = true;\n      }\n\n      var bounds = this._bounds,\n          position = this._position;\n\n      if (transformMatrix || applyMatrix) {\n        this._changed(25);\n      }\n\n      var decomp = transformMatrix && bounds && matrix.decompose();\n\n      if (decomp && decomp.skewing.isZero() && decomp.rotation % 90 === 0) {\n        for (var key in bounds) {\n          var cache = bounds[key];\n\n          if (cache.nonscaling) {\n            delete bounds[key];\n          } else if (applyMatrix || !cache.internal) {\n            var rect = cache.rect;\n\n            matrix._transformBounds(rect, rect);\n          }\n        }\n\n        this._bounds = bounds;\n\n        var cached = bounds[this._getBoundsCacheKey(this._boundsOptions || {})];\n\n        if (cached) {\n          this._position = this._getPositionFromBounds(cached.rect);\n        }\n      } else if (transformMatrix && position && this._pivot) {\n        this._position = matrix._transformPoint(position, position);\n      }\n\n      return this;\n    },\n    _transformContent: function _transformContent(matrix, applyRecursively, setApplyMatrix) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) {\n          children[i].transform(matrix, applyRecursively, setApplyMatrix);\n        }\n\n        return true;\n      }\n    },\n    globalToLocal: function globalToLocal() {\n      return this.getGlobalMatrix(true)._inverseTransform(Point.read(arguments));\n    },\n    localToGlobal: function localToGlobal() {\n      return this.getGlobalMatrix(true)._transformPoint(Point.read(arguments));\n    },\n    parentToLocal: function parentToLocal() {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    localToParent: function localToParent() {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    fitBounds: function fitBounds(rectangle, fill) {\n      rectangle = _Rectangle.read(arguments);\n      var bounds = this.getBounds(),\n          itemRatio = bounds.height / bounds.width,\n          rectRatio = rectangle.height / rectangle.width,\n          scale = (fill ? itemRatio > rectRatio : itemRatio < rectRatio) ? rectangle.width / bounds.width : rectangle.height / bounds.height,\n          newBounds = new _Rectangle(new Point(), new Size(bounds.width * scale, bounds.height * scale));\n      newBounds.setCenter(rectangle.getCenter());\n      this.setBounds(newBounds);\n    }\n  }), {\n    _setStyles: function _setStyles(ctx, param, viewMatrix) {\n      var style = this._style,\n          matrix = this._matrix;\n\n      if (style.hasFill()) {\n        ctx.fillStyle = style.getFillColor().toCanvasStyle(ctx, matrix);\n      }\n\n      if (style.hasStroke()) {\n        ctx.strokeStyle = style.getStrokeColor().toCanvasStyle(ctx, matrix);\n        ctx.lineWidth = style.getStrokeWidth();\n        var strokeJoin = style.getStrokeJoin(),\n            strokeCap = style.getStrokeCap(),\n            miterLimit = style.getMiterLimit();\n        if (strokeJoin) ctx.lineJoin = strokeJoin;\n        if (strokeCap) ctx.lineCap = strokeCap;\n        if (miterLimit) ctx.miterLimit = miterLimit;\n\n        if (paper.support.nativeDash) {\n          var dashArray = style.getDashArray(),\n              dashOffset = style.getDashOffset();\n\n          if (dashArray && dashArray.length) {\n            if ('setLineDash' in ctx) {\n              ctx.setLineDash(dashArray);\n              ctx.lineDashOffset = dashOffset;\n            } else {\n              ctx.mozDash = dashArray;\n              ctx.mozDashOffset = dashOffset;\n            }\n          }\n        }\n      }\n\n      if (style.hasShadow()) {\n        var pixelRatio = param.pixelRatio || 1,\n            mx = viewMatrix._shiftless().prepend(new Matrix().scale(pixelRatio, pixelRatio)),\n            blur = mx.transform(new Point(style.getShadowBlur(), 0)),\n            offset = mx.transform(this.getShadowOffset());\n\n        ctx.shadowColor = style.getShadowColor().toCanvasStyle(ctx);\n        ctx.shadowBlur = blur.getLength();\n        ctx.shadowOffsetX = offset.x;\n        ctx.shadowOffsetY = offset.y;\n      }\n    },\n    draw: function draw(ctx, param, parentStrokeMatrix) {\n      var updateVersion = this._updateVersion = this._project._updateVersion;\n      if (!this._visible || this._opacity === 0) return;\n      var matrices = param.matrices,\n          viewMatrix = param.viewMatrix,\n          matrix = this._matrix,\n          globalMatrix = matrices[matrices.length - 1].appended(matrix);\n      if (!globalMatrix.isInvertible()) return;\n      viewMatrix = viewMatrix ? viewMatrix.appended(globalMatrix) : globalMatrix;\n      matrices.push(globalMatrix);\n\n      if (param.updateMatrix) {\n        this._globalMatrix = globalMatrix;\n      }\n\n      var blendMode = this._blendMode,\n          opacity = this._opacity,\n          normalBlend = blendMode === 'normal',\n          nativeBlend = BlendMode.nativeModes[blendMode],\n          direct = normalBlend && opacity === 1 || param.dontStart || param.clip || (nativeBlend || normalBlend && opacity < 1) && this._canComposite(),\n          pixelRatio = param.pixelRatio || 1,\n          mainCtx,\n          itemOffset,\n          prevOffset;\n\n      if (!direct) {\n        var bounds = this.getStrokeBounds(viewMatrix);\n\n        if (!bounds.width || !bounds.height) {\n          matrices.pop();\n          return;\n        }\n\n        prevOffset = param.offset;\n        itemOffset = param.offset = bounds.getTopLeft().floor();\n        mainCtx = ctx;\n        ctx = CanvasProvider.getContext(bounds.getSize().ceil().add(1).multiply(pixelRatio));\n        if (pixelRatio !== 1) ctx.scale(pixelRatio, pixelRatio);\n      }\n\n      ctx.save();\n      var strokeMatrix = parentStrokeMatrix ? parentStrokeMatrix.appended(matrix) : this._canScaleStroke && !this.getStrokeScaling(true) && viewMatrix,\n          clip = !direct && param.clipItem,\n          transform = !strokeMatrix || clip;\n\n      if (direct) {\n        ctx.globalAlpha = opacity;\n        if (nativeBlend) ctx.globalCompositeOperation = blendMode;\n      } else if (transform) {\n        ctx.translate(-itemOffset.x, -itemOffset.y);\n      }\n\n      if (transform) {\n        (direct ? matrix : viewMatrix).applyToContext(ctx);\n      }\n\n      if (clip) {\n        param.clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n\n      if (strokeMatrix) {\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n        var offset = param.offset;\n        if (offset) ctx.translate(-offset.x, -offset.y);\n      }\n\n      this._draw(ctx, param, viewMatrix, strokeMatrix);\n\n      ctx.restore();\n      matrices.pop();\n\n      if (param.clip && !param.dontFinish) {\n        ctx.clip(this.getFillRule());\n      }\n\n      if (!direct) {\n        BlendMode.process(blendMode, ctx, mainCtx, opacity, itemOffset.subtract(prevOffset).multiply(pixelRatio));\n        CanvasProvider.release(ctx);\n        param.offset = prevOffset;\n      }\n    },\n    _isUpdated: function _isUpdated(updateVersion) {\n      var parent = this._parent;\n      if (parent instanceof CompoundPath) return parent._isUpdated(updateVersion);\n      var updated = this._updateVersion === updateVersion;\n\n      if (!updated && parent && parent._visible && parent._isUpdated(updateVersion)) {\n        this._updateVersion = updateVersion;\n        updated = true;\n      }\n\n      return updated;\n    },\n    _drawSelection: function _drawSelection(ctx, matrix, size, selectionItems, updateVersion) {\n      var selection = this._selection,\n          itemSelected = selection & 1,\n          boundsSelected = selection & 2 || itemSelected && this._selectBounds,\n          positionSelected = selection & 4;\n      if (!this._drawSelected) itemSelected = false;\n\n      if ((itemSelected || boundsSelected || positionSelected) && this._isUpdated(updateVersion)) {\n        var layer,\n            color = this.getSelectedColor(true) || (layer = this.getLayer()) && layer.getSelectedColor(true),\n            mx = matrix.appended(this.getGlobalMatrix(true)),\n            half = size / 2;\n        ctx.strokeStyle = ctx.fillStyle = color ? color.toCanvasStyle(ctx) : '#009dec';\n        if (itemSelected) this._drawSelected(ctx, mx, selectionItems);\n\n        if (positionSelected) {\n          var pos = this.getPosition(true),\n              parent = this._parent,\n              point = parent ? parent.localToGlobal(pos) : pos,\n              x = point.x,\n              y = point.y;\n          ctx.beginPath();\n          ctx.arc(x, y, half, 0, Math.PI * 2, true);\n          ctx.stroke();\n          var deltas = [[0, -1], [1, 0], [0, 1], [-1, 0]],\n              start = half,\n              end = size + 1;\n\n          for (var i = 0; i < 4; i++) {\n            var delta = deltas[i],\n                dx = delta[0],\n                dy = delta[1];\n            ctx.moveTo(x + dx * start, y + dy * start);\n            ctx.lineTo(x + dx * end, y + dy * end);\n            ctx.stroke();\n          }\n        }\n\n        if (boundsSelected) {\n          var coords = mx._transformCorners(this.getInternalBounds());\n\n          ctx.beginPath();\n\n          for (var i = 0; i < 8; i++) {\n            ctx[!i ? 'moveTo' : 'lineTo'](coords[i], coords[++i]);\n          }\n\n          ctx.closePath();\n          ctx.stroke();\n\n          for (var i = 0; i < 8; i++) {\n            ctx.fillRect(coords[i] - half, coords[++i] - half, size, size);\n          }\n        }\n      }\n    },\n    _canComposite: function _canComposite() {\n      return false;\n    }\n  }, Base.each(['down', 'drag', 'up', 'move'], function (key) {\n    this['removeOn' + Base.capitalize(key)] = function () {\n      var hash = {};\n      hash[key] = true;\n      return this.removeOn(hash);\n    };\n  }, {\n    removeOn: function removeOn(obj) {\n      for (var name in obj) {\n        if (obj[name]) {\n          var key = 'mouse' + name,\n              project = this._project,\n              sets = project._removeSets = project._removeSets || {};\n          sets[key] = sets[key] || {};\n          sets[key][this._id] = this;\n        }\n      }\n\n      return this;\n    }\n  }), {\n    tween: function tween(from, to, options) {\n      if (!options) {\n        options = to;\n        to = from;\n        from = null;\n\n        if (!options) {\n          options = to;\n          to = null;\n        }\n      }\n\n      var easing = options && options.easing,\n          start = options && options.start,\n          duration = options != null && (typeof options === 'number' ? options : options.duration),\n          tween = new Tween(this, from, to, duration, easing, start);\n\n      function onFrame(event) {\n        tween._handleFrame(event.time * 1000);\n\n        if (!tween.running) {\n          this.off('frame', onFrame);\n        }\n      }\n\n      if (duration) {\n        this.on('frame', onFrame);\n      }\n\n      return tween;\n    },\n    tweenTo: function tweenTo(to, options) {\n      return this.tween(null, to, options);\n    },\n    tweenFrom: function tweenFrom(from, options) {\n      return this.tween(from, null, options);\n    }\n  });\n  var Group = Item.extend({\n    _class: 'Group',\n    _selectBounds: false,\n    _selectChildren: true,\n    _serializeFields: {\n      children: []\n    },\n    initialize: function Group(arg) {\n      this._children = [];\n      this._namedChildren = {};\n      if (!this._initialize(arg)) this.addChildren(Array.isArray(arg) ? arg : arguments);\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n\n      if (flags & 2050) {\n        this._clipItem = undefined;\n      }\n    },\n    _getClipItem: function _getClipItem() {\n      var clipItem = this._clipItem;\n\n      if (clipItem === undefined) {\n        clipItem = null;\n        var children = this._children;\n\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (children[i]._clipMask) {\n            clipItem = children[i];\n            break;\n          }\n        }\n\n        this._clipItem = clipItem;\n      }\n\n      return clipItem;\n    },\n    isClipped: function isClipped() {\n      return !!this._getClipItem();\n    },\n    setClipped: function setClipped(clipped) {\n      var child = this.getFirstChild();\n      if (child) child.setClipMask(clipped);\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var clipItem = this._getClipItem();\n\n      return clipItem ? clipItem._getCachedBounds(clipItem._matrix.prepended(matrix), Base.set({}, options, {\n        stroke: false\n      })) : _getBounds.base.call(this, matrix, options);\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      var clipItem = this._getClipItem();\n\n      return (!clipItem || clipItem.contains(point)) && _hitTestChildren.base.call(this, point, options, viewMatrix, clipItem);\n    },\n    _draw: function _draw(ctx, param) {\n      var clip = param.clip,\n          clipItem = !clip && this._getClipItem();\n\n      param = param.extend({\n        clipItem: clipItem,\n        clip: false\n      });\n\n      if (clip) {\n        ctx.beginPath();\n        param.dontStart = param.dontFinish = true;\n      } else if (clipItem) {\n        clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var item = children[i];\n        if (item !== clipItem) item.draw(ctx, param);\n      }\n    }\n  });\n  var Layer = Group.extend({\n    _class: 'Layer',\n    initialize: function Layer() {\n      Group.apply(this, arguments);\n    },\n    _getOwner: function _getOwner() {\n      return this._parent || this._index != null && this._project;\n    },\n    isInserted: function isInserted() {\n      return this._parent ? isInserted.base.call(this) : this._index != null;\n    },\n    activate: function activate() {\n      this._project._activeLayer = this;\n    },\n    _hitTestSelf: function _hitTestSelf() {}\n  });\n  var Shape = Item.extend({\n    _class: 'Shape',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _canScaleStroke: true,\n    _serializeFields: {\n      type: null,\n      size: null,\n      radius: null\n    },\n    initialize: function Shape(props, point) {\n      this._initialize(props, point);\n    },\n    _equals: function _equals(item) {\n      return this._type === item._type && this._size.equals(item._size) && Base.equals(this._radius, item._radius);\n    },\n    copyContent: function copyContent(source) {\n      this.setType(source._type);\n      this.setSize(source._size);\n      this.setRadius(source._radius);\n    },\n    getType: function getType() {\n      return this._type;\n    },\n    setType: function setType(type) {\n      this._type = type;\n    },\n    getShape: '#getType',\n    setShape: '#setType',\n    getSize: function getSize() {\n      var size = this._size;\n      return new LinkedSize(size.width, size.height, this, 'setSize');\n    },\n    setSize: function setSize() {\n      var size = Size.read(arguments);\n\n      if (!this._size) {\n        this._size = size.clone();\n      } else if (!this._size.equals(size)) {\n        var type = this._type,\n            width = size.width,\n            height = size.height;\n\n        if (type === 'rectangle') {\n          this._radius.set(Size.min(this._radius, size.divide(2).abs()));\n        } else if (type === 'circle') {\n          width = height = (width + height) / 2;\n          this._radius = width / 2;\n        } else if (type === 'ellipse') {\n          this._radius._set(width / 2, height / 2);\n        }\n\n        this._size._set(width, height);\n\n        this._changed(9);\n      }\n    },\n    getRadius: function getRadius() {\n      var rad = this._radius;\n      return this._type === 'circle' ? rad : new LinkedSize(rad.width, rad.height, this, 'setRadius');\n    },\n    setRadius: function setRadius(radius) {\n      var type = this._type;\n\n      if (type === 'circle') {\n        if (radius === this._radius) return;\n        var size = radius * 2;\n        this._radius = radius;\n\n        this._size._set(size, size);\n      } else {\n        radius = Size.read(arguments);\n\n        if (!this._radius) {\n          this._radius = radius.clone();\n        } else {\n          if (this._radius.equals(radius)) return;\n\n          this._radius.set(radius);\n\n          if (type === 'rectangle') {\n            var size = Size.max(this._size, radius.multiply(2));\n\n            this._size.set(size);\n          } else if (type === 'ellipse') {\n            this._size._set(radius.width * 2, radius.height * 2);\n          }\n        }\n      }\n\n      this._changed(9);\n    },\n    isEmpty: function isEmpty() {\n      return false;\n    },\n    toPath: function toPath(insert) {\n      var path = new Path[Base.capitalize(this._type)]({\n        center: new Point(),\n        size: this._size,\n        radius: this._radius,\n        insert: false\n      });\n      path.copyAttributes(this);\n      if (paper.settings.applyMatrix) path.setApplyMatrix(true);\n      if (insert === undefined || insert) path.insertAbove(this);\n      return path;\n    },\n    toShape: '#clone',\n    _asPathItem: function _asPathItem() {\n      return this.toPath(false);\n    },\n    _draw: function _draw(ctx, param, viewMatrix, strokeMatrix) {\n      var style = this._style,\n          hasFill = style.hasFill(),\n          hasStroke = style.hasStroke(),\n          dontPaint = param.dontFinish || param.clip,\n          untransformed = !strokeMatrix;\n\n      if (hasFill || hasStroke || dontPaint) {\n        var type = this._type,\n            radius = this._radius,\n            isCircle = type === 'circle';\n        if (!param.dontStart) ctx.beginPath();\n\n        if (untransformed && isCircle) {\n          ctx.arc(0, 0, radius, 0, Math.PI * 2, true);\n        } else {\n          var rx = isCircle ? radius : radius.width,\n              ry = isCircle ? radius : radius.height,\n              size = this._size,\n              width = size.width,\n              height = size.height;\n\n          if (untransformed && type === 'rectangle' && rx === 0 && ry === 0) {\n            ctx.rect(-width / 2, -height / 2, width, height);\n          } else {\n            var x = width / 2,\n                y = height / 2,\n                kappa = 1 - 0.5522847498307936,\n                cx = rx * kappa,\n                cy = ry * kappa,\n                c = [-x, -y + ry, -x, -y + cy, -x + cx, -y, -x + rx, -y, x - rx, -y, x - cx, -y, x, -y + cy, x, -y + ry, x, y - ry, x, y - cy, x - cx, y, x - rx, y, -x + rx, y, -x + cx, y, -x, y - cy, -x, y - ry];\n            if (strokeMatrix) strokeMatrix.transform(c, c, 32);\n            ctx.moveTo(c[0], c[1]);\n            ctx.bezierCurveTo(c[2], c[3], c[4], c[5], c[6], c[7]);\n            if (x !== rx) ctx.lineTo(c[8], c[9]);\n            ctx.bezierCurveTo(c[10], c[11], c[12], c[13], c[14], c[15]);\n            if (y !== ry) ctx.lineTo(c[16], c[17]);\n            ctx.bezierCurveTo(c[18], c[19], c[20], c[21], c[22], c[23]);\n            if (x !== rx) ctx.lineTo(c[24], c[25]);\n            ctx.bezierCurveTo(c[26], c[27], c[28], c[29], c[30], c[31]);\n          }\n        }\n\n        ctx.closePath();\n      }\n\n      if (!dontPaint && (hasFill || hasStroke)) {\n        this._setStyles(ctx, param, viewMatrix);\n\n        if (hasFill) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n\n        if (hasStroke) ctx.stroke();\n      }\n    },\n    _canComposite: function _canComposite() {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var rect = new _Rectangle(this._size).setCenter(0, 0),\n          style = this._style,\n          strokeWidth = options.stroke && style.hasStroke() && style.getStrokeWidth();\n      if (matrix) rect = matrix._transformBounds(rect);\n      return strokeWidth ? rect.expand(Path._getStrokePadding(strokeWidth, this._getStrokeMatrix(matrix, options))) : rect;\n    }\n  }, new function () {\n    function getCornerCenter(that, point, expand) {\n      var radius = that._radius;\n\n      if (!radius.isZero()) {\n        var halfSize = that._size.divide(2);\n\n        for (var q = 1; q <= 4; q++) {\n          var dir = new Point(q > 1 && q < 4 ? -1 : 1, q > 2 ? -1 : 1),\n              corner = dir.multiply(halfSize),\n              center = corner.subtract(dir.multiply(radius)),\n              rect = new _Rectangle(expand ? corner.add(dir.multiply(expand)) : corner, center);\n          if (rect.contains(point)) return {\n            point: center,\n            quadrant: q\n          };\n        }\n      }\n    }\n\n    function isOnEllipseStroke(point, radius, padding, quadrant) {\n      var vector = point.divide(radius);\n      return (!quadrant || vector.isInQuadrant(quadrant)) && vector.subtract(vector.normalize()).multiply(radius).divide(padding).length <= 1;\n    }\n\n    return {\n      _contains: function _contains(point) {\n        if (this._type === 'rectangle') {\n          var center = getCornerCenter(this, point);\n          return center ? point.subtract(center.point).divide(this._radius).getLength() <= 1 : _contains.base.call(this, point);\n        } else {\n          return point.divide(this.size).getLength() <= 0.5;\n        }\n      },\n      _hitTestSelf: function _hitTestSelf(point, options, viewMatrix, strokeMatrix) {\n        var hit = false,\n            style = this._style,\n            hitStroke = options.stroke && style.hasStroke(),\n            hitFill = options.fill && style.hasFill();\n\n        if (hitStroke || hitFill) {\n          var type = this._type,\n              radius = this._radius,\n              strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : 0,\n              strokePadding = options._tolerancePadding.add(Path._getStrokePadding(strokeRadius, !style.getStrokeScaling() && strokeMatrix));\n\n          if (type === 'rectangle') {\n            var padding = strokePadding.multiply(2),\n                center = getCornerCenter(this, point, padding);\n\n            if (center) {\n              hit = isOnEllipseStroke(point.subtract(center.point), radius, strokePadding, center.quadrant);\n            } else {\n              var rect = new _Rectangle(this._size).setCenter(0, 0),\n                  outer = rect.expand(padding),\n                  inner = rect.expand(padding.negate());\n              hit = outer._containsPoint(point) && !inner._containsPoint(point);\n            }\n          } else {\n            hit = isOnEllipseStroke(point, radius, strokePadding);\n          }\n        }\n\n        return hit ? new HitResult(hitStroke ? 'stroke' : 'fill', this) : _hitTestSelf.base.apply(this, arguments);\n      }\n    };\n  }(), {\n    statics: new function () {\n      function createShape(type, point, size, radius, args) {\n        var item = Base.create(Shape.prototype);\n        item._type = type;\n        item._size = size;\n        item._radius = radius;\n\n        item._initialize(Base.getNamed(args), point);\n\n        return item;\n      }\n\n      return {\n        Circle: function Circle() {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              radius = Base.readNamed(args, 'radius');\n          return createShape('circle', center, new Size(radius * 2), radius, args);\n        },\n        Rectangle: function Rectangle() {\n          var args = arguments,\n              rect = _Rectangle.readNamed(args, 'rectangle'),\n              radius = Size.min(Size.readNamed(args, 'radius'), rect.getSize(true).divide(2));\n\n          return createShape('rectangle', rect.getCenter(true), rect.getSize(true), radius, args);\n        },\n        Ellipse: function Ellipse() {\n          var args = arguments,\n              ellipse = Shape._readEllipse(args),\n              radius = ellipse.radius;\n\n          return createShape('ellipse', ellipse.center, radius.multiply(2), radius, args);\n        },\n        _readEllipse: function _readEllipse(args) {\n          var center, radius;\n\n          if (Base.hasNamed(args, 'radius')) {\n            center = Point.readNamed(args, 'center');\n            radius = Size.readNamed(args, 'radius');\n          } else {\n            var rect = _Rectangle.readNamed(args, 'rectangle');\n\n            center = rect.getCenter(true);\n            radius = rect.getSize(true).divide(2);\n          }\n\n          return {\n            center: center,\n            radius: radius\n          };\n        }\n      };\n    }()\n  });\n  var Raster = Item.extend({\n    _class: 'Raster',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    _serializeFields: {\n      crossOrigin: null,\n      source: null\n    },\n    _prioritize: ['crossOrigin'],\n    _smoothing: true,\n    beans: true,\n    initialize: function Raster(source, position) {\n      if (!this._initialize(source, position !== undefined && Point.read(arguments))) {\n        var image,\n            type = typeof source,\n            object = type === 'string' ? document.getElementById(source) : type === 'object' ? source : null;\n\n        if (object && object !== Item.NO_INSERT) {\n          if (object.getContent || object.naturalHeight != null) {\n            image = object;\n          } else if (object) {\n            var size = Size.read(arguments);\n\n            if (!size.isZero()) {\n              image = CanvasProvider.getCanvas(size);\n            }\n          }\n        }\n\n        if (image) {\n          this.setImage(image);\n        } else {\n          this.setSource(source);\n        }\n      }\n\n      if (!this._size) {\n        this._size = new Size();\n        this._loaded = false;\n      }\n    },\n    _equals: function _equals(item) {\n      return this.getSource() === item.getSource();\n    },\n    copyContent: function copyContent(source) {\n      var image = source._image,\n          canvas = source._canvas;\n\n      if (image) {\n        this._setImage(image);\n      } else if (canvas) {\n        var copyCanvas = CanvasProvider.getCanvas(source._size);\n        copyCanvas.getContext('2d').drawImage(canvas, 0, 0);\n\n        this._setImage(copyCanvas);\n      }\n\n      this._crossOrigin = source._crossOrigin;\n    },\n    getSize: function getSize() {\n      var size = this._size;\n      return new LinkedSize(size ? size.width : 0, size ? size.height : 0, this, 'setSize');\n    },\n    setSize: function setSize() {\n      var size = Size.read(arguments);\n\n      if (!size.equals(this._size)) {\n        if (size.width > 0 && size.height > 0) {\n          var element = this.getElement();\n\n          this._setImage(CanvasProvider.getCanvas(size));\n\n          if (element) this.getContext(true).drawImage(element, 0, 0, size.width, size.height);\n        } else {\n          if (this._canvas) CanvasProvider.release(this._canvas);\n          this._size = size.clone();\n        }\n      }\n    },\n    getWidth: function getWidth() {\n      return this._size ? this._size.width : 0;\n    },\n    setWidth: function setWidth(width) {\n      this.setSize(width, this.getHeight());\n    },\n    getHeight: function getHeight() {\n      return this._size ? this._size.height : 0;\n    },\n    setHeight: function setHeight(height) {\n      this.setSize(this.getWidth(), height);\n    },\n    getLoaded: function getLoaded() {\n      return this._loaded;\n    },\n    isEmpty: function isEmpty() {\n      var size = this._size;\n      return !size || size.width === 0 && size.height === 0;\n    },\n    getResolution: function getResolution() {\n      var matrix = this._matrix,\n          orig = new Point(0, 0).transform(matrix),\n          u = new Point(1, 0).transform(matrix).subtract(orig),\n          v = new Point(0, 1).transform(matrix).subtract(orig);\n      return new Size(72 / u.getLength(), 72 / v.getLength());\n    },\n    getPpi: '#getResolution',\n    getImage: function getImage() {\n      return this._image;\n    },\n    setImage: function setImage(image) {\n      var that = this;\n\n      function emit(event) {\n        var view = that.getView(),\n            type = event && event.type || 'load';\n\n        if (view && that.responds(type)) {\n          paper = view._scope;\n          that.emit(type, new Event(event));\n        }\n      }\n\n      this._setImage(image);\n\n      if (this._loaded) {\n        setTimeout(emit, 0);\n      } else if (image) {\n        DomEvent.add(image, {\n          load: function load(event) {\n            that._setImage(image);\n\n            emit(event);\n          },\n          error: emit\n        });\n      }\n    },\n    _setImage: function _setImage(image) {\n      if (this._canvas) CanvasProvider.release(this._canvas);\n\n      if (image && image.getContext) {\n        this._image = null;\n        this._canvas = image;\n        this._loaded = true;\n      } else {\n        this._image = image;\n        this._canvas = null;\n        this._loaded = !!(image && image.src && image.complete);\n      }\n\n      this._size = new Size(image ? image.naturalWidth || image.width : 0, image ? image.naturalHeight || image.height : 0);\n      this._context = null;\n\n      this._changed(1033);\n    },\n    getCanvas: function getCanvas() {\n      if (!this._canvas) {\n        var ctx = CanvasProvider.getContext(this._size);\n\n        try {\n          if (this._image) ctx.drawImage(this._image, 0, 0);\n          this._canvas = ctx.canvas;\n        } catch (e) {\n          CanvasProvider.release(ctx);\n        }\n      }\n\n      return this._canvas;\n    },\n    setCanvas: '#setImage',\n    getContext: function getContext(_change) {\n      if (!this._context) this._context = this.getCanvas().getContext('2d');\n\n      if (_change) {\n        this._image = null;\n\n        this._changed(1025);\n      }\n\n      return this._context;\n    },\n    setContext: function setContext(context) {\n      this._context = context;\n    },\n    getSource: function getSource() {\n      var image = this._image;\n      return image && image.src || this.toDataURL();\n    },\n    setSource: function setSource(src) {\n      var image = new self.Image(),\n          crossOrigin = this._crossOrigin;\n      if (crossOrigin) image.crossOrigin = crossOrigin;\n      if (src) image.src = src;\n      this.setImage(image);\n    },\n    getCrossOrigin: function getCrossOrigin() {\n      var image = this._image;\n      return image && image.crossOrigin || this._crossOrigin || '';\n    },\n    setCrossOrigin: function setCrossOrigin(crossOrigin) {\n      this._crossOrigin = crossOrigin;\n      var image = this._image;\n      if (image) image.crossOrigin = crossOrigin;\n    },\n    getSmoothing: function getSmoothing() {\n      return this._smoothing;\n    },\n    setSmoothing: function setSmoothing(smoothing) {\n      this._smoothing = smoothing;\n\n      this._changed(257);\n    },\n    getElement: function getElement() {\n      return this._canvas || this._loaded && this._image;\n    }\n  }, {\n    beans: false,\n    getSubCanvas: function getSubCanvas() {\n      var rect = _Rectangle.read(arguments),\n          ctx = CanvasProvider.getContext(rect.getSize());\n\n      ctx.drawImage(this.getCanvas(), rect.x, rect.y, rect.width, rect.height, 0, 0, rect.width, rect.height);\n      return ctx.canvas;\n    },\n    getSubRaster: function getSubRaster() {\n      var rect = _Rectangle.read(arguments),\n          raster = new Raster(Item.NO_INSERT);\n\n      raster._setImage(this.getSubCanvas(rect));\n\n      raster.translate(rect.getCenter().subtract(this.getSize().divide(2)));\n\n      raster._matrix.prepend(this._matrix);\n\n      raster.insertAbove(this);\n      return raster;\n    },\n    toDataURL: function toDataURL() {\n      var image = this._image,\n          src = image && image.src;\n      if (/^data:/.test(src)) return src;\n      var canvas = this.getCanvas();\n      return canvas ? canvas.toDataURL.apply(canvas, arguments) : null;\n    },\n    drawImage: function drawImage(image) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).drawImage(image, point.x, point.y);\n    },\n    getAverageColor: function getAverageColor(object) {\n      var bounds, path;\n\n      if (!object) {\n        bounds = this.getBounds();\n      } else if (object instanceof PathItem) {\n        path = object;\n        bounds = object.getBounds();\n      } else if (typeof object === 'object') {\n        if ('width' in object) {\n          bounds = new _Rectangle(object);\n        } else if ('x' in object) {\n          bounds = new _Rectangle(object.x - 0.5, object.y - 0.5, 1, 1);\n        }\n      }\n\n      if (!bounds) return null;\n      var sampleSize = 32,\n          width = Math.min(bounds.width, sampleSize),\n          height = Math.min(bounds.height, sampleSize);\n      var ctx = Raster._sampleContext;\n\n      if (!ctx) {\n        ctx = Raster._sampleContext = CanvasProvider.getContext(new Size(sampleSize));\n      } else {\n        ctx.clearRect(0, 0, sampleSize + 1, sampleSize + 1);\n      }\n\n      ctx.save();\n      var matrix = new Matrix().scale(width / bounds.width, height / bounds.height).translate(-bounds.x, -bounds.y);\n      matrix.applyToContext(ctx);\n      if (path) path.draw(ctx, new Base({\n        clip: true,\n        matrices: [matrix]\n      }));\n\n      this._matrix.applyToContext(ctx);\n\n      var element = this.getElement(),\n          size = this._size;\n      if (element) ctx.drawImage(element, -size.width / 2, -size.height / 2);\n      ctx.restore();\n      var pixels = ctx.getImageData(0.5, 0.5, Math.ceil(width), Math.ceil(height)).data,\n          channels = [0, 0, 0],\n          total = 0;\n\n      for (var i = 0, l = pixels.length; i < l; i += 4) {\n        var alpha = pixels[i + 3];\n        total += alpha;\n        alpha /= 255;\n        channels[0] += pixels[i] * alpha;\n        channels[1] += pixels[i + 1] * alpha;\n        channels[2] += pixels[i + 2] * alpha;\n      }\n\n      for (var i = 0; i < 3; i++) {\n        channels[i] /= total;\n      }\n\n      return total ? Color.read(channels) : null;\n    },\n    getPixel: function getPixel() {\n      var point = Point.read(arguments);\n      var data = this.getContext().getImageData(point.x, point.y, 1, 1).data;\n      return new Color('rgb', [data[0] / 255, data[1] / 255, data[2] / 255], data[3] / 255);\n    },\n    setPixel: function setPixel() {\n      var args = arguments,\n          point = Point.read(args),\n          color = Color.read(args),\n          components = color._convert('rgb'),\n          alpha = color._alpha,\n          ctx = this.getContext(true),\n          imageData = ctx.createImageData(1, 1),\n          data = imageData.data;\n\n      data[0] = components[0] * 255;\n      data[1] = components[1] * 255;\n      data[2] = components[2] * 255;\n      data[3] = alpha != null ? alpha * 255 : 255;\n      ctx.putImageData(imageData, point.x, point.y);\n    },\n    clear: function clear() {\n      var size = this._size;\n      this.getContext(true).clearRect(0, 0, size.width + 1, size.height + 1);\n    },\n    createImageData: function createImageData() {\n      var size = Size.read(arguments);\n      return this.getContext().createImageData(size.width, size.height);\n    },\n    getImageData: function getImageData() {\n      var rect = _Rectangle.read(arguments);\n\n      if (rect.isEmpty()) rect = new _Rectangle(this._size);\n      return this.getContext().getImageData(rect.x, rect.y, rect.width, rect.height);\n    },\n    setImageData: function setImageData(data) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).putImageData(data, point.x, point.y);\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var rect = new _Rectangle(this._size).setCenter(0, 0);\n      return matrix ? matrix._transformBounds(rect) : rect;\n    },\n    _hitTestSelf: function _hitTestSelf(point) {\n      if (this._contains(point)) {\n        var that = this;\n        return new HitResult('pixel', that, {\n          offset: point.add(that._size.divide(2)).round(),\n          color: {\n            get: function get() {\n              return that.getPixel(this.offset);\n            }\n          }\n        });\n      }\n    },\n    _draw: function _draw(ctx, param, viewMatrix) {\n      var element = this.getElement();\n\n      if (element && element.width > 0 && element.height > 0) {\n        ctx.globalAlpha = this._opacity;\n\n        this._setStyles(ctx, param, viewMatrix);\n\n        DomElement.setPrefixed(ctx, 'imageSmoothingEnabled', this._smoothing);\n        ctx.drawImage(element, -this._size.width / 2, -this._size.height / 2);\n      }\n    },\n    _canComposite: function _canComposite() {\n      return true;\n    }\n  });\n  var SymbolItem = Item.extend({\n    _class: 'SymbolItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: true\n    },\n    _serializeFields: {\n      symbol: null\n    },\n    initialize: function SymbolItem(arg0, arg1) {\n      if (!this._initialize(arg0, arg1 !== undefined && Point.read(arguments, 1))) this.setDefinition(arg0 instanceof SymbolDefinition ? arg0 : new SymbolDefinition(arg0));\n    },\n    _equals: function _equals(item) {\n      return this._definition === item._definition;\n    },\n    copyContent: function copyContent(source) {\n      this.setDefinition(source._definition);\n    },\n    getDefinition: function getDefinition() {\n      return this._definition;\n    },\n    setDefinition: function setDefinition(definition) {\n      this._definition = definition;\n\n      this._changed(9);\n    },\n    getSymbol: '#getDefinition',\n    setSymbol: '#setDefinition',\n    isEmpty: function isEmpty() {\n      return this._definition._item.isEmpty();\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var item = this._definition._item;\n      return item._getCachedBounds(item._matrix.prepended(matrix), options);\n    },\n    _hitTestSelf: function _hitTestSelf(point, options, viewMatrix) {\n      var opts = options.extend({\n        all: false\n      });\n\n      var res = this._definition._item._hitTest(point, opts, viewMatrix);\n\n      if (res) res.item = this;\n      return res;\n    },\n    _draw: function _draw(ctx, param) {\n      this._definition._item.draw(ctx, param);\n    }\n  });\n  var SymbolDefinition = Base.extend({\n    _class: 'SymbolDefinition',\n    initialize: function SymbolDefinition(item, dontCenter) {\n      this._id = UID.get();\n      this.project = paper.project;\n      if (item) this.setItem(item, dontCenter);\n    },\n    _serialize: function _serialize(options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._class, this._item], options, false, dictionary);\n      });\n    },\n    _changed: function _changed(flags) {\n      if (flags & 8) Item._clearBoundsCache(this);\n      if (flags & 1) this.project._changed(flags);\n    },\n    getItem: function getItem() {\n      return this._item;\n    },\n    setItem: function setItem(item, _dontCenter) {\n      if (item._symbol) item = item.clone();\n      if (this._item) this._item._symbol = null;\n      this._item = item;\n      item.remove();\n      item.setSelected(false);\n      if (!_dontCenter) item.setPosition(new Point());\n      item._symbol = this;\n\n      this._changed(9);\n    },\n    getDefinition: '#getItem',\n    setDefinition: '#setItem',\n    place: function place(position) {\n      return new SymbolItem(this, position);\n    },\n    clone: function clone() {\n      return new SymbolDefinition(this._item.clone(false));\n    },\n    equals: function equals(symbol) {\n      return symbol === this || symbol && this._item.equals(symbol._item) || false;\n    }\n  });\n  var HitResult = Base.extend({\n    _class: 'HitResult',\n    initialize: function HitResult(type, item, values) {\n      this.type = type;\n      this.item = item;\n      if (values) this.inject(values);\n    },\n    statics: {\n      getOptions: function getOptions(args) {\n        var options = args && Base.read(args);\n        return new Base({\n          type: null,\n          tolerance: paper.settings.hitTolerance,\n          fill: !options,\n          stroke: !options,\n          segments: !options,\n          handles: false,\n          ends: false,\n          position: false,\n          center: false,\n          bounds: false,\n          guides: false,\n          selected: false\n        }, options);\n      }\n    }\n  });\n  var Segment = Base.extend({\n    _class: 'Segment',\n    beans: true,\n    _selection: 0,\n    initialize: function Segment(arg0, arg1, arg2, arg3, arg4, arg5) {\n      var count = arguments.length,\n          point,\n          handleIn,\n          handleOut,\n          selection;\n\n      if (count > 0) {\n        if (arg0 == null || typeof arg0 === 'object') {\n          if (count === 1 && arg0 && 'point' in arg0) {\n            point = arg0.point;\n            handleIn = arg0.handleIn;\n            handleOut = arg0.handleOut;\n            selection = arg0.selection;\n          } else {\n            point = arg0;\n            handleIn = arg1;\n            handleOut = arg2;\n            selection = arg3;\n          }\n        } else {\n          point = [arg0, arg1];\n          handleIn = arg2 !== undefined ? [arg2, arg3] : null;\n          handleOut = arg4 !== undefined ? [arg4, arg5] : null;\n        }\n      }\n\n      new SegmentPoint(point, this, '_point');\n      new SegmentPoint(handleIn, this, '_handleIn');\n      new SegmentPoint(handleOut, this, '_handleOut');\n      if (selection) this.setSelection(selection);\n    },\n    _serialize: function _serialize(options, dictionary) {\n      var point = this._point,\n          selection = this._selection,\n          obj = selection || this.hasHandles() ? [point, this._handleIn, this._handleOut] : point;\n      if (selection) obj.push(selection);\n      return Base.serialize(obj, options, true, dictionary);\n    },\n    _changed: function _changed(point) {\n      var path = this._path;\n      if (!path) return;\n      var curves = path._curves,\n          index = this._index,\n          curve;\n\n      if (curves) {\n        if ((!point || point === this._point || point === this._handleIn) && (curve = index > 0 ? curves[index - 1] : path._closed ? curves[curves.length - 1] : null)) curve._changed();\n        if ((!point || point === this._point || point === this._handleOut) && (curve = curves[index])) curve._changed();\n      }\n\n      path._changed(41);\n    },\n    getPoint: function getPoint() {\n      return this._point;\n    },\n    setPoint: function setPoint() {\n      this._point.set(Point.read(arguments));\n    },\n    getHandleIn: function getHandleIn() {\n      return this._handleIn;\n    },\n    setHandleIn: function setHandleIn() {\n      this._handleIn.set(Point.read(arguments));\n    },\n    getHandleOut: function getHandleOut() {\n      return this._handleOut;\n    },\n    setHandleOut: function setHandleOut() {\n      this._handleOut.set(Point.read(arguments));\n    },\n    hasHandles: function hasHandles() {\n      return !this._handleIn.isZero() || !this._handleOut.isZero();\n    },\n    isSmooth: function isSmooth() {\n      var handleIn = this._handleIn,\n          handleOut = this._handleOut;\n      return !handleIn.isZero() && !handleOut.isZero() && handleIn.isCollinear(handleOut);\n    },\n    clearHandles: function clearHandles() {\n      this._handleIn._set(0, 0);\n\n      this._handleOut._set(0, 0);\n    },\n    getSelection: function getSelection() {\n      return this._selection;\n    },\n    setSelection: function setSelection(selection) {\n      var oldSelection = this._selection,\n          path = this._path;\n      this._selection = selection = selection || 0;\n\n      if (path && selection !== oldSelection) {\n        path._updateSelection(this, oldSelection, selection);\n\n        path._changed(257);\n      }\n    },\n    _changeSelection: function _changeSelection(flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function isSelected() {\n      return !!(this._selection & 7);\n    },\n    setSelected: function setSelected(selected) {\n      this._changeSelection(7, selected);\n    },\n    getIndex: function getIndex() {\n      return this._index !== undefined ? this._index : null;\n    },\n    getPath: function getPath() {\n      return this._path || null;\n    },\n    getCurve: function getCurve() {\n      var path = this._path,\n          index = this._index;\n\n      if (path) {\n        if (index > 0 && !path._closed && index === path._segments.length - 1) index--;\n        return path.getCurves()[index] || null;\n      }\n\n      return null;\n    },\n    getLocation: function getLocation() {\n      var curve = this.getCurve();\n      return curve ? new CurveLocation(curve, this === curve._segment1 ? 0 : 1) : null;\n    },\n    getNext: function getNext() {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index + 1] || this._path._closed && segments[0]) || null;\n    },\n    smooth: function smooth(options, _first, _last) {\n      var opts = options || {},\n          type = opts.type,\n          factor = opts.factor,\n          prev = this.getPrevious(),\n          next = this.getNext(),\n          p0 = (prev || this)._point,\n          p1 = this._point,\n          p2 = (next || this)._point,\n          d1 = p0.getDistance(p1),\n          d2 = p1.getDistance(p2);\n\n      if (!type || type === 'catmull-rom') {\n        var a = factor === undefined ? 0.5 : factor,\n            d1_a = Math.pow(d1, a),\n            d1_2a = d1_a * d1_a,\n            d2_a = Math.pow(d2, a),\n            d2_2a = d2_a * d2_a;\n\n        if (!_first && prev) {\n          var A = 2 * d2_2a + 3 * d2_a * d1_a + d1_2a,\n              N = 3 * d2_a * (d2_a + d1_a);\n          this.setHandleIn(N !== 0 ? new Point((d2_2a * p0._x + A * p1._x - d1_2a * p2._x) / N - p1._x, (d2_2a * p0._y + A * p1._y - d1_2a * p2._y) / N - p1._y) : new Point());\n        }\n\n        if (!_last && next) {\n          var A = 2 * d1_2a + 3 * d1_a * d2_a + d2_2a,\n              N = 3 * d1_a * (d1_a + d2_a);\n          this.setHandleOut(N !== 0 ? new Point((d1_2a * p2._x + A * p1._x - d2_2a * p0._x) / N - p1._x, (d1_2a * p2._y + A * p1._y - d2_2a * p0._y) / N - p1._y) : new Point());\n        }\n      } else if (type === 'geometric') {\n        if (prev && next) {\n          var vector = p0.subtract(p2),\n              t = factor === undefined ? 0.4 : factor,\n              k = t * d1 / (d1 + d2);\n          if (!_first) this.setHandleIn(vector.multiply(k));\n          if (!_last) this.setHandleOut(vector.multiply(k - t));\n        }\n      } else {\n        throw new Error('Smoothing method \\'' + type + '\\' not supported.');\n      }\n    },\n    getPrevious: function getPrevious() {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index - 1] || this._path._closed && segments[segments.length - 1]) || null;\n    },\n    isFirst: function isFirst() {\n      return !this._index;\n    },\n    isLast: function isLast() {\n      var path = this._path;\n      return path && this._index === path._segments.length - 1 || false;\n    },\n    reverse: function reverse() {\n      var handleIn = this._handleIn,\n          handleOut = this._handleOut,\n          tmp = handleIn.clone();\n      handleIn.set(handleOut);\n      handleOut.set(tmp);\n    },\n    reversed: function reversed() {\n      return new Segment(this._point, this._handleOut, this._handleIn);\n    },\n    remove: function remove() {\n      return this._path ? !!this._path.removeSegment(this._index) : false;\n    },\n    clone: function clone() {\n      return new Segment(this._point, this._handleIn, this._handleOut);\n    },\n    equals: function equals(segment) {\n      return segment === this || segment && this._class === segment._class && this._point.equals(segment._point) && this._handleIn.equals(segment._handleIn) && this._handleOut.equals(segment._handleOut) || false;\n    },\n    toString: function toString() {\n      var parts = ['point: ' + this._point];\n      if (!this._handleIn.isZero()) parts.push('handleIn: ' + this._handleIn);\n      if (!this._handleOut.isZero()) parts.push('handleOut: ' + this._handleOut);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    transform: function transform(matrix) {\n      this._transformCoordinates(matrix, new Array(6), true);\n\n      this._changed();\n    },\n    interpolate: function interpolate(from, to, factor) {\n      var u = 1 - factor,\n          v = factor,\n          point1 = from._point,\n          point2 = to._point,\n          handleIn1 = from._handleIn,\n          handleIn2 = to._handleIn,\n          handleOut2 = to._handleOut,\n          handleOut1 = from._handleOut;\n\n      this._point._set(u * point1._x + v * point2._x, u * point1._y + v * point2._y, true);\n\n      this._handleIn._set(u * handleIn1._x + v * handleIn2._x, u * handleIn1._y + v * handleIn2._y, true);\n\n      this._handleOut._set(u * handleOut1._x + v * handleOut2._x, u * handleOut1._y + v * handleOut2._y, true);\n\n      this._changed();\n    },\n    _transformCoordinates: function _transformCoordinates(matrix, coords, change) {\n      var point = this._point,\n          handleIn = !change || !this._handleIn.isZero() ? this._handleIn : null,\n          handleOut = !change || !this._handleOut.isZero() ? this._handleOut : null,\n          x = point._x,\n          y = point._y,\n          i = 2;\n      coords[0] = x;\n      coords[1] = y;\n\n      if (handleIn) {\n        coords[i++] = handleIn._x + x;\n        coords[i++] = handleIn._y + y;\n      }\n\n      if (handleOut) {\n        coords[i++] = handleOut._x + x;\n        coords[i++] = handleOut._y + y;\n      }\n\n      if (matrix) {\n        matrix._transformCoordinates(coords, coords, i / 2);\n\n        x = coords[0];\n        y = coords[1];\n\n        if (change) {\n          point._x = x;\n          point._y = y;\n          i = 2;\n\n          if (handleIn) {\n            handleIn._x = coords[i++] - x;\n            handleIn._y = coords[i++] - y;\n          }\n\n          if (handleOut) {\n            handleOut._x = coords[i++] - x;\n            handleOut._y = coords[i++] - y;\n          }\n        } else {\n          if (!handleIn) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n\n          if (!handleOut) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n        }\n      }\n\n      return coords;\n    }\n  });\n  var SegmentPoint = Point.extend({\n    initialize: function SegmentPoint(point, owner, key) {\n      var x, y, selected;\n\n      if (!point) {\n        x = y = 0;\n      } else if ((x = point[0]) !== undefined) {\n        y = point[1];\n      } else {\n        var pt = point;\n\n        if ((x = pt.x) === undefined) {\n          pt = Point.read(arguments);\n          x = pt.x;\n        }\n\n        y = pt.y;\n        selected = pt.selected;\n      }\n\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      owner[key] = this;\n      if (selected) this.setSelected(true);\n    },\n    _set: function _set(x, y) {\n      this._x = x;\n      this._y = y;\n\n      this._owner._changed(this);\n\n      return this;\n    },\n    getX: function getX() {\n      return this._x;\n    },\n    setX: function setX(x) {\n      this._x = x;\n\n      this._owner._changed(this);\n    },\n    getY: function getY() {\n      return this._y;\n    },\n    setY: function setY(y) {\n      this._y = y;\n\n      this._owner._changed(this);\n    },\n    isZero: function isZero() {\n      var isZero = Numerical.isZero;\n      return isZero(this._x) && isZero(this._y);\n    },\n    isSelected: function isSelected() {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function setSelected(selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function _getSelection() {\n      var owner = this._owner;\n      return this === owner._point ? 1 : this === owner._handleIn ? 2 : this === owner._handleOut ? 4 : 0;\n    }\n  });\n  var Curve = Base.extend({\n    _class: 'Curve',\n    beans: true,\n    initialize: function Curve(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n      var count = arguments.length,\n          seg1,\n          seg2,\n          point1,\n          point2,\n          handle1,\n          handle2;\n\n      if (count === 3) {\n        this._path = arg0;\n        seg1 = arg1;\n        seg2 = arg2;\n      } else if (!count) {\n        seg1 = new Segment();\n        seg2 = new Segment();\n      } else if (count === 1) {\n        if ('segment1' in arg0) {\n          seg1 = new Segment(arg0.segment1);\n          seg2 = new Segment(arg0.segment2);\n        } else if ('point1' in arg0) {\n          point1 = arg0.point1;\n          handle1 = arg0.handle1;\n          handle2 = arg0.handle2;\n          point2 = arg0.point2;\n        } else if (Array.isArray(arg0)) {\n          point1 = [arg0[0], arg0[1]];\n          point2 = [arg0[6], arg0[7]];\n          handle1 = [arg0[2] - arg0[0], arg0[3] - arg0[1]];\n          handle2 = [arg0[4] - arg0[6], arg0[5] - arg0[7]];\n        }\n      } else if (count === 2) {\n        seg1 = new Segment(arg0);\n        seg2 = new Segment(arg1);\n      } else if (count === 4) {\n        point1 = arg0;\n        handle1 = arg1;\n        handle2 = arg2;\n        point2 = arg3;\n      } else if (count === 8) {\n        point1 = [arg0, arg1];\n        point2 = [arg6, arg7];\n        handle1 = [arg2 - arg0, arg3 - arg1];\n        handle2 = [arg4 - arg6, arg5 - arg7];\n      }\n\n      this._segment1 = seg1 || new Segment(point1, null, handle1);\n      this._segment2 = seg2 || new Segment(point2, handle2, null);\n    },\n    _serialize: function _serialize(options, dictionary) {\n      return Base.serialize(this.hasHandles() ? [this.getPoint1(), this.getHandle1(), this.getHandle2(), this.getPoint2()] : [this.getPoint1(), this.getPoint2()], options, true, dictionary);\n    },\n    _changed: function _changed() {\n      this._length = this._bounds = undefined;\n    },\n    clone: function clone() {\n      return new Curve(this._segment1, this._segment2);\n    },\n    toString: function toString() {\n      var parts = ['point1: ' + this._segment1._point];\n      if (!this._segment1._handleOut.isZero()) parts.push('handle1: ' + this._segment1._handleOut);\n      if (!this._segment2._handleIn.isZero()) parts.push('handle2: ' + this._segment2._handleIn);\n      parts.push('point2: ' + this._segment2._point);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    classify: function classify() {\n      return Curve.classify(this.getValues());\n    },\n    remove: function remove() {\n      var removed = false;\n\n      if (this._path) {\n        var segment2 = this._segment2,\n            handleOut = segment2._handleOut;\n        removed = segment2.remove();\n        if (removed) this._segment1._handleOut.set(handleOut);\n      }\n\n      return removed;\n    },\n    getPoint1: function getPoint1() {\n      return this._segment1._point;\n    },\n    setPoint1: function setPoint1() {\n      this._segment1._point.set(Point.read(arguments));\n    },\n    getPoint2: function getPoint2() {\n      return this._segment2._point;\n    },\n    setPoint2: function setPoint2() {\n      this._segment2._point.set(Point.read(arguments));\n    },\n    getHandle1: function getHandle1() {\n      return this._segment1._handleOut;\n    },\n    setHandle1: function setHandle1() {\n      this._segment1._handleOut.set(Point.read(arguments));\n    },\n    getHandle2: function getHandle2() {\n      return this._segment2._handleIn;\n    },\n    setHandle2: function setHandle2() {\n      this._segment2._handleIn.set(Point.read(arguments));\n    },\n    getSegment1: function getSegment1() {\n      return this._segment1;\n    },\n    getSegment2: function getSegment2() {\n      return this._segment2;\n    },\n    getPath: function getPath() {\n      return this._path;\n    },\n    getIndex: function getIndex() {\n      return this._segment1._index;\n    },\n    getNext: function getNext() {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index + 1] || this._path._closed && curves[0]) || null;\n    },\n    getPrevious: function getPrevious() {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index - 1] || this._path._closed && curves[curves.length - 1]) || null;\n    },\n    isFirst: function isFirst() {\n      return !this._segment1._index;\n    },\n    isLast: function isLast() {\n      var path = this._path;\n      return path && this._segment1._index === path._curves.length - 1 || false;\n    },\n    isSelected: function isSelected() {\n      return this.getPoint1().isSelected() && this.getHandle1().isSelected() && this.getHandle2().isSelected() && this.getPoint2().isSelected();\n    },\n    setSelected: function setSelected(selected) {\n      this.getPoint1().setSelected(selected);\n      this.getHandle1().setSelected(selected);\n      this.getHandle2().setSelected(selected);\n      this.getPoint2().setSelected(selected);\n    },\n    getValues: function getValues(matrix) {\n      return Curve.getValues(this._segment1, this._segment2, matrix);\n    },\n    getPoints: function getPoints() {\n      var coords = this.getValues(),\n          points = [];\n\n      for (var i = 0; i < 8; i += 2) {\n        points.push(new Point(coords[i], coords[i + 1]));\n      }\n\n      return points;\n    }\n  }, {\n    getLength: function getLength() {\n      if (this._length == null) this._length = Curve.getLength(this.getValues(), 0, 1);\n      return this._length;\n    },\n    getArea: function getArea() {\n      return Curve.getArea(this.getValues());\n    },\n    getLine: function getLine() {\n      return new Line(this._segment1._point, this._segment2._point);\n    },\n    getPart: function getPart(from, to) {\n      return new Curve(Curve.getPart(this.getValues(), from, to));\n    },\n    getPartLength: function getPartLength(from, to) {\n      return Curve.getLength(this.getValues(), from, to);\n    },\n    divideAt: function divideAt(location) {\n      return this.divideAtTime(location && location.curve === this ? location.time : this.getTimeAt(location));\n    },\n    divideAtTime: function divideAtTime(time, _setHandles) {\n      var tMin = 1e-8,\n          tMax = 1 - tMin,\n          res = null;\n\n      if (time >= tMin && time <= tMax) {\n        var parts = Curve.subdivide(this.getValues(), time),\n            left = parts[0],\n            right = parts[1],\n            setHandles = _setHandles || this.hasHandles(),\n            seg1 = this._segment1,\n            seg2 = this._segment2,\n            path = this._path;\n\n        if (setHandles) {\n          seg1._handleOut._set(left[2] - left[0], left[3] - left[1]);\n\n          seg2._handleIn._set(right[4] - right[6], right[5] - right[7]);\n        }\n\n        var x = left[6],\n            y = left[7],\n            segment = new Segment(new Point(x, y), setHandles && new Point(left[4] - x, left[5] - y), setHandles && new Point(right[2] - x, right[3] - y));\n\n        if (path) {\n          path.insert(seg1._index + 1, segment);\n          res = this.getNext();\n        } else {\n          this._segment2 = segment;\n\n          this._changed();\n\n          res = new Curve(segment, seg2);\n        }\n      }\n\n      return res;\n    },\n    splitAt: function splitAt(location) {\n      var path = this._path;\n      return path ? path.splitAt(location) : null;\n    },\n    splitAtTime: function splitAtTime(time) {\n      return this.splitAt(this.getLocationAtTime(time));\n    },\n    divide: function divide(offset, isTime) {\n      return this.divideAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    split: function split(offset, isTime) {\n      return this.splitAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    reversed: function reversed() {\n      return new Curve(this._segment2.reversed(), this._segment1.reversed());\n    },\n    clearHandles: function clearHandles() {\n      this._segment1._handleOut._set(0, 0);\n\n      this._segment2._handleIn._set(0, 0);\n    },\n    statics: {\n      getValues: function getValues(segment1, segment2, matrix, straight) {\n        var p1 = segment1._point,\n            h1 = segment1._handleOut,\n            h2 = segment2._handleIn,\n            p2 = segment2._point,\n            x1 = p1.x,\n            y1 = p1.y,\n            x2 = p2.x,\n            y2 = p2.y,\n            values = straight ? [x1, y1, x1, y1, x2, y2, x2, y2] : [x1, y1, x1 + h1._x, y1 + h1._y, x2 + h2._x, y2 + h2._y, x2, y2];\n        if (matrix) matrix._transformCoordinates(values, values, 4);\n        return values;\n      },\n      subdivide: function subdivide(v, t) {\n        var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7];\n        if (t === undefined) t = 0.5;\n        var u = 1 - t,\n            x4 = u * x0 + t * x1,\n            y4 = u * y0 + t * y1,\n            x5 = u * x1 + t * x2,\n            y5 = u * y1 + t * y2,\n            x6 = u * x2 + t * x3,\n            y6 = u * y2 + t * y3,\n            x7 = u * x4 + t * x5,\n            y7 = u * y4 + t * y5,\n            x8 = u * x5 + t * x6,\n            y8 = u * y5 + t * y6,\n            x9 = u * x7 + t * x8,\n            y9 = u * y7 + t * y8;\n        return [[x0, y0, x4, y4, x7, y7, x9, y9], [x9, y9, x8, y8, x6, y6, x3, y3]];\n      },\n      getMonoCurves: function getMonoCurves(v, dir) {\n        var curves = [],\n            io = dir ? 0 : 1,\n            o0 = v[io + 0],\n            o1 = v[io + 2],\n            o2 = v[io + 4],\n            o3 = v[io + 6];\n\n        if (o0 >= o1 === o1 >= o2 && o1 >= o2 === o2 >= o3 || Curve.isStraight(v)) {\n          curves.push(v);\n        } else {\n          var a = 3 * (o1 - o2) - o0 + o3,\n              b = 2 * (o0 + o2) - 4 * o1,\n              c = o1 - o0,\n              tMin = 1e-8,\n              tMax = 1 - tMin,\n              roots = [],\n              n = Numerical.solveQuadratic(a, b, c, roots, tMin, tMax);\n\n          if (!n) {\n            curves.push(v);\n          } else {\n            roots.sort();\n            var t = roots[0],\n                parts = Curve.subdivide(v, t);\n            curves.push(parts[0]);\n\n            if (n > 1) {\n              t = (roots[1] - t) / (1 - t);\n              parts = Curve.subdivide(parts[1], t);\n              curves.push(parts[0]);\n            }\n\n            curves.push(parts[1]);\n          }\n        }\n\n        return curves;\n      },\n      solveCubic: function solveCubic(v, coord, val, roots, min, max) {\n        var v0 = v[coord],\n            v1 = v[coord + 2],\n            v2 = v[coord + 4],\n            v3 = v[coord + 6],\n            res = 0;\n\n        if (!(v0 < val && v3 < val && v1 < val && v2 < val || v0 > val && v3 > val && v1 > val && v2 > val)) {\n          var c = 3 * (v1 - v0),\n              b = 3 * (v2 - v1) - c,\n              a = v3 - v0 - c - b;\n          res = Numerical.solveCubic(a, b, c, v0 - val, roots, min, max);\n        }\n\n        return res;\n      },\n      getTimeOf: function getTimeOf(v, point) {\n        var p0 = new Point(v[0], v[1]),\n            p3 = new Point(v[6], v[7]),\n            epsilon = 1e-12,\n            geomEpsilon = 1e-7,\n            t = point.isClose(p0, epsilon) ? 0 : point.isClose(p3, epsilon) ? 1 : null;\n\n        if (t === null) {\n          var coords = [point.x, point.y],\n              roots = [];\n\n          for (var c = 0; c < 2; c++) {\n            var count = Curve.solveCubic(v, c, coords[c], roots, 0, 1);\n\n            for (var i = 0; i < count; i++) {\n              var u = roots[i];\n              if (point.isClose(Curve.getPoint(v, u), geomEpsilon)) return u;\n            }\n          }\n        }\n\n        return point.isClose(p0, geomEpsilon) ? 0 : point.isClose(p3, geomEpsilon) ? 1 : null;\n      },\n      getNearestTime: function getNearestTime(v, point) {\n        if (Curve.isStraight(v)) {\n          var x0 = v[0],\n              y0 = v[1],\n              x3 = v[6],\n              y3 = v[7],\n              vx = x3 - x0,\n              vy = y3 - y0,\n              det = vx * vx + vy * vy;\n          if (det === 0) return 0;\n          var u = ((point.x - x0) * vx + (point.y - y0) * vy) / det;\n          return u < 1e-12 ? 0 : u > 0.999999999999 ? 1 : Curve.getTimeOf(v, new Point(x0 + u * vx, y0 + u * vy));\n        }\n\n        var count = 100,\n            minDist = Infinity,\n            minT = 0;\n\n        function refine(t) {\n          if (t >= 0 && t <= 1) {\n            var dist = point.getDistance(Curve.getPoint(v, t), true);\n\n            if (dist < minDist) {\n              minDist = dist;\n              minT = t;\n              return true;\n            }\n          }\n        }\n\n        for (var i = 0; i <= count; i++) {\n          refine(i / count);\n        }\n\n        var step = 1 / (count * 2);\n\n        while (step > 1e-8) {\n          if (!refine(minT - step) && !refine(minT + step)) step /= 2;\n        }\n\n        return minT;\n      },\n      getPart: function getPart(v, from, to) {\n        var flip = from > to;\n\n        if (flip) {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n\n        if (from > 0) v = Curve.subdivide(v, from)[1];\n        if (to < 1) v = Curve.subdivide(v, (to - from) / (1 - from))[0];\n        return flip ? [v[6], v[7], v[4], v[5], v[2], v[3], v[0], v[1]] : v;\n      },\n      isFlatEnough: function isFlatEnough(v, flatness) {\n        var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7],\n            ux = 3 * x1 - 2 * x0 - x3,\n            uy = 3 * y1 - 2 * y0 - y3,\n            vx = 3 * x2 - 2 * x3 - x0,\n            vy = 3 * y2 - 2 * y3 - y0;\n        return Math.max(ux * ux, vx * vx) + Math.max(uy * uy, vy * vy) <= 16 * flatness * flatness;\n      },\n      getArea: function getArea(v) {\n        var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7];\n        return 3 * ((y3 - y0) * (x1 + x2) - (x3 - x0) * (y1 + y2) + y1 * (x0 - x2) - x1 * (y0 - y2) + y3 * (x2 + x0 / 3) - x3 * (y2 + y0 / 3)) / 20;\n      },\n      getBounds: function getBounds(v) {\n        var min = v.slice(0, 2),\n            max = min.slice(),\n            roots = [0, 0];\n\n        for (var i = 0; i < 2; i++) {\n          Curve._addBounds(v[i], v[i + 2], v[i + 4], v[i + 6], i, 0, min, max, roots);\n        }\n\n        return new _Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      _addBounds: function _addBounds(v0, v1, v2, v3, coord, padding, min, max, roots) {\n        function add(value, padding) {\n          var left = value - padding,\n              right = value + padding;\n          if (left < min[coord]) min[coord] = left;\n          if (right > max[coord]) max[coord] = right;\n        }\n\n        padding /= 2;\n        var minPad = min[coord] - padding,\n            maxPad = max[coord] + padding;\n\n        if (v0 < minPad || v1 < minPad || v2 < minPad || v3 < minPad || v0 > maxPad || v1 > maxPad || v2 > maxPad || v3 > maxPad) {\n          if (v1 < v0 != v1 < v3 && v2 < v0 != v2 < v3) {\n            add(v0, padding);\n            add(v3, padding);\n          } else {\n            var a = 3 * (v1 - v2) - v0 + v3,\n                b = 2 * (v0 + v2) - 4 * v1,\n                c = v1 - v0,\n                count = Numerical.solveQuadratic(a, b, c, roots),\n                tMin = 1e-8,\n                tMax = 1 - tMin;\n            add(v3, 0);\n\n            for (var i = 0; i < count; i++) {\n              var t = roots[i],\n                  u = 1 - t;\n              if (tMin <= t && t <= tMax) add(u * u * u * v0 + 3 * u * u * t * v1 + 3 * u * t * t * v2 + t * t * t * v3, padding);\n            }\n          }\n        }\n      }\n    }\n  }, Base.each(['getBounds', 'getStrokeBounds', 'getHandleBounds'], function (name) {\n    this[name] = function () {\n      if (!this._bounds) this._bounds = {};\n      var bounds = this._bounds[name];\n\n      if (!bounds) {\n        bounds = this._bounds[name] = Path[name]([this._segment1, this._segment2], false, this._path);\n      }\n\n      return bounds.clone();\n    };\n  }, {}), Base.each({\n    isStraight: function isStraight(p1, h1, h2, p2) {\n      if (h1.isZero() && h2.isZero()) {\n        return true;\n      } else {\n        var v = p2.subtract(p1);\n\n        if (v.isZero()) {\n          return false;\n        } else if (v.isCollinear(h1) && v.isCollinear(h2)) {\n          var l = new Line(p1, p2),\n              epsilon = 1e-7;\n\n          if (l.getDistance(p1.add(h1)) < epsilon && l.getDistance(p2.add(h2)) < epsilon) {\n            var div = v.dot(v),\n                s1 = v.dot(h1) / div,\n                s2 = v.dot(h2) / div;\n            return s1 >= 0 && s1 <= 1 && s2 <= 0 && s2 >= -1;\n          }\n        }\n      }\n\n      return false;\n    },\n    isLinear: function isLinear(p1, h1, h2, p2) {\n      var third = p2.subtract(p1).divide(3);\n      return h1.equals(third) && h2.negate().equals(third);\n    }\n  }, function (test, name) {\n    this[name] = function (epsilon) {\n      var seg1 = this._segment1,\n          seg2 = this._segment2;\n      return test(seg1._point, seg1._handleOut, seg2._handleIn, seg2._point, epsilon);\n    };\n\n    this.statics[name] = function (v, epsilon) {\n      var x0 = v[0],\n          y0 = v[1],\n          x3 = v[6],\n          y3 = v[7];\n      return test(new Point(x0, y0), new Point(v[2] - x0, v[3] - y0), new Point(v[4] - x3, v[5] - y3), new Point(x3, y3), epsilon);\n    };\n  }, {\n    statics: {},\n    hasHandles: function hasHandles() {\n      return !this._segment1._handleOut.isZero() || !this._segment2._handleIn.isZero();\n    },\n    hasLength: function hasLength(epsilon) {\n      return (!this.getPoint1().equals(this.getPoint2()) || this.hasHandles()) && this.getLength() > (epsilon || 0);\n    },\n    isCollinear: function isCollinear(curve) {\n      return curve && this.isStraight() && curve.isStraight() && this.getLine().isCollinear(curve.getLine());\n    },\n    isHorizontal: function isHorizontal() {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).y) < 1e-8;\n    },\n    isVertical: function isVertical() {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).x) < 1e-8;\n    }\n  }), {\n    beans: false,\n    getLocationAt: function getLocationAt(offset, _isTime) {\n      return this.getLocationAtTime(_isTime ? offset : this.getTimeAt(offset));\n    },\n    getLocationAtTime: function getLocationAtTime(t) {\n      return t != null && t >= 0 && t <= 1 ? new CurveLocation(this, t) : null;\n    },\n    getTimeAt: function getTimeAt(offset, start) {\n      return Curve.getTimeAt(this.getValues(), offset, start);\n    },\n    getParameterAt: '#getTimeAt',\n    getTimesWithTangent: function getTimesWithTangent() {\n      var tangent = Point.read(arguments);\n      return tangent.isZero() ? [] : Curve.getTimesWithTangent(this.getValues(), tangent);\n    },\n    getOffsetAtTime: function getOffsetAtTime(t) {\n      return this.getPartLength(0, t);\n    },\n    getLocationOf: function getLocationOf() {\n      return this.getLocationAtTime(this.getTimeOf(Point.read(arguments)));\n    },\n    getOffsetOf: function getOffsetOf() {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getTimeOf: function getTimeOf() {\n      return Curve.getTimeOf(this.getValues(), Point.read(arguments));\n    },\n    getParameterOf: '#getTimeOf',\n    getNearestLocation: function getNearestLocation() {\n      var point = Point.read(arguments),\n          values = this.getValues(),\n          t = Curve.getNearestTime(values, point),\n          pt = Curve.getPoint(values, t);\n      return new CurveLocation(this, t, pt, null, point.getDistance(pt));\n    },\n    getNearestPoint: function getNearestPoint() {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    }\n  }, new function () {\n    var methods = ['getPoint', 'getTangent', 'getNormal', 'getWeightedTangent', 'getWeightedNormal', 'getCurvature'];\n    return Base.each(methods, function (name) {\n      this[name + 'At'] = function (location, _isTime) {\n        var values = this.getValues();\n        return Curve[name](values, _isTime ? location : Curve.getTimeAt(values, location));\n      };\n\n      this[name + 'AtTime'] = function (time) {\n        return Curve[name](this.getValues(), time);\n      };\n    }, {\n      statics: {\n        _evaluateMethods: methods\n      }\n    });\n  }(), new function () {\n    function getLengthIntegrand(v) {\n      var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          ax = 9 * (x1 - x2) + 3 * (x3 - x0),\n          bx = 6 * (x0 + x2) - 12 * x1,\n          cx = 3 * (x1 - x0),\n          ay = 9 * (y1 - y2) + 3 * (y3 - y0),\n          by = 6 * (y0 + y2) - 12 * y1,\n          cy = 3 * (y1 - y0);\n      return function (t) {\n        var dx = (ax * t + bx) * t + cx,\n            dy = (ay * t + by) * t + cy;\n        return Math.sqrt(dx * dx + dy * dy);\n      };\n    }\n\n    function getIterations(a, b) {\n      return Math.max(2, Math.min(16, Math.ceil(Math.abs(b - a) * 32)));\n    }\n\n    function evaluate(v, t, type, normalized) {\n      if (t == null || t < 0 || t > 1) return null;\n      var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          isZero = Numerical.isZero;\n\n      if (isZero(x1 - x0) && isZero(y1 - y0)) {\n        x1 = x0;\n        y1 = y0;\n      }\n\n      if (isZero(x2 - x3) && isZero(y2 - y3)) {\n        x2 = x3;\n        y2 = y3;\n      }\n\n      var cx = 3 * (x1 - x0),\n          bx = 3 * (x2 - x1) - cx,\n          ax = x3 - x0 - cx - bx,\n          cy = 3 * (y1 - y0),\n          by = 3 * (y2 - y1) - cy,\n          ay = y3 - y0 - cy - by,\n          x,\n          y;\n\n      if (type === 0) {\n        x = t === 0 ? x0 : t === 1 ? x3 : ((ax * t + bx) * t + cx) * t + x0;\n        y = t === 0 ? y0 : t === 1 ? y3 : ((ay * t + by) * t + cy) * t + y0;\n      } else {\n        var tMin = 1e-8,\n            tMax = 1 - tMin;\n\n        if (t < tMin) {\n          x = cx;\n          y = cy;\n        } else if (t > tMax) {\n          x = 3 * (x3 - x2);\n          y = 3 * (y3 - y2);\n        } else {\n          x = (3 * ax * t + 2 * bx) * t + cx;\n          y = (3 * ay * t + 2 * by) * t + cy;\n        }\n\n        if (normalized) {\n          if (x === 0 && y === 0 && (t < tMin || t > tMax)) {\n            x = x2 - x1;\n            y = y2 - y1;\n          }\n\n          var len = Math.sqrt(x * x + y * y);\n\n          if (len) {\n            x /= len;\n            y /= len;\n          }\n        }\n\n        if (type === 3) {\n          var x2 = 6 * ax * t + 2 * bx,\n              y2 = 6 * ay * t + 2 * by,\n              d = Math.pow(x * x + y * y, 3 / 2);\n          x = d !== 0 ? (x * y2 - y * x2) / d : 0;\n          y = 0;\n        }\n      }\n\n      return type === 2 ? new Point(y, -x) : new Point(x, y);\n    }\n\n    return {\n      statics: {\n        classify: function classify(v) {\n          var x0 = v[0],\n              y0 = v[1],\n              x1 = v[2],\n              y1 = v[3],\n              x2 = v[4],\n              y2 = v[5],\n              x3 = v[6],\n              y3 = v[7],\n              a1 = x0 * (y3 - y2) + y0 * (x2 - x3) + x3 * y2 - y3 * x2,\n              a2 = x1 * (y0 - y3) + y1 * (x3 - x0) + x0 * y3 - y0 * x3,\n              a3 = x2 * (y1 - y0) + y2 * (x0 - x1) + x1 * y0 - y1 * x0,\n              d3 = 3 * a3,\n              d2 = d3 - a2,\n              d1 = d2 - a2 + a1,\n              l = Math.sqrt(d1 * d1 + d2 * d2 + d3 * d3),\n              s = l !== 0 ? 1 / l : 0,\n              isZero = Numerical.isZero,\n              serpentine = 'serpentine';\n          d1 *= s;\n          d2 *= s;\n          d3 *= s;\n\n          function type(type, t1, t2) {\n            var hasRoots = t1 !== undefined,\n                t1Ok = hasRoots && t1 > 0 && t1 < 1,\n                t2Ok = hasRoots && t2 > 0 && t2 < 1;\n\n            if (hasRoots && (!(t1Ok || t2Ok) || type === 'loop' && !(t1Ok && t2Ok))) {\n              type = 'arch';\n              t1Ok = t2Ok = false;\n            }\n\n            return {\n              type: type,\n              roots: t1Ok || t2Ok ? t1Ok && t2Ok ? t1 < t2 ? [t1, t2] : [t2, t1] : [t1Ok ? t1 : t2] : null\n            };\n          }\n\n          if (isZero(d1)) {\n            return isZero(d2) ? type(isZero(d3) ? 'line' : 'quadratic') : type(serpentine, d3 / (3 * d2));\n          }\n\n          var d = 3 * d2 * d2 - 4 * d1 * d3;\n\n          if (isZero(d)) {\n            return type('cusp', d2 / (2 * d1));\n          }\n\n          var f1 = d > 0 ? Math.sqrt(d / 3) : Math.sqrt(-d),\n              f2 = 2 * d1;\n          return type(d > 0 ? serpentine : 'loop', (d2 + f1) / f2, (d2 - f1) / f2);\n        },\n        getLength: function getLength(v, a, b, ds) {\n          if (a === undefined) a = 0;\n          if (b === undefined) b = 1;\n\n          if (Curve.isStraight(v)) {\n            var c = v;\n\n            if (b < 1) {\n              c = Curve.subdivide(c, b)[0];\n              a /= b;\n            }\n\n            if (a > 0) {\n              c = Curve.subdivide(c, a)[1];\n            }\n\n            var dx = c[6] - c[0],\n                dy = c[7] - c[1];\n            return Math.sqrt(dx * dx + dy * dy);\n          }\n\n          return Numerical.integrate(ds || getLengthIntegrand(v), a, b, getIterations(a, b));\n        },\n        getTimeAt: function getTimeAt(v, offset, start) {\n          if (start === undefined) start = offset < 0 ? 1 : 0;\n          if (offset === 0) return start;\n          var abs = Math.abs,\n              epsilon = 1e-12,\n              forward = offset > 0,\n              a = forward ? start : 0,\n              b = forward ? 1 : start,\n              ds = getLengthIntegrand(v),\n              rangeLength = Curve.getLength(v, a, b, ds),\n              diff = abs(offset) - rangeLength;\n\n          if (abs(diff) < epsilon) {\n            return forward ? b : a;\n          } else if (diff > epsilon) {\n            return null;\n          }\n\n          var guess = offset / rangeLength,\n              length = 0;\n\n          function f(t) {\n            length += Numerical.integrate(ds, start, t, getIterations(start, t));\n            start = t;\n            return length - offset;\n          }\n\n          return Numerical.findRoot(f, ds, start + guess, a, b, 32, 1e-12);\n        },\n        getPoint: function getPoint(v, t) {\n          return evaluate(v, t, 0, false);\n        },\n        getTangent: function getTangent(v, t) {\n          return evaluate(v, t, 1, true);\n        },\n        getWeightedTangent: function getWeightedTangent(v, t) {\n          return evaluate(v, t, 1, false);\n        },\n        getNormal: function getNormal(v, t) {\n          return evaluate(v, t, 2, true);\n        },\n        getWeightedNormal: function getWeightedNormal(v, t) {\n          return evaluate(v, t, 2, false);\n        },\n        getCurvature: function getCurvature(v, t) {\n          return evaluate(v, t, 3, false).x;\n        },\n        getPeaks: function getPeaks(v) {\n          var x0 = v[0],\n              y0 = v[1],\n              x1 = v[2],\n              y1 = v[3],\n              x2 = v[4],\n              y2 = v[5],\n              x3 = v[6],\n              y3 = v[7],\n              ax = -x0 + 3 * x1 - 3 * x2 + x3,\n              bx = 3 * x0 - 6 * x1 + 3 * x2,\n              cx = -3 * x0 + 3 * x1,\n              ay = -y0 + 3 * y1 - 3 * y2 + y3,\n              by = 3 * y0 - 6 * y1 + 3 * y2,\n              cy = -3 * y0 + 3 * y1,\n              tMin = 1e-8,\n              tMax = 1 - tMin,\n              roots = [];\n          Numerical.solveCubic(9 * (ax * ax + ay * ay), 9 * (ax * bx + by * ay), 2 * (bx * bx + by * by) + 3 * (cx * ax + cy * ay), cx * bx + by * cy, roots, tMin, tMax);\n          return roots.sort();\n        }\n      }\n    };\n  }(), new function () {\n    function addLocation(locations, include, c1, t1, c2, t2, overlap) {\n      var excludeStart = !overlap && c1.getPrevious() === c2,\n          excludeEnd = !overlap && c1 !== c2 && c1.getNext() === c2,\n          tMin = 1e-8,\n          tMax = 1 - tMin;\n\n      if (t1 !== null && t1 >= (excludeStart ? tMin : 0) && t1 <= (excludeEnd ? tMax : 1)) {\n        if (t2 !== null && t2 >= (excludeEnd ? tMin : 0) && t2 <= (excludeStart ? tMax : 1)) {\n          var loc1 = new CurveLocation(c1, t1, null, overlap),\n              loc2 = new CurveLocation(c2, t2, null, overlap);\n          loc1._intersection = loc2;\n          loc2._intersection = loc1;\n\n          if (!include || include(loc1)) {\n            CurveLocation.insert(locations, loc1, true);\n          }\n        }\n      }\n    }\n\n    function addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMin, tMax, uMin, uMax) {\n      if (++calls >= 4096 || ++recursion >= 40) return calls;\n      var fatLineEpsilon = 1e-9,\n          q0x = v2[0],\n          q0y = v2[1],\n          q3x = v2[6],\n          q3y = v2[7],\n          getSignedDistance = Line.getSignedDistance,\n          d1 = getSignedDistance(q0x, q0y, q3x, q3y, v2[2], v2[3]),\n          d2 = getSignedDistance(q0x, q0y, q3x, q3y, v2[4], v2[5]),\n          factor = d1 * d2 > 0 ? 3 / 4 : 4 / 9,\n          dMin = factor * Math.min(0, d1, d2),\n          dMax = factor * Math.max(0, d1, d2),\n          dp0 = getSignedDistance(q0x, q0y, q3x, q3y, v1[0], v1[1]),\n          dp1 = getSignedDistance(q0x, q0y, q3x, q3y, v1[2], v1[3]),\n          dp2 = getSignedDistance(q0x, q0y, q3x, q3y, v1[4], v1[5]),\n          dp3 = getSignedDistance(q0x, q0y, q3x, q3y, v1[6], v1[7]),\n          hull = getConvexHull(dp0, dp1, dp2, dp3),\n          top = hull[0],\n          bottom = hull[1],\n          tMinClip,\n          tMaxClip;\n      if (d1 === 0 && d2 === 0 && dp0 === 0 && dp1 === 0 && dp2 === 0 && dp3 === 0 || (tMinClip = clipConvexHull(top, bottom, dMin, dMax)) == null || (tMaxClip = clipConvexHull(top.reverse(), bottom.reverse(), dMin, dMax)) == null) return calls;\n      var tMinNew = tMin + (tMax - tMin) * tMinClip,\n          tMaxNew = tMin + (tMax - tMin) * tMaxClip;\n\n      if (Math.max(uMax - uMin, tMaxNew - tMinNew) < fatLineEpsilon) {\n        var t = (tMinNew + tMaxNew) / 2,\n            u = (uMin + uMax) / 2;\n        addLocation(locations, include, flip ? c2 : c1, flip ? u : t, flip ? c1 : c2, flip ? t : u);\n      } else {\n        v1 = Curve.getPart(v1, tMinClip, tMaxClip);\n        var uDiff = uMax - uMin;\n\n        if (tMaxClip - tMinClip > 0.8) {\n          if (tMaxNew - tMinNew > uDiff) {\n            var parts = Curve.subdivide(v1, 0.5),\n                t = (tMinNew + tMaxNew) / 2;\n            calls = addCurveIntersections(v2, parts[0], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, t);\n            calls = addCurveIntersections(v2, parts[1], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, t, tMaxNew);\n          } else {\n            var parts = Curve.subdivide(v2, 0.5),\n                u = (uMin + uMax) / 2;\n            calls = addCurveIntersections(parts[0], v1, c2, c1, locations, include, !flip, recursion, calls, uMin, u, tMinNew, tMaxNew);\n            calls = addCurveIntersections(parts[1], v1, c2, c1, locations, include, !flip, recursion, calls, u, uMax, tMinNew, tMaxNew);\n          }\n        } else {\n          if (uDiff === 0 || uDiff >= fatLineEpsilon) {\n            calls = addCurveIntersections(v2, v1, c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, tMaxNew);\n          } else {\n            calls = addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMinNew, tMaxNew, uMin, uMax);\n          }\n        }\n      }\n\n      return calls;\n    }\n\n    function getConvexHull(dq0, dq1, dq2, dq3) {\n      var p0 = [0, dq0],\n          p1 = [1 / 3, dq1],\n          p2 = [2 / 3, dq2],\n          p3 = [1, dq3],\n          dist1 = dq1 - (2 * dq0 + dq3) / 3,\n          dist2 = dq2 - (dq0 + 2 * dq3) / 3,\n          hull;\n\n      if (dist1 * dist2 < 0) {\n        hull = [[p0, p1, p3], [p0, p2, p3]];\n      } else {\n        var distRatio = dist1 / dist2;\n        hull = [distRatio >= 2 ? [p0, p1, p3] : distRatio <= 0.5 ? [p0, p2, p3] : [p0, p1, p2, p3], [p0, p3]];\n      }\n\n      return (dist1 || dist2) < 0 ? hull.reverse() : hull;\n    }\n\n    function clipConvexHull(hullTop, hullBottom, dMin, dMax) {\n      if (hullTop[0][1] < dMin) {\n        return clipConvexHullPart(hullTop, true, dMin);\n      } else if (hullBottom[0][1] > dMax) {\n        return clipConvexHullPart(hullBottom, false, dMax);\n      } else {\n        return hullTop[0][0];\n      }\n    }\n\n    function clipConvexHullPart(part, top, threshold) {\n      var px = part[0][0],\n          py = part[0][1];\n\n      for (var i = 1, l = part.length; i < l; i++) {\n        var qx = part[i][0],\n            qy = part[i][1];\n\n        if (top ? qy >= threshold : qy <= threshold) {\n          return qy === threshold ? qx : px + (threshold - py) * (qx - px) / (qy - py);\n        }\n\n        px = qx;\n        py = qy;\n      }\n\n      return null;\n    }\n\n    function getCurveLineIntersections(v, px, py, vx, vy) {\n      var isZero = Numerical.isZero;\n\n      if (isZero(vx) && isZero(vy)) {\n        var t = Curve.getTimeOf(v, new Point(px, py));\n        return t === null ? [] : [t];\n      }\n\n      var angle = Math.atan2(-vy, vx),\n          sin = Math.sin(angle),\n          cos = Math.cos(angle),\n          rv = [],\n          roots = [];\n\n      for (var i = 0; i < 8; i += 2) {\n        var x = v[i] - px,\n            y = v[i + 1] - py;\n        rv.push(x * cos - y * sin, x * sin + y * cos);\n      }\n\n      Curve.solveCubic(rv, 1, 0, roots, 0, 1);\n      return roots;\n    }\n\n    function addCurveLineIntersections(v1, v2, c1, c2, locations, include, flip) {\n      var x1 = v2[0],\n          y1 = v2[1],\n          x2 = v2[6],\n          y2 = v2[7],\n          roots = getCurveLineIntersections(v1, x1, y1, x2 - x1, y2 - y1);\n\n      for (var i = 0, l = roots.length; i < l; i++) {\n        var t1 = roots[i],\n            p1 = Curve.getPoint(v1, t1),\n            t2 = Curve.getTimeOf(v2, p1);\n\n        if (t2 !== null) {\n          addLocation(locations, include, flip ? c2 : c1, flip ? t2 : t1, flip ? c1 : c2, flip ? t1 : t2);\n        }\n      }\n    }\n\n    function addLineIntersection(v1, v2, c1, c2, locations, include) {\n      var pt = Line.intersect(v1[0], v1[1], v1[6], v1[7], v2[0], v2[1], v2[6], v2[7]);\n\n      if (pt) {\n        addLocation(locations, include, c1, Curve.getTimeOf(v1, pt), c2, Curve.getTimeOf(v2, pt));\n      }\n    }\n\n    function getCurveIntersections(v1, v2, c1, c2, locations, include) {\n      var epsilon = 1e-12,\n          min = Math.min,\n          max = Math.max;\n\n      if (max(v1[0], v1[2], v1[4], v1[6]) + epsilon > min(v2[0], v2[2], v2[4], v2[6]) && min(v1[0], v1[2], v1[4], v1[6]) - epsilon < max(v2[0], v2[2], v2[4], v2[6]) && max(v1[1], v1[3], v1[5], v1[7]) + epsilon > min(v2[1], v2[3], v2[5], v2[7]) && min(v1[1], v1[3], v1[5], v1[7]) - epsilon < max(v2[1], v2[3], v2[5], v2[7])) {\n        var overlaps = getOverlaps(v1, v2);\n\n        if (overlaps) {\n          for (var i = 0; i < 2; i++) {\n            var overlap = overlaps[i];\n            addLocation(locations, include, c1, overlap[0], c2, overlap[1], true);\n          }\n        } else {\n          var straight1 = Curve.isStraight(v1),\n              straight2 = Curve.isStraight(v2),\n              straight = straight1 && straight2,\n              flip = straight1 && !straight2,\n              before = locations.length;\n          (straight ? addLineIntersection : straight1 || straight2 ? addCurveLineIntersections : addCurveIntersections)(flip ? v2 : v1, flip ? v1 : v2, flip ? c2 : c1, flip ? c1 : c2, locations, include, flip, 0, 0, 0, 1, 0, 1);\n\n          if (!straight || locations.length === before) {\n            for (var i = 0; i < 4; i++) {\n              var t1 = i >> 1,\n                  t2 = i & 1,\n                  i1 = t1 * 6,\n                  i2 = t2 * 6,\n                  p1 = new Point(v1[i1], v1[i1 + 1]),\n                  p2 = new Point(v2[i2], v2[i2 + 1]);\n\n              if (p1.isClose(p2, epsilon)) {\n                addLocation(locations, include, c1, t1, c2, t2);\n              }\n            }\n          }\n        }\n      }\n\n      return locations;\n    }\n\n    function getSelfIntersection(v1, c1, locations, include) {\n      var info = Curve.classify(v1);\n\n      if (info.type === 'loop') {\n        var roots = info.roots;\n        addLocation(locations, include, c1, roots[0], c1, roots[1]);\n      }\n\n      return locations;\n    }\n\n    function getIntersections(curves1, curves2, include, matrix1, matrix2, _returnFirst) {\n      var epsilon = 1e-7,\n          self = !curves2;\n      if (self) curves2 = curves1;\n      var length1 = curves1.length,\n          length2 = curves2.length,\n          values1 = new Array(length1),\n          values2 = self ? values1 : new Array(length2),\n          locations = [];\n\n      for (var i = 0; i < length1; i++) {\n        values1[i] = curves1[i].getValues(matrix1);\n      }\n\n      if (!self) {\n        for (var i = 0; i < length2; i++) {\n          values2[i] = curves2[i].getValues(matrix2);\n        }\n      }\n\n      var boundsCollisions = CollisionDetection.findCurveBoundsCollisions(values1, values2, epsilon);\n\n      for (var index1 = 0; index1 < length1; index1++) {\n        var curve1 = curves1[index1],\n            v1 = values1[index1];\n\n        if (self) {\n          getSelfIntersection(v1, curve1, locations, include);\n        }\n\n        var collisions1 = boundsCollisions[index1];\n\n        if (collisions1) {\n          for (var j = 0; j < collisions1.length; j++) {\n            if (_returnFirst && locations.length) return locations;\n            var index2 = collisions1[j];\n\n            if (!self || index2 > index1) {\n              var curve2 = curves2[index2],\n                  v2 = values2[index2];\n              getCurveIntersections(v1, v2, curve1, curve2, locations, include);\n            }\n          }\n        }\n      }\n\n      return locations;\n    }\n\n    function getOverlaps(v1, v2) {\n      function getSquaredLineLength(v) {\n        var x = v[6] - v[0],\n            y = v[7] - v[1];\n        return x * x + y * y;\n      }\n\n      var abs = Math.abs,\n          getDistance = Line.getDistance,\n          timeEpsilon = 1e-8,\n          geomEpsilon = 1e-7,\n          straight1 = Curve.isStraight(v1),\n          straight2 = Curve.isStraight(v2),\n          straightBoth = straight1 && straight2,\n          flip = getSquaredLineLength(v1) < getSquaredLineLength(v2),\n          l1 = flip ? v2 : v1,\n          l2 = flip ? v1 : v2,\n          px = l1[0],\n          py = l1[1],\n          vx = l1[6] - px,\n          vy = l1[7] - py;\n\n      if (getDistance(px, py, vx, vy, l2[0], l2[1], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[6], l2[7], true) < geomEpsilon) {\n        if (!straightBoth && getDistance(px, py, vx, vy, l1[2], l1[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l1[4], l1[5], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[2], l2[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[4], l2[5], true) < geomEpsilon) {\n          straight1 = straight2 = straightBoth = true;\n        }\n      } else if (straightBoth) {\n        return null;\n      }\n\n      if (straight1 ^ straight2) {\n        return null;\n      }\n\n      var v = [v1, v2],\n          pairs = [];\n\n      for (var i = 0; i < 4 && pairs.length < 2; i++) {\n        var i1 = i & 1,\n            i2 = i1 ^ 1,\n            t1 = i >> 1,\n            t2 = Curve.getTimeOf(v[i1], new Point(v[i2][t1 ? 6 : 0], v[i2][t1 ? 7 : 1]));\n\n        if (t2 != null) {\n          var pair = i1 ? [t1, t2] : [t2, t1];\n\n          if (!pairs.length || abs(pair[0] - pairs[0][0]) > timeEpsilon && abs(pair[1] - pairs[0][1]) > timeEpsilon) {\n            pairs.push(pair);\n          }\n        }\n\n        if (i > 2 && !pairs.length) break;\n      }\n\n      if (pairs.length !== 2) {\n        pairs = null;\n      } else if (!straightBoth) {\n        var o1 = Curve.getPart(v1, pairs[0][0], pairs[1][0]),\n            o2 = Curve.getPart(v2, pairs[0][1], pairs[1][1]);\n        if (abs(o2[2] - o1[2]) > geomEpsilon || abs(o2[3] - o1[3]) > geomEpsilon || abs(o2[4] - o1[4]) > geomEpsilon || abs(o2[5] - o1[5]) > geomEpsilon) pairs = null;\n      }\n\n      return pairs;\n    }\n\n    function getTimesWithTangent(v, tangent) {\n      var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          normalized = tangent.normalize(),\n          tx = normalized.x,\n          ty = normalized.y,\n          ax = 3 * x3 - 9 * x2 + 9 * x1 - 3 * x0,\n          ay = 3 * y3 - 9 * y2 + 9 * y1 - 3 * y0,\n          bx = 6 * x2 - 12 * x1 + 6 * x0,\n          by = 6 * y2 - 12 * y1 + 6 * y0,\n          cx = 3 * x1 - 3 * x0,\n          cy = 3 * y1 - 3 * y0,\n          den = 2 * ax * ty - 2 * ay * tx,\n          times = [];\n\n      if (Math.abs(den) < Numerical.CURVETIME_EPSILON) {\n        var num = ax * cy - ay * cx,\n            den = ax * by - ay * bx;\n\n        if (den != 0) {\n          var t = -num / den;\n          if (t >= 0 && t <= 1) times.push(t);\n        }\n      } else {\n        var delta = (bx * bx - 4 * ax * cx) * ty * ty + (-2 * bx * by + 4 * ay * cx + 4 * ax * cy) * tx * ty + (by * by - 4 * ay * cy) * tx * tx,\n            k = bx * ty - by * tx;\n\n        if (delta >= 0 && den != 0) {\n          var d = Math.sqrt(delta),\n              t0 = -(k + d) / den,\n              t1 = (-k + d) / den;\n          if (t0 >= 0 && t0 <= 1) times.push(t0);\n          if (t1 >= 0 && t1 <= 1) times.push(t1);\n        }\n      }\n\n      return times;\n    }\n\n    return {\n      getIntersections: function getIntersections(curve) {\n        var v1 = this.getValues(),\n            v2 = curve && curve !== this && curve.getValues();\n        return v2 ? getCurveIntersections(v1, v2, this, curve, []) : getSelfIntersection(v1, this, []);\n      },\n      statics: {\n        getOverlaps: getOverlaps,\n        getIntersections: getIntersections,\n        getCurveLineIntersections: getCurveLineIntersections,\n        getTimesWithTangent: getTimesWithTangent\n      }\n    };\n  }());\n  var CurveLocation = Base.extend({\n    _class: 'CurveLocation',\n    initialize: function CurveLocation(curve, time, point, _overlap, _distance) {\n      if (time >= 0.99999999) {\n        var next = curve.getNext();\n\n        if (next) {\n          time = 0;\n          curve = next;\n        }\n      }\n\n      this._setCurve(curve);\n\n      this._time = time;\n      this._point = point || curve.getPointAtTime(time);\n      this._overlap = _overlap;\n      this._distance = _distance;\n      this._intersection = this._next = this._previous = null;\n    },\n    _setCurve: function _setCurve(curve) {\n      var path = curve._path;\n      this._path = path;\n      this._version = path ? path._version : 0;\n      this._curve = curve;\n      this._segment = null;\n      this._segment1 = curve._segment1;\n      this._segment2 = curve._segment2;\n    },\n    _setSegment: function _setSegment(segment) {\n      this._setCurve(segment.getCurve());\n\n      this._segment = segment;\n      this._time = segment === this._segment1 ? 0 : 1;\n      this._point = segment._point.clone();\n    },\n    getSegment: function getSegment() {\n      var segment = this._segment;\n\n      if (!segment) {\n        var curve = this.getCurve(),\n            time = this.getTime();\n\n        if (time === 0) {\n          segment = curve._segment1;\n        } else if (time === 1) {\n          segment = curve._segment2;\n        } else if (time != null) {\n          segment = curve.getPartLength(0, time) < curve.getPartLength(time, 1) ? curve._segment1 : curve._segment2;\n        }\n\n        this._segment = segment;\n      }\n\n      return segment;\n    },\n    getCurve: function getCurve() {\n      var path = this._path,\n          that = this;\n\n      if (path && path._version !== this._version) {\n        this._time = this._offset = this._curveOffset = this._curve = null;\n      }\n\n      function trySegment(segment) {\n        var curve = segment && segment.getCurve();\n\n        if (curve && (that._time = curve.getTimeOf(that._point)) != null) {\n          that._setCurve(curve);\n\n          return curve;\n        }\n      }\n\n      return this._curve || trySegment(this._segment) || trySegment(this._segment1) || trySegment(this._segment2.getPrevious());\n    },\n    getPath: function getPath() {\n      var curve = this.getCurve();\n      return curve && curve._path;\n    },\n    getIndex: function getIndex() {\n      var curve = this.getCurve();\n      return curve && curve.getIndex();\n    },\n    getTime: function getTime() {\n      var curve = this.getCurve(),\n          time = this._time;\n      return curve && time == null ? this._time = curve.getTimeOf(this._point) : time;\n    },\n    getParameter: '#getTime',\n    getPoint: function getPoint() {\n      return this._point;\n    },\n    getOffset: function getOffset() {\n      var offset = this._offset;\n\n      if (offset == null) {\n        offset = 0;\n        var path = this.getPath(),\n            index = this.getIndex();\n\n        if (path && index != null) {\n          var curves = path.getCurves();\n\n          for (var i = 0; i < index; i++) {\n            offset += curves[i].getLength();\n          }\n        }\n\n        this._offset = offset += this.getCurveOffset();\n      }\n\n      return offset;\n    },\n    getCurveOffset: function getCurveOffset() {\n      var offset = this._curveOffset;\n\n      if (offset == null) {\n        var curve = this.getCurve(),\n            time = this.getTime();\n        this._curveOffset = offset = time != null && curve && curve.getPartLength(0, time);\n      }\n\n      return offset;\n    },\n    getIntersection: function getIntersection() {\n      return this._intersection;\n    },\n    getDistance: function getDistance() {\n      return this._distance;\n    },\n    divide: function divide() {\n      var curve = this.getCurve(),\n          res = curve && curve.divideAtTime(this.getTime());\n\n      if (res) {\n        this._setSegment(res._segment1);\n      }\n\n      return res;\n    },\n    split: function split() {\n      var curve = this.getCurve(),\n          path = curve._path,\n          res = curve && curve.splitAtTime(this.getTime());\n\n      if (res) {\n        this._setSegment(path.getLastSegment());\n      }\n\n      return res;\n    },\n    equals: function equals(loc, _ignoreOther) {\n      var res = this === loc;\n\n      if (!res && loc instanceof CurveLocation) {\n        var c1 = this.getCurve(),\n            c2 = loc.getCurve(),\n            p1 = c1._path,\n            p2 = c2._path;\n\n        if (p1 === p2) {\n          var abs = Math.abs,\n              epsilon = 1e-7,\n              diff = abs(this.getOffset() - loc.getOffset()),\n              i1 = !_ignoreOther && this._intersection,\n              i2 = !_ignoreOther && loc._intersection;\n          res = (diff < epsilon || p1 && abs(p1.getLength() - diff) < epsilon) && (!i1 && !i2 || i1 && i2 && i1.equals(i2, true));\n        }\n      }\n\n      return res;\n    },\n    toString: function toString() {\n      var parts = [],\n          point = this.getPoint(),\n          f = Formatter.instance;\n      if (point) parts.push('point: ' + point);\n      var index = this.getIndex();\n      if (index != null) parts.push('index: ' + index);\n      var time = this.getTime();\n      if (time != null) parts.push('time: ' + f.number(time));\n      if (this._distance != null) parts.push('distance: ' + f.number(this._distance));\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    isTouching: function isTouching() {\n      var inter = this._intersection;\n\n      if (inter && this.getTangent().isCollinear(inter.getTangent())) {\n        var curve1 = this.getCurve(),\n            curve2 = inter.getCurve();\n        return !(curve1.isStraight() && curve2.isStraight() && curve1.getLine().intersect(curve2.getLine()));\n      }\n\n      return false;\n    },\n    isCrossing: function isCrossing() {\n      var inter = this._intersection;\n      if (!inter) return false;\n      var t1 = this.getTime(),\n          t2 = inter.getTime(),\n          tMin = 1e-8,\n          tMax = 1 - tMin,\n          t1Inside = t1 >= tMin && t1 <= tMax,\n          t2Inside = t2 >= tMin && t2 <= tMax;\n      if (t1Inside && t2Inside) return !this.isTouching();\n      var c2 = this.getCurve(),\n          c1 = c2 && t1 < tMin ? c2.getPrevious() : c2,\n          c4 = inter.getCurve(),\n          c3 = c4 && t2 < tMin ? c4.getPrevious() : c4;\n      if (t1 > tMax) c2 = c2.getNext();\n      if (t2 > tMax) c4 = c4.getNext();\n      if (!c1 || !c2 || !c3 || !c4) return false;\n      var offsets = [];\n\n      function addOffsets(curve, end) {\n        var v = curve.getValues(),\n            roots = Curve.classify(v).roots || Curve.getPeaks(v),\n            count = roots.length,\n            offset = Curve.getLength(v, end && count ? roots[count - 1] : 0, !end && count ? roots[0] : 1);\n        offsets.push(count ? offset : offset / 64);\n      }\n\n      function isInRange(angle, min, max) {\n        return min < max ? angle > min && angle < max : angle > min || angle < max;\n      }\n\n      if (!t1Inside) {\n        addOffsets(c1, true);\n        addOffsets(c2, false);\n      }\n\n      if (!t2Inside) {\n        addOffsets(c3, true);\n        addOffsets(c4, false);\n      }\n\n      var pt = this.getPoint(),\n          offset = Math.min.apply(Math, offsets),\n          v2 = t1Inside ? c2.getTangentAtTime(t1) : c2.getPointAt(offset).subtract(pt),\n          v1 = t1Inside ? v2.negate() : c1.getPointAt(-offset).subtract(pt),\n          v4 = t2Inside ? c4.getTangentAtTime(t2) : c4.getPointAt(offset).subtract(pt),\n          v3 = t2Inside ? v4.negate() : c3.getPointAt(-offset).subtract(pt),\n          a1 = v1.getAngle(),\n          a2 = v2.getAngle(),\n          a3 = v3.getAngle(),\n          a4 = v4.getAngle();\n      return !!(t1Inside ? isInRange(a1, a3, a4) ^ isInRange(a2, a3, a4) && isInRange(a1, a4, a3) ^ isInRange(a2, a4, a3) : isInRange(a3, a1, a2) ^ isInRange(a4, a1, a2) && isInRange(a3, a2, a1) ^ isInRange(a4, a2, a1));\n    },\n    hasOverlap: function hasOverlap() {\n      return !!this._overlap;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    var get = name + 'At';\n\n    this[name] = function () {\n      var curve = this.getCurve(),\n          time = this.getTime();\n      return time != null && curve && curve[get](time, true);\n    };\n  }, {\n    preserve: true\n  }), new function () {\n    function insert(locations, loc, merge) {\n      var length = locations.length,\n          l = 0,\n          r = length - 1;\n\n      function search(index, dir) {\n        for (var i = index + dir; i >= -1 && i <= length; i += dir) {\n          var loc2 = locations[(i % length + length) % length];\n          if (!loc.getPoint().isClose(loc2.getPoint(), 1e-7)) break;\n          if (loc.equals(loc2)) return loc2;\n        }\n\n        return null;\n      }\n\n      while (l <= r) {\n        var m = l + r >>> 1,\n            loc2 = locations[m],\n            found;\n\n        if (merge && (found = loc.equals(loc2) ? loc2 : search(m, -1) || search(m, 1))) {\n          if (loc._overlap) {\n            found._overlap = found._intersection._overlap = true;\n          }\n\n          return found;\n        }\n\n        var path1 = loc.getPath(),\n            path2 = loc2.getPath(),\n            diff = path1 !== path2 ? path1._id - path2._id : loc.getIndex() + loc.getTime() - (loc2.getIndex() + loc2.getTime());\n\n        if (diff < 0) {\n          r = m - 1;\n        } else {\n          l = m + 1;\n        }\n      }\n\n      locations.splice(l, 0, loc);\n      return loc;\n    }\n\n    return {\n      statics: {\n        insert: insert,\n        expand: function expand(locations) {\n          var expanded = locations.slice();\n\n          for (var i = locations.length - 1; i >= 0; i--) {\n            insert(expanded, locations[i]._intersection, false);\n          }\n\n          return expanded;\n        }\n      }\n    };\n  }());\n  var PathItem = Item.extend({\n    _class: 'PathItem',\n    _selectBounds: false,\n    _canScaleStroke: true,\n    beans: true,\n    initialize: function PathItem() {},\n    statics: {\n      create: function create(arg) {\n        var data, segments, compound;\n\n        if (Base.isPlainObject(arg)) {\n          segments = arg.segments;\n          data = arg.pathData;\n        } else if (Array.isArray(arg)) {\n          segments = arg;\n        } else if (typeof arg === 'string') {\n          data = arg;\n        }\n\n        if (segments) {\n          var first = segments[0];\n          compound = first && Array.isArray(first[0]);\n        } else if (data) {\n          compound = (data.match(/m/gi) || []).length > 1 || /z\\s*\\S+/i.test(data);\n        }\n\n        var ctor = compound ? CompoundPath : Path;\n        return new ctor(arg);\n      }\n    },\n    _asPathItem: function _asPathItem() {\n      return this;\n    },\n    isClockwise: function isClockwise() {\n      return this.getArea() >= 0;\n    },\n    setClockwise: function setClockwise(clockwise) {\n      if (this.isClockwise() != (clockwise = !!clockwise)) this.reverse();\n    },\n    setPathData: function setPathData(data) {\n      var parts = data && data.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),\n          coords,\n          relative = false,\n          previous,\n          control,\n          current = new Point(),\n          start = new Point();\n\n      function getCoord(index, coord) {\n        var val = +coords[index];\n        if (relative) val += current[coord];\n        return val;\n      }\n\n      function getPoint(index) {\n        return new Point(getCoord(index, 'x'), getCoord(index + 1, 'y'));\n      }\n\n      this.clear();\n\n      for (var i = 0, l = parts && parts.length; i < l; i++) {\n        var part = parts[i],\n            command = part[0],\n            lower = command.toLowerCase();\n        coords = part.match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g);\n        var length = coords && coords.length;\n        relative = command === lower;\n        if (previous === 'z' && !/[mz]/.test(lower)) this.moveTo(current);\n\n        switch (lower) {\n          case 'm':\n          case 'l':\n            var move = lower === 'm';\n\n            for (var j = 0; j < length; j += 2) {\n              this[move ? 'moveTo' : 'lineTo'](current = getPoint(j));\n\n              if (move) {\n                start = current;\n                move = false;\n              }\n            }\n\n            control = current;\n            break;\n\n          case 'h':\n          case 'v':\n            var coord = lower === 'h' ? 'x' : 'y';\n            current = current.clone();\n\n            for (var j = 0; j < length; j++) {\n              current[coord] = getCoord(j, coord);\n              this.lineTo(current);\n            }\n\n            control = current;\n            break;\n\n          case 'c':\n            for (var j = 0; j < length; j += 6) {\n              this.cubicCurveTo(getPoint(j), control = getPoint(j + 2), current = getPoint(j + 4));\n            }\n\n            break;\n\n          case 's':\n            for (var j = 0; j < length; j += 4) {\n              this.cubicCurveTo(/[cs]/.test(previous) ? current.multiply(2).subtract(control) : current, control = getPoint(j), current = getPoint(j + 2));\n              previous = lower;\n            }\n\n            break;\n\n          case 'q':\n            for (var j = 0; j < length; j += 4) {\n              this.quadraticCurveTo(control = getPoint(j), current = getPoint(j + 2));\n            }\n\n            break;\n\n          case 't':\n            for (var j = 0; j < length; j += 2) {\n              this.quadraticCurveTo(control = /[qt]/.test(previous) ? current.multiply(2).subtract(control) : current, current = getPoint(j));\n              previous = lower;\n            }\n\n            break;\n\n          case 'a':\n            for (var j = 0; j < length; j += 7) {\n              this.arcTo(current = getPoint(j + 5), new Size(+coords[j], +coords[j + 1]), +coords[j + 2], +coords[j + 4], +coords[j + 3]);\n            }\n\n            break;\n\n          case 'z':\n            this.closePath(1e-12);\n            current = start;\n            break;\n        }\n\n        previous = lower;\n      }\n    },\n    _canComposite: function _canComposite() {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _contains: function _contains(point) {\n      var winding = point.isInside(this.getBounds({\n        internal: true,\n        handle: true\n      })) ? this._getWinding(point) : {};\n      return winding.onPath || !!(this.getFillRule() === 'evenodd' ? winding.windingL & 1 || winding.windingR & 1 : winding.winding);\n    },\n    getIntersections: function getIntersections(path, include, _matrix, _returnFirst) {\n      var self = this === path || !path,\n          matrix1 = this._matrix._orNullIfIdentity(),\n          matrix2 = self ? matrix1 : (_matrix || path._matrix)._orNullIfIdentity();\n\n      return self || this.getBounds(matrix1).intersects(path.getBounds(matrix2), 1e-12) ? Curve.getIntersections(this.getCurves(), !self && path.getCurves(), include, matrix1, matrix2, _returnFirst) : [];\n    },\n    getCrossings: function getCrossings(path) {\n      return this.getIntersections(path, function (inter) {\n        return inter.isCrossing();\n      });\n    },\n    getNearestLocation: function getNearestLocation() {\n      var point = Point.read(arguments),\n          curves = this.getCurves(),\n          minDist = Infinity,\n          minLoc = null;\n\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getNearestLocation(point);\n\n        if (loc._distance < minDist) {\n          minDist = loc._distance;\n          minLoc = loc;\n        }\n      }\n\n      return minLoc;\n    },\n    getNearestPoint: function getNearestPoint() {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    },\n    interpolate: function interpolate(from, to, factor) {\n      var isPath = !this._children,\n          name = isPath ? '_segments' : '_children',\n          itemsFrom = from[name],\n          itemsTo = to[name],\n          items = this[name];\n\n      if (!itemsFrom || !itemsTo || itemsFrom.length !== itemsTo.length) {\n        throw new Error('Invalid operands in interpolate() call: ' + from + ', ' + to);\n      }\n\n      var current = items.length,\n          length = itemsTo.length;\n\n      if (current < length) {\n        var ctor = isPath ? Segment : Path;\n\n        for (var i = current; i < length; i++) {\n          this.add(new ctor());\n        }\n      } else if (current > length) {\n        this[isPath ? 'removeSegments' : 'removeChildren'](length, current);\n      }\n\n      for (var i = 0; i < length; i++) {\n        items[i].interpolate(itemsFrom[i], itemsTo[i], factor);\n      }\n\n      if (isPath) {\n        this.setClosed(from._closed);\n\n        this._changed(9);\n      }\n    },\n    compare: function compare(path) {\n      var ok = false;\n\n      if (path) {\n        var paths1 = this._children || [this],\n            paths2 = path._children ? path._children.slice() : [path],\n            length1 = paths1.length,\n            length2 = paths2.length,\n            matched = [],\n            count = 0;\n        ok = true;\n        var boundsOverlaps = CollisionDetection.findBoundsOverlaps(paths1, paths2, Numerical.GEOMETRIC_EPSILON);\n\n        for (var i1 = length1 - 1; i1 >= 0 && ok; i1--) {\n          var path1 = paths1[i1];\n          ok = false;\n          var pathBoundsOverlaps = boundsOverlaps[i1];\n\n          if (pathBoundsOverlaps) {\n            for (var i2 = pathBoundsOverlaps.length - 1; i2 >= 0 && !ok; i2--) {\n              if (path1.compare(paths2[pathBoundsOverlaps[i2]])) {\n                if (!matched[pathBoundsOverlaps[i2]]) {\n                  matched[pathBoundsOverlaps[i2]] = true;\n                  count++;\n                }\n\n                ok = true;\n              }\n            }\n          }\n        }\n\n        ok = ok && count === length2;\n      }\n\n      return ok;\n    }\n  });\n  var Path = PathItem.extend({\n    _class: 'Path',\n    _serializeFields: {\n      segments: [],\n      closed: false\n    },\n    initialize: function Path(arg) {\n      this._closed = false;\n      this._segments = [];\n      this._version = 0;\n      var args = arguments,\n          segments = Array.isArray(arg) ? typeof arg[0] === 'object' ? arg : args : arg && arg.size === undefined && (arg.x !== undefined || arg.point !== undefined) ? args : null;\n\n      if (segments && segments.length > 0) {\n        this.setSegments(segments);\n      } else {\n        this._curves = undefined;\n        this._segmentSelection = 0;\n\n        if (!segments && typeof arg === 'string') {\n          this.setPathData(arg);\n          arg = null;\n        }\n      }\n\n      this._initialize(!segments && arg);\n    },\n    _equals: function _equals(item) {\n      return this._closed === item._closed && Base.equals(this._segments, item._segments);\n    },\n    copyContent: function copyContent(source) {\n      this.setSegments(source._segments);\n      this._closed = source._closed;\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n\n      if (flags & 8) {\n        this._length = this._area = undefined;\n\n        if (flags & 32) {\n          this._version++;\n        } else if (this._curves) {\n          for (var i = 0, l = this._curves.length; i < l; i++) {\n            this._curves[i]._changed();\n          }\n        }\n      } else if (flags & 64) {\n        this._bounds = undefined;\n      }\n    },\n    getStyle: function getStyle() {\n      var parent = this._parent;\n      return (parent instanceof CompoundPath ? parent : this)._style;\n    },\n    getSegments: function getSegments() {\n      return this._segments;\n    },\n    setSegments: function setSegments(segments) {\n      var fullySelected = this.isFullySelected(),\n          length = segments && segments.length;\n      this._segments.length = 0;\n      this._segmentSelection = 0;\n      this._curves = undefined;\n\n      if (length) {\n        var last = segments[length - 1];\n\n        if (typeof last === 'boolean') {\n          this.setClosed(last);\n          length--;\n        }\n\n        this._add(Segment.readList(segments, 0, {}, length));\n      }\n\n      if (fullySelected) this.setFullySelected(true);\n    },\n    getFirstSegment: function getFirstSegment() {\n      return this._segments[0];\n    },\n    getLastSegment: function getLastSegment() {\n      return this._segments[this._segments.length - 1];\n    },\n    getCurves: function getCurves() {\n      var curves = this._curves,\n          segments = this._segments;\n\n      if (!curves) {\n        var length = this._countCurves();\n\n        curves = this._curves = new Array(length);\n\n        for (var i = 0; i < length; i++) {\n          curves[i] = new Curve(this, segments[i], segments[i + 1] || segments[0]);\n        }\n      }\n\n      return curves;\n    },\n    getFirstCurve: function getFirstCurve() {\n      return this.getCurves()[0];\n    },\n    getLastCurve: function getLastCurve() {\n      var curves = this.getCurves();\n      return curves[curves.length - 1];\n    },\n    isClosed: function isClosed() {\n      return this._closed;\n    },\n    setClosed: function setClosed(closed) {\n      if (this._closed != (closed = !!closed)) {\n        this._closed = closed;\n\n        if (this._curves) {\n          var length = this._curves.length = this._countCurves();\n\n          if (closed) this._curves[length - 1] = new Curve(this, this._segments[length - 1], this._segments[0]);\n        }\n\n        this._changed(41);\n      }\n    }\n  }, {\n    beans: true,\n    getPathData: function getPathData(_matrix, _precision) {\n      var segments = this._segments,\n          length = segments.length,\n          f = new Formatter(_precision),\n          coords = new Array(6),\n          first = true,\n          curX,\n          curY,\n          prevX,\n          prevY,\n          inX,\n          inY,\n          outX,\n          outY,\n          parts = [];\n\n      function addSegment(segment, skipLine) {\n        segment._transformCoordinates(_matrix, coords);\n\n        curX = coords[0];\n        curY = coords[1];\n\n        if (first) {\n          parts.push('M' + f.pair(curX, curY));\n          first = false;\n        } else {\n          inX = coords[2];\n          inY = coords[3];\n\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            if (!skipLine) {\n              var dx = curX - prevX,\n                  dy = curY - prevY;\n              parts.push(dx === 0 ? 'v' + f.number(dy) : dy === 0 ? 'h' + f.number(dx) : 'l' + f.pair(dx, dy));\n            }\n          } else {\n            parts.push('c' + f.pair(outX - prevX, outY - prevY) + ' ' + f.pair(inX - prevX, inY - prevY) + ' ' + f.pair(curX - prevX, curY - prevY));\n          }\n        }\n\n        prevX = curX;\n        prevY = curY;\n        outX = coords[4];\n        outY = coords[5];\n      }\n\n      if (!length) return '';\n\n      for (var i = 0; i < length; i++) {\n        addSegment(segments[i]);\n      }\n\n      if (this._closed && length > 0) {\n        addSegment(segments[0], true);\n        parts.push('z');\n      }\n\n      return parts.join('');\n    },\n    isEmpty: function isEmpty() {\n      return !this._segments.length;\n    },\n    _transformContent: function _transformContent(matrix) {\n      var segments = this._segments,\n          coords = new Array(6);\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        segments[i]._transformCoordinates(matrix, coords, true);\n      }\n\n      return true;\n    },\n    _add: function _add(segs, index) {\n      var segments = this._segments,\n          curves = this._curves,\n          amount = segs.length,\n          append = index == null,\n          index = append ? segments.length : index;\n\n      for (var i = 0; i < amount; i++) {\n        var segment = segs[i];\n        if (segment._path) segment = segs[i] = segment.clone();\n        segment._path = this;\n        segment._index = index + i;\n        if (segment._selection) this._updateSelection(segment, 0, segment._selection);\n      }\n\n      if (append) {\n        Base.push(segments, segs);\n      } else {\n        segments.splice.apply(segments, [index, 0].concat(segs));\n\n        for (var i = index + amount, l = segments.length; i < l; i++) {\n          segments[i]._index = i;\n        }\n      }\n\n      if (curves) {\n        var total = this._countCurves(),\n            start = index > 0 && index + amount - 1 === total ? index - 1 : index,\n            insert = start,\n            end = Math.min(start + amount, total);\n\n        if (segs._curves) {\n          curves.splice.apply(curves, [start, 0].concat(segs._curves));\n          insert += segs._curves.length;\n        }\n\n        for (var i = insert; i < end; i++) {\n          curves.splice(i, 0, new Curve(this, null, null));\n        }\n\n        this._adjustCurves(start, end);\n      }\n\n      this._changed(41);\n\n      return segs;\n    },\n    _adjustCurves: function _adjustCurves(start, end) {\n      var segments = this._segments,\n          curves = this._curves,\n          curve;\n\n      for (var i = start; i < end; i++) {\n        curve = curves[i];\n        curve._path = this;\n        curve._segment1 = segments[i];\n        curve._segment2 = segments[i + 1] || segments[0];\n\n        curve._changed();\n      }\n\n      if (curve = curves[this._closed && !start ? segments.length - 1 : start - 1]) {\n        curve._segment2 = segments[start] || segments[0];\n\n        curve._changed();\n      }\n\n      if (curve = curves[end]) {\n        curve._segment1 = segments[end];\n\n        curve._changed();\n      }\n    },\n    _countCurves: function _countCurves() {\n      var length = this._segments.length;\n      return !this._closed && length > 0 ? length - 1 : length;\n    },\n    add: function add(segment1) {\n      var args = arguments;\n      return args.length > 1 && typeof segment1 !== 'number' ? this._add(Segment.readList(args)) : this._add([Segment.read(args)])[0];\n    },\n    insert: function insert(index, segment1) {\n      var args = arguments;\n      return args.length > 2 && typeof segment1 !== 'number' ? this._add(Segment.readList(args, 1), index) : this._add([Segment.read(args, 1)], index)[0];\n    },\n    addSegment: function addSegment() {\n      return this._add([Segment.read(arguments)])[0];\n    },\n    insertSegment: function insertSegment(index) {\n      return this._add([Segment.read(arguments, 1)], index)[0];\n    },\n    addSegments: function addSegments(segments) {\n      return this._add(Segment.readList(segments));\n    },\n    insertSegments: function insertSegments(index, segments) {\n      return this._add(Segment.readList(segments), index);\n    },\n    removeSegment: function removeSegment(index) {\n      return this.removeSegments(index, index + 1)[0] || null;\n    },\n    removeSegments: function removeSegments(start, end, _includeCurves) {\n      start = start || 0;\n      end = Base.pick(end, this._segments.length);\n      var segments = this._segments,\n          curves = this._curves,\n          count = segments.length,\n          removed = segments.splice(start, end - start),\n          amount = removed.length;\n      if (!amount) return removed;\n\n      for (var i = 0; i < amount; i++) {\n        var segment = removed[i];\n        if (segment._selection) this._updateSelection(segment, segment._selection, 0);\n        segment._index = segment._path = null;\n      }\n\n      for (var i = start, l = segments.length; i < l; i++) {\n        segments[i]._index = i;\n      }\n\n      if (curves) {\n        var index = start > 0 && end === count + (this._closed ? 1 : 0) ? start - 1 : start,\n            curves = curves.splice(index, amount);\n\n        for (var i = curves.length - 1; i >= 0; i--) {\n          curves[i]._path = null;\n        }\n\n        if (_includeCurves) removed._curves = curves.slice(1);\n\n        this._adjustCurves(index, index);\n      }\n\n      this._changed(41);\n\n      return removed;\n    },\n    clear: '#removeSegments',\n    hasHandles: function hasHandles() {\n      var segments = this._segments;\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        if (segments[i].hasHandles()) return true;\n      }\n\n      return false;\n    },\n    clearHandles: function clearHandles() {\n      var segments = this._segments;\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        segments[i].clearHandles();\n      }\n    },\n    getLength: function getLength() {\n      if (this._length == null) {\n        var curves = this.getCurves(),\n            length = 0;\n\n        for (var i = 0, l = curves.length; i < l; i++) {\n          length += curves[i].getLength();\n        }\n\n        this._length = length;\n      }\n\n      return this._length;\n    },\n    getArea: function getArea() {\n      var area = this._area;\n\n      if (area == null) {\n        var segments = this._segments,\n            closed = this._closed;\n        area = 0;\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var last = i + 1 === l;\n          area += Curve.getArea(Curve.getValues(segments[i], segments[last ? 0 : i + 1], null, last && !closed));\n        }\n\n        this._area = area;\n      }\n\n      return area;\n    },\n    isFullySelected: function isFullySelected() {\n      var length = this._segments.length;\n      return this.isSelected() && length > 0 && this._segmentSelection === length * 7;\n    },\n    setFullySelected: function setFullySelected(selected) {\n      if (selected) this._selectSegments(true);\n      this.setSelected(selected);\n    },\n    setSelection: function setSelection(selection) {\n      if (!(selection & 1)) this._selectSegments(false);\n      setSelection.base.call(this, selection);\n    },\n    _selectSegments: function _selectSegments(selected) {\n      var segments = this._segments,\n          length = segments.length,\n          selection = selected ? 7 : 0;\n      this._segmentSelection = selection * length;\n\n      for (var i = 0; i < length; i++) {\n        segments[i]._selection = selection;\n      }\n    },\n    _updateSelection: function _updateSelection(segment, oldSelection, newSelection) {\n      segment._selection = newSelection;\n      var selection = this._segmentSelection += newSelection - oldSelection;\n      if (selection > 0) this.setSelected(true);\n    },\n    divideAt: function divideAt(location) {\n      var loc = this.getLocationAt(location),\n          curve;\n      return loc && (curve = loc.getCurve().divideAt(loc.getCurveOffset())) ? curve._segment1 : null;\n    },\n    splitAt: function splitAt(location) {\n      var loc = this.getLocationAt(location),\n          index = loc && loc.index,\n          time = loc && loc.time,\n          tMin = 1e-8,\n          tMax = 1 - tMin;\n\n      if (time > tMax) {\n        index++;\n        time = 0;\n      }\n\n      var curves = this.getCurves();\n\n      if (index >= 0 && index < curves.length) {\n        if (time >= tMin) {\n          curves[index++].divideAtTime(time);\n        }\n\n        var segs = this.removeSegments(index, this._segments.length, true),\n            path;\n\n        if (this._closed) {\n          this.setClosed(false);\n          path = this;\n        } else {\n          path = new Path(Item.NO_INSERT);\n          path.insertAbove(this);\n          path.copyAttributes(this);\n        }\n\n        path._add(segs, 0);\n\n        this.addSegment(segs[0]);\n        return path;\n      }\n\n      return null;\n    },\n    split: function split(index, time) {\n      var curve,\n          location = time === undefined ? index : (curve = this.getCurves()[index]) && curve.getLocationAtTime(time);\n      return location != null ? this.splitAt(location) : null;\n    },\n    join: function join(path, tolerance) {\n      var epsilon = tolerance || 0;\n\n      if (path && path !== this) {\n        var segments = path._segments,\n            last1 = this.getLastSegment(),\n            last2 = path.getLastSegment();\n        if (!last2) return this;\n        if (last1 && last1._point.isClose(last2._point, epsilon)) path.reverse();\n        var first2 = path.getFirstSegment();\n\n        if (last1 && last1._point.isClose(first2._point, epsilon)) {\n          last1.setHandleOut(first2._handleOut);\n\n          this._add(segments.slice(1));\n        } else {\n          var first1 = this.getFirstSegment();\n          if (first1 && first1._point.isClose(first2._point, epsilon)) path.reverse();\n          last2 = path.getLastSegment();\n\n          if (first1 && first1._point.isClose(last2._point, epsilon)) {\n            first1.setHandleIn(last2._handleIn);\n\n            this._add(segments.slice(0, segments.length - 1), 0);\n          } else {\n            this._add(segments.slice());\n          }\n        }\n\n        if (path._closed) this._add([segments[0]]);\n        path.remove();\n      }\n\n      var first = this.getFirstSegment(),\n          last = this.getLastSegment();\n\n      if (first !== last && first._point.isClose(last._point, epsilon)) {\n        first.setHandleIn(last._handleIn);\n        last.remove();\n        this.setClosed(true);\n      }\n\n      return this;\n    },\n    reduce: function reduce(options) {\n      var curves = this.getCurves(),\n          simplify = options && options.simplify,\n          tolerance = simplify ? 1e-7 : 0;\n\n      for (var i = curves.length - 1; i >= 0; i--) {\n        var curve = curves[i];\n        if (!curve.hasHandles() && (!curve.hasLength(tolerance) || simplify && curve.isCollinear(curve.getNext()))) curve.remove();\n      }\n\n      return this;\n    },\n    reverse: function reverse() {\n      this._segments.reverse();\n\n      for (var i = 0, l = this._segments.length; i < l; i++) {\n        var segment = this._segments[i];\n        var handleIn = segment._handleIn;\n        segment._handleIn = segment._handleOut;\n        segment._handleOut = handleIn;\n        segment._index = i;\n      }\n\n      this._curves = null;\n\n      this._changed(9);\n    },\n    flatten: function flatten(flatness) {\n      var flattener = new PathFlattener(this, flatness || 0.25, 256, true),\n          parts = flattener.parts,\n          length = parts.length,\n          segments = [];\n\n      for (var i = 0; i < length; i++) {\n        segments.push(new Segment(parts[i].curve.slice(0, 2)));\n      }\n\n      if (!this._closed && length > 0) {\n        segments.push(new Segment(parts[length - 1].curve.slice(6)));\n      }\n\n      this.setSegments(segments);\n    },\n    simplify: function simplify(tolerance) {\n      var segments = new PathFitter(this).fit(tolerance || 2.5);\n      if (segments) this.setSegments(segments);\n      return !!segments;\n    },\n    smooth: function smooth(options) {\n      var that = this,\n          opts = options || {},\n          type = opts.type || 'asymmetric',\n          segments = this._segments,\n          length = segments.length,\n          closed = this._closed;\n\n      function getIndex(value, _default) {\n        var index = value && value.index;\n\n        if (index != null) {\n          var path = value.path;\n          if (path && path !== that) throw new Error(value._class + ' ' + index + ' of ' + path + ' is not part of ' + that);\n          if (_default && value instanceof Curve) index++;\n        } else {\n          index = typeof value === 'number' ? value : _default;\n        }\n\n        return Math.min(index < 0 && closed ? index % length : index < 0 ? index + length : index, length - 1);\n      }\n\n      var loop = closed && opts.from === undefined && opts.to === undefined,\n          from = getIndex(opts.from, 0),\n          to = getIndex(opts.to, length - 1);\n\n      if (from > to) {\n        if (closed) {\n          from -= length;\n        } else {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n      }\n\n      if (/^(?:asymmetric|continuous)$/.test(type)) {\n        var asymmetric = type === 'asymmetric',\n            min = Math.min,\n            amount = to - from + 1,\n            n = amount - 1,\n            padding = loop ? min(amount, 4) : 1,\n            paddingLeft = padding,\n            paddingRight = padding,\n            knots = [];\n\n        if (!closed) {\n          paddingLeft = min(1, from);\n          paddingRight = min(1, length - to - 1);\n        }\n\n        n += paddingLeft + paddingRight;\n        if (n <= 1) return;\n\n        for (var i = 0, j = from - paddingLeft; i <= n; i++, j++) {\n          knots[i] = segments[(j < 0 ? j + length : j) % length]._point;\n        }\n\n        var x = knots[0]._x + 2 * knots[1]._x,\n            y = knots[0]._y + 2 * knots[1]._y,\n            f = 2,\n            n_1 = n - 1,\n            rx = [x],\n            ry = [y],\n            rf = [f],\n            px = [],\n            py = [];\n\n        for (var i = 1; i < n; i++) {\n          var internal = i < n_1,\n              a = internal ? 1 : asymmetric ? 1 : 2,\n              b = internal ? 4 : asymmetric ? 2 : 7,\n              u = internal ? 4 : asymmetric ? 3 : 8,\n              v = internal ? 2 : asymmetric ? 0 : 1,\n              m = a / f;\n          f = rf[i] = b - m;\n          x = rx[i] = u * knots[i]._x + v * knots[i + 1]._x - m * x;\n          y = ry[i] = u * knots[i]._y + v * knots[i + 1]._y - m * y;\n        }\n\n        px[n_1] = rx[n_1] / rf[n_1];\n        py[n_1] = ry[n_1] / rf[n_1];\n\n        for (var i = n - 2; i >= 0; i--) {\n          px[i] = (rx[i] - px[i + 1]) / rf[i];\n          py[i] = (ry[i] - py[i + 1]) / rf[i];\n        }\n\n        px[n] = (3 * knots[n]._x - px[n_1]) / 2;\n        py[n] = (3 * knots[n]._y - py[n_1]) / 2;\n\n        for (var i = paddingLeft, max = n - paddingRight, j = from; i <= max; i++, j++) {\n          var segment = segments[j < 0 ? j + length : j],\n              pt = segment._point,\n              hx = px[i] - pt._x,\n              hy = py[i] - pt._y;\n          if (loop || i < max) segment.setHandleOut(hx, hy);\n          if (loop || i > paddingLeft) segment.setHandleIn(-hx, -hy);\n        }\n      } else {\n        for (var i = from; i <= to; i++) {\n          segments[i < 0 ? i + length : i].smooth(opts, !loop && i === from, !loop && i === to);\n        }\n      }\n    },\n    toShape: function toShape(insert) {\n      if (!this._closed) return null;\n      var segments = this._segments,\n          type,\n          size,\n          radius,\n          topCenter;\n\n      function isCollinear(i, j) {\n        var seg1 = segments[i],\n            seg2 = seg1.getNext(),\n            seg3 = segments[j],\n            seg4 = seg3.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg3._handleOut.isZero() && seg4._handleIn.isZero() && seg2._point.subtract(seg1._point).isCollinear(seg4._point.subtract(seg3._point));\n      }\n\n      function isOrthogonal(i) {\n        var seg2 = segments[i],\n            seg1 = seg2.getPrevious(),\n            seg3 = seg2.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg2._handleOut.isZero() && seg3._handleIn.isZero() && seg2._point.subtract(seg1._point).isOrthogonal(seg3._point.subtract(seg2._point));\n      }\n\n      function isArc(i) {\n        var seg1 = segments[i],\n            seg2 = seg1.getNext(),\n            handle1 = seg1._handleOut,\n            handle2 = seg2._handleIn,\n            kappa = 0.5522847498307936;\n\n        if (handle1.isOrthogonal(handle2)) {\n          var pt1 = seg1._point,\n              pt2 = seg2._point,\n              corner = new Line(pt1, handle1, true).intersect(new Line(pt2, handle2, true), true);\n          return corner && Numerical.isZero(handle1.getLength() / corner.subtract(pt1).getLength() - kappa) && Numerical.isZero(handle2.getLength() / corner.subtract(pt2).getLength() - kappa);\n        }\n\n        return false;\n      }\n\n      function getDistance(i, j) {\n        return segments[i]._point.getDistance(segments[j]._point);\n      }\n\n      if (!this.hasHandles() && segments.length === 4 && isCollinear(0, 2) && isCollinear(1, 3) && isOrthogonal(1)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(0, 3), getDistance(0, 1));\n        topCenter = segments[1]._point.add(segments[2]._point).divide(2);\n      } else if (segments.length === 8 && isArc(0) && isArc(2) && isArc(4) && isArc(6) && isCollinear(1, 5) && isCollinear(3, 7)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(1, 6), getDistance(0, 3));\n        radius = size.subtract(new Size(getDistance(0, 7), getDistance(1, 2))).divide(2);\n        topCenter = segments[3]._point.add(segments[4]._point).divide(2);\n      } else if (segments.length === 4 && isArc(0) && isArc(1) && isArc(2) && isArc(3)) {\n        if (Numerical.isZero(getDistance(0, 2) - getDistance(1, 3))) {\n          type = Shape.Circle;\n          radius = getDistance(0, 2) / 2;\n        } else {\n          type = Shape.Ellipse;\n          radius = new Size(getDistance(2, 0) / 2, getDistance(3, 1) / 2);\n        }\n\n        topCenter = segments[1]._point;\n      }\n\n      if (type) {\n        var center = this.getPosition(true),\n            shape = new type({\n          center: center,\n          size: size,\n          radius: radius,\n          insert: false\n        });\n        shape.copyAttributes(this, true);\n\n        shape._matrix.prepend(this._matrix);\n\n        shape.rotate(topCenter.subtract(center).getAngle() + 90);\n        if (insert === undefined || insert) shape.insertAbove(this);\n        return shape;\n      }\n\n      return null;\n    },\n    toPath: '#clone',\n    compare: function compare(path) {\n      if (!path || path instanceof CompoundPath) return compare.base.call(this, path);\n      var curves1 = this.getCurves(),\n          curves2 = path.getCurves(),\n          length1 = curves1.length,\n          length2 = curves2.length;\n\n      if (!length1 || !length2) {\n        return length1 == length2;\n      }\n\n      var v1 = curves1[0].getValues(),\n          values2 = [],\n          pos1 = 0,\n          pos2,\n          end1 = 0,\n          end2;\n\n      for (var i = 0; i < length2; i++) {\n        var v2 = curves2[i].getValues();\n        values2.push(v2);\n        var overlaps = Curve.getOverlaps(v1, v2);\n\n        if (overlaps) {\n          pos2 = !i && overlaps[0][0] > 0 ? length2 - 1 : i;\n          end2 = overlaps[0][1];\n          break;\n        }\n      }\n\n      var abs = Math.abs,\n          epsilon = 1e-8,\n          v2 = values2[pos2],\n          start2;\n\n      while (v1 && v2) {\n        var overlaps = Curve.getOverlaps(v1, v2);\n\n        if (overlaps) {\n          var t1 = overlaps[0][0];\n\n          if (abs(t1 - end1) < epsilon) {\n            end1 = overlaps[1][0];\n\n            if (end1 === 1) {\n              v1 = ++pos1 < length1 ? curves1[pos1].getValues() : null;\n              end1 = 0;\n            }\n\n            var t2 = overlaps[0][1];\n\n            if (abs(t2 - end2) < epsilon) {\n              if (!start2) start2 = [pos2, t2];\n              end2 = overlaps[1][1];\n\n              if (end2 === 1) {\n                if (++pos2 >= length2) pos2 = 0;\n                v2 = values2[pos2] || curves2[pos2].getValues();\n                end2 = 0;\n              }\n\n              if (!v1) {\n                return start2[0] === pos2 && start2[1] === end2;\n              }\n\n              continue;\n            }\n          }\n        }\n\n        break;\n      }\n\n      return false;\n    },\n    _hitTestSelf: function _hitTestSelf(point, options, viewMatrix, strokeMatrix) {\n      var that = this,\n          style = this.getStyle(),\n          segments = this._segments,\n          numSegments = segments.length,\n          closed = this._closed,\n          tolerancePadding = options._tolerancePadding,\n          strokePadding = tolerancePadding,\n          join,\n          cap,\n          miterLimit,\n          area,\n          loc,\n          res,\n          hitStroke = options.stroke && style.hasStroke(),\n          hitFill = options.fill && style.hasFill(),\n          hitCurves = options.curves,\n          strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : hitFill && options.tolerance > 0 || hitCurves ? 0 : null;\n\n      if (strokeRadius !== null) {\n        if (strokeRadius > 0) {\n          join = style.getStrokeJoin();\n          cap = style.getStrokeCap();\n          miterLimit = style.getMiterLimit();\n          strokePadding = strokePadding.add(Path._getStrokePadding(strokeRadius, strokeMatrix));\n        } else {\n          join = cap = 'round';\n        }\n      }\n\n      function isCloseEnough(pt, padding) {\n        return point.subtract(pt).divide(padding).length <= 1;\n      }\n\n      function checkSegmentPoint(seg, pt, name) {\n        if (!options.selected || pt.isSelected()) {\n          var anchor = seg._point;\n          if (pt !== anchor) pt = pt.add(anchor);\n\n          if (isCloseEnough(pt, strokePadding)) {\n            return new HitResult(name, that, {\n              segment: seg,\n              point: pt\n            });\n          }\n        }\n      }\n\n      function checkSegmentPoints(seg, ends) {\n        return (ends || options.segments) && checkSegmentPoint(seg, seg._point, 'segment') || !ends && options.handles && (checkSegmentPoint(seg, seg._handleIn, 'handle-in') || checkSegmentPoint(seg, seg._handleOut, 'handle-out'));\n      }\n\n      function addToArea(point) {\n        area.add(point);\n      }\n\n      function checkSegmentStroke(segment) {\n        var isJoin = closed || segment._index > 0 && segment._index < numSegments - 1;\n\n        if ((isJoin ? join : cap) === 'round') {\n          return isCloseEnough(segment._point, strokePadding);\n        } else {\n          area = new Path({\n            internal: true,\n            closed: true\n          });\n\n          if (isJoin) {\n            if (!segment.isSmooth()) {\n              Path._addBevelJoin(segment, join, strokeRadius, miterLimit, null, strokeMatrix, addToArea, true);\n            }\n          } else if (cap === 'square') {\n            Path._addSquareCap(segment, cap, strokeRadius, null, strokeMatrix, addToArea, true);\n          }\n\n          if (!area.isEmpty()) {\n            var loc;\n            return area.contains(point) || (loc = area.getNearestLocation(point)) && isCloseEnough(loc.getPoint(), tolerancePadding);\n          }\n        }\n      }\n\n      if (options.ends && !options.segments && !closed) {\n        if (res = checkSegmentPoints(segments[0], true) || checkSegmentPoints(segments[numSegments - 1], true)) return res;\n      } else if (options.segments || options.handles) {\n        for (var i = 0; i < numSegments; i++) {\n          if (res = checkSegmentPoints(segments[i])) return res;\n        }\n      }\n\n      if (strokeRadius !== null) {\n        loc = this.getNearestLocation(point);\n\n        if (loc) {\n          var time = loc.getTime();\n\n          if (time === 0 || time === 1 && numSegments > 1) {\n            if (!checkSegmentStroke(loc.getSegment())) loc = null;\n          } else if (!isCloseEnough(loc.getPoint(), strokePadding)) {\n            loc = null;\n          }\n        }\n\n        if (!loc && join === 'miter' && numSegments > 1) {\n          for (var i = 0; i < numSegments; i++) {\n            var segment = segments[i];\n\n            if (point.getDistance(segment._point) <= miterLimit * strokeRadius && checkSegmentStroke(segment)) {\n              loc = segment.getLocation();\n              break;\n            }\n          }\n        }\n      }\n\n      return !loc && hitFill && this._contains(point) || loc && !hitStroke && !hitCurves ? new HitResult('fill', this) : loc ? new HitResult(hitStroke ? 'stroke' : 'curve', this, {\n        location: loc,\n        point: loc.getPoint()\n      }) : null;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var loc = this.getLocationAt(offset);\n      return loc && loc[name]();\n    };\n  }, {\n    beans: false,\n    getLocationOf: function getLocationOf() {\n      var point = Point.read(arguments),\n          curves = this.getCurves();\n\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getLocationOf(point);\n        if (loc) return loc;\n      }\n\n      return null;\n    },\n    getOffsetOf: function getOffsetOf() {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getLocationAt: function getLocationAt(offset) {\n      if (typeof offset === 'number') {\n        var curves = this.getCurves(),\n            length = 0;\n\n        for (var i = 0, l = curves.length; i < l; i++) {\n          var start = length,\n              curve = curves[i];\n          length += curve.getLength();\n\n          if (length > offset) {\n            return curve.getLocationAt(offset - start);\n          }\n        }\n\n        if (curves.length > 0 && offset <= this.getLength()) {\n          return new CurveLocation(curves[curves.length - 1], 1);\n        }\n      } else if (offset && offset.getPath && offset.getPath() === this) {\n        return offset;\n      }\n\n      return null;\n    },\n    getOffsetsWithTangent: function getOffsetsWithTangent() {\n      var tangent = Point.read(arguments);\n\n      if (tangent.isZero()) {\n        return [];\n      }\n\n      var offsets = [];\n      var curveStart = 0;\n      var curves = this.getCurves();\n\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var curve = curves[i];\n        var curveTimes = curve.getTimesWithTangent(tangent);\n\n        for (var j = 0, m = curveTimes.length; j < m; j++) {\n          var offset = curveStart + curve.getOffsetAtTime(curveTimes[j]);\n\n          if (offsets.indexOf(offset) < 0) {\n            offsets.push(offset);\n          }\n        }\n\n        curveStart += curve.length;\n      }\n\n      return offsets;\n    }\n  }), new function () {\n    function drawHandles(ctx, segments, matrix, size) {\n      if (size <= 0) return;\n      var half = size / 2,\n          miniSize = size - 2,\n          miniHalf = half - 1,\n          coords = new Array(6),\n          pX,\n          pY;\n\n      function drawHandle(index) {\n        var hX = coords[index],\n            hY = coords[index + 1];\n\n        if (pX != hX || pY != hY) {\n          ctx.beginPath();\n          ctx.moveTo(pX, pY);\n          ctx.lineTo(hX, hY);\n          ctx.stroke();\n          ctx.beginPath();\n          ctx.arc(hX, hY, half, 0, Math.PI * 2, true);\n          ctx.fill();\n        }\n      }\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var segment = segments[i],\n            selection = segment._selection;\n\n        segment._transformCoordinates(matrix, coords);\n\n        pX = coords[0];\n        pY = coords[1];\n        if (selection & 2) drawHandle(2);\n        if (selection & 4) drawHandle(4);\n        ctx.fillRect(pX - half, pY - half, size, size);\n\n        if (miniSize > 0 && !(selection & 1)) {\n          var fillStyle = ctx.fillStyle;\n          ctx.fillStyle = '#ffffff';\n          ctx.fillRect(pX - miniHalf, pY - miniHalf, miniSize, miniSize);\n          ctx.fillStyle = fillStyle;\n        }\n      }\n    }\n\n    function drawSegments(ctx, path, matrix) {\n      var segments = path._segments,\n          length = segments.length,\n          coords = new Array(6),\n          first = true,\n          curX,\n          curY,\n          prevX,\n          prevY,\n          inX,\n          inY,\n          outX,\n          outY;\n\n      function drawSegment(segment) {\n        if (matrix) {\n          segment._transformCoordinates(matrix, coords);\n\n          curX = coords[0];\n          curY = coords[1];\n        } else {\n          var point = segment._point;\n          curX = point._x;\n          curY = point._y;\n        }\n\n        if (first) {\n          ctx.moveTo(curX, curY);\n          first = false;\n        } else {\n          if (matrix) {\n            inX = coords[2];\n            inY = coords[3];\n          } else {\n            var handle = segment._handleIn;\n            inX = curX + handle._x;\n            inY = curY + handle._y;\n          }\n\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            ctx.lineTo(curX, curY);\n          } else {\n            ctx.bezierCurveTo(outX, outY, inX, inY, curX, curY);\n          }\n        }\n\n        prevX = curX;\n        prevY = curY;\n\n        if (matrix) {\n          outX = coords[4];\n          outY = coords[5];\n        } else {\n          var handle = segment._handleOut;\n          outX = prevX + handle._x;\n          outY = prevY + handle._y;\n        }\n      }\n\n      for (var i = 0; i < length; i++) {\n        drawSegment(segments[i]);\n      }\n\n      if (path._closed && length > 0) drawSegment(segments[0]);\n    }\n\n    return {\n      _draw: function _draw(ctx, param, viewMatrix, strokeMatrix) {\n        var dontStart = param.dontStart,\n            dontPaint = param.dontFinish || param.clip,\n            style = this.getStyle(),\n            hasFill = style.hasFill(),\n            hasStroke = style.hasStroke(),\n            dashArray = style.getDashArray(),\n            dashLength = !paper.support.nativeDash && hasStroke && dashArray && dashArray.length;\n        if (!dontStart) ctx.beginPath();\n\n        if (hasFill || hasStroke && !dashLength || dontPaint) {\n          drawSegments(ctx, this, strokeMatrix);\n          if (this._closed) ctx.closePath();\n        }\n\n        function getOffset(i) {\n          return dashArray[(i % dashLength + dashLength) % dashLength];\n        }\n\n        if (!dontPaint && (hasFill || hasStroke)) {\n          this._setStyles(ctx, param, viewMatrix);\n\n          if (hasFill) {\n            ctx.fill(style.getFillRule());\n            ctx.shadowColor = 'rgba(0,0,0,0)';\n          }\n\n          if (hasStroke) {\n            if (dashLength) {\n              if (!dontStart) ctx.beginPath();\n              var flattener = new PathFlattener(this, 0.25, 32, false, strokeMatrix),\n                  length = flattener.length,\n                  from = -style.getDashOffset(),\n                  to,\n                  i = 0;\n              from = from % length;\n\n              while (from > 0) {\n                from -= getOffset(i--) + getOffset(i--);\n              }\n\n              while (from < length) {\n                to = from + getOffset(i++);\n                if (from > 0 || to > 0) flattener.drawPart(ctx, Math.max(from, 0), Math.max(to, 0));\n                from = to + getOffset(i++);\n              }\n            }\n\n            ctx.stroke();\n          }\n        }\n      },\n      _drawSelected: function _drawSelected(ctx, matrix) {\n        ctx.beginPath();\n        drawSegments(ctx, this, matrix);\n        ctx.stroke();\n        drawHandles(ctx, this._segments, matrix, paper.settings.handleSize);\n      }\n    };\n  }(), new function () {\n    function getCurrentSegment(that) {\n      var segments = that._segments;\n      if (!segments.length) throw new Error('Use a moveTo() command first');\n      return segments[segments.length - 1];\n    }\n\n    return {\n      moveTo: function moveTo() {\n        var segments = this._segments;\n        if (segments.length === 1) this.removeSegment(0);\n        if (!segments.length) this._add([new Segment(Point.read(arguments))]);\n      },\n      moveBy: function moveBy() {\n        throw new Error('moveBy() is unsupported on Path items.');\n      },\n      lineTo: function lineTo() {\n        this._add([new Segment(Point.read(arguments))]);\n      },\n      cubicCurveTo: function cubicCurveTo() {\n        var args = arguments,\n            handle1 = Point.read(args),\n            handle2 = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this);\n        current.setHandleOut(handle1.subtract(current._point));\n\n        this._add([new Segment(to, handle2.subtract(to))]);\n      },\n      quadraticCurveTo: function quadraticCurveTo() {\n        var args = arguments,\n            handle = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.cubicCurveTo(handle.add(current.subtract(handle).multiply(1 / 3)), handle.add(to.subtract(handle).multiply(1 / 3)), to);\n      },\n      curveTo: function curveTo() {\n        var args = arguments,\n            through = Point.read(args),\n            to = Point.read(args),\n            t = Base.pick(Base.read(args), 0.5),\n            t1 = 1 - t,\n            current = getCurrentSegment(this)._point,\n            handle = through.subtract(current.multiply(t1 * t1)).subtract(to.multiply(t * t)).divide(2 * t * t1);\n\n        if (handle.isNaN()) throw new Error('Cannot put a curve through points with parameter = ' + t);\n        this.quadraticCurveTo(handle, to);\n      },\n      arcTo: function arcTo() {\n        var args = arguments,\n            abs = Math.abs,\n            sqrt = Math.sqrt,\n            current = getCurrentSegment(this),\n            from = current._point,\n            to = Point.read(args),\n            through,\n            peek = Base.peek(args),\n            clockwise = Base.pick(peek, true),\n            center,\n            extent,\n            vector,\n            matrix;\n\n        if (typeof clockwise === 'boolean') {\n          var middle = from.add(to).divide(2),\n              through = middle.add(middle.subtract(from).rotate(clockwise ? -90 : 90));\n        } else if (Base.remain(args) <= 2) {\n          through = to;\n          to = Point.read(args);\n        } else if (!from.equals(to)) {\n          var radius = Size.read(args),\n              isZero = Numerical.isZero;\n          if (isZero(radius.width) || isZero(radius.height)) return this.lineTo(to);\n          var rotation = Base.read(args),\n              clockwise = !!Base.read(args),\n              large = !!Base.read(args),\n              middle = from.add(to).divide(2),\n              pt = from.subtract(middle).rotate(-rotation),\n              x = pt.x,\n              y = pt.y,\n              rx = abs(radius.width),\n              ry = abs(radius.height),\n              rxSq = rx * rx,\n              rySq = ry * ry,\n              xSq = x * x,\n              ySq = y * y;\n          var factor = sqrt(xSq / rxSq + ySq / rySq);\n\n          if (factor > 1) {\n            rx *= factor;\n            ry *= factor;\n            rxSq = rx * rx;\n            rySq = ry * ry;\n          }\n\n          factor = (rxSq * rySq - rxSq * ySq - rySq * xSq) / (rxSq * ySq + rySq * xSq);\n          if (abs(factor) < 1e-12) factor = 0;\n          if (factor < 0) throw new Error('Cannot create an arc with the given arguments');\n          center = new Point(rx * y / ry, -ry * x / rx).multiply((large === clockwise ? -1 : 1) * sqrt(factor)).rotate(rotation).add(middle);\n          matrix = new Matrix().translate(center).rotate(rotation).scale(rx, ry);\n          vector = matrix._inverseTransform(from);\n          extent = vector.getDirectedAngle(matrix._inverseTransform(to));\n          if (!clockwise && extent > 0) extent -= 360;else if (clockwise && extent < 0) extent += 360;\n        }\n\n        if (through) {\n          var l1 = new Line(from.add(through).divide(2), through.subtract(from).rotate(90), true),\n              l2 = new Line(through.add(to).divide(2), to.subtract(through).rotate(90), true),\n              line = new Line(from, to),\n              throughSide = line.getSide(through);\n          center = l1.intersect(l2, true);\n\n          if (!center) {\n            if (!throughSide) return this.lineTo(to);\n            throw new Error('Cannot create an arc with the given arguments');\n          }\n\n          vector = from.subtract(center);\n          extent = vector.getDirectedAngle(to.subtract(center));\n          var centerSide = line.getSide(center, true);\n\n          if (centerSide === 0) {\n            extent = throughSide * abs(extent);\n          } else if (throughSide === centerSide) {\n            extent += extent < 0 ? 360 : -360;\n          }\n        }\n\n        if (extent) {\n          var epsilon = 1e-7,\n              ext = abs(extent),\n              count = ext >= 360 ? 4 : Math.ceil((ext - epsilon) / 90),\n              inc = extent / count,\n              half = inc * Math.PI / 360,\n              z = 4 / 3 * Math.sin(half) / (1 + Math.cos(half)),\n              segments = [];\n\n          for (var i = 0; i <= count; i++) {\n            var pt = to,\n                out = null;\n\n            if (i < count) {\n              out = vector.rotate(90).multiply(z);\n\n              if (matrix) {\n                pt = matrix._transformPoint(vector);\n                out = matrix._transformPoint(vector.add(out)).subtract(pt);\n              } else {\n                pt = center.add(vector);\n              }\n            }\n\n            if (!i) {\n              current.setHandleOut(out);\n            } else {\n              var _in = vector.rotate(-90).multiply(z);\n\n              if (matrix) {\n                _in = matrix._transformPoint(vector.add(_in)).subtract(pt);\n              }\n\n              segments.push(new Segment(pt, _in, out));\n            }\n\n            vector = vector.rotate(inc);\n          }\n\n          this._add(segments);\n        }\n      },\n      lineBy: function lineBy() {\n        var to = Point.read(arguments),\n            current = getCurrentSegment(this)._point;\n\n        this.lineTo(current.add(to));\n      },\n      curveBy: function curveBy() {\n        var args = arguments,\n            through = Point.read(args),\n            to = Point.read(args),\n            parameter = Base.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.curveTo(current.add(through), current.add(to), parameter);\n      },\n      cubicCurveBy: function cubicCurveBy() {\n        var args = arguments,\n            handle1 = Point.read(args),\n            handle2 = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.cubicCurveTo(current.add(handle1), current.add(handle2), current.add(to));\n      },\n      quadraticCurveBy: function quadraticCurveBy() {\n        var args = arguments,\n            handle = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.quadraticCurveTo(current.add(handle), current.add(to));\n      },\n      arcBy: function arcBy() {\n        var args = arguments,\n            current = getCurrentSegment(this)._point,\n            point = current.add(Point.read(args)),\n            clockwise = Base.pick(Base.peek(args), true);\n\n        if (typeof clockwise === 'boolean') {\n          this.arcTo(point, clockwise);\n        } else {\n          this.arcTo(point, current.add(Point.read(args)));\n        }\n      },\n      closePath: function closePath(tolerance) {\n        this.setClosed(true);\n        this.join(this, tolerance);\n      }\n    };\n  }(), {\n    _getBounds: function _getBounds(matrix, options) {\n      var method = options.handle ? 'getHandleBounds' : options.stroke ? 'getStrokeBounds' : 'getBounds';\n      return Path[method](this._segments, this._closed, this, matrix, options);\n    },\n    statics: {\n      getBounds: function getBounds(segments, closed, path, matrix, options, strokePadding) {\n        var first = segments[0];\n        if (!first) return new _Rectangle();\n\n        var coords = new Array(6),\n            prevCoords = first._transformCoordinates(matrix, new Array(6)),\n            min = prevCoords.slice(0, 2),\n            max = min.slice(),\n            roots = new Array(2);\n\n        function processSegment(segment) {\n          segment._transformCoordinates(matrix, coords);\n\n          for (var i = 0; i < 2; i++) {\n            Curve._addBounds(prevCoords[i], prevCoords[i + 4], coords[i + 2], coords[i], i, strokePadding ? strokePadding[i] : 0, min, max, roots);\n          }\n\n          var tmp = prevCoords;\n          prevCoords = coords;\n          coords = tmp;\n        }\n\n        for (var i = 1, l = segments.length; i < l; i++) {\n          processSegment(segments[i]);\n        }\n\n        if (closed) processSegment(first);\n        return new _Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      getStrokeBounds: function getStrokeBounds(segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n            stroke = style.hasStroke(),\n            strokeWidth = style.getStrokeWidth(),\n            strokeMatrix = stroke && path._getStrokeMatrix(matrix, options),\n            strokePadding = stroke && Path._getStrokePadding(strokeWidth, strokeMatrix),\n            bounds = Path.getBounds(segments, closed, path, matrix, options, strokePadding);\n\n        if (!stroke) return bounds;\n        var strokeRadius = strokeWidth / 2,\n            join = style.getStrokeJoin(),\n            cap = style.getStrokeCap(),\n            miterLimit = style.getMiterLimit(),\n            joinBounds = new _Rectangle(new Size(strokePadding));\n\n        function addPoint(point) {\n          bounds = bounds.include(point);\n        }\n\n        function addRound(segment) {\n          bounds = bounds.unite(joinBounds.setCenter(segment._point.transform(matrix)));\n        }\n\n        function addJoin(segment, join) {\n          if (join === 'round' || segment.isSmooth()) {\n            addRound(segment);\n          } else {\n            Path._addBevelJoin(segment, join, strokeRadius, miterLimit, matrix, strokeMatrix, addPoint);\n          }\n        }\n\n        function addCap(segment, cap) {\n          if (cap === 'round') {\n            addRound(segment);\n          } else {\n            Path._addSquareCap(segment, cap, strokeRadius, matrix, strokeMatrix, addPoint);\n          }\n        }\n\n        var length = segments.length - (closed ? 0 : 1);\n\n        for (var i = 1; i < length; i++) {\n          addJoin(segments[i], join);\n        }\n\n        if (closed) {\n          addJoin(segments[0], join);\n        } else if (length > 0) {\n          addCap(segments[0], cap);\n          addCap(segments[segments.length - 1], cap);\n        }\n\n        return bounds;\n      },\n      _getStrokePadding: function _getStrokePadding(radius, matrix) {\n        if (!matrix) return [radius, radius];\n        var hor = new Point(radius, 0).transform(matrix),\n            ver = new Point(0, radius).transform(matrix),\n            phi = hor.getAngleInRadians(),\n            a = hor.getLength(),\n            b = ver.getLength();\n        var sin = Math.sin(phi),\n            cos = Math.cos(phi),\n            tan = Math.tan(phi),\n            tx = Math.atan2(b * tan, a),\n            ty = Math.atan2(b, tan * a);\n        return [Math.abs(a * Math.cos(tx) * cos + b * Math.sin(tx) * sin), Math.abs(b * Math.sin(ty) * cos + a * Math.cos(ty) * sin)];\n      },\n      _addBevelJoin: function _addBevelJoin(segment, join, radius, miterLimit, matrix, strokeMatrix, addPoint, isArea) {\n        var curve2 = segment.getCurve(),\n            curve1 = curve2.getPrevious(),\n            point = curve2.getPoint1().transform(matrix),\n            normal1 = curve1.getNormalAtTime(1).multiply(radius).transform(strokeMatrix),\n            normal2 = curve2.getNormalAtTime(0).multiply(radius).transform(strokeMatrix),\n            angle = normal1.getDirectedAngle(normal2);\n\n        if (angle < 0 || angle >= 180) {\n          normal1 = normal1.negate();\n          normal2 = normal2.negate();\n        }\n\n        if (isArea) addPoint(point);\n        addPoint(point.add(normal1));\n\n        if (join === 'miter') {\n          var corner = new Line(point.add(normal1), new Point(-normal1.y, normal1.x), true).intersect(new Line(point.add(normal2), new Point(-normal2.y, normal2.x), true), true);\n\n          if (corner && point.getDistance(corner) <= miterLimit * radius) {\n            addPoint(corner);\n          }\n        }\n\n        addPoint(point.add(normal2));\n      },\n      _addSquareCap: function _addSquareCap(segment, cap, radius, matrix, strokeMatrix, addPoint, isArea) {\n        var point = segment._point.transform(matrix),\n            loc = segment.getLocation(),\n            normal = loc.getNormal().multiply(loc.getTime() === 0 ? radius : -radius).transform(strokeMatrix);\n\n        if (cap === 'square') {\n          if (isArea) {\n            addPoint(point.subtract(normal));\n            addPoint(point.add(normal));\n          }\n\n          point = point.add(normal.rotate(-90));\n        }\n\n        addPoint(point.add(normal));\n        addPoint(point.subtract(normal));\n      },\n      getHandleBounds: function getHandleBounds(segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n            stroke = options.stroke && style.hasStroke(),\n            strokePadding,\n            joinPadding;\n\n        if (stroke) {\n          var strokeMatrix = path._getStrokeMatrix(matrix, options),\n              strokeRadius = style.getStrokeWidth() / 2,\n              joinRadius = strokeRadius;\n\n          if (style.getStrokeJoin() === 'miter') joinRadius = strokeRadius * style.getMiterLimit();\n          if (style.getStrokeCap() === 'square') joinRadius = Math.max(joinRadius, strokeRadius * Math.SQRT2);\n          strokePadding = Path._getStrokePadding(strokeRadius, strokeMatrix);\n          joinPadding = Path._getStrokePadding(joinRadius, strokeMatrix);\n        }\n\n        var coords = new Array(6),\n            x1 = Infinity,\n            x2 = -x1,\n            y1 = x1,\n            y2 = x2;\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i];\n\n          segment._transformCoordinates(matrix, coords);\n\n          for (var j = 0; j < 6; j += 2) {\n            var padding = !j ? joinPadding : strokePadding,\n                paddingX = padding ? padding[0] : 0,\n                paddingY = padding ? padding[1] : 0,\n                x = coords[j],\n                y = coords[j + 1],\n                xn = x - paddingX,\n                xx = x + paddingX,\n                yn = y - paddingY,\n                yx = y + paddingY;\n            if (xn < x1) x1 = xn;\n            if (xx > x2) x2 = xx;\n            if (yn < y1) y1 = yn;\n            if (yx > y2) y2 = yx;\n          }\n        }\n\n        return new _Rectangle(x1, y1, x2 - x1, y2 - y1);\n      }\n    }\n  });\n  Path.inject({\n    statics: new function () {\n      var kappa = 0.5522847498307936,\n          ellipseSegments = [new Segment([-1, 0], [0, kappa], [0, -kappa]), new Segment([0, -1], [-kappa, 0], [kappa, 0]), new Segment([1, 0], [0, -kappa], [0, kappa]), new Segment([0, 1], [kappa, 0], [-kappa, 0])];\n\n      function createPath(segments, closed, args) {\n        var props = Base.getNamed(args),\n            path = new Path(props && props.insert == false && Item.NO_INSERT);\n\n        path._add(segments);\n\n        path._closed = closed;\n        return path.set(props, {\n          insert: true\n        });\n      }\n\n      function createEllipse(center, radius, args) {\n        var segments = new Array(4);\n\n        for (var i = 0; i < 4; i++) {\n          var segment = ellipseSegments[i];\n          segments[i] = new Segment(segment._point.multiply(radius).add(center), segment._handleIn.multiply(radius), segment._handleOut.multiply(radius));\n        }\n\n        return createPath(segments, true, args);\n      }\n\n      return {\n        Line: function Line() {\n          var args = arguments;\n          return createPath([new Segment(Point.readNamed(args, 'from')), new Segment(Point.readNamed(args, 'to'))], false, args);\n        },\n        Circle: function Circle() {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              radius = Base.readNamed(args, 'radius');\n          return createEllipse(center, new Size(radius), args);\n        },\n        Rectangle: function Rectangle() {\n          var args = arguments,\n              rect = _Rectangle.readNamed(args, 'rectangle'),\n              radius = Size.readNamed(args, 'radius', 0, {\n            readNull: true\n          }),\n              bl = rect.getBottomLeft(true),\n              tl = rect.getTopLeft(true),\n              tr = rect.getTopRight(true),\n              br = rect.getBottomRight(true),\n              segments;\n\n          if (!radius || radius.isZero()) {\n            segments = [new Segment(bl), new Segment(tl), new Segment(tr), new Segment(br)];\n          } else {\n            radius = Size.min(radius, rect.getSize(true).divide(2));\n            var rx = radius.width,\n                ry = radius.height,\n                hx = rx * kappa,\n                hy = ry * kappa;\n            segments = [new Segment(bl.add(rx, 0), null, [-hx, 0]), new Segment(bl.subtract(0, ry), [0, hy]), new Segment(tl.add(0, ry), null, [0, -hy]), new Segment(tl.add(rx, 0), [-hx, 0], null), new Segment(tr.subtract(rx, 0), null, [hx, 0]), new Segment(tr.add(0, ry), [0, -hy], null), new Segment(br.subtract(0, ry), null, [0, hy]), new Segment(br.subtract(rx, 0), [hx, 0])];\n          }\n\n          return createPath(segments, true, args);\n        },\n        RoundRectangle: '#Rectangle',\n        Ellipse: function Ellipse() {\n          var args = arguments,\n              ellipse = Shape._readEllipse(args);\n\n          return createEllipse(ellipse.center, ellipse.radius, args);\n        },\n        Oval: '#Ellipse',\n        Arc: function Arc() {\n          var args = arguments,\n              from = Point.readNamed(args, 'from'),\n              through = Point.readNamed(args, 'through'),\n              to = Point.readNamed(args, 'to'),\n              props = Base.getNamed(args),\n              path = new Path(props && props.insert == false && Item.NO_INSERT);\n          path.moveTo(from);\n          path.arcTo(through, to);\n          return path.set(props);\n        },\n        RegularPolygon: function RegularPolygon() {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              sides = Base.readNamed(args, 'sides'),\n              radius = Base.readNamed(args, 'radius'),\n              step = 360 / sides,\n              three = sides % 3 === 0,\n              vector = new Point(0, three ? -radius : radius),\n              offset = three ? -1 : 0.5,\n              segments = new Array(sides);\n\n          for (var i = 0; i < sides; i++) {\n            segments[i] = new Segment(center.add(vector.rotate((i + offset) * step)));\n          }\n\n          return createPath(segments, true, args);\n        },\n        Star: function Star() {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              points = Base.readNamed(args, 'points') * 2,\n              radius1 = Base.readNamed(args, 'radius1'),\n              radius2 = Base.readNamed(args, 'radius2'),\n              step = 360 / points,\n              vector = new Point(0, -1),\n              segments = new Array(points);\n\n          for (var i = 0; i < points; i++) {\n            segments[i] = new Segment(center.add(vector.rotate(step * i).multiply(i % 2 ? radius2 : radius1)));\n          }\n\n          return createPath(segments, true, args);\n        }\n      };\n    }()\n  });\n  var CompoundPath = PathItem.extend({\n    _class: 'CompoundPath',\n    _serializeFields: {\n      children: []\n    },\n    beans: true,\n    initialize: function CompoundPath(arg) {\n      this._children = [];\n      this._namedChildren = {};\n\n      if (!this._initialize(arg)) {\n        if (typeof arg === 'string') {\n          this.setPathData(arg);\n        } else {\n          this.addChildren(Array.isArray(arg) ? arg : arguments);\n        }\n      }\n    },\n    insertChildren: function insertChildren(index, items) {\n      var list = items,\n          first = list[0];\n      if (first && typeof first[0] === 'number') list = [list];\n\n      for (var i = items.length - 1; i >= 0; i--) {\n        var item = list[i];\n        if (list === items && !(item instanceof Path)) list = Base.slice(list);\n\n        if (Array.isArray(item)) {\n          list[i] = new Path({\n            segments: item,\n            insert: false\n          });\n        } else if (item instanceof CompoundPath) {\n          list.splice.apply(list, [i, 1].concat(item.removeChildren()));\n          item.remove();\n        }\n      }\n\n      return insertChildren.base.call(this, index, list);\n    },\n    reduce: function reduce(options) {\n      var children = this._children;\n\n      for (var i = children.length - 1; i >= 0; i--) {\n        var path = children[i].reduce(options);\n        if (path.isEmpty()) path.remove();\n      }\n\n      if (!children.length) {\n        var path = new Path(Item.NO_INSERT);\n        path.copyAttributes(this);\n        path.insertAbove(this);\n        this.remove();\n        return path;\n      }\n\n      return reduce.base.call(this);\n    },\n    isClosed: function isClosed() {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        if (!children[i]._closed) return false;\n      }\n\n      return true;\n    },\n    setClosed: function setClosed(closed) {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].setClosed(closed);\n      }\n    },\n    getFirstSegment: function getFirstSegment() {\n      var first = this.getFirstChild();\n      return first && first.getFirstSegment();\n    },\n    getLastSegment: function getLastSegment() {\n      var last = this.getLastChild();\n      return last && last.getLastSegment();\n    },\n    getCurves: function getCurves() {\n      var children = this._children,\n          curves = [];\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        Base.push(curves, children[i].getCurves());\n      }\n\n      return curves;\n    },\n    getFirstCurve: function getFirstCurve() {\n      var first = this.getFirstChild();\n      return first && first.getFirstCurve();\n    },\n    getLastCurve: function getLastCurve() {\n      var last = this.getLastChild();\n      return last && last.getLastCurve();\n    },\n    getArea: function getArea() {\n      var children = this._children,\n          area = 0;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        area += children[i].getArea();\n      }\n\n      return area;\n    },\n    getLength: function getLength() {\n      var children = this._children,\n          length = 0;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        length += children[i].getLength();\n      }\n\n      return length;\n    },\n    getPathData: function getPathData(_matrix, _precision) {\n      var children = this._children,\n          paths = [];\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n            mx = child._matrix;\n        paths.push(child.getPathData(_matrix && !mx.isIdentity() ? _matrix.appended(mx) : _matrix, _precision));\n      }\n\n      return paths.join('');\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      return _hitTestChildren.base.call(this, point, options[\"class\"] === Path || options.type === 'path' ? options : Base.set({}, options, {\n        fill: false\n      }), viewMatrix);\n    },\n    _draw: function _draw(ctx, param, viewMatrix, strokeMatrix) {\n      var children = this._children;\n      if (!children.length) return;\n      param = param.extend({\n        dontStart: true,\n        dontFinish: true\n      });\n      ctx.beginPath();\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].draw(ctx, param, strokeMatrix);\n      }\n\n      if (!param.clip) {\n        this._setStyles(ctx, param, viewMatrix);\n\n        var style = this._style;\n\n        if (style.hasFill()) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n\n        if (style.hasStroke()) ctx.stroke();\n      }\n    },\n    _drawSelected: function _drawSelected(ctx, matrix, selectionItems) {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n            mx = child._matrix;\n\n        if (!selectionItems[child._id]) {\n          child._drawSelected(ctx, mx.isIdentity() ? matrix : matrix.appended(mx));\n        }\n      }\n    }\n  }, new function () {\n    function getCurrentPath(that, check) {\n      var children = that._children;\n      if (check && !children.length) throw new Error('Use a moveTo() command first');\n      return children[children.length - 1];\n    }\n\n    return Base.each(['lineTo', 'cubicCurveTo', 'quadraticCurveTo', 'curveTo', 'arcTo', 'lineBy', 'cubicCurveBy', 'quadraticCurveBy', 'curveBy', 'arcBy'], function (key) {\n      this[key] = function () {\n        var path = getCurrentPath(this, true);\n        path[key].apply(path, arguments);\n      };\n    }, {\n      moveTo: function moveTo() {\n        var current = getCurrentPath(this),\n            path = current && current.isEmpty() ? current : new Path(Item.NO_INSERT);\n        if (path !== current) this.addChild(path);\n        path.moveTo.apply(path, arguments);\n      },\n      moveBy: function moveBy() {\n        var current = getCurrentPath(this, true),\n            last = current && current.getLastSegment(),\n            point = Point.read(arguments);\n        this.moveTo(last ? point.add(last._point) : point);\n      },\n      closePath: function closePath(tolerance) {\n        getCurrentPath(this, true).closePath(tolerance);\n      }\n    });\n  }(), Base.each(['reverse', 'flatten', 'simplify', 'smooth'], function (key) {\n    this[key] = function (param) {\n      var children = this._children,\n          res;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        res = children[i][key](param) || res;\n      }\n\n      return res;\n    };\n  }, {}));\n  PathItem.inject(new function () {\n    var min = Math.min,\n        max = Math.max,\n        abs = Math.abs,\n        operators = {\n      unite: {\n        '1': true,\n        '2': true\n      },\n      intersect: {\n        '2': true\n      },\n      subtract: {\n        '1': true\n      },\n      exclude: {\n        '1': true,\n        '-1': true\n      }\n    };\n\n    function getPaths(path) {\n      return path._children || [path];\n    }\n\n    function preparePath(path, resolve) {\n      var res = path.clone(false).reduce({\n        simplify: true\n      }).transform(null, true, true);\n\n      if (resolve) {\n        var paths = getPaths(res);\n\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n\n          if (!path._closed && !path.isEmpty()) {\n            path.closePath(1e-12);\n            path.getFirstSegment().setHandleIn(0, 0);\n            path.getLastSegment().setHandleOut(0, 0);\n          }\n        }\n\n        res = res.resolveCrossings().reorient(res.getFillRule() === 'nonzero', true);\n      }\n\n      return res;\n    }\n\n    function createResult(paths, simplify, path1, path2, options) {\n      var result = new CompoundPath(Item.NO_INSERT);\n      result.addChildren(paths, true);\n      result = result.reduce({\n        simplify: simplify\n      });\n\n      if (!(options && options.insert == false)) {\n        result.insertAbove(path2 && path1.isSibling(path2) && path1.getIndex() < path2.getIndex() ? path2 : path1);\n      }\n\n      result.copyAttributes(path1, true);\n      return result;\n    }\n\n    function filterIntersection(inter) {\n      return inter.hasOverlap() || inter.isCrossing();\n    }\n\n    function traceBoolean(path1, path2, operation, options) {\n      if (options && (options.trace == false || options.stroke) && /^(subtract|intersect)$/.test(operation)) return splitBoolean(path1, path2, operation);\n\n      var _path1 = preparePath(path1, true),\n          _path2 = path2 && path1 !== path2 && preparePath(path2, true),\n          operator = operators[operation];\n\n      operator[operation] = true;\n      if (_path2 && (operator.subtract || operator.exclude) ^ (_path2.isClockwise() ^ _path1.isClockwise())) _path2.reverse();\n\n      var crossings = divideLocations(CurveLocation.expand(_path1.getIntersections(_path2, filterIntersection))),\n          paths1 = getPaths(_path1),\n          paths2 = _path2 && getPaths(_path2),\n          segments = [],\n          curves = [],\n          paths;\n\n      function collectPaths(paths) {\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n          Base.push(segments, path._segments);\n          Base.push(curves, path.getCurves());\n          path._overlapsOnly = true;\n        }\n      }\n\n      function getCurves(indices) {\n        var list = [];\n\n        for (var i = 0, l = indices && indices.length; i < l; i++) {\n          list.push(curves[indices[i]]);\n        }\n\n        return list;\n      }\n\n      if (crossings.length) {\n        collectPaths(paths1);\n        if (paths2) collectPaths(paths2);\n        var curvesValues = new Array(curves.length);\n\n        for (var i = 0, l = curves.length; i < l; i++) {\n          curvesValues[i] = curves[i].getValues();\n        }\n\n        var curveCollisions = CollisionDetection.findCurveBoundsCollisions(curvesValues, curvesValues, 0, true);\n        var curveCollisionsMap = {};\n\n        for (var i = 0; i < curves.length; i++) {\n          var curve = curves[i],\n              id = curve._path._id,\n              map = curveCollisionsMap[id] = curveCollisionsMap[id] || {};\n          map[curve.getIndex()] = {\n            hor: getCurves(curveCollisions[i].hor),\n            ver: getCurves(curveCollisions[i].ver)\n          };\n        }\n\n        for (var i = 0, l = crossings.length; i < l; i++) {\n          propagateWinding(crossings[i]._segment, _path1, _path2, curveCollisionsMap, operator);\n        }\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i],\n              inter = segment._intersection;\n\n          if (!segment._winding) {\n            propagateWinding(segment, _path1, _path2, curveCollisionsMap, operator);\n          }\n\n          if (!(inter && inter._overlap)) segment._path._overlapsOnly = false;\n        }\n\n        paths = tracePaths(segments, operator);\n      } else {\n        paths = reorientPaths(paths2 ? paths1.concat(paths2) : paths1.slice(), function (w) {\n          return !!operator[w];\n        });\n      }\n\n      return createResult(paths, true, path1, path2, options);\n    }\n\n    function splitBoolean(path1, path2, operation) {\n      var _path1 = preparePath(path1),\n          _path2 = preparePath(path2),\n          crossings = _path1.getIntersections(_path2, filterIntersection),\n          subtract = operation === 'subtract',\n          divide = operation === 'divide',\n          added = {},\n          paths = [];\n\n      function addPath(path) {\n        if (!added[path._id] && (divide || _path2.contains(path.getPointAt(path.getLength() / 2)) ^ subtract)) {\n          paths.unshift(path);\n          return added[path._id] = true;\n        }\n      }\n\n      for (var i = crossings.length - 1; i >= 0; i--) {\n        var path = crossings[i].split();\n\n        if (path) {\n          if (addPath(path)) path.getFirstSegment().setHandleIn(0, 0);\n\n          _path1.getLastSegment().setHandleOut(0, 0);\n        }\n      }\n\n      addPath(_path1);\n      return createResult(paths, false, path1, path2);\n    }\n\n    function linkIntersections(from, to) {\n      var prev = from;\n\n      while (prev) {\n        if (prev === to) return;\n        prev = prev._previous;\n      }\n\n      while (from._next && from._next !== to) {\n        from = from._next;\n      }\n\n      if (!from._next) {\n        while (to._previous) {\n          to = to._previous;\n        }\n\n        from._next = to;\n        to._previous = from;\n      }\n    }\n\n    function clearCurveHandles(curves) {\n      for (var i = curves.length - 1; i >= 0; i--) {\n        curves[i].clearHandles();\n      }\n    }\n\n    function reorientPaths(paths, isInside, clockwise) {\n      var length = paths && paths.length;\n\n      if (length) {\n        var lookup = Base.each(paths, function (path, i) {\n          this[path._id] = {\n            container: null,\n            winding: path.isClockwise() ? 1 : -1,\n            index: i\n          };\n        }, {}),\n            sorted = paths.slice().sort(function (a, b) {\n          return abs(b.getArea()) - abs(a.getArea());\n        }),\n            first = sorted[0];\n        var collisions = CollisionDetection.findItemBoundsCollisions(sorted, null, Numerical.GEOMETRIC_EPSILON);\n        if (clockwise == null) clockwise = first.isClockwise();\n\n        for (var i = 0; i < length; i++) {\n          var path1 = sorted[i],\n              entry1 = lookup[path1._id],\n              containerWinding = 0,\n              indices = collisions[i];\n\n          if (indices) {\n            var point = null;\n\n            for (var j = indices.length - 1; j >= 0; j--) {\n              if (indices[j] < i) {\n                point = point || path1.getInteriorPoint();\n                var path2 = sorted[indices[j]];\n\n                if (path2.contains(point)) {\n                  var entry2 = lookup[path2._id];\n                  containerWinding = entry2.winding;\n                  entry1.winding += containerWinding;\n                  entry1.container = entry2.exclude ? entry2.container : path2;\n                  break;\n                }\n              }\n            }\n          }\n\n          if (isInside(entry1.winding) === isInside(containerWinding)) {\n            entry1.exclude = true;\n            paths[entry1.index] = null;\n          } else {\n            var container = entry1.container;\n            path1.setClockwise(container ? !container.isClockwise() : clockwise);\n          }\n        }\n      }\n\n      return paths;\n    }\n\n    function divideLocations(locations, include, clearLater) {\n      var results = include && [],\n          tMin = 1e-8,\n          tMax = 1 - tMin,\n          clearHandles = false,\n          clearCurves = clearLater || [],\n          clearLookup = clearLater && {},\n          renormalizeLocs,\n          prevCurve,\n          prevTime;\n\n      function getId(curve) {\n        return curve._path._id + '.' + curve._segment1._index;\n      }\n\n      for (var i = (clearLater && clearLater.length) - 1; i >= 0; i--) {\n        var curve = clearLater[i];\n        if (curve._path) clearLookup[getId(curve)] = true;\n      }\n\n      for (var i = locations.length - 1; i >= 0; i--) {\n        var loc = locations[i],\n            time = loc._time,\n            origTime = time,\n            exclude = include && !include(loc),\n            curve = loc._curve,\n            segment;\n\n        if (curve) {\n          if (curve !== prevCurve) {\n            clearHandles = !curve.hasHandles() || clearLookup && clearLookup[getId(curve)];\n            renormalizeLocs = [];\n            prevTime = null;\n            prevCurve = curve;\n          } else if (prevTime >= tMin) {\n            time /= prevTime;\n          }\n        }\n\n        if (exclude) {\n          if (renormalizeLocs) renormalizeLocs.push(loc);\n          continue;\n        } else if (include) {\n          results.unshift(loc);\n        }\n\n        prevTime = origTime;\n\n        if (time < tMin) {\n          segment = curve._segment1;\n        } else if (time > tMax) {\n          segment = curve._segment2;\n        } else {\n          var newCurve = curve.divideAtTime(time, true);\n          if (clearHandles) clearCurves.push(curve, newCurve);\n          segment = newCurve._segment1;\n\n          for (var j = renormalizeLocs.length - 1; j >= 0; j--) {\n            var l = renormalizeLocs[j];\n            l._time = (l._time - time) / (1 - time);\n          }\n        }\n\n        loc._setSegment(segment);\n\n        var inter = segment._intersection,\n            dest = loc._intersection;\n\n        if (inter) {\n          linkIntersections(inter, dest);\n          var other = inter;\n\n          while (other) {\n            linkIntersections(other._intersection, inter);\n            other = other._next;\n          }\n        } else {\n          segment._intersection = dest;\n        }\n      }\n\n      if (!clearLater) clearCurveHandles(clearCurves);\n      return results || locations;\n    }\n\n    function getWinding(point, curves, dir, closed, dontFlip) {\n      var curvesList = Array.isArray(curves) ? curves : curves[dir ? 'hor' : 'ver'];\n      var ia = dir ? 1 : 0,\n          io = ia ^ 1,\n          pv = [point.x, point.y],\n          pa = pv[ia],\n          po = pv[io],\n          windingEpsilon = 1e-9,\n          qualityEpsilon = 1e-6,\n          paL = pa - windingEpsilon,\n          paR = pa + windingEpsilon,\n          windingL = 0,\n          windingR = 0,\n          pathWindingL = 0,\n          pathWindingR = 0,\n          onPath = false,\n          onAnyPath = false,\n          quality = 1,\n          roots = [],\n          vPrev,\n          vClose;\n\n      function addWinding(v) {\n        var o0 = v[io + 0],\n            o3 = v[io + 6];\n\n        if (po < min(o0, o3) || po > max(o0, o3)) {\n          return;\n        }\n\n        var a0 = v[ia + 0],\n            a1 = v[ia + 2],\n            a2 = v[ia + 4],\n            a3 = v[ia + 6];\n\n        if (o0 === o3) {\n          if (a0 < paR && a3 > paL || a3 < paR && a0 > paL) {\n            onPath = true;\n          }\n\n          return;\n        }\n\n        var t = po === o0 ? 0 : po === o3 ? 1 : paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? 1 : Curve.solveCubic(v, io, po, roots, 0, 1) > 0 ? roots[0] : 1,\n            a = t === 0 ? a0 : t === 1 ? a3 : Curve.getPoint(v, t)[dir ? 'y' : 'x'],\n            winding = o0 > o3 ? 1 : -1,\n            windingPrev = vPrev[io] > vPrev[io + 6] ? 1 : -1,\n            a3Prev = vPrev[ia + 6];\n\n        if (po !== o0) {\n          if (a < paL) {\n            pathWindingL += winding;\n          } else if (a > paR) {\n            pathWindingR += winding;\n          } else {\n            onPath = true;\n          }\n\n          if (a > pa - qualityEpsilon && a < pa + qualityEpsilon) quality /= 2;\n        } else {\n          if (winding !== windingPrev) {\n            if (a0 < paL) {\n              pathWindingL += winding;\n            } else if (a0 > paR) {\n              pathWindingR += winding;\n            }\n          } else if (a0 != a3Prev) {\n            if (a3Prev < paR && a > paR) {\n              pathWindingR += winding;\n              onPath = true;\n            } else if (a3Prev > paL && a < paL) {\n              pathWindingL += winding;\n              onPath = true;\n            }\n          }\n\n          quality /= 4;\n        }\n\n        vPrev = v;\n        return !dontFlip && a > paL && a < paR && Curve.getTangent(v, t)[dir ? 'x' : 'y'] === 0 && getWinding(point, curves, !dir, closed, true);\n      }\n\n      function handleCurve(v) {\n        var o0 = v[io + 0],\n            o1 = v[io + 2],\n            o2 = v[io + 4],\n            o3 = v[io + 6];\n\n        if (po <= max(o0, o1, o2, o3) && po >= min(o0, o1, o2, o3)) {\n          var a0 = v[ia + 0],\n              a1 = v[ia + 2],\n              a2 = v[ia + 4],\n              a3 = v[ia + 6],\n              monoCurves = paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? [v] : Curve.getMonoCurves(v, dir),\n              res;\n\n          for (var i = 0, l = monoCurves.length; i < l; i++) {\n            if (res = addWinding(monoCurves[i])) return res;\n          }\n        }\n      }\n\n      for (var i = 0, l = curvesList.length; i < l; i++) {\n        var curve = curvesList[i],\n            path = curve._path,\n            v = curve.getValues(),\n            res;\n\n        if (!i || curvesList[i - 1]._path !== path) {\n          vPrev = null;\n\n          if (!path._closed) {\n            vClose = Curve.getValues(path.getLastCurve().getSegment2(), curve.getSegment1(), null, !closed);\n\n            if (vClose[io] !== vClose[io + 6]) {\n              vPrev = vClose;\n            }\n          }\n\n          if (!vPrev) {\n            vPrev = v;\n            var prev = path.getLastCurve();\n\n            while (prev && prev !== curve) {\n              var v2 = prev.getValues();\n\n              if (v2[io] !== v2[io + 6]) {\n                vPrev = v2;\n                break;\n              }\n\n              prev = prev.getPrevious();\n            }\n          }\n        }\n\n        if (res = handleCurve(v)) return res;\n\n        if (i + 1 === l || curvesList[i + 1]._path !== path) {\n          if (vClose && (res = handleCurve(vClose))) return res;\n\n          if (onPath && !pathWindingL && !pathWindingR) {\n            pathWindingL = pathWindingR = path.isClockwise(closed) ^ dir ? 1 : -1;\n          }\n\n          windingL += pathWindingL;\n          windingR += pathWindingR;\n          pathWindingL = pathWindingR = 0;\n\n          if (onPath) {\n            onAnyPath = true;\n            onPath = false;\n          }\n\n          vClose = null;\n        }\n      }\n\n      windingL = abs(windingL);\n      windingR = abs(windingR);\n      return {\n        winding: max(windingL, windingR),\n        windingL: windingL,\n        windingR: windingR,\n        quality: quality,\n        onPath: onAnyPath\n      };\n    }\n\n    function propagateWinding(segment, path1, path2, curveCollisionsMap, operator) {\n      var chain = [],\n          start = segment,\n          totalLength = 0,\n          winding;\n\n      do {\n        var curve = segment.getCurve();\n\n        if (curve) {\n          var length = curve.getLength();\n          chain.push({\n            segment: segment,\n            curve: curve,\n            length: length\n          });\n          totalLength += length;\n        }\n\n        segment = segment.getNext();\n      } while (segment && !segment._intersection && segment !== start);\n\n      var offsets = [0.5, 0.25, 0.75],\n          winding = {\n        winding: 0,\n        quality: -1\n      },\n          tMin = 1e-3,\n          tMax = 1 - tMin;\n\n      for (var i = 0; i < offsets.length && winding.quality < 0.5; i++) {\n        var length = totalLength * offsets[i];\n\n        for (var j = 0, l = chain.length; j < l; j++) {\n          var entry = chain[j],\n              curveLength = entry.length;\n\n          if (length <= curveLength) {\n            var curve = entry.curve,\n                path = curve._path,\n                parent = path._parent,\n                operand = parent instanceof CompoundPath ? parent : path,\n                t = Numerical.clamp(curve.getTimeAt(length), tMin, tMax),\n                pt = curve.getPointAtTime(t),\n                dir = abs(curve.getTangentAtTime(t).y) < Math.SQRT1_2;\n            var wind = null;\n\n            if (operator.subtract && path2) {\n              var otherPath = operand === path1 ? path2 : path1,\n                  pathWinding = otherPath._getWinding(pt, dir, true);\n\n              if (operand === path1 && pathWinding.winding || operand === path2 && !pathWinding.winding) {\n                if (pathWinding.quality < 1) {\n                  continue;\n                } else {\n                  wind = {\n                    winding: 0,\n                    quality: 1\n                  };\n                }\n              }\n            }\n\n            wind = wind || getWinding(pt, curveCollisionsMap[path._id][curve.getIndex()], dir, true);\n            if (wind.quality > winding.quality) winding = wind;\n            break;\n          }\n\n          length -= curveLength;\n        }\n      }\n\n      for (var j = chain.length - 1; j >= 0; j--) {\n        chain[j].segment._winding = winding;\n      }\n    }\n\n    function tracePaths(segments, operator) {\n      var paths = [],\n          starts;\n\n      function isValid(seg) {\n        var winding;\n        return !!(seg && !seg._visited && (!operator || operator[(winding = seg._winding || {}).winding] && !(operator.unite && winding.winding === 2 && winding.windingL && winding.windingR)));\n      }\n\n      function isStart(seg) {\n        if (seg) {\n          for (var i = 0, l = starts.length; i < l; i++) {\n            if (seg === starts[i]) return true;\n          }\n        }\n\n        return false;\n      }\n\n      function visitPath(path) {\n        var segments = path._segments;\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          segments[i]._visited = true;\n        }\n      }\n\n      function getCrossingSegments(segment, collectStarts) {\n        var inter = segment._intersection,\n            start = inter,\n            crossings = [];\n        if (collectStarts) starts = [segment];\n\n        function collect(inter, end) {\n          while (inter && inter !== end) {\n            var other = inter._segment,\n                path = other && other._path;\n\n            if (path) {\n              var next = other.getNext() || path.getFirstSegment(),\n                  nextInter = next._intersection;\n\n              if (other !== segment && (isStart(other) || isStart(next) || next && isValid(other) && (isValid(next) || nextInter && isValid(nextInter._segment)))) {\n                crossings.push(other);\n              }\n\n              if (collectStarts) starts.push(other);\n            }\n\n            inter = inter._next;\n          }\n        }\n\n        if (inter) {\n          collect(inter);\n\n          while (inter && inter._prev) {\n            inter = inter._prev;\n          }\n\n          collect(inter, start);\n        }\n\n        return crossings;\n      }\n\n      segments.sort(function (seg1, seg2) {\n        var inter1 = seg1._intersection,\n            inter2 = seg2._intersection,\n            over1 = !!(inter1 && inter1._overlap),\n            over2 = !!(inter2 && inter2._overlap),\n            path1 = seg1._path,\n            path2 = seg2._path;\n        return over1 ^ over2 ? over1 ? 1 : -1 : !inter1 ^ !inter2 ? inter1 ? 1 : -1 : path1 !== path2 ? path1._id - path2._id : seg1._index - seg2._index;\n      });\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var seg = segments[i],\n            valid = isValid(seg),\n            path = null,\n            finished = false,\n            closed = true,\n            branches = [],\n            branch,\n            visited,\n            handleIn;\n\n        if (valid && seg._path._overlapsOnly) {\n          var path1 = seg._path,\n              path2 = seg._intersection._segment._path;\n\n          if (path1.compare(path2)) {\n            if (path1.getArea()) paths.push(path1.clone(false));\n            visitPath(path1);\n            visitPath(path2);\n            valid = false;\n          }\n        }\n\n        while (valid) {\n          var first = !path,\n              crossings = getCrossingSegments(seg, first),\n              other = crossings.shift(),\n              finished = !first && (isStart(seg) || isStart(other)),\n              cross = !finished && other;\n\n          if (first) {\n            path = new Path(Item.NO_INSERT);\n            branch = null;\n          }\n\n          if (finished) {\n            if (seg.isFirst() || seg.isLast()) closed = seg._path._closed;\n            seg._visited = true;\n            break;\n          }\n\n          if (cross && branch) {\n            branches.push(branch);\n            branch = null;\n          }\n\n          if (!branch) {\n            if (cross) crossings.push(seg);\n            branch = {\n              start: path._segments.length,\n              crossings: crossings,\n              visited: visited = [],\n              handleIn: handleIn\n            };\n          }\n\n          if (cross) seg = other;\n\n          if (!isValid(seg)) {\n            path.removeSegments(branch.start);\n\n            for (var j = 0, k = visited.length; j < k; j++) {\n              visited[j]._visited = false;\n            }\n\n            visited.length = 0;\n\n            do {\n              seg = branch && branch.crossings.shift();\n\n              if (!seg || !seg._path) {\n                seg = null;\n                branch = branches.pop();\n\n                if (branch) {\n                  visited = branch.visited;\n                  handleIn = branch.handleIn;\n                }\n              }\n            } while (branch && !isValid(seg));\n\n            if (!seg) break;\n          }\n\n          var next = seg.getNext();\n          path.add(new Segment(seg._point, handleIn, next && seg._handleOut));\n          seg._visited = true;\n          visited.push(seg);\n          seg = next || seg._path.getFirstSegment();\n          handleIn = next && next._handleIn;\n        }\n\n        if (finished) {\n          if (closed) {\n            path.getFirstSegment().setHandleIn(handleIn);\n            path.setClosed(closed);\n          }\n\n          if (path.getArea() !== 0) {\n            paths.push(path);\n          }\n        }\n      }\n\n      return paths;\n    }\n\n    return {\n      _getWinding: function _getWinding(point, dir, closed) {\n        return getWinding(point, this.getCurves(), dir, closed);\n      },\n      unite: function unite(path, options) {\n        return traceBoolean(this, path, 'unite', options);\n      },\n      intersect: function intersect(path, options) {\n        return traceBoolean(this, path, 'intersect', options);\n      },\n      subtract: function subtract(path, options) {\n        return traceBoolean(this, path, 'subtract', options);\n      },\n      exclude: function exclude(path, options) {\n        return traceBoolean(this, path, 'exclude', options);\n      },\n      divide: function divide(path, options) {\n        return options && (options.trace == false || options.stroke) ? splitBoolean(this, path, 'divide') : createResult([this.subtract(path, options), this.intersect(path, options)], true, this, path, options);\n      },\n      resolveCrossings: function resolveCrossings() {\n        var children = this._children,\n            paths = children || [this];\n\n        function hasOverlap(seg, path) {\n          var inter = seg && seg._intersection;\n          return inter && inter._overlap && inter._path === path;\n        }\n\n        var hasOverlaps = false,\n            hasCrossings = false,\n            intersections = this.getIntersections(null, function (inter) {\n          return inter.hasOverlap() && (hasOverlaps = true) || inter.isCrossing() && (hasCrossings = true);\n        }),\n            clearCurves = hasOverlaps && hasCrossings && [];\n        intersections = CurveLocation.expand(intersections);\n\n        if (hasOverlaps) {\n          var overlaps = divideLocations(intersections, function (inter) {\n            return inter.hasOverlap();\n          }, clearCurves);\n\n          for (var i = overlaps.length - 1; i >= 0; i--) {\n            var overlap = overlaps[i],\n                path = overlap._path,\n                seg = overlap._segment,\n                prev = seg.getPrevious(),\n                next = seg.getNext();\n\n            if (hasOverlap(prev, path) && hasOverlap(next, path)) {\n              seg.remove();\n\n              prev._handleOut._set(0, 0);\n\n              next._handleIn._set(0, 0);\n\n              if (prev !== seg && !prev.getCurve().hasLength()) {\n                next._handleIn.set(prev._handleIn);\n\n                prev.remove();\n              }\n            }\n          }\n        }\n\n        if (hasCrossings) {\n          divideLocations(intersections, hasOverlaps && function (inter) {\n            var curve1 = inter.getCurve(),\n                seg1 = inter.getSegment(),\n                other = inter._intersection,\n                curve2 = other._curve,\n                seg2 = other._segment;\n            if (curve1 && curve2 && curve1._path && curve2._path) return true;\n            if (seg1) seg1._intersection = null;\n            if (seg2) seg2._intersection = null;\n          }, clearCurves);\n          if (clearCurves) clearCurveHandles(clearCurves);\n          paths = tracePaths(Base.each(paths, function (path) {\n            Base.push(this, path._segments);\n          }, []));\n        }\n\n        var length = paths.length,\n            item;\n\n        if (length > 1 && children) {\n          if (paths !== children) this.setChildren(paths);\n          item = this;\n        } else if (length === 1 && !children) {\n          if (paths[0] !== this) this.setSegments(paths[0].removeSegments());\n          item = this;\n        }\n\n        if (!item) {\n          item = new CompoundPath(Item.NO_INSERT);\n          item.addChildren(paths);\n          item = item.reduce();\n          item.copyAttributes(this);\n          this.replaceWith(item);\n        }\n\n        return item;\n      },\n      reorient: function reorient(nonZero, clockwise) {\n        var children = this._children;\n\n        if (children && children.length) {\n          this.setChildren(reorientPaths(this.removeChildren(), function (w) {\n            return !!(nonZero ? w : w & 1);\n          }, clockwise));\n        } else if (clockwise !== undefined) {\n          this.setClockwise(clockwise);\n        }\n\n        return this;\n      },\n      getInteriorPoint: function getInteriorPoint() {\n        var bounds = this.getBounds(),\n            point = bounds.getCenter(true);\n\n        if (!this.contains(point)) {\n          var curves = this.getCurves(),\n              y = point.y,\n              intercepts = [],\n              roots = [];\n\n          for (var i = 0, l = curves.length; i < l; i++) {\n            var v = curves[i].getValues(),\n                o0 = v[1],\n                o1 = v[3],\n                o2 = v[5],\n                o3 = v[7];\n\n            if (y >= min(o0, o1, o2, o3) && y <= max(o0, o1, o2, o3)) {\n              var monoCurves = Curve.getMonoCurves(v);\n\n              for (var j = 0, m = monoCurves.length; j < m; j++) {\n                var mv = monoCurves[j],\n                    mo0 = mv[1],\n                    mo3 = mv[7];\n\n                if (mo0 !== mo3 && (y >= mo0 && y <= mo3 || y >= mo3 && y <= mo0)) {\n                  var x = y === mo0 ? mv[0] : y === mo3 ? mv[6] : Curve.solveCubic(mv, 1, y, roots, 0, 1) === 1 ? Curve.getPoint(mv, roots[0]).x : (mv[0] + mv[6]) / 2;\n                  intercepts.push(x);\n                }\n              }\n            }\n          }\n\n          if (intercepts.length > 1) {\n            intercepts.sort(function (a, b) {\n              return a - b;\n            });\n            point.x = (intercepts[0] + intercepts[1]) / 2;\n          }\n        }\n\n        return point;\n      }\n    };\n  }());\n  var PathFlattener = Base.extend({\n    _class: 'PathFlattener',\n    initialize: function initialize(path, flatness, maxRecursion, ignoreStraight, matrix) {\n      var curves = [],\n          parts = [],\n          length = 0,\n          minSpan = 1 / (maxRecursion || 32),\n          segments = path._segments,\n          segment1 = segments[0],\n          segment2;\n\n      function addCurve(segment1, segment2) {\n        var curve = Curve.getValues(segment1, segment2, matrix);\n        curves.push(curve);\n        computeParts(curve, segment1._index, 0, 1);\n      }\n\n      function computeParts(curve, index, t1, t2) {\n        if (t2 - t1 > minSpan && !(ignoreStraight && Curve.isStraight(curve)) && !Curve.isFlatEnough(curve, flatness || 0.25)) {\n          var halves = Curve.subdivide(curve, 0.5),\n              tMid = (t1 + t2) / 2;\n          computeParts(halves[0], index, t1, tMid);\n          computeParts(halves[1], index, tMid, t2);\n        } else {\n          var dx = curve[6] - curve[0],\n              dy = curve[7] - curve[1],\n              dist = Math.sqrt(dx * dx + dy * dy);\n\n          if (dist > 0) {\n            length += dist;\n            parts.push({\n              offset: length,\n              curve: curve,\n              index: index,\n              time: t2\n            });\n          }\n        }\n      }\n\n      for (var i = 1, l = segments.length; i < l; i++) {\n        segment2 = segments[i];\n        addCurve(segment1, segment2);\n        segment1 = segment2;\n      }\n\n      if (path._closed) addCurve(segment2 || segment1, segments[0]);\n      this.curves = curves;\n      this.parts = parts;\n      this.length = length;\n      this.index = 0;\n    },\n    _get: function _get(offset) {\n      var parts = this.parts,\n          length = parts.length,\n          start,\n          i,\n          j = this.index;\n\n      for (;;) {\n        i = j;\n        if (!j || parts[--j].offset < offset) break;\n      }\n\n      for (; i < length; i++) {\n        var part = parts[i];\n\n        if (part.offset >= offset) {\n          this.index = i;\n          var prev = parts[i - 1],\n              prevTime = prev && prev.index === part.index ? prev.time : 0,\n              prevOffset = prev ? prev.offset : 0;\n          return {\n            index: part.index,\n            time: prevTime + (part.time - prevTime) * (offset - prevOffset) / (part.offset - prevOffset)\n          };\n        }\n      }\n\n      return {\n        index: parts[length - 1].index,\n        time: 1\n      };\n    },\n    drawPart: function drawPart(ctx, from, to) {\n      var start = this._get(from),\n          end = this._get(to);\n\n      for (var i = start.index, l = end.index; i <= l; i++) {\n        var curve = Curve.getPart(this.curves[i], i === start.index ? start.time : 0, i === end.index ? end.time : 1);\n        if (i === start.index) ctx.moveTo(curve[0], curve[1]);\n        ctx.bezierCurveTo.apply(ctx, curve.slice(2));\n      }\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var param = this._get(offset);\n\n      return Curve[name](this.curves[param.index], param.time);\n    };\n  }, {}));\n  var PathFitter = Base.extend({\n    initialize: function initialize(path) {\n      var points = this.points = [],\n          segments = path._segments,\n          closed = path._closed;\n\n      for (var i = 0, prev, l = segments.length; i < l; i++) {\n        var point = segments[i].point;\n\n        if (!prev || !prev.equals(point)) {\n          points.push(prev = point.clone());\n        }\n      }\n\n      if (closed) {\n        points.unshift(points[points.length - 1]);\n        points.push(points[1]);\n      }\n\n      this.closed = closed;\n    },\n    fit: function fit(error) {\n      var points = this.points,\n          length = points.length,\n          segments = null;\n\n      if (length > 0) {\n        segments = [new Segment(points[0])];\n\n        if (length > 1) {\n          this.fitCubic(segments, error, 0, length - 1, points[1].subtract(points[0]), points[length - 2].subtract(points[length - 1]));\n\n          if (this.closed) {\n            segments.shift();\n            segments.pop();\n          }\n        }\n      }\n\n      return segments;\n    },\n    fitCubic: function fitCubic(segments, error, first, last, tan1, tan2) {\n      var points = this.points;\n\n      if (last - first === 1) {\n        var pt1 = points[first],\n            pt2 = points[last],\n            dist = pt1.getDistance(pt2) / 3;\n        this.addCurve(segments, [pt1, pt1.add(tan1.normalize(dist)), pt2.add(tan2.normalize(dist)), pt2]);\n        return;\n      }\n\n      var uPrime = this.chordLengthParameterize(first, last),\n          maxError = Math.max(error, error * error),\n          split,\n          parametersInOrder = true;\n\n      for (var i = 0; i <= 4; i++) {\n        var curve = this.generateBezier(first, last, uPrime, tan1, tan2);\n        var max = this.findMaxError(first, last, curve, uPrime);\n\n        if (max.error < error && parametersInOrder) {\n          this.addCurve(segments, curve);\n          return;\n        }\n\n        split = max.index;\n        if (max.error >= maxError) break;\n        parametersInOrder = this.reparameterize(first, last, uPrime, curve);\n        maxError = max.error;\n      }\n\n      var tanCenter = points[split - 1].subtract(points[split + 1]);\n      this.fitCubic(segments, error, first, split, tan1, tanCenter);\n      this.fitCubic(segments, error, split, last, tanCenter.negate(), tan2);\n    },\n    addCurve: function addCurve(segments, curve) {\n      var prev = segments[segments.length - 1];\n      prev.setHandleOut(curve[1].subtract(curve[0]));\n      segments.push(new Segment(curve[3], curve[2].subtract(curve[3])));\n    },\n    generateBezier: function generateBezier(first, last, uPrime, tan1, tan2) {\n      var epsilon = 1e-12,\n          abs = Math.abs,\n          points = this.points,\n          pt1 = points[first],\n          pt2 = points[last],\n          C = [[0, 0], [0, 0]],\n          X = [0, 0];\n\n      for (var i = 0, l = last - first + 1; i < l; i++) {\n        var u = uPrime[i],\n            t = 1 - u,\n            b = 3 * u * t,\n            b0 = t * t * t,\n            b1 = b * t,\n            b2 = b * u,\n            b3 = u * u * u,\n            a1 = tan1.normalize(b1),\n            a2 = tan2.normalize(b2),\n            tmp = points[first + i].subtract(pt1.multiply(b0 + b1)).subtract(pt2.multiply(b2 + b3));\n        C[0][0] += a1.dot(a1);\n        C[0][1] += a1.dot(a2);\n        C[1][0] = C[0][1];\n        C[1][1] += a2.dot(a2);\n        X[0] += a1.dot(tmp);\n        X[1] += a2.dot(tmp);\n      }\n\n      var detC0C1 = C[0][0] * C[1][1] - C[1][0] * C[0][1],\n          alpha1,\n          alpha2;\n\n      if (abs(detC0C1) > epsilon) {\n        var detC0X = C[0][0] * X[1] - C[1][0] * X[0],\n            detXC1 = X[0] * C[1][1] - X[1] * C[0][1];\n        alpha1 = detXC1 / detC0C1;\n        alpha2 = detC0X / detC0C1;\n      } else {\n        var c0 = C[0][0] + C[0][1],\n            c1 = C[1][0] + C[1][1];\n        alpha1 = alpha2 = abs(c0) > epsilon ? X[0] / c0 : abs(c1) > epsilon ? X[1] / c1 : 0;\n      }\n\n      var segLength = pt2.getDistance(pt1),\n          eps = epsilon * segLength,\n          handle1,\n          handle2;\n\n      if (alpha1 < eps || alpha2 < eps) {\n        alpha1 = alpha2 = segLength / 3;\n      } else {\n        var line = pt2.subtract(pt1);\n        handle1 = tan1.normalize(alpha1);\n        handle2 = tan2.normalize(alpha2);\n\n        if (handle1.dot(line) - handle2.dot(line) > segLength * segLength) {\n          alpha1 = alpha2 = segLength / 3;\n          handle1 = handle2 = null;\n        }\n      }\n\n      return [pt1, pt1.add(handle1 || tan1.normalize(alpha1)), pt2.add(handle2 || tan2.normalize(alpha2)), pt2];\n    },\n    reparameterize: function reparameterize(first, last, u, curve) {\n      for (var i = first; i <= last; i++) {\n        u[i - first] = this.findRoot(curve, this.points[i], u[i - first]);\n      }\n\n      for (var i = 1, l = u.length; i < l; i++) {\n        if (u[i] <= u[i - 1]) return false;\n      }\n\n      return true;\n    },\n    findRoot: function findRoot(curve, point, u) {\n      var curve1 = [],\n          curve2 = [];\n\n      for (var i = 0; i <= 2; i++) {\n        curve1[i] = curve[i + 1].subtract(curve[i]).multiply(3);\n      }\n\n      for (var i = 0; i <= 1; i++) {\n        curve2[i] = curve1[i + 1].subtract(curve1[i]).multiply(2);\n      }\n\n      var pt = this.evaluate(3, curve, u),\n          pt1 = this.evaluate(2, curve1, u),\n          pt2 = this.evaluate(1, curve2, u),\n          diff = pt.subtract(point),\n          df = pt1.dot(pt1) + diff.dot(pt2);\n      return Numerical.isMachineZero(df) ? u : u - diff.dot(pt1) / df;\n    },\n    evaluate: function evaluate(degree, curve, t) {\n      var tmp = curve.slice();\n\n      for (var i = 1; i <= degree; i++) {\n        for (var j = 0; j <= degree - i; j++) {\n          tmp[j] = tmp[j].multiply(1 - t).add(tmp[j + 1].multiply(t));\n        }\n      }\n\n      return tmp[0];\n    },\n    chordLengthParameterize: function chordLengthParameterize(first, last) {\n      var u = [0];\n\n      for (var i = first + 1; i <= last; i++) {\n        u[i - first] = u[i - first - 1] + this.points[i].getDistance(this.points[i - 1]);\n      }\n\n      for (var i = 1, m = last - first; i <= m; i++) {\n        u[i] /= u[m];\n      }\n\n      return u;\n    },\n    findMaxError: function findMaxError(first, last, curve, u) {\n      var index = Math.floor((last - first + 1) / 2),\n          maxDist = 0;\n\n      for (var i = first + 1; i < last; i++) {\n        var P = this.evaluate(3, curve, u[i - first]);\n        var v = P.subtract(this.points[i]);\n        var dist = v.x * v.x + v.y * v.y;\n\n        if (dist >= maxDist) {\n          maxDist = dist;\n          index = i;\n        }\n      }\n\n      return {\n        error: maxDist,\n        index: index\n      };\n    }\n  });\n  var TextItem = Item.extend({\n    _class: 'TextItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _serializeFields: {\n      content: null\n    },\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    initialize: function TextItem(arg) {\n      this._content = '';\n      this._lines = [];\n      var hasProps = arg && Base.isPlainObject(arg) && arg.x === undefined && arg.y === undefined;\n\n      this._initialize(hasProps && arg, !hasProps && Point.read(arguments));\n    },\n    _equals: function _equals(item) {\n      return this._content === item._content;\n    },\n    copyContent: function copyContent(source) {\n      this.setContent(source._content);\n    },\n    getContent: function getContent() {\n      return this._content;\n    },\n    setContent: function setContent(content) {\n      this._content = '' + content;\n      this._lines = this._content.split(/\\r\\n|\\n|\\r/mg);\n\n      this._changed(521);\n    },\n    isEmpty: function isEmpty() {\n      return !this._content;\n    },\n    getCharacterStyle: '#getStyle',\n    setCharacterStyle: '#setStyle',\n    getParagraphStyle: '#getStyle',\n    setParagraphStyle: '#setStyle'\n  });\n  var PointText = TextItem.extend({\n    _class: 'PointText',\n    initialize: function PointText() {\n      TextItem.apply(this, arguments);\n    },\n    getPoint: function getPoint() {\n      var point = this._matrix.getTranslation();\n\n      return new LinkedPoint(point.x, point.y, this, 'setPoint');\n    },\n    setPoint: function setPoint() {\n      var point = Point.read(arguments);\n      this.translate(point.subtract(this._matrix.getTranslation()));\n    },\n    _draw: function _draw(ctx, param, viewMatrix) {\n      if (!this._content) return;\n\n      this._setStyles(ctx, param, viewMatrix);\n\n      var lines = this._lines,\n          style = this._style,\n          hasFill = style.hasFill(),\n          hasStroke = style.hasStroke(),\n          leading = style.getLeading(),\n          shadowColor = ctx.shadowColor;\n      ctx.font = style.getFontStyle();\n      ctx.textAlign = style.getJustification();\n\n      for (var i = 0, l = lines.length; i < l; i++) {\n        ctx.shadowColor = shadowColor;\n        var line = lines[i];\n\n        if (hasFill) {\n          ctx.fillText(line, 0, 0);\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n\n        if (hasStroke) ctx.strokeText(line, 0, 0);\n        ctx.translate(0, leading);\n      }\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var style = this._style,\n          lines = this._lines,\n          numLines = lines.length,\n          justification = style.getJustification(),\n          leading = style.getLeading(),\n          width = this.getView().getTextWidth(style.getFontStyle(), lines),\n          x = 0;\n      if (justification !== 'left') x -= width / (justification === 'center' ? 2 : 1);\n      var rect = new _Rectangle(x, numLines ? -0.75 * leading : 0, width, numLines * leading);\n      return matrix ? matrix._transformBounds(rect, rect) : rect;\n    }\n  });\n  var Color = Base.extend(new function () {\n    var types = {\n      gray: ['gray'],\n      rgb: ['red', 'green', 'blue'],\n      hsb: ['hue', 'saturation', 'brightness'],\n      hsl: ['hue', 'saturation', 'lightness'],\n      gradient: ['gradient', 'origin', 'destination', 'highlight']\n    };\n    var componentParsers = {},\n        namedColors = {\n      transparent: [0, 0, 0, 0]\n    },\n        colorCtx;\n\n    function fromCSS(string) {\n      var match = string.match(/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})?$/i) || string.match(/^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])?$/i),\n          type = 'rgb',\n          components;\n\n      if (match) {\n        var amount = match[4] ? 4 : 3;\n        components = new Array(amount);\n\n        for (var i = 0; i < amount; i++) {\n          var value = match[i + 1];\n          components[i] = parseInt(value.length == 1 ? value + value : value, 16) / 255;\n        }\n      } else if (match = string.match(/^(rgb|hsl)a?\\((.*)\\)$/)) {\n        type = match[1];\n        components = match[2].trim().split(/[,\\s]+/g);\n        var isHSL = type === 'hsl';\n\n        for (var i = 0, l = Math.min(components.length, 4); i < l; i++) {\n          var component = components[i];\n          var value = parseFloat(component);\n\n          if (isHSL) {\n            if (i === 0) {\n              var unit = component.match(/([a-z]*)$/)[1];\n              value *= {\n                turn: 360,\n                rad: 180 / Math.PI,\n                grad: 0.9\n              }[unit] || 1;\n            } else if (i < 3) {\n              value /= 100;\n            }\n          } else if (i < 3) {\n            value /= /%$/.test(component) ? 100 : 255;\n          }\n\n          components[i] = value;\n        }\n      } else {\n        var color = namedColors[string];\n\n        if (!color) {\n          if (window) {\n            if (!colorCtx) {\n              colorCtx = CanvasProvider.getContext(1, 1);\n              colorCtx.globalCompositeOperation = 'copy';\n            }\n\n            colorCtx.fillStyle = 'rgba(0,0,0,0)';\n            colorCtx.fillStyle = string;\n            colorCtx.fillRect(0, 0, 1, 1);\n            var data = colorCtx.getImageData(0, 0, 1, 1).data;\n            color = namedColors[string] = [data[0] / 255, data[1] / 255, data[2] / 255];\n          } else {\n            color = [0, 0, 0];\n          }\n        }\n\n        components = color.slice();\n      }\n\n      return [type, components];\n    }\n\n    var hsbIndices = [[0, 3, 1], [2, 0, 1], [1, 0, 3], [1, 2, 0], [3, 1, 0], [0, 1, 2]];\n    var converters = {\n      'rgb-hsb': function rgbHsb(r, g, b) {\n        var max = Math.max(r, g, b),\n            min = Math.min(r, g, b),\n            delta = max - min,\n            h = delta === 0 ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60;\n        return [h, max === 0 ? 0 : delta / max, max];\n      },\n      'hsb-rgb': function hsbRgb(h, s, b) {\n        h = (h / 60 % 6 + 6) % 6;\n        var i = Math.floor(h),\n            f = h - i,\n            i = hsbIndices[i],\n            v = [b, b * (1 - s), b * (1 - s * f), b * (1 - s * (1 - f))];\n        return [v[i[0]], v[i[1]], v[i[2]]];\n      },\n      'rgb-hsl': function rgbHsl(r, g, b) {\n        var max = Math.max(r, g, b),\n            min = Math.min(r, g, b),\n            delta = max - min,\n            achromatic = delta === 0,\n            h = achromatic ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60,\n            l = (max + min) / 2,\n            s = achromatic ? 0 : l < 0.5 ? delta / (max + min) : delta / (2 - max - min);\n        return [h, s, l];\n      },\n      'hsl-rgb': function hslRgb(h, s, l) {\n        h = (h / 360 % 1 + 1) % 1;\n        if (s === 0) return [l, l, l];\n        var t3s = [h + 1 / 3, h, h - 1 / 3],\n            t2 = l < 0.5 ? l * (1 + s) : l + s - l * s,\n            t1 = 2 * l - t2,\n            c = [];\n\n        for (var i = 0; i < 3; i++) {\n          var t3 = t3s[i];\n          if (t3 < 0) t3 += 1;\n          if (t3 > 1) t3 -= 1;\n          c[i] = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 : 2 * t3 < 1 ? t2 : 3 * t3 < 2 ? t1 + (t2 - t1) * (2 / 3 - t3) * 6 : t1;\n        }\n\n        return c;\n      },\n      'rgb-gray': function rgbGray(r, g, b) {\n        return [r * 0.2989 + g * 0.587 + b * 0.114];\n      },\n      'gray-rgb': function grayRgb(g) {\n        return [g, g, g];\n      },\n      'gray-hsb': function grayHsb(g) {\n        return [0, 0, g];\n      },\n      'gray-hsl': function grayHsl(g) {\n        return [0, 0, g];\n      },\n      'gradient-rgb': function gradientRgb() {\n        return [];\n      },\n      'rgb-gradient': function rgbGradient() {\n        return [];\n      }\n    };\n    return Base.each(types, function (properties, type) {\n      componentParsers[type] = [];\n      Base.each(properties, function (name, index) {\n        var part = Base.capitalize(name),\n            hasOverlap = /^(hue|saturation)$/.test(name),\n            parser = componentParsers[type][index] = type === 'gradient' ? name === 'gradient' ? function (value) {\n          var current = this._components[0];\n          value = Gradient.read(Array.isArray(value) ? value : arguments, 0, {\n            readNull: true\n          });\n\n          if (current !== value) {\n            if (current) current._removeOwner(this);\n            if (value) value._addOwner(this);\n          }\n\n          return value;\n        } : function () {\n          return Point.read(arguments, 0, {\n            readNull: name === 'highlight',\n            clone: true\n          });\n        } : function (value) {\n          return value == null || isNaN(value) ? 0 : +value;\n        };\n\n        this['get' + part] = function () {\n          return this._type === type || hasOverlap && /^hs[bl]$/.test(this._type) ? this._components[index] : this._convert(type)[index];\n        };\n\n        this['set' + part] = function (value) {\n          if (this._type !== type && !(hasOverlap && /^hs[bl]$/.test(this._type))) {\n            this._components = this._convert(type);\n            this._properties = types[type];\n            this._type = type;\n          }\n\n          this._components[index] = parser.call(this, value);\n\n          this._changed();\n        };\n      }, this);\n    }, {\n      _class: 'Color',\n      _readIndex: true,\n      initialize: function Color(arg) {\n        var args = arguments,\n            reading = this.__read,\n            read = 0,\n            type,\n            components,\n            alpha,\n            values;\n\n        if (Array.isArray(arg)) {\n          args = arg;\n          arg = args[0];\n        }\n\n        var argType = arg != null && typeof arg;\n\n        if (argType === 'string' && arg in types) {\n          type = arg;\n          arg = args[1];\n\n          if (Array.isArray(arg)) {\n            components = arg;\n            alpha = args[2];\n          } else {\n            if (reading) read = 1;\n            args = Base.slice(args, 1);\n            argType = typeof arg;\n          }\n        }\n\n        if (!components) {\n          values = argType === 'number' ? args : argType === 'object' && arg.length != null ? arg : null;\n\n          if (values) {\n            if (!type) type = values.length >= 3 ? 'rgb' : 'gray';\n            var length = types[type].length;\n            alpha = values[length];\n\n            if (reading) {\n              read += values === arguments ? length + (alpha != null ? 1 : 0) : 1;\n            }\n\n            if (values.length > length) values = Base.slice(values, 0, length);\n          } else if (argType === 'string') {\n            var converted = fromCSS(arg);\n            type = converted[0];\n            components = converted[1];\n\n            if (components.length === 4) {\n              alpha = components[3];\n              components.length--;\n            }\n          } else if (argType === 'object') {\n            if (arg.constructor === Color) {\n              type = arg._type;\n              components = arg._components.slice();\n              alpha = arg._alpha;\n\n              if (type === 'gradient') {\n                for (var i = 1, l = components.length; i < l; i++) {\n                  var point = components[i];\n                  if (point) components[i] = point.clone();\n                }\n              }\n            } else if (arg.constructor === Gradient) {\n              type = 'gradient';\n              values = args;\n            } else {\n              type = 'hue' in arg ? 'lightness' in arg ? 'hsl' : 'hsb' : 'gradient' in arg || 'stops' in arg || 'radial' in arg ? 'gradient' : 'gray' in arg ? 'gray' : 'rgb';\n              var properties = types[type],\n                  parsers = componentParsers[type];\n              this._components = components = [];\n\n              for (var i = 0, l = properties.length; i < l; i++) {\n                var value = arg[properties[i]];\n\n                if (value == null && !i && type === 'gradient' && 'stops' in arg) {\n                  value = {\n                    stops: arg.stops,\n                    radial: arg.radial\n                  };\n                }\n\n                value = parsers[i].call(this, value);\n                if (value != null) components[i] = value;\n              }\n\n              alpha = arg.alpha;\n            }\n          }\n\n          if (reading && type) read = 1;\n        }\n\n        this._type = type || 'rgb';\n\n        if (!components) {\n          this._components = components = [];\n          var parsers = componentParsers[this._type];\n\n          for (var i = 0, l = parsers.length; i < l; i++) {\n            var value = parsers[i].call(this, values && values[i]);\n            if (value != null) components[i] = value;\n          }\n        }\n\n        this._components = components;\n        this._properties = types[this._type];\n        this._alpha = alpha;\n        if (reading) this.__read = read;\n        return this;\n      },\n      set: '#initialize',\n      _serialize: function _serialize(options, dictionary) {\n        var components = this.getComponents();\n        return Base.serialize(/^(gray|rgb)$/.test(this._type) ? components : [this._type].concat(components), options, true, dictionary);\n      },\n      _changed: function _changed() {\n        this._canvasStyle = null;\n\n        if (this._owner) {\n          if (this._setter) {\n            this._owner[this._setter](this);\n          } else {\n            this._owner._changed(129);\n          }\n        }\n      },\n      _convert: function _convert(type) {\n        var converter;\n        return this._type === type ? this._components.slice() : (converter = converters[this._type + '-' + type]) ? converter.apply(this, this._components) : converters['rgb-' + type].apply(this, converters[this._type + '-rgb'].apply(this, this._components));\n      },\n      convert: function convert(type) {\n        return new Color(type, this._convert(type), this._alpha);\n      },\n      getType: function getType() {\n        return this._type;\n      },\n      setType: function setType(type) {\n        this._components = this._convert(type);\n        this._properties = types[type];\n        this._type = type;\n      },\n      getComponents: function getComponents() {\n        var components = this._components.slice();\n\n        if (this._alpha != null) components.push(this._alpha);\n        return components;\n      },\n      getAlpha: function getAlpha() {\n        return this._alpha != null ? this._alpha : 1;\n      },\n      setAlpha: function setAlpha(alpha) {\n        this._alpha = alpha == null ? null : Math.min(Math.max(alpha, 0), 1);\n\n        this._changed();\n      },\n      hasAlpha: function hasAlpha() {\n        return this._alpha != null;\n      },\n      equals: function equals(color) {\n        var col = Base.isPlainValue(color, true) ? Color.read(arguments) : color;\n        return col === this || col && this._class === col._class && this._type === col._type && this.getAlpha() === col.getAlpha() && Base.equals(this._components, col._components) || false;\n      },\n      toString: function toString() {\n        var properties = this._properties,\n            parts = [],\n            isGradient = this._type === 'gradient',\n            f = Formatter.instance;\n\n        for (var i = 0, l = properties.length; i < l; i++) {\n          var value = this._components[i];\n          if (value != null) parts.push(properties[i] + ': ' + (isGradient ? value : f.number(value)));\n        }\n\n        if (this._alpha != null) parts.push('alpha: ' + f.number(this._alpha));\n        return '{ ' + parts.join(', ') + ' }';\n      },\n      toCSS: function toCSS(hex) {\n        var components = this._convert('rgb'),\n            alpha = hex || this._alpha == null ? 1 : this._alpha;\n\n        function convert(val) {\n          return Math.round((val < 0 ? 0 : val > 1 ? 1 : val) * 255);\n        }\n\n        components = [convert(components[0]), convert(components[1]), convert(components[2])];\n        if (alpha < 1) components.push(alpha < 0 ? 0 : alpha);\n        return hex ? '#' + ((1 << 24) + (components[0] << 16) + (components[1] << 8) + components[2]).toString(16).slice(1) : (components.length == 4 ? 'rgba(' : 'rgb(') + components.join(',') + ')';\n      },\n      toCanvasStyle: function toCanvasStyle(ctx, matrix) {\n        if (this._canvasStyle) return this._canvasStyle;\n        if (this._type !== 'gradient') return this._canvasStyle = this.toCSS();\n        var components = this._components,\n            gradient = components[0],\n            stops = gradient._stops,\n            origin = components[1],\n            destination = components[2],\n            highlight = components[3],\n            inverse = matrix && matrix.inverted(),\n            canvasGradient;\n\n        if (inverse) {\n          origin = inverse._transformPoint(origin);\n          destination = inverse._transformPoint(destination);\n          if (highlight) highlight = inverse._transformPoint(highlight);\n        }\n\n        if (gradient._radial) {\n          var radius = destination.getDistance(origin);\n\n          if (highlight) {\n            var vector = highlight.subtract(origin);\n            if (vector.getLength() > radius) highlight = origin.add(vector.normalize(radius - 0.1));\n          }\n\n          var start = highlight || origin;\n          canvasGradient = ctx.createRadialGradient(start.x, start.y, 0, origin.x, origin.y, radius);\n        } else {\n          canvasGradient = ctx.createLinearGradient(origin.x, origin.y, destination.x, destination.y);\n        }\n\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n              offset = stop._offset;\n          canvasGradient.addColorStop(offset == null ? i / (l - 1) : offset, stop._color.toCanvasStyle());\n        }\n\n        return this._canvasStyle = canvasGradient;\n      },\n      transform: function transform(matrix) {\n        if (this._type === 'gradient') {\n          var components = this._components;\n\n          for (var i = 1, l = components.length; i < l; i++) {\n            var point = components[i];\n\n            matrix._transformPoint(point, point, true);\n          }\n\n          this._changed();\n        }\n      },\n      statics: {\n        _types: types,\n        random: function random() {\n          var random = Math.random;\n          return new Color(random(), random(), random());\n        },\n        _setOwner: function _setOwner(color, owner, setter) {\n          if (color) {\n            if (color._owner && owner && color._owner !== owner) {\n              color = color.clone();\n            }\n\n            if (!color._owner ^ !owner) {\n              color._owner = owner || null;\n              color._setter = setter || null;\n            }\n          }\n\n          return color;\n        }\n      }\n    });\n  }(), new function () {\n    var operators = {\n      add: function add(a, b) {\n        return a + b;\n      },\n      subtract: function subtract(a, b) {\n        return a - b;\n      },\n      multiply: function multiply(a, b) {\n        return a * b;\n      },\n      divide: function divide(a, b) {\n        return a / b;\n      }\n    };\n    return Base.each(operators, function (operator, name) {\n      this[name] = function (color) {\n        color = Color.read(arguments);\n\n        var type = this._type,\n            components1 = this._components,\n            components2 = color._convert(type);\n\n        for (var i = 0, l = components1.length; i < l; i++) {\n          components2[i] = operator(components1[i], components2[i]);\n        }\n\n        return new Color(type, components2, this._alpha != null ? operator(this._alpha, color.getAlpha()) : null);\n      };\n    }, {});\n  }());\n  var Gradient = Base.extend({\n    _class: 'Gradient',\n    initialize: function Gradient(stops, radial) {\n      this._id = UID.get();\n\n      if (stops && Base.isPlainObject(stops)) {\n        this.set(stops);\n        stops = radial = null;\n      }\n\n      if (this._stops == null) {\n        this.setStops(stops || ['white', 'black']);\n      }\n\n      if (this._radial == null) {\n        this.setRadial(typeof radial === 'string' && radial === 'radial' || radial || false);\n      }\n    },\n    _serialize: function _serialize(options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._stops, this._radial], options, true, dictionary);\n      });\n    },\n    _changed: function _changed() {\n      for (var i = 0, l = this._owners && this._owners.length; i < l; i++) {\n        this._owners[i]._changed();\n      }\n    },\n    _addOwner: function _addOwner(color) {\n      if (!this._owners) this._owners = [];\n\n      this._owners.push(color);\n    },\n    _removeOwner: function _removeOwner(color) {\n      var index = this._owners ? this._owners.indexOf(color) : -1;\n\n      if (index != -1) {\n        this._owners.splice(index, 1);\n\n        if (!this._owners.length) this._owners = undefined;\n      }\n    },\n    clone: function clone() {\n      var stops = [];\n\n      for (var i = 0, l = this._stops.length; i < l; i++) {\n        stops[i] = this._stops[i].clone();\n      }\n\n      return new Gradient(stops, this._radial);\n    },\n    getStops: function getStops() {\n      return this._stops;\n    },\n    setStops: function setStops(stops) {\n      if (stops.length < 2) {\n        throw new Error('Gradient stop list needs to contain at least two stops.');\n      }\n\n      var _stops = this._stops;\n\n      if (_stops) {\n        for (var i = 0, l = _stops.length; i < l; i++) {\n          _stops[i]._owner = undefined;\n        }\n      }\n\n      _stops = this._stops = GradientStop.readList(stops, 0, {\n        clone: true\n      });\n\n      for (var i = 0, l = _stops.length; i < l; i++) {\n        _stops[i]._owner = this;\n      }\n\n      this._changed();\n    },\n    getRadial: function getRadial() {\n      return this._radial;\n    },\n    setRadial: function setRadial(radial) {\n      this._radial = radial;\n\n      this._changed();\n    },\n    equals: function equals(gradient) {\n      if (gradient === this) return true;\n\n      if (gradient && this._class === gradient._class) {\n        var stops1 = this._stops,\n            stops2 = gradient._stops,\n            length = stops1.length;\n\n        if (length === stops2.length) {\n          for (var i = 0; i < length; i++) {\n            if (!stops1[i].equals(stops2[i])) return false;\n          }\n\n          return true;\n        }\n      }\n\n      return false;\n    }\n  });\n  var GradientStop = Base.extend({\n    _class: 'GradientStop',\n    initialize: function GradientStop(arg0, arg1) {\n      var color = arg0,\n          offset = arg1;\n\n      if (typeof arg0 === 'object' && arg1 === undefined) {\n        if (Array.isArray(arg0) && typeof arg0[0] !== 'number') {\n          color = arg0[0];\n          offset = arg0[1];\n        } else if ('color' in arg0 || 'offset' in arg0 || 'rampPoint' in arg0) {\n          color = arg0.color;\n          offset = arg0.offset || arg0.rampPoint || 0;\n        }\n      }\n\n      this.setColor(color);\n      this.setOffset(offset);\n    },\n    clone: function clone() {\n      return new GradientStop(this._color.clone(), this._offset);\n    },\n    _serialize: function _serialize(options, dictionary) {\n      var color = this._color,\n          offset = this._offset;\n      return Base.serialize(offset == null ? [color] : [color, offset], options, true, dictionary);\n    },\n    _changed: function _changed() {\n      if (this._owner) this._owner._changed(129);\n    },\n    getOffset: function getOffset() {\n      return this._offset;\n    },\n    setOffset: function setOffset(offset) {\n      this._offset = offset;\n\n      this._changed();\n    },\n    getRampPoint: '#getOffset',\n    setRampPoint: '#setOffset',\n    getColor: function getColor() {\n      return this._color;\n    },\n    setColor: function setColor() {\n      Color._setOwner(this._color, null);\n\n      this._color = Color._setOwner(Color.read(arguments, 0), this, 'setColor');\n\n      this._changed();\n    },\n    equals: function equals(stop) {\n      return stop === this || stop && this._class === stop._class && this._color.equals(stop._color) && this._offset == stop._offset || false;\n    }\n  });\n  var Style = Base.extend(new function () {\n    var itemDefaults = {\n      fillColor: null,\n      fillRule: 'nonzero',\n      strokeColor: null,\n      strokeWidth: 1,\n      strokeCap: 'butt',\n      strokeJoin: 'miter',\n      strokeScaling: true,\n      miterLimit: 10,\n      dashOffset: 0,\n      dashArray: [],\n      shadowColor: null,\n      shadowBlur: 0,\n      shadowOffset: new Point(),\n      selectedColor: null\n    },\n        groupDefaults = Base.set({}, itemDefaults, {\n      fontFamily: 'sans-serif',\n      fontWeight: 'normal',\n      fontSize: 12,\n      leading: null,\n      justification: 'left'\n    }),\n        textDefaults = Base.set({}, groupDefaults, {\n      fillColor: new Color()\n    }),\n        flags = {\n      strokeWidth: 193,\n      strokeCap: 193,\n      strokeJoin: 193,\n      strokeScaling: 201,\n      miterLimit: 193,\n      fontFamily: 9,\n      fontWeight: 9,\n      fontSize: 9,\n      font: 9,\n      leading: 9,\n      justification: 9\n    },\n        item = {\n      beans: true\n    },\n        fields = {\n      _class: 'Style',\n      beans: true,\n      initialize: function Style(style, _owner, _project) {\n        this._values = {};\n        this._owner = _owner;\n        this._project = _owner && _owner._project || _project || paper.project;\n        this._defaults = !_owner || _owner instanceof Group ? groupDefaults : _owner instanceof TextItem ? textDefaults : itemDefaults;\n        if (style) this.set(style);\n      }\n    };\n    Base.each(groupDefaults, function (value, key) {\n      var isColor = /Color$/.test(key),\n          isPoint = key === 'shadowOffset',\n          part = Base.capitalize(key),\n          flag = flags[key],\n          set = 'set' + part,\n          get = 'get' + part;\n\n      fields[set] = function (value) {\n        var owner = this._owner,\n            children = owner && owner._children,\n            applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath);\n\n        if (applyToChildren) {\n          for (var i = 0, l = children.length; i < l; i++) {\n            children[i]._style[set](value);\n          }\n        }\n\n        if ((key === 'selectedColor' || !applyToChildren) && key in this._defaults) {\n          var old = this._values[key];\n\n          if (old !== value) {\n            if (isColor) {\n              if (old) {\n                Color._setOwner(old, null);\n\n                old._canvasStyle = null;\n              }\n\n              if (value && value.constructor === Color) {\n                value = Color._setOwner(value, owner, applyToChildren && set);\n              }\n            }\n\n            this._values[key] = value;\n            if (owner) owner._changed(flag || 129);\n          }\n        }\n      };\n\n      fields[get] = function (_dontMerge) {\n        var owner = this._owner,\n            children = owner && owner._children,\n            applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath),\n            value;\n\n        if (applyToChildren && !_dontMerge) {\n          for (var i = 0, l = children.length; i < l; i++) {\n            var childValue = children[i]._style[get]();\n\n            if (!i) {\n              value = childValue;\n            } else if (!Base.equals(value, childValue)) {\n              return undefined;\n            }\n          }\n        } else if (key in this._defaults) {\n          var value = this._values[key];\n\n          if (value === undefined) {\n            value = this._defaults[key];\n\n            if (value && value.clone) {\n              value = value.clone();\n            }\n          } else {\n            var ctor = isColor ? Color : isPoint ? Point : null;\n\n            if (ctor && !(value && value.constructor === ctor)) {\n              this._values[key] = value = ctor.read([value], 0, {\n                readNull: true,\n                clone: true\n              });\n            }\n          }\n        }\n\n        if (value && isColor) {\n          value = Color._setOwner(value, owner, applyToChildren && set);\n        }\n\n        return value;\n      };\n\n      item[get] = function (_dontMerge) {\n        return this._style[get](_dontMerge);\n      };\n\n      item[set] = function (value) {\n        this._style[set](value);\n      };\n    });\n    Base.each({\n      Font: 'FontFamily',\n      WindingRule: 'FillRule'\n    }, function (value, key) {\n      var get = 'get' + key,\n          set = 'set' + key;\n      fields[get] = item[get] = '#get' + value;\n      fields[set] = item[set] = '#set' + value;\n    });\n    Item.inject(item);\n    return fields;\n  }(), {\n    set: function set(style) {\n      var isStyle = style instanceof Style,\n          values = isStyle ? style._values : style;\n\n      if (values) {\n        for (var key in values) {\n          if (key in this._defaults) {\n            var value = values[key];\n            this[key] = value && isStyle && value.clone ? value.clone() : value;\n          }\n        }\n      }\n    },\n    equals: function equals(style) {\n      function compare(style1, style2, secondary) {\n        var values1 = style1._values,\n            values2 = style2._values,\n            defaults2 = style2._defaults;\n\n        for (var key in values1) {\n          var value1 = values1[key],\n              value2 = values2[key];\n          if (!(secondary && key in values2) && !Base.equals(value1, value2 === undefined ? defaults2[key] : value2)) return false;\n        }\n\n        return true;\n      }\n\n      return style === this || style && this._class === style._class && compare(this, style) && compare(style, this, true) || false;\n    },\n    _dispose: function _dispose() {\n      var color;\n      color = this.getFillColor();\n      if (color) color._canvasStyle = null;\n      color = this.getStrokeColor();\n      if (color) color._canvasStyle = null;\n      color = this.getShadowColor();\n      if (color) color._canvasStyle = null;\n    },\n    hasFill: function hasFill() {\n      var color = this.getFillColor();\n      return !!color && color.alpha > 0;\n    },\n    hasStroke: function hasStroke() {\n      var color = this.getStrokeColor();\n      return !!color && color.alpha > 0 && this.getStrokeWidth() > 0;\n    },\n    hasShadow: function hasShadow() {\n      var color = this.getShadowColor();\n      return !!color && color.alpha > 0 && (this.getShadowBlur() > 0 || !this.getShadowOffset().isZero());\n    },\n    getView: function getView() {\n      return this._project._view;\n    },\n    getFontStyle: function getFontStyle() {\n      var fontSize = this.getFontSize();\n      return this.getFontWeight() + ' ' + fontSize + (/[a-z]/i.test(fontSize + '') ? ' ' : 'px ') + this.getFontFamily();\n    },\n    getFont: '#getFontFamily',\n    setFont: '#setFontFamily',\n    getLeading: function getLeading() {\n      var leading = getLeading.base.call(this),\n          fontSize = this.getFontSize();\n      if (/pt|em|%|px/.test(fontSize)) fontSize = this.getView().getPixelSize(fontSize);\n      return leading != null ? leading : fontSize * 1.2;\n    }\n  });\n  var DomElement = new function () {\n    function handlePrefix(el, name, set, value) {\n      var prefixes = ['', 'webkit', 'moz', 'Moz', 'ms', 'o'],\n          suffix = name[0].toUpperCase() + name.substring(1);\n\n      for (var i = 0; i < 6; i++) {\n        var prefix = prefixes[i],\n            key = prefix ? prefix + suffix : name;\n\n        if (key in el) {\n          if (set) {\n            el[key] = value;\n          } else {\n            return el[key];\n          }\n\n          break;\n        }\n      }\n    }\n\n    return {\n      getStyles: function getStyles(el) {\n        var doc = el && el.nodeType !== 9 ? el.ownerDocument : el,\n            view = doc && doc.defaultView;\n        return view && view.getComputedStyle(el, '');\n      },\n      getBounds: function getBounds(el, viewport) {\n        var doc = el.ownerDocument,\n            body = doc.body,\n            html = doc.documentElement,\n            rect;\n\n        try {\n          rect = el.getBoundingClientRect();\n        } catch (e) {\n          rect = {\n            left: 0,\n            top: 0,\n            width: 0,\n            height: 0\n          };\n        }\n\n        var x = rect.left - (html.clientLeft || body.clientLeft || 0),\n            y = rect.top - (html.clientTop || body.clientTop || 0);\n\n        if (!viewport) {\n          var view = doc.defaultView;\n          x += view.pageXOffset || html.scrollLeft || body.scrollLeft;\n          y += view.pageYOffset || html.scrollTop || body.scrollTop;\n        }\n\n        return new _Rectangle(x, y, rect.width, rect.height);\n      },\n      getViewportBounds: function getViewportBounds(el) {\n        var doc = el.ownerDocument,\n            view = doc.defaultView,\n            html = doc.documentElement;\n        return new _Rectangle(0, 0, view.innerWidth || html.clientWidth, view.innerHeight || html.clientHeight);\n      },\n      getOffset: function getOffset(el, viewport) {\n        return DomElement.getBounds(el, viewport).getPoint();\n      },\n      getSize: function getSize(el) {\n        return DomElement.getBounds(el, true).getSize();\n      },\n      isInvisible: function isInvisible(el) {\n        return DomElement.getSize(el).equals(new Size(0, 0));\n      },\n      isInView: function isInView(el) {\n        return !DomElement.isInvisible(el) && DomElement.getViewportBounds(el).intersects(DomElement.getBounds(el, true));\n      },\n      isInserted: function isInserted(el) {\n        return document.body.contains(el);\n      },\n      getPrefixed: function getPrefixed(el, name) {\n        return el && handlePrefix(el, name);\n      },\n      setPrefixed: function setPrefixed(el, name, value) {\n        if (typeof name === 'object') {\n          for (var key in name) {\n            handlePrefix(el, key, true, name[key]);\n          }\n        } else {\n          handlePrefix(el, name, true, value);\n        }\n      }\n    };\n  }();\n  var DomEvent = {\n    add: function add(el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n              parts = type.split(/[\\s,]+/g);\n\n          for (var i = 0, l = parts.length; i < l; i++) {\n            var name = parts[i];\n            var options = el === document && (name === 'touchstart' || name === 'touchmove') ? {\n              passive: false\n            } : false;\n            el.addEventListener(name, func, options);\n          }\n        }\n      }\n    },\n    remove: function remove(el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n              parts = type.split(/[\\s,]+/g);\n\n          for (var i = 0, l = parts.length; i < l; i++) {\n            el.removeEventListener(parts[i], func, false);\n          }\n        }\n      }\n    },\n    getPoint: function getPoint(event) {\n      var pos = event.targetTouches ? event.targetTouches.length ? event.targetTouches[0] : event.changedTouches[0] : event;\n      return new Point(pos.pageX || pos.clientX + document.documentElement.scrollLeft, pos.pageY || pos.clientY + document.documentElement.scrollTop);\n    },\n    getTarget: function getTarget(event) {\n      return event.target || event.srcElement;\n    },\n    getRelatedTarget: function getRelatedTarget(event) {\n      return event.relatedTarget || event.toElement;\n    },\n    getOffset: function getOffset(event, target) {\n      return DomEvent.getPoint(event).subtract(DomElement.getOffset(target || DomEvent.getTarget(event)));\n    }\n  };\n  DomEvent.requestAnimationFrame = new function () {\n    var nativeRequest = DomElement.getPrefixed(window, 'requestAnimationFrame'),\n        requested = false,\n        callbacks = [],\n        timer;\n\n    function handleCallbacks() {\n      var functions = callbacks;\n      callbacks = [];\n\n      for (var i = 0, l = functions.length; i < l; i++) {\n        functions[i]();\n      }\n\n      requested = nativeRequest && callbacks.length;\n      if (requested) nativeRequest(handleCallbacks);\n    }\n\n    return function (callback) {\n      callbacks.push(callback);\n\n      if (nativeRequest) {\n        if (!requested) {\n          nativeRequest(handleCallbacks);\n          requested = true;\n        }\n      } else if (!timer) {\n        timer = setInterval(handleCallbacks, 1000 / 60);\n      }\n    };\n  }();\n  var View = Base.extend(Emitter, {\n    _class: 'View',\n    initialize: function View(project, element) {\n      function getSize(name) {\n        return element[name] || parseInt(element.getAttribute(name), 10);\n      }\n\n      function getCanvasSize() {\n        var size = DomElement.getSize(element);\n        return size.isNaN() || size.isZero() ? new Size(getSize('width'), getSize('height')) : size;\n      }\n\n      var size;\n\n      if (window && element) {\n        this._id = element.getAttribute('id');\n        if (this._id == null) element.setAttribute('id', this._id = 'view-' + View._id++);\n        DomEvent.add(element, this._viewEvents);\n        var none = 'none';\n        DomElement.setPrefixed(element.style, {\n          userDrag: none,\n          userSelect: none,\n          touchCallout: none,\n          contentZooming: none,\n          tapHighlightColor: 'rgba(0,0,0,0)'\n        });\n\n        if (PaperScope.hasAttribute(element, 'resize')) {\n          var that = this;\n          DomEvent.add(window, this._windowEvents = {\n            resize: function resize() {\n              that.setViewSize(getCanvasSize());\n            }\n          });\n        }\n\n        size = getCanvasSize();\n\n        if (PaperScope.hasAttribute(element, 'stats') && typeof Stats !== 'undefined') {\n          this._stats = new Stats();\n          var stats = this._stats.domElement,\n              style = stats.style,\n              offset = DomElement.getOffset(element);\n          style.position = 'absolute';\n          style.left = offset.x + 'px';\n          style.top = offset.y + 'px';\n          document.body.appendChild(stats);\n        }\n      } else {\n        size = new Size(element);\n        element = null;\n      }\n\n      this._project = project;\n      this._scope = project._scope;\n      this._element = element;\n      if (!this._pixelRatio) this._pixelRatio = window && window.devicePixelRatio || 1;\n\n      this._setElementSize(size.width, size.height);\n\n      this._viewSize = size;\n\n      View._views.push(this);\n\n      View._viewsById[this._id] = this;\n      (this._matrix = new Matrix())._owner = this;\n      if (!View._focused) View._focused = this;\n      this._frameItems = {};\n      this._frameItemCount = 0;\n      this._itemEvents = {\n        \"native\": {},\n        virtual: {}\n      };\n      this._autoUpdate = !paper.agent.node;\n      this._needsUpdate = false;\n    },\n    remove: function remove() {\n      if (!this._project) return false;\n      if (View._focused === this) View._focused = null;\n\n      View._views.splice(View._views.indexOf(this), 1);\n\n      delete View._viewsById[this._id];\n      var project = this._project;\n      if (project._view === this) project._view = null;\n      DomEvent.remove(this._element, this._viewEvents);\n      DomEvent.remove(window, this._windowEvents);\n      this._element = this._project = null;\n      this.off('frame');\n      this._animate = false;\n      this._frameItems = {};\n      return true;\n    },\n    _events: Base.each(Item._itemHandlers.concat(['onResize', 'onKeyDown', 'onKeyUp']), function (name) {\n      this[name] = {};\n    }, {\n      onFrame: {\n        install: function install() {\n          this.play();\n        },\n        uninstall: function uninstall() {\n          this.pause();\n        }\n      }\n    }),\n    _animate: false,\n    _time: 0,\n    _count: 0,\n    getAutoUpdate: function getAutoUpdate() {\n      return this._autoUpdate;\n    },\n    setAutoUpdate: function setAutoUpdate(autoUpdate) {\n      this._autoUpdate = autoUpdate;\n      if (autoUpdate) this.requestUpdate();\n    },\n    update: function update() {},\n    draw: function draw() {\n      this.update();\n    },\n    requestUpdate: function requestUpdate() {\n      if (!this._requested) {\n        var that = this;\n        DomEvent.requestAnimationFrame(function () {\n          that._requested = false;\n\n          if (that._animate) {\n            that.requestUpdate();\n            var element = that._element;\n\n            if ((!DomElement.getPrefixed(document, 'hidden') || PaperScope.getAttribute(element, 'keepalive') === 'true') && DomElement.isInView(element)) {\n              that._handleFrame();\n            }\n          }\n\n          if (that._autoUpdate) that.update();\n        });\n        this._requested = true;\n      }\n    },\n    play: function play() {\n      this._animate = true;\n      this.requestUpdate();\n    },\n    pause: function pause() {\n      this._animate = false;\n    },\n    _handleFrame: function _handleFrame() {\n      paper = this._scope;\n      var now = Date.now() / 1000,\n          delta = this._last ? now - this._last : 0;\n      this._last = now;\n      this.emit('frame', new Base({\n        delta: delta,\n        time: this._time += delta,\n        count: this._count++\n      }));\n      if (this._stats) this._stats.update();\n    },\n    _animateItem: function _animateItem(item, animate) {\n      var items = this._frameItems;\n\n      if (animate) {\n        items[item._id] = {\n          item: item,\n          time: 0,\n          count: 0\n        };\n        if (++this._frameItemCount === 1) this.on('frame', this._handleFrameItems);\n      } else {\n        delete items[item._id];\n\n        if (--this._frameItemCount === 0) {\n          this.off('frame', this._handleFrameItems);\n        }\n      }\n    },\n    _handleFrameItems: function _handleFrameItems(event) {\n      for (var i in this._frameItems) {\n        var entry = this._frameItems[i];\n        entry.item.emit('frame', new Base(event, {\n          time: entry.time += event.delta,\n          count: entry.count++\n        }));\n      }\n    },\n    _changed: function _changed() {\n      this._project._changed(4097);\n\n      this._bounds = this._decomposed = undefined;\n    },\n    getElement: function getElement() {\n      return this._element;\n    },\n    getPixelRatio: function getPixelRatio() {\n      return this._pixelRatio;\n    },\n    getResolution: function getResolution() {\n      return this._pixelRatio * 72;\n    },\n    getViewSize: function getViewSize() {\n      var size = this._viewSize;\n      return new LinkedSize(size.width, size.height, this, 'setViewSize');\n    },\n    setViewSize: function setViewSize() {\n      var size = Size.read(arguments),\n          delta = size.subtract(this._viewSize);\n      if (delta.isZero()) return;\n\n      this._setElementSize(size.width, size.height);\n\n      this._viewSize.set(size);\n\n      this._changed();\n\n      this.emit('resize', {\n        size: size,\n        delta: delta\n      });\n\n      if (this._autoUpdate) {\n        this.update();\n      }\n    },\n    _setElementSize: function _setElementSize(width, height) {\n      var element = this._element;\n\n      if (element) {\n        if (element.width !== width) element.width = width;\n        if (element.height !== height) element.height = height;\n      }\n    },\n    getBounds: function getBounds() {\n      if (!this._bounds) this._bounds = this._matrix.inverted()._transformBounds(new _Rectangle(new Point(), this._viewSize));\n      return this._bounds;\n    },\n    getSize: function getSize() {\n      return this.getBounds().getSize();\n    },\n    isVisible: function isVisible() {\n      return DomElement.isInView(this._element);\n    },\n    isInserted: function isInserted() {\n      return DomElement.isInserted(this._element);\n    },\n    getPixelSize: function getPixelSize(size) {\n      var element = this._element,\n          pixels;\n\n      if (element) {\n        var parent = element.parentNode,\n            temp = document.createElement('div');\n        temp.style.fontSize = size;\n        parent.appendChild(temp);\n        pixels = parseFloat(DomElement.getStyles(temp).fontSize);\n        parent.removeChild(temp);\n      } else {\n        pixels = parseFloat(pixels);\n      }\n\n      return pixels;\n    },\n    getTextWidth: function getTextWidth(font, lines) {\n      return 0;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n\n    this[key] = function () {\n      var args = arguments,\n          value = (rotate ? Base : Point).read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      return this.transform(new Matrix()[key](value, center || this.getCenter(true)));\n    };\n  }, {\n    _decompose: function _decompose() {\n      return this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    translate: function translate() {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    getCenter: function getCenter() {\n      return this.getBounds().getCenter();\n    },\n    setCenter: function setCenter() {\n      var center = Point.read(arguments);\n      this.translate(this.getCenter().subtract(center));\n    },\n    getZoom: function getZoom() {\n      var scaling = this._decompose().scaling;\n\n      return (scaling.x + scaling.y) / 2;\n    },\n    setZoom: function setZoom(zoom) {\n      this.transform(new Matrix().scale(zoom / this.getZoom(), this.getCenter()));\n    },\n    getRotation: function getRotation() {\n      return this._decompose().rotation;\n    },\n    setRotation: function setRotation(rotation) {\n      var current = this.getRotation();\n\n      if (current != null && rotation != null) {\n        this.rotate(rotation - current);\n      }\n    },\n    getScaling: function getScaling() {\n      var scaling = this._decompose().scaling;\n\n      return new LinkedPoint(scaling.x, scaling.y, this, 'setScaling');\n    },\n    setScaling: function setScaling() {\n      var current = this.getScaling(),\n          scaling = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n\n      if (current && scaling) {\n        this.scale(scaling.x / current.x, scaling.y / current.y);\n      }\n    },\n    getMatrix: function getMatrix() {\n      return this._matrix;\n    },\n    setMatrix: function setMatrix() {\n      var matrix = this._matrix;\n      matrix.initialize.apply(matrix, arguments);\n    },\n    transform: function transform(matrix) {\n      this._matrix.append(matrix);\n    },\n    scrollBy: function scrollBy() {\n      this.translate(Point.read(arguments).negate());\n    }\n  }), {\n    projectToView: function projectToView() {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    viewToProject: function viewToProject() {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    getEventPoint: function getEventPoint(event) {\n      return this.viewToProject(DomEvent.getOffset(event, this._element));\n    }\n  }, {\n    statics: {\n      _views: [],\n      _viewsById: {},\n      _id: 0,\n      create: function create(project, element) {\n        if (document && typeof element === 'string') element = document.getElementById(element);\n        var ctor = window ? CanvasView : View;\n        return new ctor(project, element);\n      }\n    }\n  }, new function () {\n    if (!window) return;\n    var prevFocus,\n        tempFocus,\n        dragging = false,\n        mouseDown = false;\n\n    function getView(event) {\n      var target = DomEvent.getTarget(event);\n      return target.getAttribute && View._viewsById[target.getAttribute('id')];\n    }\n\n    function updateFocus() {\n      var view = View._focused;\n\n      if (!view || !view.isVisible()) {\n        for (var i = 0, l = View._views.length; i < l; i++) {\n          if ((view = View._views[i]).isVisible()) {\n            View._focused = tempFocus = view;\n            break;\n          }\n        }\n      }\n    }\n\n    function handleMouseMove(view, event, point) {\n      view._handleMouseEvent('mousemove', event, point);\n    }\n\n    var navigator = window.navigator,\n        mousedown,\n        mousemove,\n        mouseup;\n\n    if (navigator.pointerEnabled || navigator.msPointerEnabled) {\n      mousedown = 'pointerdown MSPointerDown';\n      mousemove = 'pointermove MSPointerMove';\n      mouseup = 'pointerup pointercancel MSPointerUp MSPointerCancel';\n    } else {\n      mousedown = 'touchstart';\n      mousemove = 'touchmove';\n      mouseup = 'touchend touchcancel';\n\n      if (!('ontouchstart' in window && navigator.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i))) {\n        mousedown += ' mousedown';\n        mousemove += ' mousemove';\n        mouseup += ' mouseup';\n      }\n    }\n\n    var viewEvents = {},\n        docEvents = {\n      mouseout: function mouseout(event) {\n        var view = View._focused,\n            target = DomEvent.getRelatedTarget(event);\n\n        if (view && (!target || target.nodeName === 'HTML')) {\n          var offset = DomEvent.getOffset(event, view._element),\n              x = offset.x,\n              abs = Math.abs,\n              ax = abs(x),\n              max = 1 << 25,\n              diff = ax - max;\n          offset.x = abs(diff) < ax ? diff * (x < 0 ? -1 : 1) : x;\n          handleMouseMove(view, event, view.viewToProject(offset));\n        }\n      },\n      scroll: updateFocus\n    };\n\n    viewEvents[mousedown] = function (event) {\n      var view = View._focused = getView(event);\n\n      if (!dragging) {\n        dragging = true;\n\n        view._handleMouseEvent('mousedown', event);\n      }\n    };\n\n    docEvents[mousemove] = function (event) {\n      var view = View._focused;\n\n      if (!mouseDown) {\n        var target = getView(event);\n\n        if (target) {\n          if (view !== target) {\n            if (view) handleMouseMove(view, event);\n            if (!prevFocus) prevFocus = view;\n            view = View._focused = tempFocus = target;\n          }\n        } else if (tempFocus && tempFocus === view) {\n          if (prevFocus && !prevFocus.isInserted()) prevFocus = null;\n          view = View._focused = prevFocus;\n          prevFocus = null;\n          updateFocus();\n        }\n      }\n\n      if (view) handleMouseMove(view, event);\n    };\n\n    docEvents[mousedown] = function () {\n      mouseDown = true;\n    };\n\n    docEvents[mouseup] = function (event) {\n      var view = View._focused;\n      if (view && dragging) view._handleMouseEvent('mouseup', event);\n      mouseDown = dragging = false;\n    };\n\n    DomEvent.add(document, docEvents);\n    DomEvent.add(window, {\n      load: updateFocus\n    });\n    var called = false,\n        prevented = false,\n        fallbacks = {\n      doubleclick: 'click',\n      mousedrag: 'mousemove'\n    },\n        wasInView = false,\n        overView,\n        downPoint,\n        lastPoint,\n        downItem,\n        overItem,\n        dragItem,\n        clickItem,\n        clickTime,\n        dblClick;\n\n    function emitMouseEvent(obj, target, type, event, point, prevPoint, stopItem) {\n      var stopped = false,\n          mouseEvent;\n\n      function emit(obj, type) {\n        if (obj.responds(type)) {\n          if (!mouseEvent) {\n            mouseEvent = new MouseEvent(type, event, point, target || obj, prevPoint ? point.subtract(prevPoint) : null);\n          }\n\n          if (obj.emit(type, mouseEvent)) {\n            called = true;\n            if (mouseEvent.prevented) prevented = true;\n            if (mouseEvent.stopped) return stopped = true;\n          }\n        } else {\n          var fallback = fallbacks[type];\n          if (fallback) return emit(obj, fallback);\n        }\n      }\n\n      while (obj && obj !== stopItem) {\n        if (emit(obj, type)) break;\n        obj = obj._parent;\n      }\n\n      return stopped;\n    }\n\n    function emitMouseEvents(view, hitItem, type, event, point, prevPoint) {\n      view._project.removeOn(type);\n\n      prevented = called = false;\n      return dragItem && emitMouseEvent(dragItem, null, type, event, point, prevPoint) || hitItem && hitItem !== dragItem && !hitItem.isDescendant(dragItem) && emitMouseEvent(hitItem, null, type === 'mousedrag' ? 'mousemove' : type, event, point, prevPoint, dragItem) || emitMouseEvent(view, dragItem || hitItem || view, type, event, point, prevPoint);\n    }\n\n    var itemEventsMap = {\n      mousedown: {\n        mousedown: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mouseup: {\n        mouseup: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mousemove: {\n        mousedrag: 1,\n        mousemove: 1,\n        mouseenter: 1,\n        mouseleave: 1\n      }\n    };\n    return {\n      _viewEvents: viewEvents,\n      _handleMouseEvent: function _handleMouseEvent(type, event, point) {\n        var itemEvents = this._itemEvents,\n            hitItems = itemEvents[\"native\"][type],\n            nativeMove = type === 'mousemove',\n            tool = this._scope.tool,\n            view = this;\n\n        function responds(type) {\n          return itemEvents.virtual[type] || view.responds(type) || tool && tool.responds(type);\n        }\n\n        if (nativeMove && dragging && responds('mousedrag')) type = 'mousedrag';\n        if (!point) point = this.getEventPoint(event);\n\n        var inView = this.getBounds().contains(point),\n            hit = hitItems && inView && view._project.hitTest(point, {\n          tolerance: 0,\n          fill: true,\n          stroke: true\n        }),\n            hitItem = hit && hit.item || null,\n            handle = false,\n            mouse = {};\n\n        mouse[type.substr(5)] = true;\n\n        if (hitItems && hitItem !== overItem) {\n          if (overItem) {\n            emitMouseEvent(overItem, null, 'mouseleave', event, point);\n          }\n\n          if (hitItem) {\n            emitMouseEvent(hitItem, null, 'mouseenter', event, point);\n          }\n\n          overItem = hitItem;\n        }\n\n        if (wasInView ^ inView) {\n          emitMouseEvent(this, null, inView ? 'mouseenter' : 'mouseleave', event, point);\n          overView = inView ? this : null;\n          handle = true;\n        }\n\n        if ((inView || mouse.drag) && !point.equals(lastPoint)) {\n          emitMouseEvents(this, hitItem, nativeMove ? type : 'mousemove', event, point, lastPoint);\n          handle = true;\n        }\n\n        wasInView = inView;\n\n        if (mouse.down && inView || mouse.up && downPoint) {\n          emitMouseEvents(this, hitItem, type, event, point, downPoint);\n\n          if (mouse.down) {\n            dblClick = hitItem === clickItem && Date.now() - clickTime < 300;\n            downItem = clickItem = hitItem;\n\n            if (!prevented && hitItem) {\n              var item = hitItem;\n\n              while (item && !item.responds('mousedrag')) {\n                item = item._parent;\n              }\n\n              if (item) dragItem = hitItem;\n            }\n\n            downPoint = point;\n          } else if (mouse.up) {\n            if (!prevented && hitItem === downItem) {\n              clickTime = Date.now();\n              emitMouseEvents(this, hitItem, dblClick ? 'doubleclick' : 'click', event, point, downPoint);\n              dblClick = false;\n            }\n\n            downItem = dragItem = null;\n          }\n\n          wasInView = false;\n          handle = true;\n        }\n\n        lastPoint = point;\n\n        if (handle && tool) {\n          called = tool._handleMouseEvent(type, event, point, mouse) || called;\n        }\n\n        if (event.cancelable !== false && (called && !mouse.move || mouse.down && responds('mouseup'))) {\n          event.preventDefault();\n        }\n      },\n      _handleKeyEvent: function _handleKeyEvent(type, event, key, character) {\n        var scope = this._scope,\n            tool = scope.tool,\n            keyEvent;\n\n        function emit(obj) {\n          if (obj.responds(type)) {\n            paper = scope;\n            obj.emit(type, keyEvent = keyEvent || new KeyEvent(type, event, key, character));\n          }\n        }\n\n        if (this.isVisible()) {\n          emit(this);\n          if (tool && tool.responds(type)) emit(tool);\n        }\n      },\n      _countItemEvent: function _countItemEvent(type, sign) {\n        var itemEvents = this._itemEvents,\n            _native = itemEvents[\"native\"],\n            virtual = itemEvents.virtual;\n\n        for (var key in itemEventsMap) {\n          _native[key] = (_native[key] || 0) + (itemEventsMap[key][type] || 0) * sign;\n        }\n\n        virtual[type] = (virtual[type] || 0) + sign;\n      },\n      statics: {\n        updateFocus: updateFocus,\n        _resetState: function _resetState() {\n          dragging = mouseDown = called = wasInView = false;\n          prevFocus = tempFocus = overView = downPoint = lastPoint = downItem = overItem = dragItem = clickItem = clickTime = dblClick = null;\n        }\n      }\n    };\n  }());\n  var CanvasView = View.extend({\n    _class: 'CanvasView',\n    initialize: function CanvasView(project, canvas) {\n      if (!(canvas instanceof window.HTMLCanvasElement)) {\n        var size = Size.read(arguments, 1);\n        if (size.isZero()) throw new Error('Cannot create CanvasView with the provided argument: ' + Base.slice(arguments, 1));\n        canvas = CanvasProvider.getCanvas(size);\n      }\n\n      var ctx = this._context = canvas.getContext('2d');\n      ctx.save();\n      this._pixelRatio = 1;\n\n      if (!/^off|false$/.test(PaperScope.getAttribute(canvas, 'hidpi'))) {\n        var deviceRatio = window.devicePixelRatio || 1,\n            backingStoreRatio = DomElement.getPrefixed(ctx, 'backingStorePixelRatio') || 1;\n        this._pixelRatio = deviceRatio / backingStoreRatio;\n      }\n\n      View.call(this, project, canvas);\n      this._needsUpdate = true;\n    },\n    remove: function remove() {\n      this._context.restore();\n\n      return remove.base.call(this);\n    },\n    _setElementSize: function _setElementSize(width, height) {\n      var pixelRatio = this._pixelRatio;\n\n      _setElementSize.base.call(this, width * pixelRatio, height * pixelRatio);\n\n      if (pixelRatio !== 1) {\n        var element = this._element,\n            ctx = this._context;\n\n        if (!PaperScope.hasAttribute(element, 'resize')) {\n          var style = element.style;\n          style.width = width + 'px';\n          style.height = height + 'px';\n        }\n\n        ctx.restore();\n        ctx.save();\n        ctx.scale(pixelRatio, pixelRatio);\n      }\n    },\n    getContext: function getContext() {\n      return this._context;\n    },\n    getPixelSize: function getPixelSize(size) {\n      var agent = paper.agent,\n          pixels;\n\n      if (agent && agent.firefox) {\n        pixels = getPixelSize.base.call(this, size);\n      } else {\n        var ctx = this._context,\n            prevFont = ctx.font;\n        ctx.font = size + ' serif';\n        pixels = parseFloat(ctx.font);\n        ctx.font = prevFont;\n      }\n\n      return pixels;\n    },\n    getTextWidth: function getTextWidth(font, lines) {\n      var ctx = this._context,\n          prevFont = ctx.font,\n          width = 0;\n      ctx.font = font;\n\n      for (var i = 0, l = lines.length; i < l; i++) {\n        width = Math.max(width, ctx.measureText(lines[i]).width);\n      }\n\n      ctx.font = prevFont;\n      return width;\n    },\n    update: function update() {\n      if (!this._needsUpdate) return false;\n      var project = this._project,\n          ctx = this._context,\n          size = this._viewSize;\n      ctx.clearRect(0, 0, size.width + 1, size.height + 1);\n      if (project) project.draw(ctx, this._matrix, this._pixelRatio);\n      this._needsUpdate = false;\n      return true;\n    }\n  });\n  var Event = Base.extend({\n    _class: 'Event',\n    initialize: function Event(event) {\n      this.event = event;\n      this.type = event && event.type;\n    },\n    prevented: false,\n    stopped: false,\n    preventDefault: function preventDefault() {\n      this.prevented = true;\n      this.event.preventDefault();\n    },\n    stopPropagation: function stopPropagation() {\n      this.stopped = true;\n      this.event.stopPropagation();\n    },\n    stop: function stop() {\n      this.stopPropagation();\n      this.preventDefault();\n    },\n    getTimeStamp: function getTimeStamp() {\n      return this.event.timeStamp;\n    },\n    getModifiers: function getModifiers() {\n      return Key.modifiers;\n    }\n  });\n  var KeyEvent = Event.extend({\n    _class: 'KeyEvent',\n    initialize: function KeyEvent(type, event, key, character) {\n      this.type = type;\n      this.event = event;\n      this.key = key;\n      this.character = character;\n    },\n    toString: function toString() {\n      return \"{ type: '\" + this.type + \"', key: '\" + this.key + \"', character: '\" + this.character + \"', modifiers: \" + this.getModifiers() + \" }\";\n    }\n  });\n  var Key = new function () {\n    var keyLookup = {\n      '\\t': 'tab',\n      ' ': 'space',\n      '\\b': 'backspace',\n      '\\x7f': 'delete',\n      'Spacebar': 'space',\n      'Del': 'delete',\n      'Win': 'meta',\n      'Esc': 'escape'\n    },\n        charLookup = {\n      'tab': '\\t',\n      'space': ' ',\n      'enter': '\\r'\n    },\n        keyMap = {},\n        charMap = {},\n        metaFixMap,\n        downKey,\n        modifiers = new Base({\n      shift: false,\n      control: false,\n      alt: false,\n      meta: false,\n      capsLock: false,\n      space: false\n    }).inject({\n      option: {\n        get: function get() {\n          return this.alt;\n        }\n      },\n      command: {\n        get: function get() {\n          var agent = paper && paper.agent;\n          return agent && agent.mac ? this.meta : this.control;\n        }\n      }\n    });\n\n    function getKey(event) {\n      var key = event.key || event.keyIdentifier;\n      key = /^U\\+/.test(key) ? String.fromCharCode(parseInt(key.substr(2), 16)) : /^Arrow[A-Z]/.test(key) ? key.substr(5) : key === 'Unidentified' || key === undefined ? String.fromCharCode(event.keyCode) : key;\n      return keyLookup[key] || (key.length > 1 ? Base.hyphenate(key) : key.toLowerCase());\n    }\n\n    function handleKey(down, key, character, event) {\n      var type = down ? 'keydown' : 'keyup',\n          view = View._focused,\n          name;\n      keyMap[key] = down;\n\n      if (down) {\n        charMap[key] = character;\n      } else {\n        delete charMap[key];\n      }\n\n      if (key.length > 1 && (name = Base.camelize(key)) in modifiers) {\n        modifiers[name] = down;\n        var agent = paper && paper.agent;\n\n        if (name === 'meta' && agent && agent.mac) {\n          if (down) {\n            metaFixMap = {};\n          } else {\n            for (var k in metaFixMap) {\n              if (k in charMap) handleKey(false, k, metaFixMap[k], event);\n            }\n\n            metaFixMap = null;\n          }\n        }\n      } else if (down && metaFixMap) {\n        metaFixMap[key] = character;\n      }\n\n      if (view) {\n        view._handleKeyEvent(down ? 'keydown' : 'keyup', event, key, character);\n      }\n    }\n\n    DomEvent.add(document, {\n      keydown: function keydown(event) {\n        var key = getKey(event),\n            agent = paper && paper.agent;\n\n        if (key.length > 1 || agent && agent.chrome && (event.altKey || agent.mac && event.metaKey || !agent.mac && event.ctrlKey)) {\n          handleKey(true, key, charLookup[key] || (key.length > 1 ? '' : key), event);\n        } else {\n          downKey = key;\n        }\n      },\n      keypress: function keypress(event) {\n        if (downKey) {\n          var key = getKey(event),\n              code = event.charCode,\n              character = code >= 32 ? String.fromCharCode(code) : key.length > 1 ? '' : key;\n\n          if (key !== downKey) {\n            key = character.toLowerCase();\n          }\n\n          handleKey(true, key, character, event);\n          downKey = null;\n        }\n      },\n      keyup: function keyup(event) {\n        var key = getKey(event);\n        if (key in charMap) handleKey(false, key, charMap[key], event);\n      }\n    });\n    DomEvent.add(window, {\n      blur: function blur(event) {\n        for (var key in charMap) {\n          handleKey(false, key, charMap[key], event);\n        }\n      }\n    });\n    return {\n      modifiers: modifiers,\n      isDown: function isDown(key) {\n        return !!keyMap[key];\n      }\n    };\n  }();\n  var MouseEvent = Event.extend({\n    _class: 'MouseEvent',\n    initialize: function MouseEvent(type, event, point, target, delta) {\n      this.type = type;\n      this.event = event;\n      this.point = point;\n      this.target = target;\n      this.delta = delta;\n    },\n    toString: function toString() {\n      return \"{ type: '\" + this.type + \"', point: \" + this.point + ', target: ' + this.target + (this.delta ? ', delta: ' + this.delta : '') + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var ToolEvent = Event.extend({\n    _class: 'ToolEvent',\n    _item: null,\n    initialize: function ToolEvent(tool, type, event) {\n      this.tool = tool;\n      this.type = type;\n      this.event = event;\n    },\n    _choosePoint: function _choosePoint(point, toolPoint) {\n      return point ? point : toolPoint ? toolPoint.clone() : null;\n    },\n    getPoint: function getPoint() {\n      return this._choosePoint(this._point, this.tool._point);\n    },\n    setPoint: function setPoint(point) {\n      this._point = point;\n    },\n    getLastPoint: function getLastPoint() {\n      return this._choosePoint(this._lastPoint, this.tool._lastPoint);\n    },\n    setLastPoint: function setLastPoint(lastPoint) {\n      this._lastPoint = lastPoint;\n    },\n    getDownPoint: function getDownPoint() {\n      return this._choosePoint(this._downPoint, this.tool._downPoint);\n    },\n    setDownPoint: function setDownPoint(downPoint) {\n      this._downPoint = downPoint;\n    },\n    getMiddlePoint: function getMiddlePoint() {\n      if (!this._middlePoint && this.tool._lastPoint) {\n        return this.tool._point.add(this.tool._lastPoint).divide(2);\n      }\n\n      return this._middlePoint;\n    },\n    setMiddlePoint: function setMiddlePoint(middlePoint) {\n      this._middlePoint = middlePoint;\n    },\n    getDelta: function getDelta() {\n      return !this._delta && this.tool._lastPoint ? this.tool._point.subtract(this.tool._lastPoint) : this._delta;\n    },\n    setDelta: function setDelta(delta) {\n      this._delta = delta;\n    },\n    getCount: function getCount() {\n      return this.tool[/^mouse(down|up)$/.test(this.type) ? '_downCount' : '_moveCount'];\n    },\n    setCount: function setCount(count) {\n      this.tool[/^mouse(down|up)$/.test(this.type) ? 'downCount' : 'count'] = count;\n    },\n    getItem: function getItem() {\n      if (!this._item) {\n        var result = this.tool._scope.project.hitTest(this.getPoint());\n\n        if (result) {\n          var item = result.item,\n              parent = item._parent;\n\n          while (/^(Group|CompoundPath)$/.test(parent._class)) {\n            item = parent;\n            parent = parent._parent;\n          }\n\n          this._item = item;\n        }\n      }\n\n      return this._item;\n    },\n    setItem: function setItem(item) {\n      this._item = item;\n    },\n    toString: function toString() {\n      return '{ type: ' + this.type + ', point: ' + this.getPoint() + ', count: ' + this.getCount() + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var Tool = PaperScopeItem.extend({\n    _class: 'Tool',\n    _list: 'tools',\n    _reference: 'tool',\n    _events: ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onMouseMove', 'onActivate', 'onDeactivate', 'onEditOptions', 'onKeyDown', 'onKeyUp'],\n    initialize: function Tool(props) {\n      PaperScopeItem.call(this);\n      this._moveCount = -1;\n      this._downCount = -1;\n      this.set(props);\n    },\n    getMinDistance: function getMinDistance() {\n      return this._minDistance;\n    },\n    setMinDistance: function setMinDistance(minDistance) {\n      this._minDistance = minDistance;\n\n      if (minDistance != null && this._maxDistance != null && minDistance > this._maxDistance) {\n        this._maxDistance = minDistance;\n      }\n    },\n    getMaxDistance: function getMaxDistance() {\n      return this._maxDistance;\n    },\n    setMaxDistance: function setMaxDistance(maxDistance) {\n      this._maxDistance = maxDistance;\n\n      if (this._minDistance != null && maxDistance != null && maxDistance < this._minDistance) {\n        this._minDistance = maxDistance;\n      }\n    },\n    getFixedDistance: function getFixedDistance() {\n      return this._minDistance == this._maxDistance ? this._minDistance : null;\n    },\n    setFixedDistance: function setFixedDistance(distance) {\n      this._minDistance = this._maxDistance = distance;\n    },\n    _handleMouseEvent: function _handleMouseEvent(type, event, point, mouse) {\n      paper = this._scope;\n      if (mouse.drag && !this.responds(type)) type = 'mousemove';\n      var move = mouse.move || mouse.drag,\n          responds = this.responds(type),\n          minDistance = this.minDistance,\n          maxDistance = this.maxDistance,\n          called = false,\n          tool = this;\n\n      function update(minDistance, maxDistance) {\n        var pt = point,\n            toolPoint = move ? tool._point : tool._downPoint || pt;\n\n        if (move) {\n          if (tool._moveCount >= 0 && pt.equals(toolPoint)) {\n            return false;\n          }\n\n          if (toolPoint && (minDistance != null || maxDistance != null)) {\n            var vector = pt.subtract(toolPoint),\n                distance = vector.getLength();\n            if (distance < (minDistance || 0)) return false;\n\n            if (maxDistance) {\n              pt = toolPoint.add(vector.normalize(Math.min(distance, maxDistance)));\n            }\n          }\n\n          tool._moveCount++;\n        }\n\n        tool._point = pt;\n        tool._lastPoint = toolPoint || pt;\n\n        if (mouse.down) {\n          tool._moveCount = -1;\n          tool._downPoint = pt;\n          tool._downCount++;\n        }\n\n        return true;\n      }\n\n      function emit() {\n        if (responds) {\n          called = tool.emit(type, new ToolEvent(tool, type, event)) || called;\n        }\n      }\n\n      if (mouse.down) {\n        update();\n        emit();\n      } else if (mouse.up) {\n        update(null, maxDistance);\n        emit();\n      } else if (responds) {\n        while (update(minDistance, maxDistance)) {\n          emit();\n        }\n      }\n\n      return called;\n    }\n  });\n  var Tween = Base.extend(Emitter, {\n    _class: 'Tween',\n    statics: {\n      easings: {\n        linear: function linear(t) {\n          return t;\n        },\n        easeInQuad: function easeInQuad(t) {\n          return t * t;\n        },\n        easeOutQuad: function easeOutQuad(t) {\n          return t * (2 - t);\n        },\n        easeInOutQuad: function easeInOutQuad(t) {\n          return t < 0.5 ? 2 * t * t : -1 + 2 * (2 - t) * t;\n        },\n        easeInCubic: function easeInCubic(t) {\n          return t * t * t;\n        },\n        easeOutCubic: function easeOutCubic(t) {\n          return --t * t * t + 1;\n        },\n        easeInOutCubic: function easeInOutCubic(t) {\n          return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n        },\n        easeInQuart: function easeInQuart(t) {\n          return t * t * t * t;\n        },\n        easeOutQuart: function easeOutQuart(t) {\n          return 1 - --t * t * t * t;\n        },\n        easeInOutQuart: function easeInOutQuart(t) {\n          return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n        },\n        easeInQuint: function easeInQuint(t) {\n          return t * t * t * t * t;\n        },\n        easeOutQuint: function easeOutQuint(t) {\n          return 1 + --t * t * t * t * t;\n        },\n        easeInOutQuint: function easeInOutQuint(t) {\n          return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n        }\n      }\n    },\n    initialize: function Tween(object, from, to, duration, easing, start) {\n      this.object = object;\n      var type = typeof easing;\n      var isFunction = type === 'function';\n      this.type = isFunction ? type : type === 'string' ? easing : 'linear';\n      this.easing = isFunction ? easing : Tween.easings[this.type];\n      this.duration = duration;\n      this.running = false;\n      this._then = null;\n      this._startTime = null;\n      var state = from || to;\n      this._keys = state ? Object.keys(state) : [];\n      this._parsedKeys = this._parseKeys(this._keys);\n      this._from = state && this._getState(from);\n      this._to = state && this._getState(to);\n\n      if (start !== false) {\n        this.start();\n      }\n    },\n    then: function then(_then) {\n      this._then = _then;\n      return this;\n    },\n    start: function start() {\n      this._startTime = null;\n      this.running = true;\n      return this;\n    },\n    stop: function stop() {\n      this.running = false;\n      return this;\n    },\n    update: function update(progress) {\n      if (this.running) {\n        if (progress > 1) {\n          progress = 1;\n          this.running = false;\n        }\n\n        var factor = this.easing(progress),\n            keys = this._keys,\n            getValue = function getValue(value) {\n          return typeof value === 'function' ? value(factor, progress) : value;\n        };\n\n        for (var i = 0, l = keys && keys.length; i < l; i++) {\n          var key = keys[i],\n              from = getValue(this._from[key]),\n              to = getValue(this._to[key]),\n              value = from && to && from.__add && to.__add ? to.__subtract(from).__multiply(factor).__add(from) : (to - from) * factor + from;\n\n          this._setProperty(this._parsedKeys[key], value);\n        }\n\n        if (!this.running && this._then) {\n          this._then(this.object);\n        }\n\n        if (this.responds('update')) {\n          this.emit('update', new Base({\n            progress: progress,\n            factor: factor\n          }));\n        }\n      }\n\n      return this;\n    },\n    _events: {\n      onUpdate: {}\n    },\n    _handleFrame: function _handleFrame(time) {\n      var startTime = this._startTime,\n          progress = startTime ? (time - startTime) / this.duration : 0;\n\n      if (!startTime) {\n        this._startTime = time;\n      }\n\n      this.update(progress);\n    },\n    _getState: function _getState(state) {\n      var keys = this._keys,\n          result = {};\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n            path = this._parsedKeys[key],\n            current = this._getProperty(path),\n            value;\n\n        if (state) {\n          var resolved = this._resolveValue(current, state[key]);\n\n          this._setProperty(path, resolved);\n\n          value = this._getProperty(path);\n          value = value && value.clone ? value.clone() : value;\n\n          this._setProperty(path, current);\n        } else {\n          value = current && current.clone ? current.clone() : current;\n        }\n\n        result[key] = value;\n      }\n\n      return result;\n    },\n    _resolveValue: function _resolveValue(current, value) {\n      if (value) {\n        if (Array.isArray(value) && value.length === 2) {\n          var operator = value[0];\n          return operator && operator.match && operator.match(/^[+\\-\\*\\/]=/) ? this._calculate(current, operator[0], value[1]) : value;\n        } else if (typeof value === 'string') {\n          var match = value.match(/^[+\\-*/]=(.*)/);\n\n          if (match) {\n            var parsed = JSON.parse(match[1].replace(/(['\"])?([a-zA-Z0-9_]+)(['\"])?:/g, '\"$2\": '));\n            return this._calculate(current, value[0], parsed);\n          }\n        }\n      }\n\n      return value;\n    },\n    _calculate: function _calculate(left, operator, right) {\n      return paper.PaperScript.calculateBinary(left, operator, right);\n    },\n    _parseKeys: function _parseKeys(keys) {\n      var parsed = {};\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n            path = key.replace(/\\.([^.]*)/g, '/$1').replace(/\\[['\"]?([^'\"\\]]*)['\"]?\\]/g, '/$1');\n        parsed[key] = path.split('/');\n      }\n\n      return parsed;\n    },\n    _getProperty: function _getProperty(path, offset) {\n      var obj = this.object;\n\n      for (var i = 0, l = path.length - (offset || 0); i < l && obj; i++) {\n        obj = obj[path[i]];\n      }\n\n      return obj;\n    },\n    _setProperty: function _setProperty(path, value) {\n      var dest = this._getProperty(path, 1);\n\n      if (dest) {\n        dest[path[path.length - 1]] = value;\n      }\n    }\n  });\n  var Http = {\n    request: function request(options) {\n      var xhr = new self.XMLHttpRequest();\n      xhr.open((options.method || 'get').toUpperCase(), options.url, Base.pick(options.async, true));\n      if (options.mimeType) xhr.overrideMimeType(options.mimeType);\n\n      xhr.onload = function () {\n        var status = xhr.status;\n\n        if (status === 0 || status === 200) {\n          if (options.onLoad) {\n            options.onLoad.call(xhr, xhr.responseText);\n          }\n        } else {\n          xhr.onerror();\n        }\n      };\n\n      xhr.onerror = function () {\n        var status = xhr.status,\n            message = 'Could not load \"' + options.url + '\" (Status: ' + status + ')';\n\n        if (options.onError) {\n          options.onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      };\n\n      return xhr.send(null);\n    }\n  };\n  var CanvasProvider = {\n    canvases: [],\n    getCanvas: function getCanvas(width, height) {\n      if (!window) return null;\n      var canvas,\n          clear = true;\n\n      if (typeof width === 'object') {\n        height = width.height;\n        width = width.width;\n      }\n\n      if (this.canvases.length) {\n        canvas = this.canvases.pop();\n      } else {\n        canvas = document.createElement('canvas');\n        clear = false;\n      }\n\n      var ctx = canvas.getContext('2d');\n\n      if (!ctx) {\n        throw new Error('Canvas ' + canvas + ' is unable to provide a 2D context.');\n      }\n\n      if (canvas.width === width && canvas.height === height) {\n        if (clear) ctx.clearRect(0, 0, width + 1, height + 1);\n      } else {\n        canvas.width = width;\n        canvas.height = height;\n      }\n\n      ctx.save();\n      return canvas;\n    },\n    getContext: function getContext(width, height) {\n      var canvas = this.getCanvas(width, height);\n      return canvas ? canvas.getContext('2d') : null;\n    },\n    release: function release(obj) {\n      var canvas = obj && obj.canvas ? obj.canvas : obj;\n\n      if (canvas && canvas.getContext) {\n        canvas.getContext('2d').restore();\n        this.canvases.push(canvas);\n      }\n    }\n  };\n  var BlendMode = new function () {\n    var min = Math.min,\n        max = Math.max,\n        abs = Math.abs,\n        sr,\n        sg,\n        sb,\n        sa,\n        br,\n        bg,\n        bb,\n        ba,\n        dr,\n        dg,\n        db;\n\n    function getLum(r, g, b) {\n      return 0.2989 * r + 0.587 * g + 0.114 * b;\n    }\n\n    function setLum(r, g, b, l) {\n      var d = l - getLum(r, g, b);\n      dr = r + d;\n      dg = g + d;\n      db = b + d;\n      var l = getLum(dr, dg, db),\n          mn = min(dr, dg, db),\n          mx = max(dr, dg, db);\n\n      if (mn < 0) {\n        var lmn = l - mn;\n        dr = l + (dr - l) * l / lmn;\n        dg = l + (dg - l) * l / lmn;\n        db = l + (db - l) * l / lmn;\n      }\n\n      if (mx > 255) {\n        var ln = 255 - l,\n            mxl = mx - l;\n        dr = l + (dr - l) * ln / mxl;\n        dg = l + (dg - l) * ln / mxl;\n        db = l + (db - l) * ln / mxl;\n      }\n    }\n\n    function getSat(r, g, b) {\n      return max(r, g, b) - min(r, g, b);\n    }\n\n    function setSat(r, g, b, s) {\n      var col = [r, g, b],\n          mx = max(r, g, b),\n          mn = min(r, g, b),\n          md;\n      mn = mn === r ? 0 : mn === g ? 1 : 2;\n      mx = mx === r ? 0 : mx === g ? 1 : 2;\n      md = min(mn, mx) === 0 ? max(mn, mx) === 1 ? 2 : 1 : 0;\n\n      if (col[mx] > col[mn]) {\n        col[md] = (col[md] - col[mn]) * s / (col[mx] - col[mn]);\n        col[mx] = s;\n      } else {\n        col[md] = col[mx] = 0;\n      }\n\n      col[mn] = 0;\n      dr = col[0];\n      dg = col[1];\n      db = col[2];\n    }\n\n    var modes = {\n      multiply: function multiply() {\n        dr = br * sr / 255;\n        dg = bg * sg / 255;\n        db = bb * sb / 255;\n      },\n      screen: function screen() {\n        dr = br + sr - br * sr / 255;\n        dg = bg + sg - bg * sg / 255;\n        db = bb + sb - bb * sb / 255;\n      },\n      overlay: function overlay() {\n        dr = br < 128 ? 2 * br * sr / 255 : 255 - 2 * (255 - br) * (255 - sr) / 255;\n        dg = bg < 128 ? 2 * bg * sg / 255 : 255 - 2 * (255 - bg) * (255 - sg) / 255;\n        db = bb < 128 ? 2 * bb * sb / 255 : 255 - 2 * (255 - bb) * (255 - sb) / 255;\n      },\n      'soft-light': function softLight() {\n        var t = sr * br / 255;\n        dr = t + br * (255 - (255 - br) * (255 - sr) / 255 - t) / 255;\n        t = sg * bg / 255;\n        dg = t + bg * (255 - (255 - bg) * (255 - sg) / 255 - t) / 255;\n        t = sb * bb / 255;\n        db = t + bb * (255 - (255 - bb) * (255 - sb) / 255 - t) / 255;\n      },\n      'hard-light': function hardLight() {\n        dr = sr < 128 ? 2 * sr * br / 255 : 255 - 2 * (255 - sr) * (255 - br) / 255;\n        dg = sg < 128 ? 2 * sg * bg / 255 : 255 - 2 * (255 - sg) * (255 - bg) / 255;\n        db = sb < 128 ? 2 * sb * bb / 255 : 255 - 2 * (255 - sb) * (255 - bb) / 255;\n      },\n      'color-dodge': function colorDodge() {\n        dr = br === 0 ? 0 : sr === 255 ? 255 : min(255, 255 * br / (255 - sr));\n        dg = bg === 0 ? 0 : sg === 255 ? 255 : min(255, 255 * bg / (255 - sg));\n        db = bb === 0 ? 0 : sb === 255 ? 255 : min(255, 255 * bb / (255 - sb));\n      },\n      'color-burn': function colorBurn() {\n        dr = br === 255 ? 255 : sr === 0 ? 0 : max(0, 255 - (255 - br) * 255 / sr);\n        dg = bg === 255 ? 255 : sg === 0 ? 0 : max(0, 255 - (255 - bg) * 255 / sg);\n        db = bb === 255 ? 255 : sb === 0 ? 0 : max(0, 255 - (255 - bb) * 255 / sb);\n      },\n      darken: function darken() {\n        dr = br < sr ? br : sr;\n        dg = bg < sg ? bg : sg;\n        db = bb < sb ? bb : sb;\n      },\n      lighten: function lighten() {\n        dr = br > sr ? br : sr;\n        dg = bg > sg ? bg : sg;\n        db = bb > sb ? bb : sb;\n      },\n      difference: function difference() {\n        dr = br - sr;\n        if (dr < 0) dr = -dr;\n        dg = bg - sg;\n        if (dg < 0) dg = -dg;\n        db = bb - sb;\n        if (db < 0) db = -db;\n      },\n      exclusion: function exclusion() {\n        dr = br + sr * (255 - br - br) / 255;\n        dg = bg + sg * (255 - bg - bg) / 255;\n        db = bb + sb * (255 - bb - bb) / 255;\n      },\n      hue: function hue() {\n        setSat(sr, sg, sb, getSat(br, bg, bb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      saturation: function saturation() {\n        setSat(br, bg, bb, getSat(sr, sg, sb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      luminosity: function luminosity() {\n        setLum(br, bg, bb, getLum(sr, sg, sb));\n      },\n      color: function color() {\n        setLum(sr, sg, sb, getLum(br, bg, bb));\n      },\n      add: function add() {\n        dr = min(br + sr, 255);\n        dg = min(bg + sg, 255);\n        db = min(bb + sb, 255);\n      },\n      subtract: function subtract() {\n        dr = max(br - sr, 0);\n        dg = max(bg - sg, 0);\n        db = max(bb - sb, 0);\n      },\n      average: function average() {\n        dr = (br + sr) / 2;\n        dg = (bg + sg) / 2;\n        db = (bb + sb) / 2;\n      },\n      negation: function negation() {\n        dr = 255 - abs(255 - sr - br);\n        dg = 255 - abs(255 - sg - bg);\n        db = 255 - abs(255 - sb - bb);\n      }\n    };\n    var nativeModes = this.nativeModes = Base.each(['source-over', 'source-in', 'source-out', 'source-atop', 'destination-over', 'destination-in', 'destination-out', 'destination-atop', 'lighter', 'darker', 'copy', 'xor'], function (mode) {\n      this[mode] = true;\n    }, {});\n    var ctx = CanvasProvider.getContext(1, 1);\n\n    if (ctx) {\n      Base.each(modes, function (func, mode) {\n        var darken = mode === 'darken',\n            ok = false;\n        ctx.save();\n\n        try {\n          ctx.fillStyle = darken ? '#300' : '#a00';\n          ctx.fillRect(0, 0, 1, 1);\n          ctx.globalCompositeOperation = mode;\n\n          if (ctx.globalCompositeOperation === mode) {\n            ctx.fillStyle = darken ? '#a00' : '#300';\n            ctx.fillRect(0, 0, 1, 1);\n            ok = ctx.getImageData(0, 0, 1, 1).data[0] !== darken ? 170 : 51;\n          }\n        } catch (e) {}\n\n        ctx.restore();\n        nativeModes[mode] = ok;\n      });\n      CanvasProvider.release(ctx);\n    }\n\n    this.process = function (mode, srcContext, dstContext, alpha, offset) {\n      var srcCanvas = srcContext.canvas,\n          normal = mode === 'normal';\n\n      if (normal || nativeModes[mode]) {\n        dstContext.save();\n        dstContext.setTransform(1, 0, 0, 1, 0, 0);\n        dstContext.globalAlpha = alpha;\n        if (!normal) dstContext.globalCompositeOperation = mode;\n        dstContext.drawImage(srcCanvas, offset.x, offset.y);\n        dstContext.restore();\n      } else {\n        var process = modes[mode];\n        if (!process) return;\n        var dstData = dstContext.getImageData(offset.x, offset.y, srcCanvas.width, srcCanvas.height),\n            dst = dstData.data,\n            src = srcContext.getImageData(0, 0, srcCanvas.width, srcCanvas.height).data;\n\n        for (var i = 0, l = dst.length; i < l; i += 4) {\n          sr = src[i];\n          br = dst[i];\n          sg = src[i + 1];\n          bg = dst[i + 1];\n          sb = src[i + 2];\n          bb = dst[i + 2];\n          sa = src[i + 3];\n          ba = dst[i + 3];\n          process();\n          var a1 = sa * alpha / 255,\n              a2 = 1 - a1;\n          dst[i] = a1 * dr + a2 * br;\n          dst[i + 1] = a1 * dg + a2 * bg;\n          dst[i + 2] = a1 * db + a2 * bb;\n          dst[i + 3] = sa * alpha + a2 * ba;\n        }\n\n        dstContext.putImageData(dstData, offset.x, offset.y);\n      }\n    };\n  }();\n  var SvgElement = new function () {\n    var svg = 'http://www.w3.org/2000/svg',\n        xmlns = 'http://www.w3.org/2000/xmlns',\n        xlink = 'http://www.w3.org/1999/xlink',\n        attributeNamespace = {\n      href: xlink,\n      xlink: xmlns,\n      xmlns: xmlns + '/',\n      'xmlns:xlink': xmlns + '/'\n    };\n\n    function create(tag, attributes, formatter) {\n      return set(document.createElementNS(svg, tag), attributes, formatter);\n    }\n\n    function get(node, name) {\n      var namespace = attributeNamespace[name],\n          value = namespace ? node.getAttributeNS(namespace, name) : node.getAttribute(name);\n      return value === 'null' ? null : value;\n    }\n\n    function set(node, attributes, formatter) {\n      for (var name in attributes) {\n        var value = attributes[name],\n            namespace = attributeNamespace[name];\n        if (typeof value === 'number' && formatter) value = formatter.number(value);\n\n        if (namespace) {\n          node.setAttributeNS(namespace, name, value);\n        } else {\n          node.setAttribute(name, value);\n        }\n      }\n\n      return node;\n    }\n\n    return {\n      svg: svg,\n      xmlns: xmlns,\n      xlink: xlink,\n      create: create,\n      get: get,\n      set: set\n    };\n  }();\n  var SvgStyles = Base.each({\n    fillColor: ['fill', 'color'],\n    fillRule: ['fill-rule', 'string'],\n    strokeColor: ['stroke', 'color'],\n    strokeWidth: ['stroke-width', 'number'],\n    strokeCap: ['stroke-linecap', 'string'],\n    strokeJoin: ['stroke-linejoin', 'string'],\n    strokeScaling: ['vector-effect', 'lookup', {\n      \"true\": 'none',\n      \"false\": 'non-scaling-stroke'\n    }, function (item, value) {\n      return !value && (item instanceof PathItem || item instanceof Shape || item instanceof TextItem);\n    }],\n    miterLimit: ['stroke-miterlimit', 'number'],\n    dashArray: ['stroke-dasharray', 'array'],\n    dashOffset: ['stroke-dashoffset', 'number'],\n    fontFamily: ['font-family', 'string'],\n    fontWeight: ['font-weight', 'string'],\n    fontSize: ['font-size', 'number'],\n    justification: ['text-anchor', 'lookup', {\n      left: 'start',\n      center: 'middle',\n      right: 'end'\n    }],\n    opacity: ['opacity', 'number'],\n    blendMode: ['mix-blend-mode', 'style']\n  }, function (entry, key) {\n    var part = Base.capitalize(key),\n        lookup = entry[2];\n    this[key] = {\n      type: entry[1],\n      property: key,\n      attribute: entry[0],\n      toSVG: lookup,\n      fromSVG: lookup && Base.each(lookup, function (value, name) {\n        this[value] = name;\n      }, {}),\n      exportFilter: entry[3],\n      get: 'get' + part,\n      set: 'set' + part\n    };\n  }, {});\n  new function () {\n    var formatter;\n\n    function getTransform(matrix, coordinates, center) {\n      var attrs = new Base(),\n          trans = matrix.getTranslation();\n\n      if (coordinates) {\n        var point;\n\n        if (matrix.isInvertible()) {\n          matrix = matrix._shiftless();\n          point = matrix._inverseTransform(trans);\n          trans = null;\n        } else {\n          point = new Point();\n        }\n\n        attrs[center ? 'cx' : 'x'] = point.x;\n        attrs[center ? 'cy' : 'y'] = point.y;\n      }\n\n      if (!matrix.isIdentity()) {\n        var decomposed = matrix.decompose();\n\n        if (decomposed) {\n          var parts = [],\n              angle = decomposed.rotation,\n              scale = decomposed.scaling,\n              skew = decomposed.skewing;\n          if (trans && !trans.isZero()) parts.push('translate(' + formatter.point(trans) + ')');\n          if (angle) parts.push('rotate(' + formatter.number(angle) + ')');\n          if (!Numerical.isZero(scale.x - 1) || !Numerical.isZero(scale.y - 1)) parts.push('scale(' + formatter.point(scale) + ')');\n          if (skew.x) parts.push('skewX(' + formatter.number(skew.x) + ')');\n          if (skew.y) parts.push('skewY(' + formatter.number(skew.y) + ')');\n          attrs.transform = parts.join(' ');\n        } else {\n          attrs.transform = 'matrix(' + matrix.getValues().join(',') + ')';\n        }\n      }\n\n      return attrs;\n    }\n\n    function exportGroup(item, options) {\n      var attrs = getTransform(item._matrix),\n          children = item._children;\n      var node = SvgElement.create('g', attrs, formatter);\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i];\n\n        var childNode = _exportSVG(child, options);\n\n        if (childNode) {\n          if (child.isClipMask()) {\n            var clip = SvgElement.create('clipPath');\n            clip.appendChild(childNode);\n            setDefinition(child, clip, 'clip');\n            SvgElement.set(node, {\n              'clip-path': 'url(#' + clip.id + ')'\n            });\n          } else {\n            node.appendChild(childNode);\n          }\n        }\n      }\n\n      return node;\n    }\n\n    function exportRaster(item, options) {\n      var attrs = getTransform(item._matrix, true),\n          size = item.getSize(),\n          image = item.getImage();\n      attrs.x -= size.width / 2;\n      attrs.y -= size.height / 2;\n      attrs.width = size.width;\n      attrs.height = size.height;\n      attrs.href = options.embedImages == false && image && image.src || item.toDataURL();\n      return SvgElement.create('image', attrs, formatter);\n    }\n\n    function exportPath(item, options) {\n      var matchShapes = options.matchShapes;\n\n      if (matchShapes) {\n        var shape = item.toShape(false);\n        if (shape) return exportShape(shape, options);\n      }\n\n      var segments = item._segments,\n          length = segments.length,\n          type,\n          attrs = getTransform(item._matrix);\n\n      if (matchShapes && length >= 2 && !item.hasHandles()) {\n        if (length > 2) {\n          type = item._closed ? 'polygon' : 'polyline';\n          var parts = [];\n\n          for (var i = 0; i < length; i++) {\n            parts.push(formatter.point(segments[i]._point));\n          }\n\n          attrs.points = parts.join(' ');\n        } else {\n          type = 'line';\n          var start = segments[0]._point,\n              end = segments[1]._point;\n          attrs.set({\n            x1: start.x,\n            y1: start.y,\n            x2: end.x,\n            y2: end.y\n          });\n        }\n      } else {\n        type = 'path';\n        attrs.d = item.getPathData(null, options.precision);\n      }\n\n      return SvgElement.create(type, attrs, formatter);\n    }\n\n    function exportShape(item) {\n      var type = item._type,\n          radius = item._radius,\n          attrs = getTransform(item._matrix, true, type !== 'rectangle');\n\n      if (type === 'rectangle') {\n        type = 'rect';\n        var size = item._size,\n            width = size.width,\n            height = size.height;\n        attrs.x -= width / 2;\n        attrs.y -= height / 2;\n        attrs.width = width;\n        attrs.height = height;\n        if (radius.isZero()) radius = null;\n      }\n\n      if (radius) {\n        if (type === 'circle') {\n          attrs.r = radius;\n        } else {\n          attrs.rx = radius.width;\n          attrs.ry = radius.height;\n        }\n      }\n\n      return SvgElement.create(type, attrs, formatter);\n    }\n\n    function exportCompoundPath(item, options) {\n      var attrs = getTransform(item._matrix);\n      var data = item.getPathData(null, options.precision);\n      if (data) attrs.d = data;\n      return SvgElement.create('path', attrs, formatter);\n    }\n\n    function exportSymbolItem(item, options) {\n      var attrs = getTransform(item._matrix, true),\n          definition = item._definition,\n          node = getDefinition(definition, 'symbol'),\n          definitionItem = definition._item,\n          bounds = definitionItem.getStrokeBounds();\n\n      if (!node) {\n        node = SvgElement.create('symbol', {\n          viewBox: formatter.rectangle(bounds)\n        });\n        node.appendChild(_exportSVG(definitionItem, options));\n        setDefinition(definition, node, 'symbol');\n      }\n\n      attrs.href = '#' + node.id;\n      attrs.x += bounds.x;\n      attrs.y += bounds.y;\n      attrs.width = bounds.width;\n      attrs.height = bounds.height;\n      attrs.overflow = 'visible';\n      return SvgElement.create('use', attrs, formatter);\n    }\n\n    function exportGradient(color) {\n      var gradientNode = getDefinition(color, 'color');\n\n      if (!gradientNode) {\n        var gradient = color.getGradient(),\n            radial = gradient._radial,\n            origin = color.getOrigin(),\n            destination = color.getDestination(),\n            attrs;\n\n        if (radial) {\n          attrs = {\n            cx: origin.x,\n            cy: origin.y,\n            r: origin.getDistance(destination)\n          };\n          var highlight = color.getHighlight();\n\n          if (highlight) {\n            attrs.fx = highlight.x;\n            attrs.fy = highlight.y;\n          }\n        } else {\n          attrs = {\n            x1: origin.x,\n            y1: origin.y,\n            x2: destination.x,\n            y2: destination.y\n          };\n        }\n\n        attrs.gradientUnits = 'userSpaceOnUse';\n        gradientNode = SvgElement.create((radial ? 'radial' : 'linear') + 'Gradient', attrs, formatter);\n        var stops = gradient._stops;\n\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n              stopColor = stop._color,\n              alpha = stopColor.getAlpha(),\n              offset = stop._offset;\n          attrs = {\n            offset: offset == null ? i / (l - 1) : offset\n          };\n          if (stopColor) attrs['stop-color'] = stopColor.toCSS(true);\n          if (alpha < 1) attrs['stop-opacity'] = alpha;\n          gradientNode.appendChild(SvgElement.create('stop', attrs, formatter));\n        }\n\n        setDefinition(color, gradientNode, 'color');\n      }\n\n      return 'url(#' + gradientNode.id + ')';\n    }\n\n    function exportText(item) {\n      var node = SvgElement.create('text', getTransform(item._matrix, true), formatter);\n      node.textContent = item._content;\n      return node;\n    }\n\n    var exporters = {\n      Group: exportGroup,\n      Layer: exportGroup,\n      Raster: exportRaster,\n      Path: exportPath,\n      Shape: exportShape,\n      CompoundPath: exportCompoundPath,\n      SymbolItem: exportSymbolItem,\n      PointText: exportText\n    };\n\n    function applyStyle(item, node, isRoot) {\n      var attrs = {},\n          parent = !isRoot && item.getParent(),\n          style = [];\n      if (item._name != null) attrs.id = item._name;\n      Base.each(SvgStyles, function (entry) {\n        var get = entry.get,\n            type = entry.type,\n            value = item[get]();\n\n        if (entry.exportFilter ? entry.exportFilter(item, value) : !parent || !Base.equals(parent[get](), value)) {\n          if (type === 'color' && value != null) {\n            var alpha = value.getAlpha();\n            if (alpha < 1) attrs[entry.attribute + '-opacity'] = alpha;\n          }\n\n          if (type === 'style') {\n            style.push(entry.attribute + ': ' + value);\n          } else {\n            attrs[entry.attribute] = value == null ? 'none' : type === 'color' ? value.gradient ? exportGradient(value, item) : value.toCSS(true) : type === 'array' ? value.join(',') : type === 'lookup' ? entry.toSVG[value] : value;\n          }\n        }\n      });\n      if (style.length) attrs.style = style.join(';');\n      if (attrs.opacity === 1) delete attrs.opacity;\n      if (!item._visible) attrs.visibility = 'hidden';\n      return SvgElement.set(node, attrs, formatter);\n    }\n\n    var definitions;\n\n    function getDefinition(item, type) {\n      if (!definitions) definitions = {\n        ids: {},\n        svgs: {}\n      };\n      return item && definitions.svgs[type + '-' + (item._id || item.__id || (item.__id = UID.get('svg')))];\n    }\n\n    function setDefinition(item, node, type) {\n      if (!definitions) getDefinition();\n      var typeId = definitions.ids[type] = (definitions.ids[type] || 0) + 1;\n      node.id = type + '-' + typeId;\n      definitions.svgs[type + '-' + (item._id || item.__id)] = node;\n    }\n\n    function exportDefinitions(node, options) {\n      var svg = node,\n          defs = null;\n\n      if (definitions) {\n        svg = node.nodeName.toLowerCase() === 'svg' && node;\n\n        for (var i in definitions.svgs) {\n          if (!defs) {\n            if (!svg) {\n              svg = SvgElement.create('svg');\n              svg.appendChild(node);\n            }\n\n            defs = svg.insertBefore(SvgElement.create('defs'), svg.firstChild);\n          }\n\n          defs.appendChild(definitions.svgs[i]);\n        }\n\n        definitions = null;\n      }\n\n      return options.asString ? new self.XMLSerializer().serializeToString(svg) : svg;\n    }\n\n    function _exportSVG(item, options, isRoot) {\n      var exporter = exporters[item._class],\n          node = exporter && exporter(item, options);\n\n      if (node) {\n        var onExport = options.onExport;\n        if (onExport) node = onExport(item, node, options) || node;\n        var data = JSON.stringify(item._data);\n        if (data && data !== '{}' && data !== 'null') node.setAttribute('data-paper-data', data);\n      }\n\n      return node && applyStyle(item, node, isRoot);\n    }\n\n    function setOptions(options) {\n      if (!options) options = {};\n      formatter = new Formatter(options.precision);\n      return options;\n    }\n\n    Item.inject({\n      exportSVG: function exportSVG(options) {\n        options = setOptions(options);\n        return exportDefinitions(_exportSVG(this, options, true), options);\n      }\n    });\n    Project.inject({\n      exportSVG: function exportSVG(options) {\n        options = setOptions(options);\n        var children = this._children,\n            view = this.getView(),\n            bounds = Base.pick(options.bounds, 'view'),\n            mx = options.matrix || bounds === 'view' && view._matrix,\n            matrix = mx && Matrix.read([mx]),\n            rect = bounds === 'view' ? new _Rectangle([0, 0], view.getViewSize()) : bounds === 'content' ? Item._getBounds(children, matrix, {\n          stroke: true\n        }).rect : _Rectangle.read([bounds], 0, {\n          readNull: true\n        }),\n            attrs = {\n          version: '1.1',\n          xmlns: SvgElement.svg,\n          'xmlns:xlink': SvgElement.xlink\n        };\n\n        if (rect) {\n          attrs.width = rect.width;\n          attrs.height = rect.height;\n          if (rect.x || rect.x === 0 || rect.y || rect.y === 0) attrs.viewBox = formatter.rectangle(rect);\n        }\n\n        var node = SvgElement.create('svg', attrs, formatter),\n            parent = node;\n\n        if (matrix && !matrix.isIdentity()) {\n          parent = node.appendChild(SvgElement.create('g', getTransform(matrix), formatter));\n        }\n\n        for (var i = 0, l = children.length; i < l; i++) {\n          parent.appendChild(_exportSVG(children[i], options, true));\n        }\n\n        return exportDefinitions(node, options);\n      }\n    });\n  }();\n  new function () {\n    var definitions = {},\n        rootSize;\n\n    function getValue(node, name, isString, allowNull, allowPercent, defaultValue) {\n      var value = SvgElement.get(node, name) || defaultValue,\n          res = value == null ? allowNull ? null : isString ? '' : 0 : isString ? value : parseFloat(value);\n      return /%\\s*$/.test(value) ? res / 100 * (allowPercent ? 1 : rootSize[/x|^width/.test(name) ? 'width' : 'height']) : res;\n    }\n\n    function getPoint(node, x, y, allowNull, allowPercent, defaultX, defaultY) {\n      x = getValue(node, x || 'x', false, allowNull, allowPercent, defaultX);\n      y = getValue(node, y || 'y', false, allowNull, allowPercent, defaultY);\n      return allowNull && (x == null || y == null) ? null : new Point(x, y);\n    }\n\n    function getSize(node, w, h, allowNull, allowPercent) {\n      w = getValue(node, w || 'width', false, allowNull, allowPercent);\n      h = getValue(node, h || 'height', false, allowNull, allowPercent);\n      return allowNull && (w == null || h == null) ? null : new Size(w, h);\n    }\n\n    function convertValue(value, type, lookup) {\n      return value === 'none' ? null : type === 'number' ? parseFloat(value) : type === 'array' ? value ? value.split(/[\\s,]+/g).map(parseFloat) : [] : type === 'color' ? getDefinition(value) || value : type === 'lookup' ? lookup[value] : value;\n    }\n\n    function importGroup(node, type, options, isRoot) {\n      var nodes = node.childNodes,\n          isClip = type === 'clippath',\n          isDefs = type === 'defs',\n          item = new Group(),\n          project = item._project,\n          currentStyle = project._currentStyle,\n          children = [];\n\n      if (!isClip && !isDefs) {\n        item = applyAttributes(item, node, isRoot);\n        project._currentStyle = item._style.clone();\n      }\n\n      if (isRoot) {\n        var defs = node.querySelectorAll('defs');\n\n        for (var i = 0, l = defs.length; i < l; i++) {\n          importNode(defs[i], options, false);\n        }\n      }\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        var childNode = nodes[i],\n            child;\n        if (childNode.nodeType === 1 && !/^defs$/i.test(childNode.nodeName) && (child = importNode(childNode, options, false)) && !(child instanceof SymbolDefinition)) children.push(child);\n      }\n\n      item.addChildren(children);\n      if (isClip) item = applyAttributes(item.reduce(), node, isRoot);\n      project._currentStyle = currentStyle;\n\n      if (isClip || isDefs) {\n        item.remove();\n        item = null;\n      }\n\n      return item;\n    }\n\n    function importPoly(node, type) {\n      var coords = node.getAttribute('points').match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g),\n          points = [];\n\n      for (var i = 0, l = coords.length; i < l; i += 2) {\n        points.push(new Point(parseFloat(coords[i]), parseFloat(coords[i + 1])));\n      }\n\n      var path = new Path(points);\n      if (type === 'polygon') path.closePath();\n      return path;\n    }\n\n    function importPath(node) {\n      return PathItem.create(node.getAttribute('d'));\n    }\n\n    function importGradient(node, type) {\n      var id = (getValue(node, 'href', true) || '').substring(1),\n          radial = type === 'radialgradient',\n          gradient;\n\n      if (id) {\n        gradient = definitions[id].getGradient();\n\n        if (gradient._radial ^ radial) {\n          gradient = gradient.clone();\n          gradient._radial = radial;\n        }\n      } else {\n        var nodes = node.childNodes,\n            stops = [];\n\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) stops.push(applyAttributes(new GradientStop(), child));\n        }\n\n        gradient = new Gradient(stops, radial);\n      }\n\n      var origin,\n          destination,\n          highlight,\n          scaleToBounds = getValue(node, 'gradientUnits', true) !== 'userSpaceOnUse';\n\n      if (radial) {\n        origin = getPoint(node, 'cx', 'cy', false, scaleToBounds, '50%', '50%');\n        destination = origin.add(getValue(node, 'r', false, false, scaleToBounds, '50%'), 0);\n        highlight = getPoint(node, 'fx', 'fy', true, scaleToBounds);\n      } else {\n        origin = getPoint(node, 'x1', 'y1', false, scaleToBounds, '0%', '0%');\n        destination = getPoint(node, 'x2', 'y2', false, scaleToBounds, '100%', '0%');\n      }\n\n      var color = applyAttributes(new Color(gradient, origin, destination, highlight), node);\n      color._scaleToBounds = scaleToBounds;\n      return null;\n    }\n\n    var importers = {\n      '#document': function document(node, type, options, isRoot) {\n        var nodes = node.childNodes;\n\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) return importNode(child, options, isRoot);\n        }\n      },\n      g: importGroup,\n      svg: importGroup,\n      clippath: importGroup,\n      polygon: importPoly,\n      polyline: importPoly,\n      path: importPath,\n      lineargradient: importGradient,\n      radialgradient: importGradient,\n      image: function image(node) {\n        var raster = new Raster(getValue(node, 'href', true));\n        raster.on('load', function () {\n          var size = getSize(node);\n          this.setSize(size);\n          var center = getPoint(node).add(size.divide(2));\n\n          this._matrix.append(new Matrix().translate(center));\n        });\n        return raster;\n      },\n      symbol: function symbol(node, type, options, isRoot) {\n        return new SymbolDefinition(importGroup(node, type, options, isRoot), true);\n      },\n      defs: importGroup,\n      use: function use(node) {\n        var id = (getValue(node, 'href', true) || '').substring(1),\n            definition = definitions[id],\n            point = getPoint(node);\n        return definition ? definition instanceof SymbolDefinition ? definition.place(point) : definition.clone().translate(point) : null;\n      },\n      circle: function circle(node) {\n        return new Shape.Circle(getPoint(node, 'cx', 'cy'), getValue(node, 'r'));\n      },\n      ellipse: function ellipse(node) {\n        return new Shape.Ellipse({\n          center: getPoint(node, 'cx', 'cy'),\n          radius: getSize(node, 'rx', 'ry')\n        });\n      },\n      rect: function rect(node) {\n        return new Shape.Rectangle(new _Rectangle(getPoint(node), getSize(node)), getSize(node, 'rx', 'ry'));\n      },\n      line: function line(node) {\n        return new Path.Line(getPoint(node, 'x1', 'y1'), getPoint(node, 'x2', 'y2'));\n      },\n      text: function text(node) {\n        var text = new PointText(getPoint(node).add(getPoint(node, 'dx', 'dy')));\n        text.setContent(node.textContent.trim() || '');\n        return text;\n      },\n      \"switch\": importGroup\n    };\n\n    function applyTransform(item, value, name, node) {\n      if (item.transform) {\n        var transforms = (node.getAttribute(name) || '').split(/\\)\\s*/g),\n            matrix = new Matrix();\n\n        for (var i = 0, l = transforms.length; i < l; i++) {\n          var transform = transforms[i];\n          if (!transform) break;\n          var parts = transform.split(/\\(\\s*/),\n              command = parts[0],\n              v = parts[1].split(/[\\s,]+/g);\n\n          for (var j = 0, m = v.length; j < m; j++) {\n            v[j] = parseFloat(v[j]);\n          }\n\n          switch (command) {\n            case 'matrix':\n              matrix.append(new Matrix(v[0], v[1], v[2], v[3], v[4], v[5]));\n              break;\n\n            case 'rotate':\n              matrix.rotate(v[0], v[1] || 0, v[2] || 0);\n              break;\n\n            case 'translate':\n              matrix.translate(v[0], v[1] || 0);\n              break;\n\n            case 'scale':\n              matrix.scale(v);\n              break;\n\n            case 'skewX':\n              matrix.skew(v[0], 0);\n              break;\n\n            case 'skewY':\n              matrix.skew(0, v[0]);\n              break;\n          }\n        }\n\n        item.transform(matrix);\n      }\n    }\n\n    function applyOpacity(item, value, name) {\n      var key = name === 'fill-opacity' ? 'getFillColor' : 'getStrokeColor',\n          color = item[key] && item[key]();\n      if (color) color.setAlpha(parseFloat(value));\n    }\n\n    var attributes = Base.set(Base.each(SvgStyles, function (entry) {\n      this[entry.attribute] = function (item, value) {\n        if (item[entry.set]) {\n          item[entry.set](convertValue(value, entry.type, entry.fromSVG));\n\n          if (entry.type === 'color') {\n            var color = item[entry.get]();\n\n            if (color) {\n              if (color._scaleToBounds) {\n                var bounds = item.getBounds();\n                color.transform(new Matrix().translate(bounds.getPoint()).scale(bounds.getSize()));\n              }\n            }\n          }\n        }\n      };\n    }, {}), {\n      id: function id(item, value) {\n        definitions[value] = item;\n        if (item.setName) item.setName(value);\n      },\n      'clip-path': function clipPath(item, value) {\n        var clip = getDefinition(value);\n\n        if (clip) {\n          clip = clip.clone();\n          clip.setClipMask(true);\n\n          if (item instanceof Group) {\n            item.insertChild(0, clip);\n          } else {\n            return new Group(clip, item);\n          }\n        }\n      },\n      gradientTransform: applyTransform,\n      transform: applyTransform,\n      'fill-opacity': applyOpacity,\n      'stroke-opacity': applyOpacity,\n      visibility: function visibility(item, value) {\n        if (item.setVisible) item.setVisible(value === 'visible');\n      },\n      display: function display(item, value) {\n        if (item.setVisible) item.setVisible(value !== null);\n      },\n      'stop-color': function stopColor(item, value) {\n        if (item.setColor) item.setColor(value);\n      },\n      'stop-opacity': function stopOpacity(item, value) {\n        if (item._color) item._color.setAlpha(parseFloat(value));\n      },\n      offset: function offset(item, value) {\n        if (item.setOffset) {\n          var percent = value.match(/(.*)%$/);\n          item.setOffset(percent ? percent[1] / 100 : parseFloat(value));\n        }\n      },\n      viewBox: function viewBox(item, value, name, node, styles) {\n        var rect = new _Rectangle(convertValue(value, 'array')),\n            size = getSize(node, null, null, true),\n            group,\n            matrix;\n\n        if (item instanceof Group) {\n          var scale = size ? size.divide(rect.getSize()) : 1,\n              matrix = new Matrix().scale(scale).translate(rect.getPoint().negate());\n          group = item;\n        } else if (item instanceof SymbolDefinition) {\n          if (size) rect.setSize(size);\n          group = item._item;\n        }\n\n        if (group) {\n          if (getAttribute(node, 'overflow', styles) !== 'visible') {\n            var clip = new Shape.Rectangle(rect);\n            clip.setClipMask(true);\n            group.addChild(clip);\n          }\n\n          if (matrix) group.transform(matrix);\n        }\n      }\n    });\n\n    function getAttribute(node, name, styles) {\n      var attr = node.attributes[name],\n          value = attr && attr.value;\n\n      if (!value && node.style) {\n        var style = Base.camelize(name);\n        value = node.style[style];\n        if (!value && styles.node[style] !== styles.parent[style]) value = styles.node[style];\n      }\n\n      return !value ? undefined : value === 'none' ? null : value;\n    }\n\n    function applyAttributes(item, node, isRoot) {\n      var parent = node.parentNode,\n          styles = {\n        node: DomElement.getStyles(node) || {},\n        parent: !isRoot && !/^defs$/i.test(parent.tagName) && DomElement.getStyles(parent) || {}\n      };\n      Base.each(attributes, function (apply, name) {\n        var value = getAttribute(node, name, styles);\n        item = value !== undefined && apply(item, value, name, node, styles) || item;\n      });\n      return item;\n    }\n\n    function getDefinition(value) {\n      var match = value && value.match(/\\((?:[\"'#]*)([^\"')]+)/),\n          name = match && match[1],\n          res = name && definitions[window ? name.replace(window.location.href.split('#')[0] + '#', '') : name];\n\n      if (res && res._scaleToBounds) {\n        res = res.clone();\n        res._scaleToBounds = true;\n      }\n\n      return res;\n    }\n\n    function importNode(node, options, isRoot) {\n      var type = node.nodeName.toLowerCase(),\n          isElement = type !== '#document',\n          body = document.body,\n          container,\n          parent,\n          next;\n\n      if (isRoot && isElement) {\n        rootSize = paper.getView().getSize();\n        rootSize = getSize(node, null, null, true) || rootSize;\n        container = SvgElement.create('svg', {\n          style: 'stroke-width: 1px; stroke-miterlimit: 10'\n        });\n        parent = node.parentNode;\n        next = node.nextSibling;\n        container.appendChild(node);\n        body.appendChild(container);\n      }\n\n      var settings = paper.settings,\n          applyMatrix = settings.applyMatrix,\n          insertItems = settings.insertItems;\n      settings.applyMatrix = false;\n      settings.insertItems = false;\n      var importer = importers[type],\n          item = importer && importer(node, type, options, isRoot) || null;\n      settings.insertItems = insertItems;\n      settings.applyMatrix = applyMatrix;\n\n      if (item) {\n        if (isElement && !(item instanceof Group)) item = applyAttributes(item, node, isRoot);\n        var onImport = options.onImport,\n            data = isElement && node.getAttribute('data-paper-data');\n        if (onImport) item = onImport(node, item, options) || item;\n\n        if (options.expandShapes && item instanceof Shape) {\n          item.remove();\n          item = item.toPath();\n        }\n\n        if (data) item._data = JSON.parse(data);\n      }\n\n      if (container) {\n        body.removeChild(container);\n\n        if (parent) {\n          if (next) {\n            parent.insertBefore(node, next);\n          } else {\n            parent.appendChild(node);\n          }\n        }\n      }\n\n      if (isRoot) {\n        definitions = {};\n        if (item && Base.pick(options.applyMatrix, applyMatrix)) item.matrix.apply(true, true);\n      }\n\n      return item;\n    }\n\n    function _importSVG(source, options, owner) {\n      if (!source) return null;\n      options = typeof options === 'function' ? {\n        onLoad: options\n      } : options || {};\n      var scope = paper,\n          item = null;\n\n      function onLoad(svg) {\n        try {\n          var node = typeof svg === 'object' ? svg : new self.DOMParser().parseFromString(svg, 'image/svg+xml');\n\n          if (!node.nodeName) {\n            node = null;\n            throw new Error('Unsupported SVG source: ' + source);\n          }\n\n          paper = scope;\n          item = importNode(node, options, true);\n\n          if (!options || options.insert !== false) {\n            owner._insertItem(undefined, item);\n          }\n\n          var onLoad = options.onLoad;\n          if (onLoad) onLoad(item, svg);\n        } catch (e) {\n          onError(e);\n        }\n      }\n\n      function onError(message, status) {\n        var onError = options.onError;\n\n        if (onError) {\n          onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      }\n\n      if (typeof source === 'string' && !/^.*</.test(source)) {\n        var node = document.getElementById(source);\n\n        if (node) {\n          onLoad(node);\n        } else {\n          Http.request({\n            url: source,\n            async: true,\n            onLoad: onLoad,\n            onError: onError\n          });\n        }\n      } else if (typeof File !== 'undefined' && source instanceof File) {\n        var reader = new FileReader();\n\n        reader.onload = function () {\n          onLoad(reader.result);\n        };\n\n        reader.onerror = function () {\n          onError(reader.error);\n        };\n\n        return reader.readAsText(source);\n      } else {\n        onLoad(source);\n      }\n\n      return item;\n    }\n\n    Item.inject({\n      importSVG: function importSVG(node, options) {\n        return _importSVG(node, options, this);\n      }\n    });\n    Project.inject({\n      importSVG: function importSVG(node, options) {\n        this.activate();\n        return _importSVG(node, options, this);\n      }\n    });\n  }();\n  var paper = new (PaperScope.inject(Base.exports, {\n    Base: Base,\n    Numerical: Numerical,\n    Key: Key,\n    DomEvent: DomEvent,\n    DomElement: DomElement,\n    document: document,\n    window: window,\n    Symbol: SymbolDefinition,\n    PlacedSymbol: SymbolItem\n  }))();\n\n  if (paper.agent.node) {\n    require('./node/extend.js')(paper);\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define('paper', paper);\n  } else if (typeof module === 'object' && module) {\n    module.exports = paper;\n  }\n\n  return paper;\n}.call(this, typeof self === 'object' ? self : null);"],"sourceRoot":""}