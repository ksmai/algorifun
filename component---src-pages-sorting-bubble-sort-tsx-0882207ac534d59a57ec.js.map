{"version":3,"sources":["webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/core-js/modules/es6.array.fill.js","webpack:///./node_modules/core-js/modules/es6.array.find-index.js","webpack:///./node_modules/core-js/modules/_array-fill.js","webpack:///./node_modules/core-js/modules/es6.math.log2.js","webpack:///./src/workers/sorting/bubble-sort.worker.js","webpack:///./node_modules/workerize-loader/dist/rpc-wrapper.js","webpack:///./src/components/visualization-page/actions.ts","webpack:///./src/components/visualization-page/reducer.ts","webpack:///./src/components/visualization-page/context.ts","webpack:///./src/utils/hex-rgba.ts","webpack:///./src/utils/clamp.ts","webpack:///./src/components/button.tsx","webpack:///./src/components/visualization-page/data-editor.tsx","webpack:///./src/components/visualization-page/playback-control.tsx","webpack:///./src/components/visualization-page/speed-modifier.tsx","webpack:///./src/components/visualization-page/control-panel.tsx","webpack:///./src/utils/empty-selection.ts","webpack:///./src/visualizers/index.ts","webpack:///./src/workers/buffered-worker.ts","webpack:///./src/components/visualization-page/index.tsx","webpack:///./src/visualizers/common/numbered-circle.ts","webpack:///./src/visualizers/animations/empty-animation.ts","webpack:///./src/visualizers/animations/slide-animation.ts","webpack:///./src/visualizers/common/camera.ts","webpack:///./src/visualizers/animations/idle-animation.ts","webpack:///./src/visualizers/animations/swap-animation.ts","webpack:///./src/visualizers/animations/immediate-animation.ts","webpack:///./src/visualizers/animations/composite-animation.ts","webpack:///./src/visualizers/drawers/sorting/bubble-sort-drawer.ts","webpack:///./src/configs/sorting/bubble-sort-config.ts","webpack:///./src/pages/sorting/bubble-sort.tsx","webpack:///./node_modules/paper/dist/paper-core.js"],"names":["runtime","exports","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","value","makeInvokeMethod","fn","obj","call","err","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","Promise","resolve","reject","invoke","result","__await","then","unwrapped","error","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","keys","object","key","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","$export","P","fill","$find","KEY","forced","Array","F","findIndex","callbackfn","arguments","toObject","toAbsoluteIndex","toLength","O","aLen","index","end","endPos","S","log2","x","Math","log","LN2","addMethods","require","methods","w","Worker","__webpack_public_path__","worker","c","callbacks","addEventListener","e","d","data","id","f","assign","message","evt","document","createEvent","initEvent","params","dispatchEvent","len","a","b","postMessage","update","payload","action","speed","paused","React","createContext","RE","hexRGBA","hex","alpha","matches","match","replace","map","start","parseInt","concat","join","clamp","min","max","activeCSS","css","colors","Form","TextAreaContainer","TextArea","ConfirmButton","Button","ErrorContainer","ErrorMessage","DataEditor","props","useContext","VisualizationContext","validator","dispatch","useState","JSON","stringify","currentValue","setCurrentValue","errorMessage","setErrorMessage","onSubmit","useCallback","preventDefault","parse","onChange","target","onDismissError","onClick","IconButton","PlaybackControl","onPlay","onPause","onRestart","choices","padding","ComboBox","withComponent","Options","offset","Option","SpeedModifer","open","setOpen","useMemo","s","prevOpen","dataset","speedup","parseFloat","onBlur","tabIndex","data-speed","Container","maxVH","height","isResizing","isOpen","minHeight","notMobile","ResizeHandle","CloseButton","Controls","inputAreaCSS","ControlPanel","setHeight","lastClientYs","setLastClientYs","setIsResizing","setIsOpen","onPointerDown","setPointerCapture","pointerId","window","getSelection","empty","removeAllRanges","selection","clientY","innerHeight","onPointerMove","onPointerUpCancel","delta","onClose","onPointerUp","onPointerCancel","Visualizer","canvas","DrawerFactory","animation","finishAnimation","project","paper","Project","activate","view","onFrame","bind","drawer","event","run","isFinished","step","animate","handleStep","changeSpeed","pause","play","terminate","clear","remove","BufferedWorker","size","buffer","init","bufferNext","shift","DrawingArea","config","VisualizationPage","WorkerFactory","useReducer","reducer","canvasRef","useRef","visualizerRef","useEffect","current","contextValue","Provider","ref","data-paper-resize","NumberedCircle","number","position","radius","color","fontSize","fontWeight","circle","Path","Circle","strokeColor","strokeWidth","text","PointText","content","String","justification","fillColor","y","bounds","addChild","changeColor","children","Group","EmptyAnimation","dt","SlideAnimation","seconds","item","prevTranslate","nextTranslate","t","diff","subtract","progress","add","multiply","matrix","Matrix","Camera","xmax","ymax","translate","Point","ensureVisible","items","reduce","union","rect","unite","viewSize","width","top","left","bottom","right","isVisible","xmid","ymid","IdleAnimation","SwapAnimation","item1","item2","through1","path1","Arc","through2","path2","getPointAt","ImmediateAnimation","hasRun","CompositeAnimation","animations","BubbleSortDrawer","handleInit","handleComp","handleSwap","handleNoSwap","arr","RADIUS","PADDING","margin","MARGIN","circles","INITIAL_COLOR","camera","INIT_IDLE","pos","HIGHLIGHTED_COLOR","SLIDE_DURATION","COMP_IDLE","lastSwapped","SWAP_DURATION","SWAP_IDLE","markFinished","NOSWAP_IDLE","FINISHED_COLOR","Color","floor","random","isArray","every","num","BubbleSortPage","BubbleSortWorker","Base","hidden","array","_slice","describe","getOwnPropertyDescriptor","define","defineProperty","l","forIn","set","dst","src","_each","desc","_inject","dest","enumerable","beans","preserve","beansNames","field","val","get","substring","bean","isFunc","res","base","toLowerCase","isPlainObject","writable","configurable","test","part","inject","statics","extend","proto","initialize","apply","each","clone","pick","list","begin","_id","_class","_name","Formatter","instance","getClassName","importJSON","json","exportJSON","options","toJSON","serialize","exclude","filter","_prioritize","equals","obj1","obj2","read","amount","peek","__index","readIndex","_readIndex","readNull","__read","filtered","__filtered","remain","readList","readNamed","getNamed","hasValue","source","getSource","__unfiltered","readSupported","that","__source","hasNamed","prioritize","processed","handleKey","isPlainValue","asString","compact","dictionary","isRoot","formatter","precision","definitions","references","unshift","_serialize","_compactSerialize","deserialize","_data","_setDictionary","_isRoot","isFirst","hasDictionary","isDictionary","args","useTarget","Item","Layer","insert","itemsLength","startLength","splice","append","_index","removed","capitalize","str","toUpperCase","camelize","chr","hyphenate","Emitter","on","func","types","_eventTypes","handlers","_callbacks","indexOf","install","off","uninstall","once","handler","emit","setTarget","currentTarget","responds","attach","detach","fire","_installEvents","events","_events","isString","PaperScope","settings","applyMatrix","insertItems","handleSize","hitTolerance","projects","tools","_scopes","support","ctx","CanvasProvider","getContext","nativeDash","nativeBlendModes","BlendMode","nativeModes","release","agent","user","navigator","userAgent","os","exec","platform","browser","n","v1","v2","rv","chrome","v","version","versionNumber","trident","jsdom","webkit","atom","getView","_view","getPaper","execute","code","scope","setup","element","createCanvas","getCanvas","handleAttribute","el","attr","getAttribute","hasAttribute","PaperScopeItem","_scope","_list","_reference","isActive","CollisionDetection","findItemBoundsCollisions","items1","items2","tolerance","getBounds","bounds1","bounds2","findBoundsCollisions","findCurveBoundsCollisions","curves1","curves2","bothAxis","curves","hor","ver","boundsA","boundsB","sweepVertical","onlySweepAxisCollisions","allBounds","lengthA","lengthAll","binarySearch","indices","coord","lo","hi","mid","pri0","pri1","sec0","sec1","allIndicesByPri0","sort","i1","i2","activeIndicesByPri1","allCollisions","curIndex","curBounds","origIndex","isCurrentA","isCurrentB","curCollisions","pruneCount","j","activeIndex","curSec1","curSec0","activeBounds","isActiveA","isActiveB","collisions","multiplier","pow","round","pair","val1","val2","separator","point","rectangle","Numerical","abscissas","weights","abs","sqrt","LOG2E","getDiscriminant","split","D","E","ad","bd","cd","p","q","getNormalizationFactor","norm","EPSILON","MACHINE_EPSILON","CURVETIME_EPSILON","GEOMETRIC_EPSILON","TRIGONOMETRIC_EPSILON","KAPPA","isZero","isMachineZero","integrate","A","B","m","sum","Ax","findRoot","df","fx","dx","nx","solveQuadratic","roots","x1","x2","Infinity","Q","R","count","boundless","minB","maxB","isFinite","solveCubic","b1","c2","qd","evaluate","x0","tmp","r","td","rd","UID","_pools","pool","arg0","arg1","reading","hasY","_set","setAngle","angle","getLength","setLength","_angle","cos","sin","scale","getAngle","getAngleInRadians","PI","setAngleInRadians","getAngleInDegrees","setAngleInDegrees","div","NaN","dot","acos","atan2","getQuadrant","getDirectedAngle","cross","getDistance","squared","normalize","rotate","center","transform","_transformPoint","divide","modulo","negate","isInside","_Rectangle","contains","isClose","isCollinear","isColinear","isOrthogonal","_isNaN","isInQuadrant","point1","point2","y1","y2","op","LinkedPoint","owner","setter","_x","_y","_owner","_setter","_dontNotify","getX","setX","getY","setY","isSelected","_selection","_getSelection","setSelected","selected","_changeSelection","Size","hasHeight","_isNaN2","size1","size2","LinkedSize","_width","_height","getWidth","setWidth","getHeight","arg2","arg3","from","to","frm","rt","getPoint","_dontLink","setPoint","getSize","_fw","_fh","setSize","sx","_sx","sy","_sy","h","getLeft","setLeft","getTop","setTop","getRight","setRight","getBottom","setBottom","getCenterX","setCenterX","getCenterY","setCenterY","getCenter","setCenter","getArea","isEmpty","_containsRectangle","_containsPoint","intersects","epsilon","intersect","include","expand","parts","xFirst","LinkedRectangle","internal","ok","_a","_b","_c","_d","_tx","_ty","tx","ty","_changed","getValues","_applyMatrix","mx","recursively","_setApplyMatrix","isIdentity","shear","skew","toRadians","tan","a1","c1","d1","a2","b2","d2","tx2","ty2","prepend","tx1","ty1","appended","prepended","invert","det","inverted","concatenate","preConcatenate","chain","_shiftless","_orNullIfIdentity","isInvertible","isSingular","_transformCoordinates","_transformCorners","coords","_transformBounds","inverseTransform","_inverseTransform","decompose","degrees","asin","translation","getTranslation","rotation","scaling","skewing","getScaling","getRotation","applyToContext","prop","Line","arg4","asVector","_px","_py","_vx","_vy","getVector","line","isInfinite","getSide","getSignedDistance","p1x","p1y","v1x","v1y","p2x","p2y","v2x","v2y","dy","u1","u2","px","py","vx","vy","ccw","_children","_namedChildren","_activeLayer","_currentStyle","Style","View","_selectionItems","_selectionCount","_updateVersion","flags","_needsUpdate","_requested","_autoUpdate","requestUpdate","changes","_changes","changesById","_changesById","getCurrentStyle","setCurrentStyle","style","getIndex","getOptions","getLayers","getActiveLayer","getSymbolDefinitions","ids","getItems","SymbolItem","definition","_definition","getSymbols","getSelectedItems","selectionItems","isInserted","_updateSelection","selectAll","setFullySelected","deselectAll","addLayer","layer","insertLayer","_remove","_setProject","setName","_insertItem","_created","NO_INSERT","insertChild","_getItems","getItem","removeOn","sets","_removeSets","mousedrag","other","draw","pixelRatio","save","param","viewMatrix","matrices","updateMatrix","restore","_drawSelection","_serializeFields","_canApplyMatrix","_canScaleStroke","_pivot","_visible","_blendMode","_opacity","_locked","_guide","_clipMask","_selectBounds","_selectChildren","pivot","visible","blendMode","opacity","locked","guide","clipMask","_countItemEvent","_animateItem","onLoad","onError","_itemHandlers","_initialize","hasProps","_matrix","_parent","_style","parent","fields","_defaults","symbol","_symbol","cacheParent","_project","_bounds","_position","_decomposed","_globalMatrix","_clearBoundsCache","getId","getName","_removeNamed","_getOwner","namedChildren","getStyle","setStyle","setSelection","flag","isFullySelected","isClipMask","setClipMask","setFillColor","setStrokeColor","getData","setData","getPosition","_getPositionFromBounds","setPosition","getPivot","setPivot","getStrokeBounds","stroke","getHandleBounds","getInternalBounds","hasMatrix","opts","_boundsOptions","getStrokeScaling","cacheItem","_getCachedBounds","setBounds","_backup","_getBounds","_updateBoundsCache","_getBoundsCacheKey","noInternal","cacheKey","cached","nonscaling","hasStroke","_getStrokeMatrix","_item","getViewMatrix","_boundsCache","cache","_decompose","decomposed","setRotation","setScaling","getMatrix","setMatrix","getGlobalMatrix","_dontClone","parents","getApplyMatrix","setApplyMatrix","getTransformContent","setTransformContent","getProject","installEvents","getLayer","getParent","setParent","getChildren","setChildren","removeChildren","addChildren","getFirstChild","getLastChild","getNextSibling","getPreviousSibling","_equals","copy","deep","copyAttributes","copyContent","insertAbove","orig","excludeMatrix","rasterize","resolution","getResolution","topLeft","getTopLeft","bottomRight","getBottomRight","ceil","raster","Raster","setCanvas","_contains","_asPathItem","Rectangle","getIntersections","hitTest","_hitTest","HitResult","hitTestAll","all","hitTestChildren","_exclude","child","_hitTestChildren","parentViewMatrix","guides","tolerancePadding","_tolerancePadding","_getStrokePadding","checkSelf","hit","checkPoint","pt","checkPosition","checkCenter","checkBounds","points","_hitTestSelf","hasFill","compare","matchObject","firstOnly","overlapping","inside","recursive","path","childMatrix","insertChildren","inserted","notifySelf","_insertAt","insertBelow","sendToBack","bringToFront","appendTop","appendBottom","moveAbove","moveBelow","addTo","copyTo","namedArray","notifyParent","_dispose","replaceWith","reverseChildren","numChildren","isEditable","hasShadow","_getOrder","getList","list1","list2","hasChildren","isAbove","isBelow","isParent","isChild","isDescendant","isAncestor","isSibling","isGroupedWith","_applyRecursively","transformMatrix","getFillColor","getStrokeColor","_transformContent","decomp","applyRecursively","globalToLocal","localToGlobal","parentToLocal","localToParent","fitBounds","itemRatio","rectRatio","newBounds","_setStyles","fillStyle","toCanvasStyle","strokeStyle","lineWidth","getStrokeWidth","strokeJoin","getStrokeJoin","strokeCap","getStrokeCap","miterLimit","getMiterLimit","lineJoin","lineCap","dashArray","getDashArray","dashOffset","getDashOffset","setLineDash","lineDashOffset","mozDash","mozDashOffset","blur","getShadowBlur","getShadowOffset","shadowColor","getShadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","parentStrokeMatrix","globalMatrix","mainCtx","itemOffset","prevOffset","normalBlend","nativeBlend","direct","dontStart","clip","_canComposite","strokeMatrix","clipItem","globalAlpha","globalCompositeOperation","setTransform","_draw","dontFinish","getFillRule","process","_isUpdated","updateVersion","CompoundPath","updated","itemSelected","boundsSelected","positionSelected","_drawSelected","getSelectedColor","half","beginPath","arc","deltas","moveTo","lineTo","closePath","fillRect","hash","tween","easing","duration","Tween","_handleFrame","time","running","tweenTo","tweenFrom","_clipItem","_getClipItem","isClipped","setClipped","clipped","Shape","_type","_size","_radius","setType","setRadius","getType","getShape","setShape","getRadius","rad","toPath","toShape","dontPaint","untransformed","isCircle","rx","ry","kappa","cx","cy","bezierCurveTo","getCornerCenter","halfSize","dir","corner","quadrant","isOnEllipseStroke","vector","hitStroke","hitFill","strokeRadius","strokePadding","outer","inner","createShape","Ellipse","ellipse","_readEllipse","crossOrigin","_smoothing","image","getElementById","getContent","naturalHeight","setImage","setSource","_loaded","_image","_canvas","_setImage","copyCanvas","drawImage","_crossOrigin","getElement","getLoaded","u","getPpi","getImage","Event","setTimeout","DomEvent","load","naturalWidth","_context","_change","setContext","toDataURL","Image","getCrossOrigin","setCrossOrigin","getSmoothing","setSmoothing","smoothing","getSubCanvas","getSubRaster","getAverageColor","PathItem","_sampleContext","clearRect","sampleSize","pixels","getImageData","channels","total","getPixel","setPixel","components","_convert","_alpha","imageData","createImageData","putImageData","setImageData","DomElement","setPrefixed","setDefinition","SymbolDefinition","getDefinition","getSymbol","setSymbol","dontCenter","setItem","_dontCenter","place","segments","handles","ends","Segment","arg5","handleIn","handleOut","SegmentPoint","_point","hasHandles","_handleIn","_handleOut","_path","curve","_curves","_closed","getHandleIn","setHandleIn","getHandleOut","setHandleOut","isSmooth","clearHandles","oldSelection","getPath","getCurve","_segments","getCurves","getLocation","CurveLocation","_segment1","getNext","smooth","_first","_last","factor","getPrevious","p0","p1","p2","k","d1_a","d1_2a","d2_a","d2_2a","N","isLast","reversed","removeSegment","segment","interpolate","handleIn1","handleIn2","handleOut2","handleOut1","change","Curve","arg6","arg7","seg1","seg2","handle1","handle2","segment1","segment2","_segment2","getPoint1","getHandle1","getHandle2","getPoint2","_length","classify","setPoint1","setPoint2","setHandle1","setHandle2","getSegment1","getSegment2","getPoints","getLine","getPart","getPartLength","divideAt","location","divideAtTime","getTimeAt","_setHandles","subdivide","setHandles","splitAt","splitAtTime","getLocationAtTime","isTime","straight","h1","h2","y0","x3","y3","x4","y4","x5","y5","x6","y6","x7","y7","x8","y8","x9","y9","getMonoCurves","io","o0","o1","o2","o3","isStraight","v0","v3","getTimeOf","p3","getNearestTime","minDist","minT","refine","dist","flip","isFlatEnough","flatness","ux","uy","_addBounds","minPad","maxPad","s1","s2","isLinear","third","hasLength","isHorizontal","getTangentAtTime","isVertical","getLocationAt","_isTime","getParameterAt","getTimesWithTangent","tangent","getOffsetAtTime","getLocationOf","getOffsetOf","getOffset","getParameterOf","getNearestLocation","getNearestPoint","_evaluateMethods","getLengthIntegrand","ax","bx","ay","by","getIterations","normalized","d3","t1","t2","hasRoots","t1Ok","t2Ok","f1","f2","ds","forward","rangeLength","guess","getTangent","getWeightedTangent","getNormal","getWeightedNormal","getCurvature","getPeaks","addLocation","locations","overlap","excludeStart","excludeEnd","loc1","loc2","_intersection","addCurveIntersections","recursion","calls","tMin","tMax","uMin","uMax","tMinClip","tMaxClip","q0x","q0y","q3x","q3y","dMin","dMax","dp0","dp1","dp2","dp3","hull","dq0","dq1","dq2","dq3","dist1","dist2","distRatio","getConvexHull","clipConvexHull","tMinNew","tMaxNew","uDiff","hullTop","hullBottom","clipConvexHullPart","threshold","qx","qy","getCurveLineIntersections","addCurveLineIntersections","addLineIntersection","getCurveIntersections","overlaps","getOverlaps","straight1","straight2","before","getSelfIntersection","getSquaredLineLength","straightBoth","l1","l2","pairs","matrix1","matrix2","_returnFirst","length1","length2","values1","values2","boundsCollisions","index1","curve1","collisions1","index2","curve2","den","times","t0","_overlap","_distance","_setCurve","_time","getPointAtTime","_next","_previous","_version","_curve","_segment","_setSegment","getSegment","getTime","trySegment","_offset","_curveOffset","getParameter","getCurveOffset","getIntersection","getLastSegment","_ignoreOther","isTouching","inter","isCrossing","t1Inside","t2Inside","c4","c3","offsets","addOffsets","isInRange","v4","a3","a4","hasOverlap","merge","search","found","expanded","compound","pathData","first","isClockwise","setClockwise","clockwise","setPathData","previous","control","relative","getCoord","command","lower","move","cubicCurveTo","quadraticCurveTo","arcTo","winding","_getWinding","onPath","windingL","windingR","getCrossings","minLoc","isPath","itemsFrom","itemsTo","setClosed","paths1","paths2","matched","boundsOverlaps","findBoundsOverlaps","pathBoundsOverlaps","closed","setSegments","_segmentSelection","_area","getSegments","fullySelected","last","_add","getFirstSegment","_countCurves","getFirstCurve","getLastCurve","isClosed","getPathData","_precision","curX","curY","prevX","prevY","inX","inY","outX","outY","addSegment","skipLine","segs","_adjustCurves","insertSegment","addSegments","insertSegments","removeSegments","_includeCurves","area","_selectSegments","newSelection","last1","last2","first2","first1","simplify","flatten","PathFlattener","PathFitter","fit","_default","loop","asymmetric","paddingLeft","paddingRight","knots","n_1","rf","hx","hy","topCenter","seg3","seg4","isArc","pt1","pt2","shape","pos2","end2","pos1","end1","start2","cap","numSegments","hitCurves","isCloseEnough","checkSegmentPoint","seg","anchor","checkSegmentPoints","addToArea","checkSegmentStroke","isJoin","_addBevelJoin","_addSquareCap","getOffsetsWithTangent","curveStart","curveTimes","drawSegments","drawSegment","dashLength","flattener","drawPart","pX","pY","miniSize","miniHalf","drawHandle","hX","hY","drawHandles","getCurrentSegment","moveBy","curveTo","through","extent","middle","large","rxSq","rySq","xSq","ySq","throughSide","centerSide","ext","inc","z","out","_in","lineBy","curveBy","parameter","cubicCurveBy","quadraticCurveBy","arcBy","prevCoords","processSegment","joinBounds","addPoint","addRound","addJoin","addCap","phi","isArea","normal1","getNormalAtTime","normal2","normal","joinPadding","joinRadius","SQRT2","paddingX","paddingY","xn","xx","yn","yx","ellipseSegments","createPath","createEllipse","bl","getBottomLeft","tl","tr","getTopRight","br","RoundRectangle","Oval","RegularPolygon","sides","three","Star","radius1","radius2","paths","getCurrentPath","check","operators","getPaths","preparePath","resolveCrossings","reorient","createResult","filterIntersection","traceBoolean","operation","trace","splitBoolean","_path1","_path2","operator","crossings","divideLocations","collectPaths","_overlapsOnly","curvesValues","curveCollisions","curveCollisionsMap","propagateWinding","_winding","tracePaths","reorientPaths","added","addPath","linkIntersections","clearCurveHandles","lookup","container","sorted","entry1","containerWinding","getInteriorPoint","entry2","clearLater","renormalizeLocs","prevCurve","prevTime","results","clearCurves","clearLookup","origTime","newCurve","getWinding","dontFlip","vPrev","vClose","curvesList","ia","pv","pa","po","qualityEpsilon","paL","paR","pathWindingL","pathWindingR","onAnyPath","quality","addWinding","a0","windingPrev","a3Prev","handleCurve","monoCurves","totalLength","curveLength","operand","SQRT1_2","wind","pathWinding","starts","isValid","_visited","isStart","visitPath","getCrossingSegments","collectStarts","collect","nextInter","_prev","inter1","inter2","over1","over2","branch","visited","valid","finished","branches","hasOverlaps","hasCrossings","intersections","nonZero","intercepts","mv","mo0","mo3","maxRecursion","ignoreStraight","minSpan","addCurve","computeParts","halves","tMid","_get","fitCubic","tan1","tan2","uPrime","chordLengthParameterize","maxError","parametersInOrder","generateBezier","findMaxError","reparameterize","tanCenter","C","X","b0","b3","alpha1","alpha2","detC0C1","detC0X","c0","segLength","eps","degree","maxDist","TextItem","_content","_lines","setContent","getCharacterStyle","setCharacterStyle","getParagraphStyle","setParagraphStyle","lines","leading","getLeading","font","getFontStyle","textAlign","getJustification","fillText","strokeText","numLines","getTextWidth","colorCtx","gray","rgb","hsb","hsl","gradient","componentParsers","namedColors","transparent","fromCSS","string","trim","isHSL","component","unit","turn","grad","hsbIndices","converters","g","achromatic","t3s","t3","properties","parser","_components","Gradient","_removeOwner","_addOwner","_properties","argType","converted","parsers","stops","radial","getComponents","_canvasStyle","converter","convert","getAlpha","setAlpha","hasAlpha","col","isGradient","toCSS","canvasGradient","_stops","origin","destination","highlight","inverse","_radial","createRadialGradient","createLinearGradient","addColorStop","_color","_types","_setOwner","components1","components2","setStops","setRadial","_owners","getStops","GradientStop","getRadial","stops1","stops2","rampPoint","setColor","setOffset","getRampPoint","setRampPoint","getColor","itemDefaults","fillRule","strokeScaling","shadowOffset","selectedColor","groupDefaults","fontFamily","textDefaults","_values","isColor","isPoint","applyToChildren","old","_dontMerge","childValue","Font","WindingRule","isStyle","style1","style2","secondary","defaults2","value1","value2","getFontSize","getFontWeight","getFontFamily","getFont","setFont","getPixelSize","handlePrefix","prefixes","suffix","prefix","getStyles","doc","nodeType","ownerDocument","defaultView","getComputedStyle","viewport","body","html","documentElement","getBoundingClientRect","clientLeft","clientTop","pageXOffset","scrollLeft","pageYOffset","scrollTop","getViewportBounds","innerWidth","clientWidth","clientHeight","isInvisible","isInView","getPrefixed","passive","removeEventListener","targetTouches","changedTouches","pageX","clientX","pageY","getTarget","srcElement","getRelatedTarget","relatedTarget","toElement","requestAnimationFrame","timer","nativeRequest","requested","handleCallbacks","functions","callback","setInterval","getCanvasSize","setAttribute","_viewEvents","userDrag","userSelect","touchCallout","contentZooming","tapHighlightColor","_windowEvents","resize","setViewSize","Stats","_stats","stats","domElement","appendChild","_element","_pixelRatio","devicePixelRatio","_setElementSize","_viewSize","_views","_viewsById","_focused","_frameItems","_frameItemCount","_itemEvents","virtual","node","_animate","_count","getAutoUpdate","setAutoUpdate","autoUpdate","now","Date","_handleFrameItems","getPixelRatio","getViewSize","parentNode","temp","createElement","removeChild","getZoom","setZoom","zoom","scrollBy","projectToView","viewToProject","getEventPoint","CanvasView","prevFocus","tempFocus","mousedown","mousemove","mouseup","dragging","mouseDown","pointerEnabled","msPointerEnabled","viewEvents","docEvents","mouseout","nodeName","handleMouseMove","scroll","updateFocus","_handleMouseEvent","downPoint","lastPoint","downItem","overItem","dragItem","clickItem","clickTime","dblClick","called","prevented","fallbacks","doubleclick","wasInView","itemEventsMap","click","mouseenter","mouseleave","itemEvents","hitItems","nativeMove","tool","inView","hitItem","mouse","substr","emitMouseEvent","drag","emitMouseEvents","down","up","cancelable","_handleKeyEvent","character","keyEvent","KeyEvent","sign","_native","_resetState","prevPoint","stopItem","mouseEvent","stopped","MouseEvent","fallback","HTMLCanvasElement","deviceRatio","backingStoreRatio","firefox","prevFont","measureText","stopPropagation","getTimeStamp","timeStamp","getModifiers","Key","modifiers","metaFixMap","downKey","keyLookup","charLookup","keyMap","charMap","alt","meta","capsLock","space","option","mac","getKey","keyIdentifier","fromCharCode","keyCode","keydown","altKey","metaKey","ctrlKey","keypress","charCode","keyup","isDown","ToolEvent","_choosePoint","toolPoint","getLastPoint","_lastPoint","setLastPoint","getDownPoint","_downPoint","setDownPoint","getMiddlePoint","_middlePoint","setMiddlePoint","middlePoint","getDelta","_delta","setDelta","getCount","setCount","_moveCount","_downCount","getMinDistance","_minDistance","setMinDistance","minDistance","_maxDistance","getMaxDistance","setMaxDistance","maxDistance","getFixedDistance","setFixedDistance","distance","easings","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","isFunction","_then","_startTime","_keys","_parsedKeys","_parseKeys","_from","_getState","_to","getValue","__add","__subtract","__multiply","_setProperty","onUpdate","startTime","_getProperty","resolved","_resolveValue","_calculate","parsed","PaperScript","calculateBinary","Http","request","xhr","XMLHttpRequest","url","mimeType","overrideMimeType","onload","status","responseText","onerror","send","canvases","sr","sg","sb","sa","bg","bb","ba","dr","dg","db","getLum","setLum","mn","lmn","ln","mxl","getSat","setSat","md","modes","screen","overlay","darken","lighten","difference","exclusion","hue","saturation","luminosity","average","negation","mode","srcContext","dstContext","srcCanvas","dstData","SvgElement","svg","xmlns","xlink","attributeNamespace","href","attributes","namespace","setAttributeNS","tag","createElementNS","getAttributeNS","SvgStyles","property","attribute","toSVG","fromSVG","exportFilter","getTransform","coordinates","attrs","trans","exportGroup","childNode","_exportSVG","exportShape","exporters","embedImages","matchShapes","definitionItem","viewBox","overflow","textContent","applyStyle","gradientNode","getGradient","getOrigin","getDestination","getHighlight","fy","gradientUnits","stopColor","exportGradient","visibility","svgs","__id","typeId","exportDefinitions","defs","insertBefore","firstChild","XMLSerializer","serializeToString","exporter","onExport","setOptions","exportSVG","rootSize","allowNull","allowPercent","defaultValue","defaultX","defaultY","convertValue","importGroup","nodes","childNodes","isClip","isDefs","currentStyle","applyAttributes","querySelectorAll","importNode","importPoly","importGradient","scaleToBounds","_scaleToBounds","importers","clippath","polygon","polyline","lineargradient","radialgradient","use","applyTransform","transforms","applyOpacity","gradientTransform","setVisible","display","percent","styles","group","tagName","isElement","nextSibling","importer","onImport","expandShapes","_importSVG","DOMParser","parseFromString","File","reader","FileReader","readAsText","importSVG","PlacedSymbol"],"mappings":"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","file":"component---src-pages-sorting-bubble-sort-tsx-0882207ac534d59a57ec.js","sourcesContent":["require(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar runtime = function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n    return generator;\n  }\n\n  exports.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n\n  var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n\n\n  var IteratorPrototype = {};\n\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n  if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      prototype[method] = function (arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function (genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n  };\n\n  exports.mark = function (genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  }; // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n\n\n  exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n\n        if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function (value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function (err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function (unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function (error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n      // invocations of the iterator.\n      callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    } // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n\n\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n\n  exports.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n\n  exports.async = function (innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n    return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        } // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n        var record = tryCatch(innerFn, self, context);\n\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted; // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  } // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (!info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n      context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    } // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n\n\n    context.delegate = null;\n    return ContinueSentinel;\n  } // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n\n\n  defineIteratorMethods(Gp);\n  Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n  Gp[iteratorSymbol] = function () {\n    return this;\n  };\n\n  Gp.toString = function () {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    keys.reverse(); // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      } // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n\n\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n          return next;\n        };\n\n        return next.next = next;\n      }\n    } // Return an iterator with no values.\n\n\n    return {\n      next: doneResult\n    };\n  }\n\n  exports.values = values;\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: true\n    };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      this.prev = 0;\n      this.next = 0; // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n      this.method = \"next\";\n      this.arg = undefined;\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n    stop: function stop() {\n      this.done = true;\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" || record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      } // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  }; // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n\n  return exports;\n}( // If this script is executing as a CommonJS module, use module.exports\n// as the regeneratorRuntime namespace. Otherwise create a new empty\n// object. Either way, the resulting object will be used to initialize\n// the regeneratorRuntime variable at the top of this file.\ntypeof module === \"object\" ? module.exports : {});\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}","module.exports = require(\"regenerator-runtime\");\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(6);\nvar KEY = 'findIndex';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","// 20.2.2.22 Math.log2(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log2: function log2(x) {\n    return Math.log(x) / Math.LN2;\n  }\n});\n","\n\t\t\t\tvar addMethods = require(\"../../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"init\",\"run\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"built-sort.4beb28.worker.js\", { name: \"built-sort.[hash:6].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","require(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nfunction addMethods(worker, methods) {\n  var c = 0;\n  var callbacks = {};\n  worker.addEventListener('message', function (e) {\n    var d = e.data;\n\n    if (d.type !== 'RPC') {\n      return;\n    }\n\n    if (d.id) {\n      var f = callbacks[d.id];\n\n      if (f) {\n        delete callbacks[d.id];\n\n        if (d.error) {\n          f[1](Object.assign(Error(d.error.message), d.error));\n        } else {\n          f[0](d.result);\n        }\n      }\n    } else {\n      var evt = document.createEvent('Event');\n      evt.initEvent(d.method, false, false);\n      evt.data = d.params;\n      worker.dispatchEvent(evt);\n    }\n  });\n  methods.forEach(function (method) {\n    worker[method] = function () {\n      var params = [],\n          len = arguments.length;\n\n      while (len--) {\n        params[len] = arguments[len];\n      }\n\n      return new Promise(function (a, b) {\n        var id = ++c;\n        callbacks[id] = [a, b];\n        worker.postMessage({\n          type: 'RPC',\n          id: id,\n          method: method,\n          params: params\n        });\n      });\n    };\n  });\n}\n\nmodule.exports = addMethods;","export interface UpdateAction {\n    type: 'UPDATE';\n    payload: { data: any };\n}\n\nexport interface SpeedupAction {\n    type: 'SPEEDUP';\n    payload: { speed: number };\n}\n\nexport interface PauseAction {\n    type: 'PAUSE';\n}\n\nexport interface PlayAction {\n    type: 'PLAY';\n}\n\nexport type Action = UpdateAction | SpeedupAction | PauseAction | PlayAction;\n\nexport const update = (data: any): UpdateAction => ({\n    type: 'UPDATE',\n    payload: { data },\n});\n\nexport const speedup = (speed: number): SpeedupAction => ({\n    type: 'SPEEDUP',\n    payload: { speed },\n});\n\nexport const pause = (): PauseAction => ({ type: 'PAUSE' });\n\nexport const play = (): PlayAction => ({ type: 'PLAY' });\n","import State from 'components/visualization-page/state';\nimport { Action } from 'components/visualization-page/actions';\n\nexport default (state: State, action: Action): State => {\n    switch (action.type) {\n        case 'UPDATE':\n            return {\n                ...state,\n                data: action.payload.data,\n            };\n        case 'SPEEDUP':\n            return {\n                ...state,\n                speed: action.payload.speed,\n            }\n        case 'PAUSE':\n            return { ...state, paused: true };\n        case 'PLAY':\n            return { ...state, paused: false };\n        default:\n            return state;\n    }\n};\n","import React from 'react';\n\nimport State from 'components/visualization-page/state';\nimport { Action } from 'components/visualization-page/actions';\n\nconst context: React.Context<[State, React.Dispatch<Action>]> = React.createContext(null);\nexport default context;\n","/**\n * @param hex the css hex color, e.g. #FFF, #abcdef, ff0000\n * @param alpha 0-1\n * @return the css rgba string\n */\nconst RE = /^#?([0-9A-F]{3}|[0-9A-F]{6})$/i;\n\nexport default function hexRGBA(hex: string, alpha = 1) {\n    if (alpha < 0 || alpha > 1) {\n        throw new Error(`Expected alpha to be between 0 and 1, got: ${alpha}`);\n    }\n    const matches = hex.match(RE);\n    if (!matches) {\n        throw new Error(`Invalid hex string: ${hex}`);\n    }\n    let match = matches[1];\n    if (match.length === 3) {\n        match = match.replace(/\\w/g, (c: string) => c + c);\n    }\n    const rgba = [0, 2, 4].map((start) => \n        parseInt(match.slice(start, start + 2), 16)\n    ).concat(alpha);\n    return `rgba(${rgba.join(',')})`;\n}\n","export default function clamp(x: number, min: number, max: number) {\n    return Math.max(Math.min(x, max), min);\n}\n","import styled from '@emotion/styled';\nimport { css } from '@emotion/core';\n\nimport * as colors from 'utils/colors';\n\nexport const activeCSS = css`\n    background-color: ${colors.white};\n    color: ${colors.bgColor6dp};\n`;\n\nexport default styled.button`\n    background: none;\n    box-shadow: none;\n    outline: none;\n    padding: 0 16px;\n    border: 1px solid ${colors.white};\n    color: ${colors.white};\n    cursor: pointer;\n    border-radius: 3px;\n    height: 32px;\n    line-height: 32px;\n    text-align: center;\n\n    &:hover {\n        ${activeCSS}\n    }\n`;\n","import React, { useCallback, useContext, useState } from 'react';\nimport styled from '@emotion/styled';\n\nimport { update } from 'components/visualization-page/actions';\nimport VisualizationContext from 'components/visualization-page/context';\nimport * as colors from 'utils/colors';\nimport hexRGBA from 'utils/hex-rgba';\nimport Button from 'components/button';\n\nconst Form = styled.form`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    margin: 0;\n    position: relative;\n`;\n\nconst TextAreaContainer = styled.div`\n    width: 100%;\n    flex: 1 1 auto;\n    margin-bottom: 8px;\n`;\n\nconst TextArea = styled.textarea`\n    resize: none;\n    width: 100%;\n    height: 100%;\n    padding: 16px;\n    outline: none;\n    background: ${hexRGBA(colors.bgColor6dp, .7)};\n    color: ${colors.white};\n    border: 1px solid ${colors.white};\n`;\n\nconst ConfirmButton = styled(Button)`\n    width: 100%;\n`;\n\nconst ErrorContainer = styled.div`\n    z-index: 10;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    background-color: ${hexRGBA(colors.bgColor8dp, .7)};\n`;\n\nconst ErrorMessage = styled.p`\n    color: ${colors.textColorError};\n    margin-bottom: 16px;\n`;\n\nconst DataEditor = ({ ...props }) => {\n    const [{ data, validator }, dispatch] = useContext(VisualizationContext);\n    const [currentValue, setCurrentValue] = useState(() => JSON.stringify(data, null, 4));\n    const [errorMessage, setErrorMessage] = useState('');\n\n    const onSubmit = useCallback(\n        (e) => {\n            e.preventDefault();\n            let data: any;\n            try {\n                data = JSON.parse(currentValue);\n            } catch (e) {\n                setErrorMessage(e.message);\n                return;\n            }\n            const error = validator(data);\n            if (error) {\n                setErrorMessage(error);\n            } else {\n                dispatch(update(data));\n                setCurrentValue(JSON.stringify(data, null, 4));\n            }\n        },\n        [currentValue, dispatch, validator],\n    );\n\n    const onChange = useCallback(\n        (e) => setCurrentValue(e.target.value),\n        [],\n    );\n\n    const onDismissError = useCallback(\n        () => setErrorMessage(''),\n        [],\n    );\n\n    return (\n        <Form\n            onSubmit={onSubmit}\n            {...props}\n        >\n            <TextAreaContainer>\n                <TextArea\n                    onChange={onChange}\n                    value={currentValue}\n                    name=\"data\"\n                />\n            </TextAreaContainer>\n            <ConfirmButton\n                type=\"submit\"\n            >Confirm</ConfirmButton>\n\n            {errorMessage && <ErrorContainer>\n                <ErrorMessage>{errorMessage}</ErrorMessage>\n                <Button type=\"button\" onClick={onDismissError}>Noted</Button>\n            </ErrorContainer>}\n        </Form>\n    );\n};\n\nexport default DataEditor;\n","import React, { useCallback, useContext } from 'react';\nimport styled from '@emotion/styled';\n\nimport { play, pause, update } from 'components/visualization-page/actions';\nimport VisualizationContext from 'components/visualization-page/context';\nimport Button, { activeCSS } from 'components/button';\n\nconst IconButton = styled(Button)`\n    padding: 0;\n    width: 32px;\n`;\n\nconst PlaybackControl = () => {\n    const [{ paused, data }, dispatch] = useContext(VisualizationContext);\n    const onPlay = useCallback(() => dispatch(play()), [dispatch]);\n    const onPause = useCallback(() => dispatch(pause()), [dispatch]);\n    const onRestart = useCallback(\n        () => dispatch(update(JSON.parse(JSON.stringify(data)))),\n        [dispatch, data],\n    );\n\n    return (\n        <>\n            <IconButton type=\"button\" onClick={onPlay} css={!paused && activeCSS}>▶️</IconButton>\n            <IconButton type=\"button\" onClick={onPause} css={paused && activeCSS}>⏸️</IconButton>\n            <IconButton type=\"button\" onClick={onRestart}>↺</IconButton>\n        </>\n    );\n};\n\nexport default PlaybackControl;\n","import React, { useCallback, useContext, useMemo, useState } from 'react';\nimport { css } from '@emotion/core';\nimport styled from '@emotion/styled'\n\nimport { speedup } from 'components/visualization-page/actions';\nimport VisualizationContext from 'components/visualization-page/context';\nimport * as colors from 'utils/colors';\nimport Button from 'components/button';\n\ninterface SpeedChoice {\n    speed: number;\n    name: string;\n}\n\nconst choices: SpeedChoice[] = [\n    { speed: 0.25, name: '0.25x' },\n    { speed: 0.5, name: '0.5x' },\n    { speed: 1, name: '1x' },\n    { speed: 2, name: '2x' },\n    { speed: 4, name: '4x' },\n];\n\nconst padding = css`\n    padding: 0 8px;\n`;\n\nconst ComboBox = styled(Button)`\n    display: inline-block;\n    width: 64px;\n    position: relative;\n    outline: none;\n    text-align: right;\n    ${padding}\n`.withComponent('div');\n\ninterface OptionsProps {\n    offset: number;\n}\n\nconst Options = styled.div`\n    position: absolute;\n    z-index: 100;\n    top: 0;\n    left: -1px;\n    right: -1px;\n    background-color: ${colors.bgColor6dp};\n    transform: translateY(${({ offset }: OptionsProps) => -offset * 100 / choices.length}%);\n`;\n\nconst Option = styled(Button)`\n    width: 100%;\n    border: 0;\n    border-radius: 0;\n    text-align: right;\n    ${padding}\n`.withComponent('div');\n\nconst SpeedModifer = () => {\n    const [{ speed }, dispatch] = useContext(VisualizationContext);\n    const [open, setOpen] = useState(false);\n\n    const [offset, name] = useMemo(() => {\n        const index = choices.findIndex(({ speed: s }) => speed === s);\n        if (index === -1) {\n            return [0, ''];\n        }\n        return [index, choices[index].name];\n    }, [speed]);\n\n    const onClick = useCallback((e: React.MouseEvent) => {\n        setOpen((prevOpen) => !prevOpen);\n        const speed = (e.target as HTMLElement).dataset.speed;\n        if (typeof speed !== 'undefined') {\n            dispatch(speedup(parseFloat(speed)));\n        }\n    }, []);\n\n    const onBlur = useCallback((e: React.FocusEvent) => {\n        setOpen(false);\n    }, []);\n\n    return (\n        <ComboBox\n            tabIndex={0}\n            onClick={onClick}\n            onBlur={onBlur}\n        >\n            {name}\n            {open && <Options offset={offset}>\n                {choices.map(({ name, speed }) => (\n                    <Option\n                        key={name}\n                        data-speed={speed}\n                    >{name}</Option>\n                ))}\n            </Options>}\n        </ComboBox>\n    );\n};\n\nexport default SpeedModifer;\n","import React, { useState, useCallback } from 'react';\nimport { css } from '@emotion/core';\nimport styled from '@emotion/styled'\n\nimport * as colors from 'utils/colors';\nimport hexRGBA from 'utils/hex-rgba';\nimport clamp from 'utils/clamp';\nimport emptySelection from 'utils/empty-selection';\nimport DataEditor from 'components/visualization-page/data-editor';\nimport PlaybackControl from 'components/visualization-page/playback-control';\nimport SpeedModifier from 'components/visualization-page/speed-modifier';\nimport { mobile, notMobile } from 'utils/breakpoints';\n\ninterface ContainerProps {\n    height: number;\n    minHeight: number;\n    maxVH: number;\n    isResizing: boolean;\n    isOpen: boolean;\n}\n\nconst transform = ({ height, isResizing, isOpen, maxVH, minHeight }: ContainerProps) => {\n    if (isResizing) {\n        return css`\n            transform: translateY(-${height}px);\n        `;\n    } else if (isOpen) {\n        return css`\n            transform: translateY(-${maxVH}vh);\n        `;\n    } else {\n        return css`\n            transform: translateY(-${minHeight}px);\n        `;\n    }\n};\n\nconst height = ({ maxVH }: ContainerProps) => css`\n    height: ${maxVH}vh;\n`;\n\nconst transition = ({ isResizing }: ContainerProps) => css`\n    transition: ${isResizing ? 'none' : 'transform .375s cubic-bezier(.4, 0, .2, 1)'};\n`;\n\nconst Container = styled.div`\n    position: absolute;\n    top: 100%;\n    left: 0;\n    right: 0;\n    z-index: 100;\n    background-color: ${hexRGBA(colors.bgColor2dp, .7)};\n    display: flex;\n    padding: 20px 10px;\n    flex-direction: column;\n    align-items: center;\n    ${height};\n    ${transform};\n    ${transition};\n\n    ${notMobile`\n        padding: 40px 50px;\n    `}\n`;\n\nconst ResizeHandle = styled.div`\n    position: absolute;\n    cursor: row-resize;\n    top: 0;\n    left: 50%;\n    transform: translateX(-50%);\n    z-index: 100;\n    width: 35px;\n    height: 10px;\n\n    &:before,\n    &:after {\n        content: \"\";\n        display: block;\n        position: absolute;\n        border: .5px solid ${colors.white};\n        left: 50%;\n        transform: translateX(-50%);\n    }\n    &:before {\n        width: 15px;\n        top: 5px;\n    }\n    &:after {\n        width: 35px;\n        top: 8px;\n    }\n`;\n\nconst CloseButton = styled.button`\n    outline: none;\n    box-shadow: none;\n    padding: 0;\n    border: none;\n    background-color: ${colors.bgColor4dp};\n    color: ${colors.white};\n    border-radius: 50%;\n    text-align: center;\n    width: 36px;\n    height: 36px;\n    line-height: 36px;\n    font-size: 24px;\n    cursor: pointer;\n    position: absolute;\n    top: 20px;\n    right: 8px;\n\n    &:hover {\n        background-color: ${colors.white};\n        color: ${colors.bgColor4dp};\n    }\n\n    &:after {\n        content: \"🞩\";\n        display: block;\n    }\n`;\n\nconst Controls = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 200px;\n    margin-bottom: 24px;\n`;\n\nconst inputAreaCSS = css`\n    flex: 1 1 auto;\n    width: 400px;\n    max-width: 100%;\n`;\n\ninterface Props {\n    maxVH?: number;\n    minHeight?: number;\n}\n\nconst ControlPanel = ({ maxVH = 90, minHeight = 20 }: Props) => {\n    const [height, setHeight] = useState(0);\n    const [lastClientYs, setLastClientYs] = useState([0, 0]);\n    const [isResizing, setIsResizing] = useState(false);\n    const [isOpen, setIsOpen] = useState(false);\n\n    const onPointerDown = useCallback((e: React.PointerEvent) => {\n        (e.target as Element).setPointerCapture(e.pointerId);\n        // if there are selections, onPointerCancel might fire for some reasons\n        emptySelection();\n        const { clientY } = e;\n        const { innerHeight } = window;\n        setIsResizing(true);\n        setHeight(clamp(innerHeight - clientY, minHeight, innerHeight * maxVH / 100));\n        setLastClientYs(([, lastClientY]) => [lastClientY, clientY]);\n    }, [minHeight, maxVH]);\n\n    const onPointerMove = useCallback((e: React.PointerEvent) => {\n        if (!isResizing) {\n            return;\n        }\n        const { clientY } = e;\n        const { innerHeight } = window;\n        setLastClientYs(([, lastClientY]) => [lastClientY, clientY]);\n        setHeight(clamp(innerHeight - clientY, minHeight, innerHeight * maxVH / 100));\n    }, [isResizing, minHeight, maxVH]);\n\n    const onPointerUpCancel = useCallback((e: React.PointerEvent) => {\n        setIsResizing(false);\n        const delta = lastClientYs[1] - lastClientYs[0];\n        if (delta < -20) {\n            setIsOpen(true);\n        } else if (delta > 20) {\n            setIsOpen(false);\n        } else {\n            setIsOpen(height > window.innerHeight * maxVH / 200);\n        }\n    }, [height, lastClientYs, maxVH]);\n\n    const onClose = useCallback((e: React.MouseEvent) => {\n        setIsOpen(false);\n    }, []);\n\n    return (\n        <Container\n            height={height}\n            isResizing={isResizing}\n            isOpen={isOpen}\n            minHeight={minHeight}\n            maxVH={maxVH}\n        >\n            <CloseButton onClick={onClose} />\n            <ResizeHandle\n                onPointerDown={onPointerDown}\n                onPointerMove={onPointerMove}\n                onPointerUp={onPointerUpCancel}\n                onPointerCancel={onPointerUpCancel}\n            />\n            <Controls>\n                <PlaybackControl />\n                <SpeedModifier />\n            </Controls>\n            <DataEditor css={inputAreaCSS} />\n        </Container>\n    )\n};\n\nexport default ControlPanel;\n","// credit: https://stackoverflow.com/questions/3169786/clear-text-selection-with-javascript\nexport default function emptySelection() {\n    if (window.getSelection) {\n        if (window.getSelection().empty) {  // Chrome\n            window.getSelection().empty();\n        } else if (window.getSelection().removeAllRanges) {  // Firefox\n            window.getSelection().removeAllRanges();\n        }\n    } else if ((document as any).selection) {  // IE?\n        (document as any).selection.empty();\n    }\n}\n","import paper from 'paper';\n\nimport Worker from 'workers';\nimport Drawer, { DrawerConstructor } from 'visualizers/drawers'\nimport Animation from 'visualizers/animations';\n\nexport default class Visualizer {\n    private animation: Animation = null;\n    private finishAnimation: () => void = null;\n    private done: boolean = false;\n    private project: paper.Project;\n    private drawer: Drawer;\n    private speed = 1;\n    private paused = false;\n\n    constructor(\n        private canvas: HTMLCanvasElement,\n        private worker: Worker,\n        DrawerFactory: DrawerConstructor,\n    ) {\n        this.project = new paper.Project(canvas);\n        this.project.activate();\n        this.project.view.onFrame = this.onFrame.bind(this);\n        this.drawer = new DrawerFactory(this.project.view);\n    }\n\n    private onFrame(event: any) {\n        if (this.animation) {\n            const speed = this.paused ? 0 : this.speed;\n            this.animation.run(event.delta * speed)\n            if (this.animation.isFinished()) {\n                this.finishAnimation();\n                this.finishAnimation = null;\n                this.animation = null;\n            }\n        }\n    }\n\n    async start(): Promise<void> {\n        let step = await this.worker.run();\n        while (true) {\n            if (step.done || this.done) {\n                this.done = true;\n                break;\n            }\n            await this.animate(this.drawer.handleStep(step));\n            step = await this.worker.run();\n        }\n    }\n\n    changeSpeed(speed: number): void {\n        if (speed >= 0) {\n            this.speed = speed;\n        }\n    }\n\n    pause(): void {\n        this.paused = true;\n    }\n\n    play(): void {\n        this.paused = false;\n    }\n\n    private animate(animation: Animation): Promise<void> {\n        this.animation = animation;\n        if (!this.animation) {\n            return Promise.resolve();\n        }\n        return new Promise((resolve) => {\n            this.finishAnimation = resolve;\n        });\n    }\n\n    terminate(): void {\n        this.drawer.terminate();\n        this.project.view.onFrame = null;\n        this.project.clear();\n        this.project.remove();\n        this.worker.terminate();\n        this.done = true;\n        this.worker = null;\n        this.project = null;\n    }\n}\n","import Worker from 'workers';\nimport Step from 'algorithms/step';\n\nexport default class BufferedWorker implements Worker {\n    private buffer: Array<Promise<Step>> = [];\n    \n    constructor(private size: number, private worker: Worker) {\n    }\n\n    async init(data: any) {\n        await this.worker.init(data);\n        this.buffer.push(this.worker.run());\n        while (this.buffer.length < this.size) {\n            this.bufferNext();\n        }\n        await this.buffer[this.buffer.length - 1];\n    }\n\n    async run() {\n        const step = await this.buffer.shift();\n        this.bufferNext();\n        return step;\n    }\n\n    terminate() {\n        this.worker.terminate();\n        this.buffer = [];\n    }\n\n    private bufferNext(): void {\n        this.buffer.push(\n            this.buffer[this.buffer.length - 1].then(() => this.worker.run())\n        )\n    }\n}\n","import React, { useReducer, useEffect, useRef, useMemo } from 'react';\nimport styled from '@emotion/styled';\n\nimport { Action, play } from 'components/visualization-page/actions'\nimport reducer from 'components/visualization-page/reducer';\nimport State from 'components/visualization-page/state';\nimport VisualizationContext from 'components/visualization-page/context';\nimport ControlPanel from 'components/visualization-page/control-panel';\nimport Config from 'configs';\nimport Worker from 'workers';\nimport Visualizer from 'visualizers';\nimport { DrawerConstructor } from 'visualizers/drawers';\nimport BufferedWorker from 'workers/buffered-worker';\n\nconst DrawingArea = styled.canvas`\n    width: 100%;\n    height: 100%;\n`;\n\nconst Container = styled.div`\n    height: 100vh;\n    position: relative;\n    overflow: hidden;\n`;\n\ninterface Props {\n    WorkerFactory: new () => Worker;\n    DrawerFactory: DrawerConstructor;\n    config: Config;\n}\n\nconst init = (config: Config): State => {\n    const data = config.data();\n    const { validator } = config;\n    const speed = 1;\n    const paused = false;\n    return { data, validator, speed, paused };\n};\n\nconst VisualizationPage = ({\n    WorkerFactory,\n    DrawerFactory,\n    config,\n}: Props) => {\n    const [state, dispatch] = useReducer(reducer, config, init);\n    const canvasRef = useRef(null);\n    const visualizerRef = useRef(null);\n\n    useEffect(() => {\n        let worker = new BufferedWorker(20, new WorkerFactory());\n        const canvas = canvasRef.current;\n        visualizerRef.current = new Visualizer(canvas, worker, DrawerFactory);\n        worker.init(state.data).then(() => {\n            if (visualizerRef.current) {\n                visualizerRef.current.changeSpeed(state.speed);\n                visualizerRef.current.start();\n                dispatch(play());\n            }\n        });\n\n        return () => {\n            visualizerRef.current.terminate();\n            visualizerRef.current = null;\n            worker = null;\n        }\n    }, [state.data]);\n\n    useEffect(() => {\n        if (visualizerRef.current) {\n            visualizerRef.current.changeSpeed(state.speed);\n        }\n    }, [state.speed]);\n\n    useEffect(() => {\n        if (visualizerRef.current) {\n            if (state.paused) {\n                visualizerRef.current.pause();\n            } else {\n                visualizerRef.current.play();\n            }\n        }\n    }, [state.paused]);\n\n    const contextValue: [State, React.Dispatch<Action>] = useMemo(\n        () => [state, dispatch],\n        [state, dispatch],\n    );\n\n    return (\n        <VisualizationContext.Provider value={contextValue}>\n            <Container>\n                <DrawingArea\n                    ref={canvasRef}\n                    data-paper-resize\n                />\n                <ControlPanel />\n            </Container>\n        </VisualizationContext.Provider>\n    );\n};\n\nexport default VisualizationPage;\n","import paper from 'paper';\n\ninterface Params {\n    number: number;\n    position: paper.Point;\n    radius: number;\n    color: paper.Color;\n    fontSize?: number;\n    fontWeight?: number;\n}\n\nexport default class NumberedCircle extends paper.Group {\n    constructor({\n        number,\n        position,\n        radius,\n        color,\n        fontSize = radius,\n        fontWeight = 700,\n    }: Params) {\n        super();\n        const circle = new paper.Path.Circle(position, radius);\n        circle.strokeColor = color;\n        circle.strokeWidth = 5;\n        const text = new paper.PointText(position);\n        text.content = String(number);\n        text.justification = 'center';\n        text.fillColor = color;\n        text.fontSize = fontSize;\n        text.fontWeight = fontWeight;\n        text.position.y += text.bounds.height / 3;\n        this.addChild(circle);\n        this.addChild(text);\n    }\n\n    changeColor(color: paper.Color) {\n        const [circle, text] = this.children;\n        circle.strokeColor = color;\n        text.fillColor = color;\n    }\n}\n","import Animation from \"visualizers/animations\";\n\nexport default class EmptyAnimation implements Animation {\n    run(dt) {\n    }\n\n    isFinished() {\n        return true;\n    }\n}\n","import paper from 'paper';\n\nimport clamp from 'utils/clamp';\nimport Animation from 'visualizers/animations';\n\nexport default class SlideAnimation implements Animation {\n    private t = 0;\n    private diff: paper.Point;\n\n    constructor(\n        private seconds: number,\n        private item: paper.Item | paper.View,\n        private prevTranslate: paper.Point,\n        private nextTranslate: paper.Point,\n    ) {\n        this.diff = nextTranslate.subtract(this.prevTranslate);\n    }\n\n    run(dt: number) {\n        this.t = this.t + dt;\n        const progress = clamp(this.t / this.seconds, 0, 1);\n        const { x, y } = this.prevTranslate.add(this.diff.multiply(progress));\n        this.item.matrix = new paper.Matrix(1, 0, 0, 1, x, y);\n    }\n\n    isFinished() {\n        return this.t >= this.seconds;\n    }\n}\n","import paper from 'paper';\n\nimport clamp from 'utils/clamp'\nimport Animation from 'visualizers/animations';\nimport EmptyAnimation from 'visualizers/animations/empty-animation';\nimport SlideAnimation from 'visualizers/animations/slide-animation';\n\nexport default class Camera {\n    private translate = new paper.Point(0, 0);\n\n    constructor(private view: paper.View, private xmax: number, private ymax: number) {\n    }\n\n    ensureVisible(seconds: number, ...items: paper.Item[]): Animation {\n        const bounds = items\n            .map((item) => item.bounds)\n            .reduce((union, rect) => union.unite(rect));\n        const { width, height } = this.view.viewSize;\n        const top = -this.translate.y;\n        const left = -this.translate.x;\n        const bottom = top + height;\n        const right = left + width;\n        const isVisible = top <= bounds.top &&\n            left <= bounds.left &&\n            bottom >= bounds.bottom &&\n            right >= bounds.right;\n        if (isVisible) {\n            return new EmptyAnimation();\n        }\n        const xmid = (bounds.left + bounds.right) / 2;\n        const ymid = (bounds.top + bounds.bottom) / 2;\n        const prevTranslate = this.translate;\n        this.translate = new paper.Point(\n            clamp(-xmid + width / 2, -this.xmax + width, 0),\n            clamp(-ymid + height / 2, -this.ymax + height, 0),\n        );\n        return new SlideAnimation(seconds, this.view, prevTranslate, this.translate);\n    }\n}\n","import Animation from 'visualizers/animations';\n\nexport default class IdleAnimation implements Animation {\n    constructor(private seconds: number) {\n    }\n\n    run(dt) {\n        this.seconds -= dt;\n    }\n\n    isFinished() {\n        return this.seconds <= 0;\n    }\n}\n","import paper from 'paper';\n\nimport Animation from 'visualizers/animations';\nimport clamp from 'utils/clamp'\n\nexport default class SwapAnimation implements Animation {\n    private t: number = 0;\n    private path1: paper.Path;\n    private path2: paper.Path;\n\n    constructor(private seconds: number, private item1: paper.Item, private item2: paper.Item) {\n        const through1: paper.Point = new paper.Point(\n            (item1.position.x + item2.position.x) / 2,\n            item1.position.y - 2 * item1.bounds.height / 3,\n        );\n        this.path1 = new paper.Path.Arc(\n            item1.position,\n            through1,\n            item2.position,\n        );\n        const through2: paper.Point = new paper.Point(\n            (item1.position.x + item2.position.x) / 2,\n            item2.position.y + 2 * item2.bounds.height / 3,\n        );\n        this.path2 = new paper.Path.Arc(\n            item2.position,\n            through2,\n            item1.position,\n        );\n    }\n\n    run(dt: number) {\n        this.t = this.t + dt;\n        const progress = clamp(this.t / this.seconds, 0, 1);\n        this.item1.position = this.path1.getPointAt(this.path1.length * progress);\n        this.item2.position = this.path2.getPointAt(this.path2.length * progress);\n    }\n\n    isFinished() {\n        return this.t >= 1;\n    }\n}\n","import Animation from 'visualizers/animations';\n\ninterface VoidFunction {\n    (): void;\n}\n\nexport default class ImmediateAnimation implements Animation {\n    private hasRun = false;\n\n    constructor(private fn: VoidFunction) {\n    }\n\n    run(dt) {\n        if (!this.isFinished()) {\n            this.hasRun = true;\n            this.fn();\n        }\n    }\n\n    isFinished() {\n        return !this.fn || this.hasRun;\n    }\n};\n","import Animation from 'visualizers/animations';\n\nexport default class CompositeAnimation implements Animation {\n    private animations: Animation[];\n\n    constructor(...animations: Animation[]) {\n        this.animations = animations;\n    }\n\n    run(dt: number) {\n        while (this.animations[0] && this.animations[0].isFinished()) {\n            this.animations.shift();\n        }\n        if (this.animations.length === 0) {\n            return;\n        }\n        this.animations[0].run(dt);\n    }\n\n    isFinished() {\n        return this.animations.length === 0;\n    }\n}\n","import paper from 'paper';\n\nimport Step from 'algorithms/step';\nimport Drawer from 'visualizers/drawers';\nimport NumberedCircle from 'visualizers/common/numbered-circle';\nimport Camera from 'visualizers/common/camera';\nimport Animation from 'visualizers/animations';\nimport IdleAnimation from 'visualizers/animations/idle-animation';\nimport EmptyAnimation from 'visualizers/animations/empty-animation';\nimport SwapAnimation from 'visualizers/animations/swap-animation';\nimport ImmediateAnimation from 'visualizers/animations/immediate-animation';\nimport CompositeAnimation from 'visualizers/animations/composite-animation';\nimport * as colors from 'utils/colors';\n\nexport default class BubbleSortDrawer implements Drawer {\n    static readonly INITIAL_COLOR = new paper.Color(colors.white);\n    static readonly HIGHLIGHTED_COLOR = new paper.Color(colors.orange);\n    static readonly FINISHED_COLOR = new paper.Color(colors.lightGreen);\n    static readonly INIT_IDLE = 0.5;\n    static readonly COMP_IDLE = 1;\n    static readonly SWAP_DURATION = 0.6;\n    static readonly SWAP_IDLE = 0.5;\n    static readonly NOSWAP_IDLE = 0.5;\n    static readonly SLIDE_DURATION = 0.8;\n    static readonly RADIUS = 1 / 30; // in terms of width\n    static readonly MARGIN = 1 / 30; // in terms of width\n    static readonly PADDING = 1 / 30; // in terms of width\n\n    private circles: NumberedCircle[];\n    private camera: Camera;\n\n    constructor(private view: paper.View) {\n    }\n\n    handleStep(step: Step): Animation {\n        switch (step.type) {\n            case 'init':\n                return this.handleInit(step);\n            case 'comp':\n                return this.handleComp(step);\n            case 'swap':\n                return this.handleSwap(step);\n            case 'noswap':\n                return this.handleNoSwap(step);\n        }\n        return new EmptyAnimation();\n    }\n\n    private handleInit(step: Step): Animation {\n        const { width, height } = this.view.viewSize;\n        const arr = step.payload.data;\n        const radius = width * BubbleSortDrawer.RADIUS;\n        const padding = width * BubbleSortDrawer.PADDING;\n        const margin = width * BubbleSortDrawer.MARGIN;\n        const position = new paper.Point(radius + padding, height / 2);\n        this.circles = arr.map((number: number, i: number) => {\n            const circle = new NumberedCircle({\n                number,\n                radius,\n                color: BubbleSortDrawer.INITIAL_COLOR,\n                position: position.add(new paper.Point((radius * 2 + margin) * i, 0)),\n            });\n            return circle;\n        });\n        const xmax = this.circles[this.circles.length - 1].bounds.right + padding;\n        const ymax = height;\n        this.camera = new Camera(this.view, xmax, ymax);\n        if (xmax < width) {\n            const offset = (width - xmax) / 2;\n            this.circles.forEach((circle) => circle.position.x += offset);\n        }\n        return new IdleAnimation(BubbleSortDrawer.INIT_IDLE);\n    }\n\n    private handleComp(step: Step): Animation {\n        const { pos } = step.payload;\n        this.circles[pos].changeColor(BubbleSortDrawer.HIGHLIGHTED_COLOR);\n        this.circles[pos + 1].changeColor(BubbleSortDrawer.HIGHLIGHTED_COLOR);\n        return new CompositeAnimation(\n            this.camera.ensureVisible(\n                BubbleSortDrawer.SLIDE_DURATION,\n                this.circles[pos],\n                this.circles[pos + 1],\n            ),\n            new IdleAnimation(BubbleSortDrawer.COMP_IDLE),\n        );\n    }\n\n    private handleSwap(step: Step): Animation {\n        const { pos, end, lastSwapped } = step.payload;\n        const left = this.circles[pos];\n        const right = this.circles[pos + 1];\n        this.circles[pos] = right;\n        this.circles[pos + 1] = left;\n        return new CompositeAnimation(\n            new SwapAnimation(BubbleSortDrawer.SWAP_DURATION, left, right),\n            new IdleAnimation(BubbleSortDrawer.SWAP_IDLE / 2),\n            new ImmediateAnimation(() => {\n                this.circles[pos].changeColor(BubbleSortDrawer.INITIAL_COLOR);\n                this.circles[pos + 1].changeColor(BubbleSortDrawer.INITIAL_COLOR);\n                if (pos + 1 === end) {\n                    this.markFinished(lastSwapped);\n                }\n            }),\n            new IdleAnimation(BubbleSortDrawer.SWAP_IDLE / 2),\n        );\n    }\n\n    private handleNoSwap(step: Step): Animation {\n        const { pos, end, lastSwapped } = step.payload;\n        this.circles[pos].changeColor(BubbleSortDrawer.INITIAL_COLOR);\n        this.circles[pos + 1].changeColor(BubbleSortDrawer.INITIAL_COLOR);\n        if (pos + 1 === end) {\n            this.markFinished(lastSwapped);\n        }\n        return new IdleAnimation(BubbleSortDrawer.NOSWAP_IDLE);\n    }\n\n    private markFinished(lastSwapped: number) {\n        // all the elements after lastSwapped must be sorted\n        // however, if lastSwapped is 0, it means only the\n        // 0-th element is left, which is inherently sorted\n        const from = lastSwapped === 0 ? lastSwapped : lastSwapped + 1;\n        for (let i = from; i < this.circles.length; ++i) {\n            this.circles[i].changeColor(BubbleSortDrawer.FINISHED_COLOR);\n        }\n    }\n\n    terminate(): void {\n        for (let circle of this.circles) {\n            circle.remove();\n        }\n    }\n}\n","export default {\n    params: [(x: number, y: number) => x <= y],\n    data: () => Array(8).fill(null).map(() => Math.floor(Math.random() * 100)),\n    validator: (data: any) => {\n        if (!Array.isArray(data)) {\n            return 'Data must be an array';\n        }\n        if (data.length < 2) {\n            return 'Data must contain at least 2 elements';\n        }\n        if (!data.every((num) => typeof num === 'number')) {\n            return 'Data must contain numbers only';\n        }\n        return '';\n    },\n};\n","/**\n  * Automatically generated with `node ./generate-page.js`\n  * Please do not edit this file directly\n  * Last updated: 2019-12-28T06:06:05.071Z\n  */\n\nimport React from 'react';\n\nimport VisualizationPage from 'components/visualization-page';\nimport BubbleSortWorker from 'workers/sorting/bubble-sort.worker.js';\nimport BubbleSortDrawer from 'visualizers/drawers/sorting/bubble-sort-drawer';\nimport config from 'configs/sorting/bubble-sort-config';\n\nconst BubbleSortPage = () => {\n    return (\n        <VisualizationPage\n            WorkerFactory={BubbleSortWorker}\n            DrawerFactory={BubbleSortDrawer}\n            config={config}\n        />\n    );\n};\n\nexport default BubbleSortPage;\n    ","require(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.array.reduce\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.regexp.flags\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.math.log2\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\n/*!\n * Paper.js v0.12.4 - The Swiss Army Knife of Vector Graphics Scripting.\n * http://paperjs.org/\n *\n * Copyright (c) 2011 - 2019, Juerg Lehni & Jonathan Puckey\n * http://scratchdisk.com/ & https://puckey.studio/\n *\n * Distributed under the MIT license. See LICENSE file for details.\n *\n * All rights reserved.\n *\n * Date: Sun Dec 15 21:25:00 2019 +0100\n *\n ***\n *\n * Straps.js - Class inheritance library with support for bean-style accessors\n *\n * Copyright (c) 2006 - 2019 Juerg Lehni\n * http://scratchdisk.com/\n *\n * Distributed under the MIT license.\n *\n ***\n *\n * Acorn.js\n * https://marijnhaverbeke.nl/acorn/\n *\n * Acorn is a tiny, fast JavaScript parser written in JavaScript,\n * created by Marijn Haverbeke and released under an MIT license.\n *\n */\nvar paper = function (self, undefined) {\n  self = self || require('./node/self.js');\n  var window = self.window,\n      document = self.document;\n  var Base = new function () {\n    var hidden = /^(statics|enumerable|beans|preserve)$/,\n        array = [],\n        _slice = array.slice,\n        create = Object.create,\n        describe = Object.getOwnPropertyDescriptor,\n        define = Object.defineProperty,\n        forEach = array.forEach || function (iter, bind) {\n      for (var i = 0, l = this.length; i < l; i++) {\n        iter.call(bind, this[i], i, this);\n      }\n    },\n        forIn = function forIn(iter, bind) {\n      for (var i in this) {\n        if (this.hasOwnProperty(i)) iter.call(bind, this[i], i, this);\n      }\n    },\n        set = Object.assign || function (dst) {\n      for (var i = 1, l = arguments.length; i < l; i++) {\n        var src = arguments[i];\n\n        for (var key in src) {\n          if (src.hasOwnProperty(key)) dst[key] = src[key];\n        }\n      }\n\n      return dst;\n    },\n        _each = function each(obj, iter, bind) {\n      if (obj) {\n        var desc = describe(obj, 'length');\n        (desc && typeof desc.value === 'number' ? forEach : forIn).call(obj, iter, bind = bind || obj);\n      }\n\n      return bind;\n    };\n\n    function _inject(dest, src, enumerable, beans, preserve) {\n      var beansNames = {};\n\n      function field(name, val) {\n        val = val || (val = describe(src, name)) && (val.get ? val : val.value);\n        if (typeof val === 'string' && val[0] === '#') val = dest[val.substring(1)] || val;\n        var isFunc = typeof val === 'function',\n            res = val,\n            prev = preserve || isFunc && !val.base ? val && val.get ? name in dest : dest[name] : null,\n            bean;\n\n        if (!preserve || !prev) {\n          if (isFunc && prev) val.base = prev;\n          if (isFunc && beans !== false && (bean = name.match(/^([gs]et|is)(([A-Z])(.*))$/))) beansNames[bean[3].toLowerCase() + bean[4]] = bean[2];\n\n          if (!res || isFunc || !res.get || typeof res.get !== 'function' || !Base.isPlainObject(res)) {\n            res = {\n              value: res,\n              writable: true\n            };\n          }\n\n          if ((describe(dest, name) || {\n            configurable: true\n          }).configurable) {\n            res.configurable = true;\n            res.enumerable = enumerable != null ? enumerable : !bean;\n          }\n\n          define(dest, name, res);\n        }\n      }\n\n      if (src) {\n        for (var name in src) {\n          if (src.hasOwnProperty(name) && !hidden.test(name)) field(name);\n        }\n\n        for (var name in beansNames) {\n          var part = beansNames[name],\n              set = dest['set' + part],\n              get = dest['get' + part] || set && dest['is' + part];\n          if (get && (beans === true || get.length === 0)) field(name, {\n            get: get,\n            set: set\n          });\n        }\n      }\n\n      return dest;\n    }\n\n    function Base() {\n      for (var i = 0, l = arguments.length; i < l; i++) {\n        var src = arguments[i];\n        if (src) set(this, src);\n      }\n\n      return this;\n    }\n\n    return _inject(Base, {\n      inject: function inject(src) {\n        if (src) {\n          var statics = src.statics === true ? src : src.statics,\n              beans = src.beans,\n              preserve = src.preserve;\n          if (statics !== src) _inject(this.prototype, src, src.enumerable, beans, preserve);\n\n          _inject(this, statics, null, beans, preserve);\n        }\n\n        for (var i = 1, l = arguments.length; i < l; i++) {\n          this.inject(arguments[i]);\n        }\n\n        return this;\n      },\n      extend: function extend() {\n        var base = this,\n            ctor,\n            proto;\n\n        for (var i = 0, obj, l = arguments.length; i < l && !(ctor && proto); i++) {\n          obj = arguments[i];\n          ctor = ctor || obj.initialize;\n          proto = proto || obj.prototype;\n        }\n\n        ctor = ctor || function () {\n          base.apply(this, arguments);\n        };\n\n        proto = ctor.prototype = proto || create(this.prototype);\n        define(proto, 'constructor', {\n          value: ctor,\n          writable: true,\n          configurable: true\n        });\n\n        _inject(ctor, this);\n\n        if (arguments.length) this.inject.apply(ctor, arguments);\n        ctor.base = base;\n        return ctor;\n      }\n    }).inject({\n      enumerable: false,\n      initialize: Base,\n      set: Base,\n      inject: function inject() {\n        for (var i = 0, l = arguments.length; i < l; i++) {\n          var src = arguments[i];\n\n          if (src) {\n            _inject(this, src, src.enumerable, src.beans, src.preserve);\n          }\n        }\n\n        return this;\n      },\n      extend: function extend() {\n        var res = create(this);\n        return res.inject.apply(res, arguments);\n      },\n      each: function each(iter, bind) {\n        return _each(this, iter, bind);\n      },\n      clone: function clone() {\n        return new this.constructor(this);\n      },\n      statics: {\n        set: set,\n        each: _each,\n        create: create,\n        define: define,\n        describe: describe,\n        clone: function clone(obj) {\n          return set(new obj.constructor(), obj);\n        },\n        isPlainObject: function isPlainObject(obj) {\n          var ctor = obj != null && obj.constructor;\n          return ctor && (ctor === Object || ctor === Base || ctor.name === 'Object');\n        },\n        pick: function pick(a, b) {\n          return a !== undefined ? a : b;\n        },\n        slice: function slice(list, begin, end) {\n          return _slice.call(list, begin, end);\n        }\n      }\n    });\n  }();\n  if (typeof module !== 'undefined') module.exports = Base;\n  Base.inject({\n    enumerable: false,\n    toString: function toString() {\n      return this._id != null ? (this._class || 'Object') + (this._name ? \" '\" + this._name + \"'\" : ' @' + this._id) : '{ ' + Base.each(this, function (value, key) {\n        if (!/^_/.test(key)) {\n          var type = typeof value;\n          this.push(key + ': ' + (type === 'number' ? Formatter.instance.number(value) : type === 'string' ? \"'\" + value + \"'\" : value));\n        }\n      }, []).join(', ') + ' }';\n    },\n    getClassName: function getClassName() {\n      return this._class || '';\n    },\n    importJSON: function importJSON(json) {\n      return Base.importJSON(json, this);\n    },\n    exportJSON: function exportJSON(options) {\n      return Base.exportJSON(this, options);\n    },\n    toJSON: function toJSON() {\n      return Base.serialize(this);\n    },\n    set: function set(props, exclude) {\n      if (props) Base.filter(this, props, exclude, this._prioritize);\n      return this;\n    }\n  }, {\n    beans: false,\n    statics: {\n      exports: {},\n      extend: function extend() {\n        var res = extend.base.apply(this, arguments),\n            name = res.prototype._class;\n        if (name && !Base.exports[name]) Base.exports[name] = res;\n        return res;\n      },\n      equals: function equals(obj1, obj2) {\n        if (obj1 === obj2) return true;\n        if (obj1 && obj1.equals) return obj1.equals(obj2);\n        if (obj2 && obj2.equals) return obj2.equals(obj1);\n\n        if (obj1 && obj2 && typeof obj1 === 'object' && typeof obj2 === 'object') {\n          if (Array.isArray(obj1) && Array.isArray(obj2)) {\n            var length = obj1.length;\n            if (length !== obj2.length) return false;\n\n            while (length--) {\n              if (!Base.equals(obj1[length], obj2[length])) return false;\n            }\n          } else {\n            var keys = Object.keys(obj1),\n                length = keys.length;\n            if (length !== Object.keys(obj2).length) return false;\n\n            while (length--) {\n              var key = keys[length];\n              if (!(obj2.hasOwnProperty(key) && Base.equals(obj1[key], obj2[key]))) return false;\n            }\n          }\n\n          return true;\n        }\n\n        return false;\n      },\n      read: function read(list, start, options, amount) {\n        if (this === Base) {\n          var value = this.peek(list, start);\n          list.__index++;\n          return value;\n        }\n\n        var proto = this.prototype,\n            readIndex = proto._readIndex,\n            begin = start || readIndex && list.__index || 0,\n            length = list.length,\n            obj = list[begin];\n        amount = amount || length - begin;\n\n        if (obj instanceof this || options && options.readNull && obj == null && amount <= 1) {\n          if (readIndex) list.__index = begin + 1;\n          return obj && options && options.clone ? obj.clone() : obj;\n        }\n\n        obj = Base.create(proto);\n        if (readIndex) obj.__read = true;\n        obj = obj.initialize.apply(obj, begin > 0 || begin + amount < length ? Base.slice(list, begin, begin + amount) : list) || obj;\n\n        if (readIndex) {\n          list.__index = begin + obj.__read;\n          var filtered = obj.__filtered;\n\n          if (filtered) {\n            list.__filtered = filtered;\n            obj.__filtered = undefined;\n          }\n\n          obj.__read = undefined;\n        }\n\n        return obj;\n      },\n      peek: function peek(list, start) {\n        return list[list.__index = start || list.__index || 0];\n      },\n      remain: function remain(list) {\n        return list.length - (list.__index || 0);\n      },\n      readList: function readList(list, start, options, amount) {\n        var res = [],\n            entry,\n            begin = start || 0,\n            end = amount ? begin + amount : list.length;\n\n        for (var i = begin; i < end; i++) {\n          res.push(Array.isArray(entry = list[i]) ? this.read(entry, 0, options) : this.read(list, i, options, 1));\n        }\n\n        return res;\n      },\n      readNamed: function readNamed(list, name, start, options, amount) {\n        var value = this.getNamed(list, name),\n            hasValue = value !== undefined;\n\n        if (hasValue) {\n          var filtered = list.__filtered;\n\n          if (!filtered) {\n            var source = this.getSource(list);\n            filtered = list.__filtered = Base.create(source);\n            filtered.__unfiltered = source;\n          }\n\n          filtered[name] = undefined;\n        }\n\n        return this.read(hasValue ? [value] : list, start, options, amount);\n      },\n      readSupported: function readSupported(list, dest) {\n        var source = this.getSource(list),\n            that = this,\n            read = false;\n\n        if (source) {\n          Object.keys(source).forEach(function (key) {\n            if (key in dest) {\n              var value = that.readNamed(list, key);\n\n              if (value !== undefined) {\n                dest[key] = value;\n              }\n\n              read = true;\n            }\n          });\n        }\n\n        return read;\n      },\n      getSource: function getSource(list) {\n        var source = list.__source;\n\n        if (source === undefined) {\n          var arg = list.length === 1 && list[0];\n          source = list.__source = arg && Base.isPlainObject(arg) ? arg : null;\n        }\n\n        return source;\n      },\n      getNamed: function getNamed(list, name) {\n        var source = this.getSource(list);\n\n        if (source) {\n          return name ? source[name] : list.__filtered || source;\n        }\n      },\n      hasNamed: function hasNamed(list, name) {\n        return !!this.getNamed(list, name);\n      },\n      filter: function filter(dest, source, exclude, prioritize) {\n        var processed;\n\n        function handleKey(key) {\n          if (!(exclude && key in exclude) && !(processed && key in processed)) {\n            var value = source[key];\n            if (value !== undefined) dest[key] = value;\n          }\n        }\n\n        if (prioritize) {\n          var keys = {};\n\n          for (var i = 0, key, l = prioritize.length; i < l; i++) {\n            if ((key = prioritize[i]) in source) {\n              handleKey(key);\n              keys[key] = true;\n            }\n          }\n\n          processed = keys;\n        }\n\n        Object.keys(source.__unfiltered || source).forEach(handleKey);\n        return dest;\n      },\n      isPlainValue: function isPlainValue(obj, asString) {\n        return Base.isPlainObject(obj) || Array.isArray(obj) || asString && typeof obj === 'string';\n      },\n      serialize: function serialize(obj, options, compact, dictionary) {\n        options = options || {};\n        var isRoot = !dictionary,\n            res;\n\n        if (isRoot) {\n          options.formatter = new Formatter(options.precision);\n          dictionary = {\n            length: 0,\n            definitions: {},\n            references: {},\n            add: function add(item, create) {\n              var id = '#' + item._id,\n                  ref = this.references[id];\n\n              if (!ref) {\n                this.length++;\n                var res = create.call(item),\n                    name = item._class;\n                if (name && res[0] !== name) res.unshift(name);\n                this.definitions[id] = res;\n                ref = this.references[id] = [id];\n              }\n\n              return ref;\n            }\n          };\n        }\n\n        if (obj && obj._serialize) {\n          res = obj._serialize(options, dictionary);\n          var name = obj._class;\n\n          if (name && !obj._compactSerialize && (isRoot || !compact) && res[0] !== name) {\n            res.unshift(name);\n          }\n        } else if (Array.isArray(obj)) {\n          res = [];\n\n          for (var i = 0, l = obj.length; i < l; i++) {\n            res[i] = Base.serialize(obj[i], options, compact, dictionary);\n          }\n        } else if (Base.isPlainObject(obj)) {\n          res = {};\n          var keys = Object.keys(obj);\n\n          for (var i = 0, l = keys.length; i < l; i++) {\n            var key = keys[i];\n            res[key] = Base.serialize(obj[key], options, compact, dictionary);\n          }\n        } else if (typeof obj === 'number') {\n          res = options.formatter.number(obj, options.precision);\n        } else {\n          res = obj;\n        }\n\n        return isRoot && dictionary.length > 0 ? [['dictionary', dictionary.definitions], res] : res;\n      },\n      deserialize: function deserialize(json, create, _data, _setDictionary, _isRoot) {\n        var res = json,\n            isFirst = !_data,\n            hasDictionary = isFirst && json && json.length && json[0][0] === 'dictionary';\n        _data = _data || {};\n\n        if (Array.isArray(json)) {\n          var type = json[0],\n              isDictionary = type === 'dictionary';\n\n          if (json.length == 1 && /^#/.test(type)) {\n            return _data.dictionary[type];\n          }\n\n          type = Base.exports[type];\n          res = [];\n\n          for (var i = type ? 1 : 0, l = json.length; i < l; i++) {\n            res.push(Base.deserialize(json[i], create, _data, isDictionary, hasDictionary));\n          }\n\n          if (type) {\n            var args = res;\n\n            if (create) {\n              res = create(type, args, isFirst || _isRoot);\n            } else {\n              res = new type(args);\n            }\n          }\n        } else if (Base.isPlainObject(json)) {\n          res = {};\n          if (_setDictionary) _data.dictionary = res;\n\n          for (var key in json) {\n            res[key] = Base.deserialize(json[key], create, _data);\n          }\n        }\n\n        return hasDictionary ? res[1] : res;\n      },\n      exportJSON: function exportJSON(obj, options) {\n        var json = Base.serialize(obj, options);\n        return options && options.asString == false ? json : JSON.stringify(json);\n      },\n      importJSON: function importJSON(json, target) {\n        return Base.deserialize(typeof json === 'string' ? JSON.parse(json) : json, function (ctor, args, isRoot) {\n          var useTarget = isRoot && target && target.constructor === ctor,\n              obj = useTarget ? target : Base.create(ctor.prototype);\n\n          if (args.length === 1 && obj instanceof Item && (useTarget || !(obj instanceof Layer))) {\n            var arg = args[0];\n\n            if (Base.isPlainObject(arg)) {\n              arg.insert = false;\n\n              if (useTarget) {\n                args = args.concat([{\n                  insert: true\n                }]);\n              }\n            }\n          }\n\n          (useTarget ? obj.set : ctor).apply(obj, args);\n          if (useTarget) target = null;\n          return obj;\n        });\n      },\n      push: function push(list, items) {\n        var itemsLength = items.length;\n\n        if (itemsLength < 4096) {\n          list.push.apply(list, items);\n        } else {\n          var startLength = list.length;\n          list.length += itemsLength;\n\n          for (var i = 0; i < itemsLength; i++) {\n            list[startLength + i] = items[i];\n          }\n        }\n\n        return list;\n      },\n      splice: function splice(list, items, index, remove) {\n        var amount = items && items.length,\n            append = index === undefined;\n        index = append ? list.length : index;\n        if (index > list.length) index = list.length;\n\n        for (var i = 0; i < amount; i++) {\n          items[i]._index = index + i;\n        }\n\n        if (append) {\n          Base.push(list, items);\n          return [];\n        } else {\n          var args = [index, remove];\n          if (items) Base.push(args, items);\n          var removed = list.splice.apply(list, args);\n\n          for (var i = 0, l = removed.length; i < l; i++) {\n            removed[i]._index = undefined;\n          }\n\n          for (var i = index + amount, l = list.length; i < l; i++) {\n            list[i]._index = i;\n          }\n\n          return removed;\n        }\n      },\n      capitalize: function capitalize(str) {\n        return str.replace(/\\b[a-z]/g, function (match) {\n          return match.toUpperCase();\n        });\n      },\n      camelize: function camelize(str) {\n        return str.replace(/-(.)/g, function (match, chr) {\n          return chr.toUpperCase();\n        });\n      },\n      hyphenate: function hyphenate(str) {\n        return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n      }\n    }\n  });\n  var Emitter = {\n    on: function on(type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.on(key, value);\n        }, this);\n      } else {\n        var types = this._eventTypes,\n            entry = types && types[type],\n            handlers = this._callbacks = this._callbacks || {};\n        handlers = handlers[type] = handlers[type] || [];\n\n        if (handlers.indexOf(func) === -1) {\n          handlers.push(func);\n          if (entry && entry.install && handlers.length === 1) entry.install.call(this, type);\n        }\n      }\n\n      return this;\n    },\n    off: function off(type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.off(key, value);\n        }, this);\n        return;\n      }\n\n      var types = this._eventTypes,\n          entry = types && types[type],\n          handlers = this._callbacks && this._callbacks[type],\n          index;\n\n      if (handlers) {\n        if (!func || (index = handlers.indexOf(func)) !== -1 && handlers.length === 1) {\n          if (entry && entry.uninstall) entry.uninstall.call(this, type);\n          delete this._callbacks[type];\n        } else if (index !== -1) {\n          handlers.splice(index, 1);\n        }\n      }\n\n      return this;\n    },\n    once: function once(type, func) {\n      return this.on(type, function handler() {\n        func.apply(this, arguments);\n        this.off(type, handler);\n      });\n    },\n    emit: function emit(type, event) {\n      var handlers = this._callbacks && this._callbacks[type];\n      if (!handlers) return false;\n      var args = Base.slice(arguments, 1),\n          setTarget = event && event.target && !event.currentTarget;\n      handlers = handlers.slice();\n      if (setTarget) event.currentTarget = this;\n\n      for (var i = 0, l = handlers.length; i < l; i++) {\n        if (handlers[i].apply(this, args) == false) {\n          if (event && event.stop) event.stop();\n          break;\n        }\n      }\n\n      if (setTarget) delete event.currentTarget;\n      return true;\n    },\n    responds: function responds(type) {\n      return !!(this._callbacks && this._callbacks[type]);\n    },\n    attach: '#on',\n    detach: '#off',\n    fire: '#emit',\n    _installEvents: function _installEvents(install) {\n      var types = this._eventTypes,\n          handlers = this._callbacks,\n          key = install ? 'install' : 'uninstall';\n\n      if (types) {\n        for (var type in handlers) {\n          if (handlers[type].length > 0) {\n            var entry = types[type],\n                func = entry && entry[key];\n            if (func) func.call(this, type);\n          }\n        }\n      }\n    },\n    statics: {\n      inject: function inject(src) {\n        var events = src._events;\n\n        if (events) {\n          var types = {};\n          Base.each(events, function (entry, key) {\n            var isString = typeof entry === 'string',\n                name = isString ? entry : key,\n                part = Base.capitalize(name),\n                type = name.substring(2).toLowerCase();\n            types[type] = isString ? {} : entry;\n            name = '_' + name;\n\n            src['get' + part] = function () {\n              return this[name];\n            };\n\n            src['set' + part] = function (func) {\n              var prev = this[name];\n              if (prev) this.off(type, prev);\n              if (func) this.on(type, func);\n              this[name] = func;\n            };\n          });\n          src._eventTypes = types;\n        }\n\n        return inject.base.apply(this, arguments);\n      }\n    }\n  };\n  var PaperScope = Base.extend({\n    _class: 'PaperScope',\n    initialize: function PaperScope() {\n      paper = this;\n      this.settings = new Base({\n        applyMatrix: true,\n        insertItems: true,\n        handleSize: 4,\n        hitTolerance: 0\n      });\n      this.project = null;\n      this.projects = [];\n      this.tools = [];\n      this._id = PaperScope._id++;\n      PaperScope._scopes[this._id] = this;\n      var proto = PaperScope.prototype;\n\n      if (!this.support) {\n        var ctx = CanvasProvider.getContext(1, 1) || {};\n        proto.support = {\n          nativeDash: 'setLineDash' in ctx || 'mozDash' in ctx,\n          nativeBlendModes: BlendMode.nativeModes\n        };\n        CanvasProvider.release(ctx);\n      }\n\n      if (!this.agent) {\n        var user = self.navigator.userAgent.toLowerCase(),\n            os = (/(darwin|win|mac|linux|freebsd|sunos)/.exec(user) || [])[0],\n            platform = os === 'darwin' ? 'mac' : os,\n            agent = proto.agent = proto.browser = {\n          platform: platform\n        };\n        if (platform) agent[platform] = true;\n        user.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\\/?\\s*([.\\d]+)(?:.*version\\/([.\\d]+))?(?:.*rv\\:v?([.\\d]+))?/g, function (match, n, v1, v2, rv) {\n          if (!agent.chrome) {\n            var v = n === 'opera' ? v2 : /^(node|trident)$/.test(n) ? rv : v1;\n            agent.version = v;\n            agent.versionNumber = parseFloat(v);\n            n = {\n              trident: 'msie',\n              jsdom: 'node'\n            }[n] || n;\n            agent.name = n;\n            agent[n] = true;\n          }\n        });\n        if (agent.chrome) delete agent.webkit;\n        if (agent.atom) delete agent.chrome;\n      }\n    },\n    version: \"0.12.4\",\n    getView: function getView() {\n      var project = this.project;\n      return project && project._view;\n    },\n    getPaper: function getPaper() {\n      return this;\n    },\n    execute: function execute(code, options) {},\n    install: function install(scope) {\n      var that = this;\n      Base.each(['project', 'view', 'tool'], function (key) {\n        Base.define(scope, key, {\n          configurable: true,\n          get: function get() {\n            return that[key];\n          }\n        });\n      });\n\n      for (var key in this) {\n        if (!/^_/.test(key) && this[key]) scope[key] = this[key];\n      }\n    },\n    setup: function setup(element) {\n      paper = this;\n      this.project = new Project(element);\n      return this;\n    },\n    createCanvas: function createCanvas(width, height) {\n      return CanvasProvider.getCanvas(width, height);\n    },\n    activate: function activate() {\n      paper = this;\n    },\n    clear: function clear() {\n      var projects = this.projects,\n          tools = this.tools;\n\n      for (var i = projects.length - 1; i >= 0; i--) {\n        projects[i].remove();\n      }\n\n      for (var i = tools.length - 1; i >= 0; i--) {\n        tools[i].remove();\n      }\n    },\n    remove: function remove() {\n      this.clear();\n      delete PaperScope._scopes[this._id];\n    },\n    statics: new function () {\n      function handleAttribute(name) {\n        name += 'Attribute';\n        return function (el, attr) {\n          return el[name](attr) || el[name]('data-paper-' + attr);\n        };\n      }\n\n      return {\n        _scopes: {},\n        _id: 0,\n        get: function get(id) {\n          return this._scopes[id] || null;\n        },\n        getAttribute: handleAttribute('get'),\n        hasAttribute: handleAttribute('has')\n      };\n    }()\n  });\n  var PaperScopeItem = Base.extend(Emitter, {\n    initialize: function initialize(activate) {\n      this._scope = paper;\n      this._index = this._scope[this._list].push(this) - 1;\n      if (activate || !this._scope[this._reference]) this.activate();\n    },\n    activate: function activate() {\n      if (!this._scope) return false;\n      var prev = this._scope[this._reference];\n      if (prev && prev !== this) prev.emit('deactivate');\n      this._scope[this._reference] = this;\n      this.emit('activate', prev);\n      return true;\n    },\n    isActive: function isActive() {\n      return this._scope[this._reference] === this;\n    },\n    remove: function remove() {\n      if (this._index == null) return false;\n      Base.splice(this._scope[this._list], null, this._index, 1);\n      if (this._scope[this._reference] == this) this._scope[this._reference] = null;\n      this._scope = null;\n      return true;\n    },\n    getView: function getView() {\n      return this._scope.getView();\n    }\n  });\n  var CollisionDetection = {\n    findItemBoundsCollisions: function findItemBoundsCollisions(items1, items2, tolerance) {\n      function getBounds(items) {\n        var bounds = new Array(items.length);\n\n        for (var i = 0; i < items.length; i++) {\n          var rect = items[i].getBounds();\n          bounds[i] = [rect.left, rect.top, rect.right, rect.bottom];\n        }\n\n        return bounds;\n      }\n\n      var bounds1 = getBounds(items1),\n          bounds2 = !items2 || items2 === items1 ? bounds1 : getBounds(items2);\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findCurveBoundsCollisions: function findCurveBoundsCollisions(curves1, curves2, tolerance, bothAxis) {\n      function getBounds(curves) {\n        var min = Math.min,\n            max = Math.max,\n            bounds = new Array(curves.length);\n\n        for (var i = 0; i < curves.length; i++) {\n          var v = curves[i];\n          bounds[i] = [min(v[0], v[2], v[4], v[6]), min(v[1], v[3], v[5], v[7]), max(v[0], v[2], v[4], v[6]), max(v[1], v[3], v[5], v[7])];\n        }\n\n        return bounds;\n      }\n\n      var bounds1 = getBounds(curves1),\n          bounds2 = !curves2 || curves2 === curves1 ? bounds1 : getBounds(curves2);\n\n      if (bothAxis) {\n        var hor = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, false, true),\n            ver = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, true, true),\n            list = [];\n\n        for (var i = 0, l = hor.length; i < l; i++) {\n          list[i] = {\n            hor: hor[i],\n            ver: ver[i]\n          };\n        }\n\n        return list;\n      }\n\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findBoundsCollisions: function findBoundsCollisions(boundsA, boundsB, tolerance, sweepVertical, onlySweepAxisCollisions) {\n      var self = !boundsB || boundsA === boundsB,\n          allBounds = self ? boundsA : boundsA.concat(boundsB),\n          lengthA = boundsA.length,\n          lengthAll = allBounds.length;\n\n      function binarySearch(indices, coord, value) {\n        var lo = 0,\n            hi = indices.length;\n\n        while (lo < hi) {\n          var mid = hi + lo >>> 1;\n\n          if (allBounds[indices[mid]][coord] < value) {\n            lo = mid + 1;\n          } else {\n            hi = mid;\n          }\n        }\n\n        return lo - 1;\n      }\n\n      var pri0 = sweepVertical ? 1 : 0,\n          pri1 = pri0 + 2,\n          sec0 = sweepVertical ? 0 : 1,\n          sec1 = sec0 + 2;\n      var allIndicesByPri0 = new Array(lengthAll);\n\n      for (var i = 0; i < lengthAll; i++) {\n        allIndicesByPri0[i] = i;\n      }\n\n      allIndicesByPri0.sort(function (i1, i2) {\n        return allBounds[i1][pri0] - allBounds[i2][pri0];\n      });\n      var activeIndicesByPri1 = [],\n          allCollisions = new Array(lengthA);\n\n      for (var i = 0; i < lengthAll; i++) {\n        var curIndex = allIndicesByPri0[i],\n            curBounds = allBounds[curIndex],\n            origIndex = self ? curIndex : curIndex - lengthA,\n            isCurrentA = curIndex < lengthA,\n            isCurrentB = self || !isCurrentA,\n            curCollisions = isCurrentA ? [] : null;\n\n        if (activeIndicesByPri1.length) {\n          var pruneCount = binarySearch(activeIndicesByPri1, pri1, curBounds[pri0] - tolerance) + 1;\n          activeIndicesByPri1.splice(0, pruneCount);\n\n          if (self && onlySweepAxisCollisions) {\n            curCollisions = curCollisions.concat(activeIndicesByPri1);\n\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j];\n              allCollisions[activeIndex].push(origIndex);\n            }\n          } else {\n            var curSec1 = curBounds[sec1],\n                curSec0 = curBounds[sec0];\n\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j],\n                  activeBounds = allBounds[activeIndex],\n                  isActiveA = activeIndex < lengthA,\n                  isActiveB = self || activeIndex >= lengthA;\n\n              if (onlySweepAxisCollisions || (isCurrentA && isActiveB || isCurrentB && isActiveA) && curSec1 >= activeBounds[sec0] - tolerance && curSec0 <= activeBounds[sec1] + tolerance) {\n                if (isCurrentA && isActiveB) {\n                  curCollisions.push(self ? activeIndex : activeIndex - lengthA);\n                }\n\n                if (isCurrentB && isActiveA) {\n                  allCollisions[activeIndex].push(origIndex);\n                }\n              }\n            }\n          }\n        }\n\n        if (isCurrentA) {\n          if (boundsA === boundsB) {\n            curCollisions.push(curIndex);\n          }\n\n          allCollisions[curIndex] = curCollisions;\n        }\n\n        if (activeIndicesByPri1.length) {\n          var curPri1 = curBounds[pri1],\n              index = binarySearch(activeIndicesByPri1, pri1, curPri1);\n          activeIndicesByPri1.splice(index + 1, 0, curIndex);\n        } else {\n          activeIndicesByPri1.push(curIndex);\n        }\n      }\n\n      for (var i = 0; i < allCollisions.length; i++) {\n        var collisions = allCollisions[i];\n\n        if (collisions) {\n          collisions.sort(function (i1, i2) {\n            return i1 - i2;\n          });\n        }\n      }\n\n      return allCollisions;\n    }\n  };\n  var Formatter = Base.extend({\n    initialize: function initialize(precision) {\n      this.precision = Base.pick(precision, 5);\n      this.multiplier = Math.pow(10, this.precision);\n    },\n    number: function number(val) {\n      return this.precision < 16 ? Math.round(val * this.multiplier) / this.multiplier : val;\n    },\n    pair: function pair(val1, val2, separator) {\n      return this.number(val1) + (separator || ',') + this.number(val2);\n    },\n    point: function point(val, separator) {\n      return this.number(val.x) + (separator || ',') + this.number(val.y);\n    },\n    size: function size(val, separator) {\n      return this.number(val.width) + (separator || ',') + this.number(val.height);\n    },\n    rectangle: function rectangle(val, separator) {\n      return this.point(val, separator) + (separator || ',') + this.size(val, separator);\n    }\n  });\n  Formatter.instance = new Formatter();\n  var Numerical = new function () {\n    var abscissas = [[0.5773502691896257645091488], [0, 0.7745966692414833770358531], [0.3399810435848562648026658, 0.8611363115940525752239465], [0, 0.5384693101056830910363144, 0.9061798459386639927976269], [0.2386191860831969086305017, 0.6612093864662645136613996, 0.9324695142031520278123016], [0, 0.4058451513773971669066064, 0.7415311855993944398638648, 0.9491079123427585245261897], [0.1834346424956498049394761, 0.5255324099163289858177390, 0.7966664774136267395915539, 0.9602898564975362316835609], [0, 0.3242534234038089290385380, 0.6133714327005903973087020, 0.8360311073266357942994298, 0.9681602395076260898355762], [0.1488743389816312108848260, 0.4333953941292471907992659, 0.6794095682990244062343274, 0.8650633666889845107320967, 0.9739065285171717200779640], [0, 0.2695431559523449723315320, 0.5190961292068118159257257, 0.7301520055740493240934163, 0.8870625997680952990751578, 0.9782286581460569928039380], [0.1252334085114689154724414, 0.3678314989981801937526915, 0.5873179542866174472967024, 0.7699026741943046870368938, 0.9041172563704748566784659, 0.9815606342467192506905491], [0, 0.2304583159551347940655281, 0.4484927510364468528779129, 0.6423493394403402206439846, 0.8015780907333099127942065, 0.9175983992229779652065478, 0.9841830547185881494728294], [0.1080549487073436620662447, 0.3191123689278897604356718, 0.5152486363581540919652907, 0.6872929048116854701480198, 0.8272013150697649931897947, 0.9284348836635735173363911, 0.9862838086968123388415973], [0, 0.2011940939974345223006283, 0.3941513470775633698972074, 0.5709721726085388475372267, 0.7244177313601700474161861, 0.8482065834104272162006483, 0.9372733924007059043077589, 0.9879925180204854284895657], [0.0950125098376374401853193, 0.2816035507792589132304605, 0.4580167776572273863424194, 0.6178762444026437484466718, 0.7554044083550030338951012, 0.8656312023878317438804679, 0.9445750230732325760779884, 0.9894009349916499325961542]];\n    var weights = [[1], [0.8888888888888888888888889, 0.5555555555555555555555556], [0.6521451548625461426269361, 0.3478548451374538573730639], [0.5688888888888888888888889, 0.4786286704993664680412915, 0.2369268850561890875142640], [0.4679139345726910473898703, 0.3607615730481386075698335, 0.1713244923791703450402961], [0.4179591836734693877551020, 0.3818300505051189449503698, 0.2797053914892766679014678, 0.1294849661688696932706114], [0.3626837833783619829651504, 0.3137066458778872873379622, 0.2223810344533744705443560, 0.1012285362903762591525314], [0.3302393550012597631645251, 0.3123470770400028400686304, 0.2606106964029354623187429, 0.1806481606948574040584720, 0.0812743883615744119718922], [0.2955242247147528701738930, 0.2692667193099963550912269, 0.2190863625159820439955349, 0.1494513491505805931457763, 0.0666713443086881375935688], [0.2729250867779006307144835, 0.2628045445102466621806889, 0.2331937645919904799185237, 0.1862902109277342514260976, 0.1255803694649046246346943, 0.0556685671161736664827537], [0.2491470458134027850005624, 0.2334925365383548087608499, 0.2031674267230659217490645, 0.1600783285433462263346525, 0.1069393259953184309602547, 0.0471753363865118271946160], [0.2325515532308739101945895, 0.2262831802628972384120902, 0.2078160475368885023125232, 0.1781459807619457382800467, 0.1388735102197872384636018, 0.0921214998377284479144218, 0.0404840047653158795200216], [0.2152638534631577901958764, 0.2051984637212956039659241, 0.1855383974779378137417166, 0.1572031671581935345696019, 0.1215185706879031846894148, 0.0801580871597602098056333, 0.0351194603317518630318329], [0.2025782419255612728806202, 0.1984314853271115764561183, 0.1861610000155622110268006, 0.1662692058169939335532009, 0.1395706779261543144478048, 0.1071592204671719350118695, 0.0703660474881081247092674, 0.0307532419961172683546284], [0.1894506104550684962853967, 0.1826034150449235888667637, 0.1691565193950025381893121, 0.1495959888165767320815017, 0.1246289712555338720524763, 0.0951585116824927848099251, 0.0622535239386478928628438, 0.0271524594117540948517806]];\n\n    var abs = Math.abs,\n        sqrt = Math.sqrt,\n        pow = Math.pow,\n        log2 = Math.log2 || function (x) {\n      return Math.log(x) * Math.LOG2E;\n    },\n        EPSILON = 1e-12,\n        MACHINE_EPSILON = 1.12e-16;\n\n    function clamp(value, min, max) {\n      return value < min ? min : value > max ? max : value;\n    }\n\n    function getDiscriminant(a, b, c) {\n      function split(v) {\n        var x = v * 134217729,\n            y = v - x,\n            hi = y + x,\n            lo = v - hi;\n        return [hi, lo];\n      }\n\n      var D = b * b - a * c,\n          E = b * b + a * c;\n\n      if (abs(D) * 3 < E) {\n        var ad = split(a),\n            bd = split(b),\n            cd = split(c),\n            p = b * b,\n            dp = bd[0] * bd[0] - p + 2 * bd[0] * bd[1] + bd[1] * bd[1],\n            q = a * c,\n            dq = ad[0] * cd[0] - q + ad[0] * cd[1] + ad[1] * cd[0] + ad[1] * cd[1];\n        D = p - q + (dp - dq);\n      }\n\n      return D;\n    }\n\n    function getNormalizationFactor() {\n      var norm = Math.max.apply(Math, arguments);\n      return norm && (norm < 1e-8 || norm > 1e8) ? pow(2, -Math.round(log2(norm))) : 0;\n    }\n\n    return {\n      EPSILON: EPSILON,\n      MACHINE_EPSILON: MACHINE_EPSILON,\n      CURVETIME_EPSILON: 1e-8,\n      GEOMETRIC_EPSILON: 1e-7,\n      TRIGONOMETRIC_EPSILON: 1e-8,\n      KAPPA: 4 * (sqrt(2) - 1) / 3,\n      isZero: function isZero(val) {\n        return val >= -EPSILON && val <= EPSILON;\n      },\n      isMachineZero: function isMachineZero(val) {\n        return val >= -MACHINE_EPSILON && val <= MACHINE_EPSILON;\n      },\n      clamp: clamp,\n      integrate: function integrate(f, a, b, n) {\n        var x = abscissas[n - 2],\n            w = weights[n - 2],\n            A = (b - a) * 0.5,\n            B = A + a,\n            i = 0,\n            m = n + 1 >> 1,\n            sum = n & 1 ? w[i++] * f(B) : 0;\n\n        while (i < m) {\n          var Ax = A * x[i];\n          sum += w[i++] * (f(B + Ax) + f(B - Ax));\n        }\n\n        return A * sum;\n      },\n      findRoot: function findRoot(f, df, x, a, b, n, tolerance) {\n        for (var i = 0; i < n; i++) {\n          var fx = f(x),\n              dx = fx / df(x),\n              nx = x - dx;\n\n          if (abs(dx) < tolerance) {\n            x = nx;\n            break;\n          }\n\n          if (fx > 0) {\n            b = x;\n            x = nx <= a ? (a + b) * 0.5 : nx;\n          } else {\n            a = x;\n            x = nx >= b ? (a + b) * 0.5 : nx;\n          }\n        }\n\n        return clamp(x, a, b);\n      },\n      solveQuadratic: function solveQuadratic(a, b, c, roots, min, max) {\n        var x1,\n            x2 = Infinity;\n\n        if (abs(a) < EPSILON) {\n          if (abs(b) < EPSILON) return abs(c) < EPSILON ? -1 : 0;\n          x1 = -c / b;\n        } else {\n          b *= -0.5;\n          var D = getDiscriminant(a, b, c);\n\n          if (D && abs(D) < MACHINE_EPSILON) {\n            var f = getNormalizationFactor(abs(a), abs(b), abs(c));\n\n            if (f) {\n              a *= f;\n              b *= f;\n              c *= f;\n              D = getDiscriminant(a, b, c);\n            }\n          }\n\n          if (D >= -MACHINE_EPSILON) {\n            var Q = D < 0 ? 0 : sqrt(D),\n                R = b + (b < 0 ? -Q : Q);\n\n            if (R === 0) {\n              x1 = c / a;\n              x2 = -x1;\n            } else {\n              x1 = R / a;\n              x2 = c / R;\n            }\n          }\n        }\n\n        var count = 0,\n            boundless = min == null,\n            minB = min - EPSILON,\n            maxB = max + EPSILON;\n        if (isFinite(x1) && (boundless || x1 > minB && x1 < maxB)) roots[count++] = boundless ? x1 : clamp(x1, min, max);\n        if (x2 !== x1 && isFinite(x2) && (boundless || x2 > minB && x2 < maxB)) roots[count++] = boundless ? x2 : clamp(x2, min, max);\n        return count;\n      },\n      solveCubic: function solveCubic(a, b, c, d, roots, min, max) {\n        var f = getNormalizationFactor(abs(a), abs(b), abs(c), abs(d)),\n            x,\n            b1,\n            c2,\n            qd,\n            q;\n\n        if (f) {\n          a *= f;\n          b *= f;\n          c *= f;\n          d *= f;\n        }\n\n        function evaluate(x0) {\n          x = x0;\n          var tmp = a * x;\n          b1 = tmp + b;\n          c2 = b1 * x + c;\n          qd = (tmp + b1) * x + c2;\n          q = c2 * x + d;\n        }\n\n        if (abs(a) < EPSILON) {\n          a = b;\n          b1 = c;\n          c2 = d;\n          x = Infinity;\n        } else if (abs(d) < EPSILON) {\n          b1 = b;\n          c2 = c;\n          x = 0;\n        } else {\n          evaluate(-(b / a) / 3);\n          var t = q / a,\n              r = pow(abs(t), 1 / 3),\n              s = t < 0 ? -1 : 1,\n              td = -qd / a,\n              rd = td > 0 ? 1.324717957244746 * Math.max(r, sqrt(td)) : r,\n              x0 = x - s * rd;\n\n          if (x0 !== x) {\n            do {\n              evaluate(x0);\n              x0 = qd === 0 ? x : x - q / qd / (1 + MACHINE_EPSILON);\n            } while (s * x0 > s * x);\n\n            if (abs(a) * x * x > abs(d / x)) {\n              c2 = -d / x;\n              b1 = (c2 - c) / x;\n            }\n          }\n        }\n\n        var count = Numerical.solveQuadratic(a, b1, c2, roots, min, max),\n            boundless = min == null;\n        if (isFinite(x) && (count === 0 || count > 0 && x !== roots[0] && x !== roots[1]) && (boundless || x > min - EPSILON && x < max + EPSILON)) roots[count++] = boundless ? x : clamp(x, min, max);\n        return count;\n      }\n    };\n  }();\n  var UID = {\n    _id: 1,\n    _pools: {},\n    get: function get(name) {\n      if (name) {\n        var pool = this._pools[name];\n        if (!pool) pool = this._pools[name] = {\n          _id: 1\n        };\n        return pool._id++;\n      } else {\n        return this._id++;\n      }\n    }\n  };\n  var Point = Base.extend({\n    _class: 'Point',\n    _readIndex: true,\n    initialize: function Point(arg0, arg1) {\n      var type = typeof arg0,\n          reading = this.__read,\n          read = 0;\n\n      if (type === 'number') {\n        var hasY = typeof arg1 === 'number';\n\n        this._set(arg0, hasY ? arg1 : arg0);\n\n        if (reading) read = hasY ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('angle' in obj) {\n          this._set(obj.length || 0, 0);\n\n          this.setAngle(obj.angle || 0);\n        } else {\n          this._set(0, 0);\n\n          read = 0;\n        }\n      }\n\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function _set(x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n    equals: function equals(point) {\n      return this === point || point && (this.x === point.x && this.y === point.y || Array.isArray(point) && this.x === point[0] && this.y === point[1]) || false;\n    },\n    clone: function clone() {\n      return new Point(this.x, this.y);\n    },\n    toString: function toString() {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ' }';\n    },\n    _serialize: function _serialize(options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y)];\n    },\n    getLength: function getLength() {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n    setLength: function setLength(length) {\n      if (this.isZero()) {\n        var angle = this._angle || 0;\n\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      } else {\n        var scale = length / this.getLength();\n        if (Numerical.isZero(scale)) this.getAngle();\n\n        this._set(this.x * scale, this.y * scale);\n      }\n    },\n    getAngle: function getAngle() {\n      return this.getAngleInRadians.apply(this, arguments) * 180 / Math.PI;\n    },\n    setAngle: function setAngle(angle) {\n      this.setAngleInRadians.call(this, angle * Math.PI / 180);\n    },\n    getAngleInDegrees: '#getAngle',\n    setAngleInDegrees: '#setAngle',\n    getAngleInRadians: function getAngleInRadians() {\n      if (!arguments.length) {\n        return this.isZero() ? this._angle || 0 : this._angle = Math.atan2(this.y, this.x);\n      } else {\n        var point = Point.read(arguments),\n            div = this.getLength() * point.getLength();\n\n        if (Numerical.isZero(div)) {\n          return NaN;\n        } else {\n          var a = this.dot(point) / div;\n          return Math.acos(a < -1 ? -1 : a > 1 ? 1 : a);\n        }\n      }\n    },\n    setAngleInRadians: function setAngleInRadians(angle) {\n      this._angle = angle;\n\n      if (!this.isZero()) {\n        var length = this.getLength();\n\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      }\n    },\n    getQuadrant: function getQuadrant() {\n      return this.x >= 0 ? this.y >= 0 ? 1 : 4 : this.y >= 0 ? 2 : 3;\n    }\n  }, {\n    beans: false,\n    getDirectedAngle: function getDirectedAngle() {\n      var point = Point.read(arguments);\n      return Math.atan2(this.cross(point), this.dot(point)) * 180 / Math.PI;\n    },\n    getDistance: function getDistance() {\n      var args = arguments,\n          point = Point.read(args),\n          x = point.x - this.x,\n          y = point.y - this.y,\n          d = x * x + y * y,\n          squared = Base.read(args);\n      return squared ? d : Math.sqrt(d);\n    },\n    normalize: function normalize(length) {\n      if (length === undefined) length = 1;\n      var current = this.getLength(),\n          scale = current !== 0 ? length / current : 0,\n          point = new Point(this.x * scale, this.y * scale);\n      if (scale >= 0) point._angle = this._angle;\n      return point;\n    },\n    rotate: function rotate(angle, center) {\n      if (angle === 0) return this.clone();\n      angle = angle * Math.PI / 180;\n      var point = center ? this.subtract(center) : this,\n          sin = Math.sin(angle),\n          cos = Math.cos(angle);\n      point = new Point(point.x * cos - point.y * sin, point.x * sin + point.y * cos);\n      return center ? point.add(center) : point;\n    },\n    transform: function transform(matrix) {\n      return matrix ? matrix._transformPoint(this) : this;\n    },\n    add: function add() {\n      var point = Point.read(arguments);\n      return new Point(this.x + point.x, this.y + point.y);\n    },\n    subtract: function subtract() {\n      var point = Point.read(arguments);\n      return new Point(this.x - point.x, this.y - point.y);\n    },\n    multiply: function multiply() {\n      var point = Point.read(arguments);\n      return new Point(this.x * point.x, this.y * point.y);\n    },\n    divide: function divide() {\n      var point = Point.read(arguments);\n      return new Point(this.x / point.x, this.y / point.y);\n    },\n    modulo: function modulo() {\n      var point = Point.read(arguments);\n      return new Point(this.x % point.x, this.y % point.y);\n    },\n    negate: function negate() {\n      return new Point(-this.x, -this.y);\n    },\n    isInside: function isInside() {\n      return _Rectangle.read(arguments).contains(this);\n    },\n    isClose: function isClose() {\n      var args = arguments,\n          point = Point.read(args),\n          tolerance = Base.read(args);\n      return this.getDistance(point) <= tolerance;\n    },\n    isCollinear: function isCollinear() {\n      var point = Point.read(arguments);\n      return Point.isCollinear(this.x, this.y, point.x, point.y);\n    },\n    isColinear: '#isCollinear',\n    isOrthogonal: function isOrthogonal() {\n      var point = Point.read(arguments);\n      return Point.isOrthogonal(this.x, this.y, point.x, point.y);\n    },\n    isZero: function isZero() {\n      var isZero = Numerical.isZero;\n      return isZero(this.x) && isZero(this.y);\n    },\n    isNaN: function (_isNaN) {\n      function isNaN() {\n        return _isNaN.apply(this, arguments);\n      }\n\n      isNaN.toString = function () {\n        return _isNaN.toString();\n      };\n\n      return isNaN;\n    }(function () {\n      return isNaN(this.x) || isNaN(this.y);\n    }),\n    isInQuadrant: function isInQuadrant(q) {\n      return this.x * (q > 1 && q < 4 ? -1 : 1) >= 0 && this.y * (q > 2 ? -1 : 1) >= 0;\n    },\n    dot: function dot() {\n      var point = Point.read(arguments);\n      return this.x * point.x + this.y * point.y;\n    },\n    cross: function cross() {\n      var point = Point.read(arguments);\n      return this.x * point.y - this.y * point.x;\n    },\n    project: function project() {\n      var point = Point.read(arguments),\n          scale = point.isZero() ? 0 : this.dot(point) / point.dot(point);\n      return new Point(point.x * scale, point.y * scale);\n    },\n    statics: {\n      min: function min() {\n        var args = arguments,\n            point1 = Point.read(args),\n            point2 = Point.read(args);\n        return new Point(Math.min(point1.x, point2.x), Math.min(point1.y, point2.y));\n      },\n      max: function max() {\n        var args = arguments,\n            point1 = Point.read(args),\n            point2 = Point.read(args);\n        return new Point(Math.max(point1.x, point2.x), Math.max(point1.y, point2.y));\n      },\n      random: function random() {\n        return new Point(Math.random(), Math.random());\n      },\n      isCollinear: function isCollinear(x1, y1, x2, y2) {\n        return Math.abs(x1 * y2 - y1 * x2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      },\n      isOrthogonal: function isOrthogonal(x1, y1, x2, y2) {\n        return Math.abs(x1 * x2 + y1 * y2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n\n    this[key] = function () {\n      return new Point(op(this.x), op(this.y));\n    };\n  }, {}));\n  var LinkedPoint = Point.extend({\n    initialize: function Point(x, y, owner, setter) {\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function _set(x, y, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getX: function getX() {\n      return this._x;\n    },\n    setX: function setX(x) {\n      this._x = x;\n\n      this._owner[this._setter](this);\n    },\n    getY: function getY() {\n      return this._y;\n    },\n    setY: function setY(y) {\n      this._y = y;\n\n      this._owner[this._setter](this);\n    },\n    isSelected: function isSelected() {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function setSelected(selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function _getSelection() {\n      return this._setter === 'setPosition' ? 4 : 0;\n    }\n  });\n  var Size = Base.extend({\n    _class: 'Size',\n    _readIndex: true,\n    initialize: function Size(arg0, arg1) {\n      var type = typeof arg0,\n          reading = this.__read,\n          read = 0;\n\n      if (type === 'number') {\n        var hasHeight = typeof arg1 === 'number';\n\n        this._set(arg0, hasHeight ? arg1 : arg0);\n\n        if (reading) read = hasHeight ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else {\n          this._set(0, 0);\n\n          read = 0;\n        }\n      }\n\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function _set(width, height) {\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    equals: function equals(size) {\n      return size === this || size && (this.width === size.width && this.height === size.height || Array.isArray(size) && this.width === size[0] && this.height === size[1]) || false;\n    },\n    clone: function clone() {\n      return new Size(this.width, this.height);\n    },\n    toString: function toString() {\n      var f = Formatter.instance;\n      return '{ width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function _serialize(options) {\n      var f = options.formatter;\n      return [f.number(this.width), f.number(this.height)];\n    },\n    add: function add() {\n      var size = Size.read(arguments);\n      return new Size(this.width + size.width, this.height + size.height);\n    },\n    subtract: function subtract() {\n      var size = Size.read(arguments);\n      return new Size(this.width - size.width, this.height - size.height);\n    },\n    multiply: function multiply() {\n      var size = Size.read(arguments);\n      return new Size(this.width * size.width, this.height * size.height);\n    },\n    divide: function divide() {\n      var size = Size.read(arguments);\n      return new Size(this.width / size.width, this.height / size.height);\n    },\n    modulo: function modulo() {\n      var size = Size.read(arguments);\n      return new Size(this.width % size.width, this.height % size.height);\n    },\n    negate: function negate() {\n      return new Size(-this.width, -this.height);\n    },\n    isZero: function isZero() {\n      var isZero = Numerical.isZero;\n      return isZero(this.width) && isZero(this.height);\n    },\n    isNaN: function (_isNaN2) {\n      function isNaN() {\n        return _isNaN2.apply(this, arguments);\n      }\n\n      isNaN.toString = function () {\n        return _isNaN2.toString();\n      };\n\n      return isNaN;\n    }(function () {\n      return isNaN(this.width) || isNaN(this.height);\n    }),\n    statics: {\n      min: function min(size1, size2) {\n        return new Size(Math.min(size1.width, size2.width), Math.min(size1.height, size2.height));\n      },\n      max: function max(size1, size2) {\n        return new Size(Math.max(size1.width, size2.width), Math.max(size1.height, size2.height));\n      },\n      random: function random() {\n        return new Size(Math.random(), Math.random());\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n\n    this[key] = function () {\n      return new Size(op(this.width), op(this.height));\n    };\n  }, {}));\n  var LinkedSize = Size.extend({\n    initialize: function Size(width, height, owner, setter) {\n      this._width = width;\n      this._height = height;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function _set(width, height, _dontNotify) {\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getWidth: function getWidth() {\n      return this._width;\n    },\n    setWidth: function setWidth(width) {\n      this._width = width;\n\n      this._owner[this._setter](this);\n    },\n    getHeight: function getHeight() {\n      return this._height;\n    },\n    setHeight: function setHeight(height) {\n      this._height = height;\n\n      this._owner[this._setter](this);\n    }\n  });\n\n  var _Rectangle = Base.extend({\n    _class: 'Rectangle',\n    _readIndex: true,\n    beans: true,\n    initialize: function Rectangle(arg0, arg1, arg2, arg3) {\n      var args = arguments,\n          type = typeof arg0,\n          read;\n\n      if (type === 'number') {\n        this._set(arg0, arg1, arg2, arg3);\n\n        read = 4;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0, 0, 0);\n\n        read = arg0 === null ? 1 : 0;\n      } else if (args.length === 1) {\n        if (Array.isArray(arg0)) {\n          this._set.apply(this, arg0);\n\n          read = 1;\n        } else if (arg0.x !== undefined || arg0.width !== undefined) {\n          this._set(arg0.x || 0, arg0.y || 0, arg0.width || 0, arg0.height || 0);\n\n          read = 1;\n        } else if (arg0.from === undefined && arg0.to === undefined) {\n          this._set(0, 0, 0, 0);\n\n          if (Base.readSupported(args, this)) {\n            read = 1;\n          }\n        }\n      }\n\n      if (read === undefined) {\n        var frm = Point.readNamed(args, 'from'),\n            next = Base.peek(args),\n            x = frm.x,\n            y = frm.y,\n            width,\n            height;\n\n        if (next && next.x !== undefined || Base.hasNamed(args, 'to')) {\n          var to = Point.readNamed(args, 'to');\n          width = to.x - x;\n          height = to.y - y;\n\n          if (width < 0) {\n            x = to.x;\n            width = -width;\n          }\n\n          if (height < 0) {\n            y = to.y;\n            height = -height;\n          }\n        } else {\n          var size = Size.read(args);\n          width = size.width;\n          height = size.height;\n        }\n\n        this._set(x, y, width, height);\n\n        read = args.__index;\n      }\n\n      var filtered = args.__filtered;\n      if (filtered) this.__filtered = filtered;\n      if (this.__read) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function _set(x, y, width, height) {\n      this.x = x;\n      this.y = y;\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    clone: function clone() {\n      return new _Rectangle(this.x, this.y, this.width, this.height);\n    },\n    equals: function equals(rect) {\n      var rt = Base.isPlainValue(rect) ? _Rectangle.read(arguments) : rect;\n      return rt === this || rt && this.x === rt.x && this.y === rt.y && this.width === rt.width && this.height === rt.height || false;\n    },\n    toString: function toString() {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ', width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function _serialize(options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y), f.number(this.width), f.number(this.height)];\n    },\n    getPoint: function getPoint(_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.x, this.y, this, 'setPoint');\n    },\n    setPoint: function setPoint() {\n      var point = Point.read(arguments);\n      this.x = point.x;\n      this.y = point.y;\n    },\n    getSize: function getSize(_dontLink) {\n      var ctor = _dontLink ? Size : LinkedSize;\n      return new ctor(this.width, this.height, this, 'setSize');\n    },\n    _fw: 1,\n    _fh: 1,\n    setSize: function setSize() {\n      var size = Size.read(arguments),\n          sx = this._sx,\n          sy = this._sy,\n          w = size.width,\n          h = size.height;\n\n      if (sx) {\n        this.x += (this.width - w) * sx;\n      }\n\n      if (sy) {\n        this.y += (this.height - h) * sy;\n      }\n\n      this.width = w;\n      this.height = h;\n      this._fw = this._fh = 1;\n    },\n    getLeft: function getLeft() {\n      return this.x;\n    },\n    setLeft: function setLeft(left) {\n      if (!this._fw) {\n        var amount = left - this.x;\n        this.width -= this._sx === 0.5 ? amount * 2 : amount;\n      }\n\n      this.x = left;\n      this._sx = this._fw = 0;\n    },\n    getTop: function getTop() {\n      return this.y;\n    },\n    setTop: function setTop(top) {\n      if (!this._fh) {\n        var amount = top - this.y;\n        this.height -= this._sy === 0.5 ? amount * 2 : amount;\n      }\n\n      this.y = top;\n      this._sy = this._fh = 0;\n    },\n    getRight: function getRight() {\n      return this.x + this.width;\n    },\n    setRight: function setRight(right) {\n      if (!this._fw) {\n        var amount = right - this.x;\n        this.width = this._sx === 0.5 ? amount * 2 : amount;\n      }\n\n      this.x = right - this.width;\n      this._sx = 1;\n      this._fw = 0;\n    },\n    getBottom: function getBottom() {\n      return this.y + this.height;\n    },\n    setBottom: function setBottom(bottom) {\n      if (!this._fh) {\n        var amount = bottom - this.y;\n        this.height = this._sy === 0.5 ? amount * 2 : amount;\n      }\n\n      this.y = bottom - this.height;\n      this._sy = 1;\n      this._fh = 0;\n    },\n    getCenterX: function getCenterX() {\n      return this.x + this.width / 2;\n    },\n    setCenterX: function setCenterX(x) {\n      if (this._fw || this._sx === 0.5) {\n        this.x = x - this.width / 2;\n      } else {\n        if (this._sx) {\n          this.x += (x - this.x) * 2 * this._sx;\n        }\n\n        this.width = (x - this.x) * 2;\n      }\n\n      this._sx = 0.5;\n      this._fw = 0;\n    },\n    getCenterY: function getCenterY() {\n      return this.y + this.height / 2;\n    },\n    setCenterY: function setCenterY(y) {\n      if (this._fh || this._sy === 0.5) {\n        this.y = y - this.height / 2;\n      } else {\n        if (this._sy) {\n          this.y += (y - this.y) * 2 * this._sy;\n        }\n\n        this.height = (y - this.y) * 2;\n      }\n\n      this._sy = 0.5;\n      this._fh = 0;\n    },\n    getCenter: function getCenter(_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.getCenterX(), this.getCenterY(), this, 'setCenter');\n    },\n    setCenter: function setCenter() {\n      var point = Point.read(arguments);\n      this.setCenterX(point.x);\n      this.setCenterY(point.y);\n      return this;\n    },\n    getArea: function getArea() {\n      return this.width * this.height;\n    },\n    isEmpty: function isEmpty() {\n      return this.width === 0 || this.height === 0;\n    },\n    contains: function contains(arg) {\n      return arg && arg.width !== undefined || (Array.isArray(arg) ? arg : arguments).length === 4 ? this._containsRectangle(_Rectangle.read(arguments)) : this._containsPoint(Point.read(arguments));\n    },\n    _containsPoint: function _containsPoint(point) {\n      var x = point.x,\n          y = point.y;\n      return x >= this.x && y >= this.y && x <= this.x + this.width && y <= this.y + this.height;\n    },\n    _containsRectangle: function _containsRectangle(rect) {\n      var x = rect.x,\n          y = rect.y;\n      return x >= this.x && y >= this.y && x + rect.width <= this.x + this.width && y + rect.height <= this.y + this.height;\n    },\n    intersects: function intersects() {\n      var rect = _Rectangle.read(arguments),\n          epsilon = Base.read(arguments) || 0;\n\n      return rect.x + rect.width > this.x - epsilon && rect.y + rect.height > this.y - epsilon && rect.x < this.x + this.width + epsilon && rect.y < this.y + this.height + epsilon;\n    },\n    intersect: function intersect() {\n      var rect = _Rectangle.read(arguments),\n          x1 = Math.max(this.x, rect.x),\n          y1 = Math.max(this.y, rect.y),\n          x2 = Math.min(this.x + this.width, rect.x + rect.width),\n          y2 = Math.min(this.y + this.height, rect.y + rect.height);\n\n      return new _Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    unite: function unite() {\n      var rect = _Rectangle.read(arguments),\n          x1 = Math.min(this.x, rect.x),\n          y1 = Math.min(this.y, rect.y),\n          x2 = Math.max(this.x + this.width, rect.x + rect.width),\n          y2 = Math.max(this.y + this.height, rect.y + rect.height);\n\n      return new _Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    include: function include() {\n      var point = Point.read(arguments);\n      var x1 = Math.min(this.x, point.x),\n          y1 = Math.min(this.y, point.y),\n          x2 = Math.max(this.x + this.width, point.x),\n          y2 = Math.max(this.y + this.height, point.y);\n      return new _Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    expand: function expand() {\n      var amount = Size.read(arguments),\n          hor = amount.width,\n          ver = amount.height;\n      return new _Rectangle(this.x - hor / 2, this.y - ver / 2, this.width + hor, this.height + ver);\n    },\n    scale: function scale(hor, ver) {\n      return this.expand(this.width * hor - this.width, this.height * (ver === undefined ? hor : ver) - this.height);\n    }\n  }, Base.each([['Top', 'Left'], ['Top', 'Right'], ['Bottom', 'Left'], ['Bottom', 'Right'], ['Left', 'Center'], ['Top', 'Center'], ['Right', 'Center'], ['Bottom', 'Center']], function (parts, index) {\n    var part = parts.join(''),\n        xFirst = /^[RL]/.test(part);\n    if (index >= 4) parts[1] += xFirst ? 'Y' : 'X';\n    var x = parts[xFirst ? 0 : 1],\n        y = parts[xFirst ? 1 : 0],\n        getX = 'get' + x,\n        getY = 'get' + y,\n        setX = 'set' + x,\n        setY = 'set' + y,\n        get = 'get' + part,\n        set = 'set' + part;\n\n    this[get] = function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this[getX](), this[getY](), this, set);\n    };\n\n    this[set] = function () {\n      var point = Point.read(arguments);\n      this[setX](point.x);\n      this[setY](point.y);\n    };\n  }, {\n    beans: true\n  }));\n\n  var LinkedRectangle = _Rectangle.extend({\n    initialize: function Rectangle(x, y, width, height, owner, setter) {\n      this._set(x, y, width, height, true);\n\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function _set(x, y, width, height, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    }\n  }, new function () {\n    var proto = _Rectangle.prototype;\n    return Base.each(['x', 'y', 'width', 'height'], function (key) {\n      var part = Base.capitalize(key),\n          internal = '_' + key;\n\n      this['get' + part] = function () {\n        return this[internal];\n      };\n\n      this['set' + part] = function (value) {\n        this[internal] = value;\n        if (!this._dontNotify) this._owner[this._setter](this);\n      };\n    }, Base.each(['Point', 'Size', 'Center', 'Left', 'Top', 'Right', 'Bottom', 'CenterX', 'CenterY', 'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'], function (key) {\n      var name = 'set' + key;\n\n      this[name] = function () {\n        this._dontNotify = true;\n        proto[name].apply(this, arguments);\n        this._dontNotify = false;\n\n        this._owner[this._setter](this);\n      };\n    }, {\n      isSelected: function isSelected() {\n        return !!(this._owner._selection & 2);\n      },\n      setSelected: function setSelected(selected) {\n        var owner = this._owner;\n\n        if (owner._changeSelection) {\n          owner._changeSelection(2, selected);\n        }\n      }\n    }));\n  }());\n\n  var Matrix = Base.extend({\n    _class: 'Matrix',\n    initialize: function Matrix(arg, _dontNotify) {\n      var args = arguments,\n          count = args.length,\n          ok = true;\n\n      if (count >= 6) {\n        this._set.apply(this, args);\n      } else if (count === 1 || count === 2) {\n        if (arg instanceof Matrix) {\n          this._set(arg._a, arg._b, arg._c, arg._d, arg._tx, arg._ty, _dontNotify);\n        } else if (Array.isArray(arg)) {\n          this._set.apply(this, _dontNotify ? arg.concat([_dontNotify]) : arg);\n        } else {\n          ok = false;\n        }\n      } else if (!count) {\n        this.reset();\n      } else {\n        ok = false;\n      }\n\n      if (!ok) {\n        throw new Error('Unsupported matrix parameters');\n      }\n\n      return this;\n    },\n    set: '#initialize',\n    _set: function _set(a, b, c, d, tx, ty, _dontNotify) {\n      this._a = a;\n      this._b = b;\n      this._c = c;\n      this._d = d;\n      this._tx = tx;\n      this._ty = ty;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    _serialize: function _serialize(options, dictionary) {\n      return Base.serialize(this.getValues(), options, true, dictionary);\n    },\n    _changed: function _changed() {\n      var owner = this._owner;\n\n      if (owner) {\n        if (owner._applyMatrix) {\n          owner.transform(null, true);\n        } else {\n          owner._changed(25);\n        }\n      }\n    },\n    clone: function clone() {\n      return new Matrix(this._a, this._b, this._c, this._d, this._tx, this._ty);\n    },\n    equals: function equals(mx) {\n      return mx === this || mx && this._a === mx._a && this._b === mx._b && this._c === mx._c && this._d === mx._d && this._tx === mx._tx && this._ty === mx._ty;\n    },\n    toString: function toString() {\n      var f = Formatter.instance;\n      return '[[' + [f.number(this._a), f.number(this._c), f.number(this._tx)].join(', ') + '], [' + [f.number(this._b), f.number(this._d), f.number(this._ty)].join(', ') + ']]';\n    },\n    reset: function reset(_dontNotify) {\n      this._a = this._d = 1;\n      this._b = this._c = this._tx = this._ty = 0;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    apply: function apply(recursively, _setApplyMatrix) {\n      var owner = this._owner;\n\n      if (owner) {\n        owner.transform(null, Base.pick(recursively, true), _setApplyMatrix);\n        return this.isIdentity();\n      }\n\n      return false;\n    },\n    translate: function translate() {\n      var point = Point.read(arguments),\n          x = point.x,\n          y = point.y;\n      this._tx += x * this._a + y * this._c;\n      this._ty += x * this._b + y * this._d;\n\n      this._changed();\n\n      return this;\n    },\n    scale: function scale() {\n      var args = arguments,\n          scale = Point.read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      if (center) this.translate(center);\n      this._a *= scale.x;\n      this._b *= scale.x;\n      this._c *= scale.y;\n      this._d *= scale.y;\n      if (center) this.translate(center.negate());\n\n      this._changed();\n\n      return this;\n    },\n    rotate: function rotate(angle) {\n      angle *= Math.PI / 180;\n      var center = Point.read(arguments, 1),\n          x = center.x,\n          y = center.y,\n          cos = Math.cos(angle),\n          sin = Math.sin(angle),\n          tx = x - x * cos + y * sin,\n          ty = y - x * sin - y * cos,\n          a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d;\n      this._a = cos * a + sin * c;\n      this._b = cos * b + sin * d;\n      this._c = -sin * a + cos * c;\n      this._d = -sin * b + cos * d;\n      this._tx += tx * a + ty * c;\n      this._ty += tx * b + ty * d;\n\n      this._changed();\n\n      return this;\n    },\n    shear: function shear() {\n      var args = arguments,\n          shear = Point.read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      if (center) this.translate(center);\n      var a = this._a,\n          b = this._b;\n      this._a += shear.y * this._c;\n      this._b += shear.y * this._d;\n      this._c += shear.x * a;\n      this._d += shear.x * b;\n      if (center) this.translate(center.negate());\n\n      this._changed();\n\n      return this;\n    },\n    skew: function skew() {\n      var args = arguments,\n          skew = Point.read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      }),\n          toRadians = Math.PI / 180,\n          shear = new Point(Math.tan(skew.x * toRadians), Math.tan(skew.y * toRadians));\n      return this.shear(shear, center);\n    },\n    append: function append(mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n            b1 = this._b,\n            c1 = this._c,\n            d1 = this._d,\n            a2 = mx._a,\n            b2 = mx._c,\n            c2 = mx._b,\n            d2 = mx._d,\n            tx2 = mx._tx,\n            ty2 = mx._ty;\n        this._a = a2 * a1 + c2 * c1;\n        this._c = b2 * a1 + d2 * c1;\n        this._b = a2 * b1 + c2 * d1;\n        this._d = b2 * b1 + d2 * d1;\n        this._tx += tx2 * a1 + ty2 * c1;\n        this._ty += tx2 * b1 + ty2 * d1;\n        if (!_dontNotify) this._changed();\n      }\n\n      return this;\n    },\n    prepend: function prepend(mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n            b1 = this._b,\n            c1 = this._c,\n            d1 = this._d,\n            tx1 = this._tx,\n            ty1 = this._ty,\n            a2 = mx._a,\n            b2 = mx._c,\n            c2 = mx._b,\n            d2 = mx._d,\n            tx2 = mx._tx,\n            ty2 = mx._ty;\n        this._a = a2 * a1 + b2 * b1;\n        this._c = a2 * c1 + b2 * d1;\n        this._b = c2 * a1 + d2 * b1;\n        this._d = c2 * c1 + d2 * d1;\n        this._tx = a2 * tx1 + b2 * ty1 + tx2;\n        this._ty = c2 * tx1 + d2 * ty1 + ty2;\n        if (!_dontNotify) this._changed();\n      }\n\n      return this;\n    },\n    appended: function appended(mx) {\n      return this.clone().append(mx);\n    },\n    prepended: function prepended(mx) {\n      return this.clone().prepend(mx);\n    },\n    invert: function invert() {\n      var a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d,\n          tx = this._tx,\n          ty = this._ty,\n          det = a * d - b * c,\n          res = null;\n\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        this._a = d / det;\n        this._b = -b / det;\n        this._c = -c / det;\n        this._d = a / det;\n        this._tx = (c * ty - d * tx) / det;\n        this._ty = (b * tx - a * ty) / det;\n        res = this;\n      }\n\n      return res;\n    },\n    inverted: function inverted() {\n      return this.clone().invert();\n    },\n    concatenate: '#append',\n    preConcatenate: '#prepend',\n    chain: '#appended',\n    _shiftless: function _shiftless() {\n      return new Matrix(this._a, this._b, this._c, this._d, 0, 0);\n    },\n    _orNullIfIdentity: function _orNullIfIdentity() {\n      return this.isIdentity() ? null : this;\n    },\n    isIdentity: function isIdentity() {\n      return this._a === 1 && this._b === 0 && this._c === 0 && this._d === 1 && this._tx === 0 && this._ty === 0;\n    },\n    isInvertible: function isInvertible() {\n      var det = this._a * this._d - this._c * this._b;\n      return det && !isNaN(det) && isFinite(this._tx) && isFinite(this._ty);\n    },\n    isSingular: function isSingular() {\n      return !this.isInvertible();\n    },\n    transform: function transform(src, dst, count) {\n      return arguments.length < 3 ? this._transformPoint(Point.read(arguments)) : this._transformCoordinates(src, dst, count);\n    },\n    _transformPoint: function _transformPoint(point, dest, _dontNotify) {\n      var x = point.x,\n          y = point.y;\n      if (!dest) dest = new Point();\n      return dest._set(x * this._a + y * this._c + this._tx, x * this._b + y * this._d + this._ty, _dontNotify);\n    },\n    _transformCoordinates: function _transformCoordinates(src, dst, count) {\n      for (var i = 0, max = 2 * count; i < max; i += 2) {\n        var x = src[i],\n            y = src[i + 1];\n        dst[i] = x * this._a + y * this._c + this._tx;\n        dst[i + 1] = x * this._b + y * this._d + this._ty;\n      }\n\n      return dst;\n    },\n    _transformCorners: function _transformCorners(rect) {\n      var x1 = rect.x,\n          y1 = rect.y,\n          x2 = x1 + rect.width,\n          y2 = y1 + rect.height,\n          coords = [x1, y1, x2, y1, x2, y2, x1, y2];\n      return this._transformCoordinates(coords, coords, 4);\n    },\n    _transformBounds: function _transformBounds(bounds, dest, _dontNotify) {\n      var coords = this._transformCorners(bounds),\n          min = coords.slice(0, 2),\n          max = min.slice();\n\n      for (var i = 2; i < 8; i++) {\n        var val = coords[i],\n            j = i & 1;\n\n        if (val < min[j]) {\n          min[j] = val;\n        } else if (val > max[j]) {\n          max[j] = val;\n        }\n      }\n\n      if (!dest) dest = new _Rectangle();\n      return dest._set(min[0], min[1], max[0] - min[0], max[1] - min[1], _dontNotify);\n    },\n    inverseTransform: function inverseTransform() {\n      return this._inverseTransform(Point.read(arguments));\n    },\n    _inverseTransform: function _inverseTransform(point, dest, _dontNotify) {\n      var a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d,\n          tx = this._tx,\n          ty = this._ty,\n          det = a * d - b * c,\n          res = null;\n\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        var x = point.x - this._tx,\n            y = point.y - this._ty;\n        if (!dest) dest = new Point();\n        res = dest._set((x * d - y * c) / det, (y * a - x * b) / det, _dontNotify);\n      }\n\n      return res;\n    },\n    decompose: function decompose() {\n      var a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d,\n          det = a * d - b * c,\n          sqrt = Math.sqrt,\n          atan2 = Math.atan2,\n          degrees = 180 / Math.PI,\n          rotate,\n          scale,\n          skew;\n\n      if (a !== 0 || b !== 0) {\n        var r = sqrt(a * a + b * b);\n        rotate = Math.acos(a / r) * (b > 0 ? 1 : -1);\n        scale = [r, det / r];\n        skew = [atan2(a * c + b * d, r * r), 0];\n      } else if (c !== 0 || d !== 0) {\n        var s = sqrt(c * c + d * d);\n        rotate = Math.asin(c / s) * (d > 0 ? 1 : -1);\n        scale = [det / s, s];\n        skew = [0, atan2(a * c + b * d, s * s)];\n      } else {\n        rotate = 0;\n        skew = scale = [0, 0];\n      }\n\n      return {\n        translation: this.getTranslation(),\n        rotation: rotate * degrees,\n        scaling: new Point(scale),\n        skewing: new Point(skew[0] * degrees, skew[1] * degrees)\n      };\n    },\n    getValues: function getValues() {\n      return [this._a, this._b, this._c, this._d, this._tx, this._ty];\n    },\n    getTranslation: function getTranslation() {\n      return new Point(this._tx, this._ty);\n    },\n    getScaling: function getScaling() {\n      return this.decompose().scaling;\n    },\n    getRotation: function getRotation() {\n      return this.decompose().rotation;\n    },\n    applyToContext: function applyToContext(ctx) {\n      if (!this.isIdentity()) {\n        ctx.transform(this._a, this._b, this._c, this._d, this._tx, this._ty);\n      }\n    }\n  }, Base.each(['a', 'b', 'c', 'd', 'tx', 'ty'], function (key) {\n    var part = Base.capitalize(key),\n        prop = '_' + key;\n\n    this['get' + part] = function () {\n      return this[prop];\n    };\n\n    this['set' + part] = function (value) {\n      this[prop] = value;\n\n      this._changed();\n    };\n  }, {}));\n  var Line = Base.extend({\n    _class: 'Line',\n    initialize: function Line(arg0, arg1, arg2, arg3, arg4) {\n      var asVector = false;\n\n      if (arguments.length >= 4) {\n        this._px = arg0;\n        this._py = arg1;\n        this._vx = arg2;\n        this._vy = arg3;\n        asVector = arg4;\n      } else {\n        this._px = arg0.x;\n        this._py = arg0.y;\n        this._vx = arg1.x;\n        this._vy = arg1.y;\n        asVector = arg2;\n      }\n\n      if (!asVector) {\n        this._vx -= this._px;\n        this._vy -= this._py;\n      }\n    },\n    getPoint: function getPoint() {\n      return new Point(this._px, this._py);\n    },\n    getVector: function getVector() {\n      return new Point(this._vx, this._vy);\n    },\n    getLength: function getLength() {\n      return this.getVector().getLength();\n    },\n    intersect: function intersect(line, isInfinite) {\n      return Line.intersect(this._px, this._py, this._vx, this._vy, line._px, line._py, line._vx, line._vy, true, isInfinite);\n    },\n    getSide: function getSide(point, isInfinite) {\n      return Line.getSide(this._px, this._py, this._vx, this._vy, point.x, point.y, true, isInfinite);\n    },\n    getDistance: function getDistance(point) {\n      return Math.abs(this.getSignedDistance(point));\n    },\n    getSignedDistance: function getSignedDistance(point) {\n      return Line.getSignedDistance(this._px, this._py, this._vx, this._vy, point.x, point.y, true);\n    },\n    isCollinear: function isCollinear(line) {\n      return Point.isCollinear(this._vx, this._vy, line._vx, line._vy);\n    },\n    isOrthogonal: function isOrthogonal(line) {\n      return Point.isOrthogonal(this._vx, this._vy, line._vx, line._vy);\n    },\n    statics: {\n      intersect: function intersect(p1x, p1y, v1x, v1y, p2x, p2y, v2x, v2y, asVector, isInfinite) {\n        if (!asVector) {\n          v1x -= p1x;\n          v1y -= p1y;\n          v2x -= p2x;\n          v2y -= p2y;\n        }\n\n        var cross = v1x * v2y - v1y * v2x;\n\n        if (!Numerical.isMachineZero(cross)) {\n          var dx = p1x - p2x,\n              dy = p1y - p2y,\n              u1 = (v2x * dy - v2y * dx) / cross,\n              u2 = (v1x * dy - v1y * dx) / cross,\n              epsilon = 1e-12,\n              uMin = -epsilon,\n              uMax = 1 + epsilon;\n\n          if (isInfinite || uMin < u1 && u1 < uMax && uMin < u2 && u2 < uMax) {\n            if (!isInfinite) {\n              u1 = u1 <= 0 ? 0 : u1 >= 1 ? 1 : u1;\n            }\n\n            return new Point(p1x + u1 * v1x, p1y + u1 * v1y);\n          }\n        }\n      },\n      getSide: function getSide(px, py, vx, vy, x, y, asVector, isInfinite) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n\n        var v2x = x - px,\n            v2y = y - py,\n            ccw = v2x * vy - v2y * vx;\n\n        if (!isInfinite && Numerical.isMachineZero(ccw)) {\n          ccw = (v2x * vx + v2x * vx) / (vx * vx + vy * vy);\n          if (ccw >= 0 && ccw <= 1) ccw = 0;\n        }\n\n        return ccw < 0 ? -1 : ccw > 0 ? 1 : 0;\n      },\n      getSignedDistance: function getSignedDistance(px, py, vx, vy, x, y, asVector) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n\n        return vx === 0 ? vy > 0 ? x - px : px - x : vy === 0 ? vx < 0 ? y - py : py - y : ((x - px) * vy - (y - py) * vx) / (vy > vx ? vy * Math.sqrt(1 + vx * vx / (vy * vy)) : vx * Math.sqrt(1 + vy * vy / (vx * vx)));\n      },\n      getDistance: function getDistance(px, py, vx, vy, x, y, asVector) {\n        return Math.abs(Line.getSignedDistance(px, py, vx, vy, x, y, asVector));\n      }\n    }\n  });\n  var Project = PaperScopeItem.extend({\n    _class: 'Project',\n    _list: 'projects',\n    _reference: 'project',\n    _compactSerialize: true,\n    initialize: function Project(element) {\n      PaperScopeItem.call(this, true);\n      this._children = [];\n      this._namedChildren = {};\n      this._activeLayer = null;\n      this._currentStyle = new Style(null, null, this);\n      this._view = View.create(this, element || CanvasProvider.getCanvas(1, 1));\n      this._selectionItems = {};\n      this._selectionCount = 0;\n      this._updateVersion = 0;\n    },\n    _serialize: function _serialize(options, dictionary) {\n      return Base.serialize(this._children, options, true, dictionary);\n    },\n    _changed: function _changed(flags, item) {\n      if (flags & 1) {\n        var view = this._view;\n\n        if (view) {\n          view._needsUpdate = true;\n          if (!view._requested && view._autoUpdate) view.requestUpdate();\n        }\n      }\n\n      var changes = this._changes;\n\n      if (changes && item) {\n        var changesById = this._changesById,\n            id = item._id,\n            entry = changesById[id];\n\n        if (entry) {\n          entry.flags |= flags;\n        } else {\n          changes.push(changesById[id] = {\n            item: item,\n            flags: flags\n          });\n        }\n      }\n    },\n    clear: function clear() {\n      var children = this._children;\n\n      for (var i = children.length - 1; i >= 0; i--) {\n        children[i].remove();\n      }\n    },\n    isEmpty: function isEmpty() {\n      return !this._children.length;\n    },\n    remove: function remove() {\n      if (!remove.base.call(this)) return false;\n      if (this._view) this._view.remove();\n      return true;\n    },\n    getView: function getView() {\n      return this._view;\n    },\n    getCurrentStyle: function getCurrentStyle() {\n      return this._currentStyle;\n    },\n    setCurrentStyle: function setCurrentStyle(style) {\n      this._currentStyle.set(style);\n    },\n    getIndex: function getIndex() {\n      return this._index;\n    },\n    getOptions: function getOptions() {\n      return this._scope.settings;\n    },\n    getLayers: function getLayers() {\n      return this._children;\n    },\n    getActiveLayer: function getActiveLayer() {\n      return this._activeLayer || new Layer({\n        project: this,\n        insert: true\n      });\n    },\n    getSymbolDefinitions: function getSymbolDefinitions() {\n      var definitions = [],\n          ids = {};\n      this.getItems({\n        \"class\": SymbolItem,\n        match: function match(item) {\n          var definition = item._definition,\n              id = definition._id;\n\n          if (!ids[id]) {\n            ids[id] = true;\n            definitions.push(definition);\n          }\n\n          return false;\n        }\n      });\n      return definitions;\n    },\n    getSymbols: 'getSymbolDefinitions',\n    getSelectedItems: function getSelectedItems() {\n      var selectionItems = this._selectionItems,\n          items = [];\n\n      for (var id in selectionItems) {\n        var item = selectionItems[id],\n            selection = item._selection;\n\n        if (selection & 1 && item.isInserted()) {\n          items.push(item);\n        } else if (!selection) {\n          this._updateSelection(item);\n        }\n      }\n\n      return items;\n    },\n    _updateSelection: function _updateSelection(item) {\n      var id = item._id,\n          selectionItems = this._selectionItems;\n\n      if (item._selection) {\n        if (selectionItems[id] !== item) {\n          this._selectionCount++;\n          selectionItems[id] = item;\n        }\n      } else if (selectionItems[id] === item) {\n        this._selectionCount--;\n        delete selectionItems[id];\n      }\n    },\n    selectAll: function selectAll() {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].setFullySelected(true);\n      }\n    },\n    deselectAll: function deselectAll() {\n      var selectionItems = this._selectionItems;\n\n      for (var i in selectionItems) {\n        selectionItems[i].setFullySelected(false);\n      }\n    },\n    addLayer: function addLayer(layer) {\n      return this.insertLayer(undefined, layer);\n    },\n    insertLayer: function insertLayer(index, layer) {\n      if (layer instanceof Layer) {\n        layer._remove(false, true);\n\n        Base.splice(this._children, [layer], index, 0);\n\n        layer._setProject(this, true);\n\n        var name = layer._name;\n        if (name) layer.setName(name);\n        if (this._changes) layer._changed(5);\n        if (!this._activeLayer) this._activeLayer = layer;\n      } else {\n        layer = null;\n      }\n\n      return layer;\n    },\n    _insertItem: function _insertItem(index, item, _created) {\n      item = this.insertLayer(index, item) || (this._activeLayer || this._insertItem(undefined, new Layer(Item.NO_INSERT), true)).insertChild(index, item);\n      if (_created && item.activate) item.activate();\n      return item;\n    },\n    getItems: function getItems(options) {\n      return Item._getItems(this, options);\n    },\n    getItem: function getItem(options) {\n      return Item._getItems(this, options, null, null, true)[0] || null;\n    },\n    importJSON: function importJSON(json) {\n      this.activate();\n      var layer = this._activeLayer;\n      return Base.importJSON(json, layer && layer.isEmpty() && layer);\n    },\n    removeOn: function removeOn(type) {\n      var sets = this._removeSets;\n\n      if (sets) {\n        if (type === 'mouseup') sets.mousedrag = null;\n        var set = sets[type];\n\n        if (set) {\n          for (var id in set) {\n            var item = set[id];\n\n            for (var key in sets) {\n              var other = sets[key];\n              if (other && other != set) delete other[item._id];\n            }\n\n            item.remove();\n          }\n\n          sets[type] = null;\n        }\n      }\n    },\n    draw: function draw(ctx, matrix, pixelRatio) {\n      this._updateVersion++;\n      ctx.save();\n      matrix.applyToContext(ctx);\n      var children = this._children,\n          param = new Base({\n        offset: new Point(0, 0),\n        pixelRatio: pixelRatio,\n        viewMatrix: matrix.isIdentity() ? null : matrix,\n        matrices: [new Matrix()],\n        updateMatrix: true\n      });\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].draw(ctx, param);\n      }\n\n      ctx.restore();\n\n      if (this._selectionCount > 0) {\n        ctx.save();\n        ctx.strokeWidth = 1;\n        var items = this._selectionItems,\n            size = this._scope.settings.handleSize,\n            version = this._updateVersion;\n\n        for (var id in items) {\n          items[id]._drawSelection(ctx, matrix, size, items, version);\n        }\n\n        ctx.restore();\n      }\n    }\n  });\n  var Item = Base.extend(Emitter, {\n    statics: {\n      extend: function extend(src) {\n        if (src._serializeFields) src._serializeFields = Base.set({}, this.prototype._serializeFields, src._serializeFields);\n        return extend.base.apply(this, arguments);\n      },\n      NO_INSERT: {\n        insert: false\n      }\n    },\n    _class: 'Item',\n    _name: null,\n    _applyMatrix: true,\n    _canApplyMatrix: true,\n    _canScaleStroke: false,\n    _pivot: null,\n    _visible: true,\n    _blendMode: 'normal',\n    _opacity: 1,\n    _locked: false,\n    _guide: false,\n    _clipMask: false,\n    _selection: 0,\n    _selectBounds: true,\n    _selectChildren: false,\n    _serializeFields: {\n      name: null,\n      applyMatrix: null,\n      matrix: new Matrix(),\n      pivot: null,\n      visible: true,\n      blendMode: 'normal',\n      opacity: 1,\n      locked: false,\n      guide: false,\n      clipMask: false,\n      selected: false,\n      data: {}\n    },\n    _prioritize: ['applyMatrix']\n  }, new function () {\n    var handlers = ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onClick', 'onDoubleClick', 'onMouseMove', 'onMouseEnter', 'onMouseLeave'];\n    return Base.each(handlers, function (name) {\n      this._events[name] = {\n        install: function install(type) {\n          this.getView()._countItemEvent(type, 1);\n        },\n        uninstall: function uninstall(type) {\n          this.getView()._countItemEvent(type, -1);\n        }\n      };\n    }, {\n      _events: {\n        onFrame: {\n          install: function install() {\n            this.getView()._animateItem(this, true);\n          },\n          uninstall: function uninstall() {\n            this.getView()._animateItem(this, false);\n          }\n        },\n        onLoad: {},\n        onError: {}\n      },\n      statics: {\n        _itemHandlers: handlers\n      }\n    });\n  }(), {\n    initialize: function Item() {},\n    _initialize: function _initialize(props, point) {\n      var hasProps = props && Base.isPlainObject(props),\n          internal = hasProps && props.internal === true,\n          matrix = this._matrix = new Matrix(),\n          project = hasProps && props.project || paper.project,\n          settings = paper.settings;\n      this._id = internal ? null : UID.get();\n      this._parent = this._index = null;\n      this._applyMatrix = this._canApplyMatrix && settings.applyMatrix;\n      if (point) matrix.translate(point);\n      matrix._owner = this;\n      this._style = new Style(project._currentStyle, this, project);\n\n      if (internal || hasProps && props.insert == false || !settings.insertItems && !(hasProps && props.insert === true)) {\n        this._setProject(project);\n      } else {\n        (hasProps && props.parent || project)._insertItem(undefined, this, true);\n      }\n\n      if (hasProps && props !== Item.NO_INSERT) {\n        this.set(props, {\n          internal: true,\n          insert: true,\n          project: true,\n          parent: true\n        });\n      }\n\n      return hasProps;\n    },\n    _serialize: function _serialize(options, dictionary) {\n      var props = {},\n          that = this;\n\n      function serialize(fields) {\n        for (var key in fields) {\n          var value = that[key];\n\n          if (!Base.equals(value, key === 'leading' ? fields.fontSize * 1.2 : fields[key])) {\n            props[key] = Base.serialize(value, options, key !== 'data', dictionary);\n          }\n        }\n      }\n\n      serialize(this._serializeFields);\n      if (!(this instanceof Group)) serialize(this._style._defaults);\n      return [this._class, props];\n    },\n    _changed: function _changed(flags) {\n      var symbol = this._symbol,\n          cacheParent = this._parent || symbol,\n          project = this._project;\n\n      if (flags & 8) {\n        this._bounds = this._position = this._decomposed = undefined;\n      }\n\n      if (flags & 16) {\n        this._globalMatrix = undefined;\n      }\n\n      if (cacheParent && flags & 72) {\n        Item._clearBoundsCache(cacheParent);\n      }\n\n      if (flags & 2) {\n        Item._clearBoundsCache(this);\n      }\n\n      if (project) project._changed(flags, this);\n      if (symbol) symbol._changed(flags);\n    },\n    getId: function getId() {\n      return this._id;\n    },\n    getName: function getName() {\n      return this._name;\n    },\n    setName: function setName(name) {\n      if (this._name) this._removeNamed();\n      if (name === +name + '') throw new Error('Names consisting only of numbers are not supported.');\n\n      var owner = this._getOwner();\n\n      if (name && owner) {\n        var children = owner._children,\n            namedChildren = owner._namedChildren;\n        (namedChildren[name] = namedChildren[name] || []).push(this);\n        if (!(name in children)) children[name] = this;\n      }\n\n      this._name = name || undefined;\n\n      this._changed(256);\n    },\n    getStyle: function getStyle() {\n      return this._style;\n    },\n    setStyle: function setStyle(style) {\n      this.getStyle().set(style);\n    }\n  }, Base.each(['locked', 'visible', 'blendMode', 'opacity', 'guide'], function (name) {\n    var part = Base.capitalize(name),\n        key = '_' + name,\n        flags = {\n      locked: 256,\n      visible: 265\n    };\n\n    this['get' + part] = function () {\n      return this[key];\n    };\n\n    this['set' + part] = function (value) {\n      if (value != this[key]) {\n        this[key] = value;\n\n        this._changed(flags[name] || 257);\n      }\n    };\n  }, {}), {\n    beans: true,\n    getSelection: function getSelection() {\n      return this._selection;\n    },\n    setSelection: function setSelection(selection) {\n      if (selection !== this._selection) {\n        this._selection = selection;\n        var project = this._project;\n\n        if (project) {\n          project._updateSelection(this);\n\n          this._changed(257);\n        }\n      }\n    },\n    _changeSelection: function _changeSelection(flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function isSelected() {\n      if (this._selectChildren) {\n        var children = this._children;\n\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (children[i].isSelected()) return true;\n        }\n      }\n\n      return !!(this._selection & 1);\n    },\n    setSelected: function setSelected(selected) {\n      if (this._selectChildren) {\n        var children = this._children;\n\n        for (var i = 0, l = children.length; i < l; i++) {\n          children[i].setSelected(selected);\n        }\n      }\n\n      this._changeSelection(1, selected);\n    },\n    isFullySelected: function isFullySelected() {\n      var children = this._children,\n          selected = !!(this._selection & 1);\n\n      if (children && selected) {\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (!children[i].isFullySelected()) return false;\n        }\n\n        return true;\n      }\n\n      return selected;\n    },\n    setFullySelected: function setFullySelected(selected) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) {\n          children[i].setFullySelected(selected);\n        }\n      }\n\n      this._changeSelection(1, selected);\n    },\n    isClipMask: function isClipMask() {\n      return this._clipMask;\n    },\n    setClipMask: function setClipMask(clipMask) {\n      if (this._clipMask != (clipMask = !!clipMask)) {\n        this._clipMask = clipMask;\n\n        if (clipMask) {\n          this.setFillColor(null);\n          this.setStrokeColor(null);\n        }\n\n        this._changed(257);\n\n        if (this._parent) this._parent._changed(2048);\n      }\n    },\n    getData: function getData() {\n      if (!this._data) this._data = {};\n      return this._data;\n    },\n    setData: function setData(data) {\n      this._data = data;\n    },\n    getPosition: function getPosition(_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n\n      var position = this._position || (this._position = this._getPositionFromBounds());\n\n      return new ctor(position.x, position.y, this, 'setPosition');\n    },\n    setPosition: function setPosition() {\n      this.translate(Point.read(arguments).subtract(this.getPosition(true)));\n    },\n    _getPositionFromBounds: function _getPositionFromBounds(bounds) {\n      return this._pivot ? this._matrix._transformPoint(this._pivot) : (bounds || this.getBounds()).getCenter(true);\n    },\n    getPivot: function getPivot() {\n      var pivot = this._pivot;\n      return pivot ? new LinkedPoint(pivot.x, pivot.y, this, 'setPivot') : null;\n    },\n    setPivot: function setPivot() {\n      this._pivot = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n      this._position = undefined;\n    }\n  }, Base.each({\n    getStrokeBounds: {\n      stroke: true\n    },\n    getHandleBounds: {\n      handle: true\n    },\n    getInternalBounds: {\n      internal: true\n    }\n  }, function (options, key) {\n    this[key] = function (matrix) {\n      return this.getBounds(matrix, options);\n    };\n  }, {\n    beans: true,\n    getBounds: function getBounds(matrix, options) {\n      var hasMatrix = options || matrix instanceof Matrix,\n          opts = Base.set({}, hasMatrix ? options : matrix, this._boundsOptions);\n      if (!opts.stroke || this.getStrokeScaling()) opts.cacheItem = this;\n\n      var rect = this._getCachedBounds(hasMatrix && matrix, opts).rect;\n\n      return !arguments.length ? new LinkedRectangle(rect.x, rect.y, rect.width, rect.height, this, 'setBounds') : rect;\n    },\n    setBounds: function setBounds() {\n      var rect = _Rectangle.read(arguments),\n          bounds = this.getBounds(),\n          _matrix = this._matrix,\n          matrix = new Matrix(),\n          center = rect.getCenter();\n\n      matrix.translate(center);\n\n      if (rect.width != bounds.width || rect.height != bounds.height) {\n        if (!_matrix.isInvertible()) {\n          _matrix.set(_matrix._backup || new Matrix().translate(_matrix.getTranslation()));\n\n          bounds = this.getBounds();\n        }\n\n        matrix.scale(bounds.width !== 0 ? rect.width / bounds.width : 0, bounds.height !== 0 ? rect.height / bounds.height : 0);\n      }\n\n      center = bounds.getCenter();\n      matrix.translate(-center.x, -center.y);\n      this.transform(matrix);\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var children = this._children;\n      if (!children || !children.length) return new _Rectangle();\n\n      Item._updateBoundsCache(this, options.cacheItem);\n\n      return Item._getBounds(children, matrix, options);\n    },\n    _getBoundsCacheKey: function _getBoundsCacheKey(options, internal) {\n      return [options.stroke ? 1 : 0, options.handle ? 1 : 0, internal ? 1 : 0].join('');\n    },\n    _getCachedBounds: function _getCachedBounds(matrix, options, noInternal) {\n      matrix = matrix && matrix._orNullIfIdentity();\n\n      var internal = options.internal && !noInternal,\n          cacheItem = options.cacheItem,\n          _matrix = internal ? null : this._matrix._orNullIfIdentity(),\n          cacheKey = cacheItem && (!matrix || matrix.equals(_matrix)) && this._getBoundsCacheKey(options, internal),\n          bounds = this._bounds;\n\n      Item._updateBoundsCache(this._parent || this._symbol, cacheItem);\n\n      if (cacheKey && bounds && cacheKey in bounds) {\n        var cached = bounds[cacheKey];\n        return {\n          rect: cached.rect.clone(),\n          nonscaling: cached.nonscaling\n        };\n      }\n\n      var res = this._getBounds(matrix || _matrix, options),\n          rect = res.rect || res,\n          style = this._style,\n          nonscaling = res.nonscaling || style.hasStroke() && !style.getStrokeScaling();\n\n      if (cacheKey) {\n        if (!bounds) {\n          this._bounds = bounds = {};\n        }\n\n        var cached = bounds[cacheKey] = {\n          rect: rect.clone(),\n          nonscaling: nonscaling,\n          internal: internal\n        };\n      }\n\n      return {\n        rect: rect,\n        nonscaling: nonscaling\n      };\n    },\n    _getStrokeMatrix: function _getStrokeMatrix(matrix, options) {\n      var parent = this.getStrokeScaling() ? null : options && options.internal ? this : this._parent || this._symbol && this._symbol._item,\n          mx = parent ? parent.getViewMatrix().invert() : matrix;\n      return mx && mx._shiftless();\n    },\n    statics: {\n      _updateBoundsCache: function _updateBoundsCache(parent, item) {\n        if (parent && item) {\n          var id = item._id,\n              ref = parent._boundsCache = parent._boundsCache || {\n            ids: {},\n            list: []\n          };\n\n          if (!ref.ids[id]) {\n            ref.list.push(item);\n            ref.ids[id] = item;\n          }\n        }\n      },\n      _clearBoundsCache: function _clearBoundsCache(item) {\n        var cache = item._boundsCache;\n\n        if (cache) {\n          item._bounds = item._position = item._boundsCache = undefined;\n\n          for (var i = 0, list = cache.list, l = list.length; i < l; i++) {\n            var other = list[i];\n\n            if (other !== item) {\n              other._bounds = other._position = undefined;\n              if (other._boundsCache) Item._clearBoundsCache(other);\n            }\n          }\n        }\n      },\n      _getBounds: function _getBounds(items, matrix, options) {\n        var x1 = Infinity,\n            x2 = -x1,\n            y1 = x1,\n            y2 = x2,\n            nonscaling = false;\n        options = options || {};\n\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i];\n\n          if (item._visible && !item.isEmpty(true)) {\n            var bounds = item._getCachedBounds(matrix && matrix.appended(item._matrix), options, true),\n                rect = bounds.rect;\n\n            x1 = Math.min(rect.x, x1);\n            y1 = Math.min(rect.y, y1);\n            x2 = Math.max(rect.x + rect.width, x2);\n            y2 = Math.max(rect.y + rect.height, y2);\n            if (bounds.nonscaling) nonscaling = true;\n          }\n        }\n\n        return {\n          rect: isFinite(x1) ? new _Rectangle(x1, y1, x2 - x1, y2 - y1) : new _Rectangle(),\n          nonscaling: nonscaling\n        };\n      }\n    }\n  }), {\n    beans: true,\n    _decompose: function _decompose() {\n      return this._applyMatrix ? null : this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    getRotation: function getRotation() {\n      var decomposed = this._decompose();\n\n      return decomposed ? decomposed.rotation : 0;\n    },\n    setRotation: function setRotation(rotation) {\n      var current = this.getRotation();\n\n      if (current != null && rotation != null) {\n        var decomposed = this._decomposed;\n        this.rotate(rotation - current);\n\n        if (decomposed) {\n          decomposed.rotation = rotation;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getScaling: function getScaling() {\n      var decomposed = this._decompose(),\n          s = decomposed && decomposed.scaling;\n\n      return new LinkedPoint(s ? s.x : 1, s ? s.y : 1, this, 'setScaling');\n    },\n    setScaling: function setScaling() {\n      var current = this.getScaling(),\n          scaling = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n\n      if (current && scaling && !current.equals(scaling)) {\n        var rotation = this.getRotation(),\n            decomposed = this._decomposed,\n            matrix = new Matrix(),\n            center = this.getPosition(true);\n        matrix.translate(center);\n        if (rotation) matrix.rotate(rotation);\n        matrix.scale(scaling.x / current.x, scaling.y / current.y);\n        if (rotation) matrix.rotate(-rotation);\n        matrix.translate(center.negate());\n        this.transform(matrix);\n\n        if (decomposed) {\n          decomposed.scaling = scaling;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getMatrix: function getMatrix() {\n      return this._matrix;\n    },\n    setMatrix: function setMatrix() {\n      var matrix = this._matrix;\n      matrix.initialize.apply(matrix, arguments);\n    },\n    getGlobalMatrix: function getGlobalMatrix(_dontClone) {\n      var matrix = this._globalMatrix;\n\n      if (matrix) {\n        var parent = this._parent;\n        var parents = [];\n\n        while (parent) {\n          if (!parent._globalMatrix) {\n            matrix = null;\n\n            for (var i = 0, l = parents.length; i < l; i++) {\n              parents[i]._globalMatrix = null;\n            }\n\n            break;\n          }\n\n          parents.push(parent);\n          parent = parent._parent;\n        }\n      }\n\n      if (!matrix) {\n        matrix = this._globalMatrix = this._matrix.clone();\n        var parent = this._parent;\n        if (parent) matrix.prepend(parent.getGlobalMatrix(true));\n      }\n\n      return _dontClone ? matrix : matrix.clone();\n    },\n    getViewMatrix: function getViewMatrix() {\n      return this.getGlobalMatrix().prepend(this.getView()._matrix);\n    },\n    getApplyMatrix: function getApplyMatrix() {\n      return this._applyMatrix;\n    },\n    setApplyMatrix: function setApplyMatrix(apply) {\n      if (this._applyMatrix = this._canApplyMatrix && !!apply) this.transform(null, true);\n    },\n    getTransformContent: '#getApplyMatrix',\n    setTransformContent: '#setApplyMatrix'\n  }, {\n    getProject: function getProject() {\n      return this._project;\n    },\n    _setProject: function _setProject(project, installEvents) {\n      if (this._project !== project) {\n        if (this._project) this._installEvents(false);\n        this._project = project;\n        var children = this._children;\n\n        for (var i = 0, l = children && children.length; i < l; i++) {\n          children[i]._setProject(project);\n        }\n\n        installEvents = true;\n      }\n\n      if (installEvents) this._installEvents(true);\n    },\n    getView: function getView() {\n      return this._project._view;\n    },\n    _installEvents: function _installEvents(install) {\n      _installEvents.base.call(this, install);\n\n      var children = this._children;\n\n      for (var i = 0, l = children && children.length; i < l; i++) {\n        children[i]._installEvents(install);\n      }\n    },\n    getLayer: function getLayer() {\n      var parent = this;\n\n      while (parent = parent._parent) {\n        if (parent instanceof Layer) return parent;\n      }\n\n      return null;\n    },\n    getParent: function getParent() {\n      return this._parent;\n    },\n    setParent: function setParent(item) {\n      return item.addChild(this);\n    },\n    _getOwner: '#getParent',\n    getChildren: function getChildren() {\n      return this._children;\n    },\n    setChildren: function setChildren(items) {\n      this.removeChildren();\n      this.addChildren(items);\n    },\n    getFirstChild: function getFirstChild() {\n      return this._children && this._children[0] || null;\n    },\n    getLastChild: function getLastChild() {\n      return this._children && this._children[this._children.length - 1] || null;\n    },\n    getNextSibling: function getNextSibling() {\n      var owner = this._getOwner();\n\n      return owner && owner._children[this._index + 1] || null;\n    },\n    getPreviousSibling: function getPreviousSibling() {\n      var owner = this._getOwner();\n\n      return owner && owner._children[this._index - 1] || null;\n    },\n    getIndex: function getIndex() {\n      return this._index;\n    },\n    equals: function equals(item) {\n      return item === this || item && this._class === item._class && this._style.equals(item._style) && this._matrix.equals(item._matrix) && this._locked === item._locked && this._visible === item._visible && this._blendMode === item._blendMode && this._opacity === item._opacity && this._clipMask === item._clipMask && this._guide === item._guide && this._equals(item) || false;\n    },\n    _equals: function _equals(item) {\n      return Base.equals(this._children, item._children);\n    },\n    clone: function clone(options) {\n      var copy = new this.constructor(Item.NO_INSERT),\n          children = this._children,\n          insert = Base.pick(options ? options.insert : undefined, options === undefined || options === true),\n          deep = Base.pick(options ? options.deep : undefined, true);\n      if (children) copy.copyAttributes(this);\n      if (!children || deep) copy.copyContent(this);\n      if (!children) copy.copyAttributes(this);\n      if (insert) copy.insertAbove(this);\n      var name = this._name,\n          parent = this._parent;\n\n      if (name && parent) {\n        var children = parent._children,\n            orig = name,\n            i = 1;\n\n        while (children[name]) {\n          name = orig + ' ' + i++;\n        }\n\n        if (name !== orig) copy.setName(name);\n      }\n\n      return copy;\n    },\n    copyContent: function copyContent(source) {\n      var children = source._children;\n\n      for (var i = 0, l = children && children.length; i < l; i++) {\n        this.addChild(children[i].clone(false), true);\n      }\n    },\n    copyAttributes: function copyAttributes(source, excludeMatrix) {\n      this.setStyle(source._style);\n      var keys = ['_locked', '_visible', '_blendMode', '_opacity', '_clipMask', '_guide'];\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i];\n        if (source.hasOwnProperty(key)) this[key] = source[key];\n      }\n\n      if (!excludeMatrix) this._matrix.set(source._matrix, true);\n      this.setApplyMatrix(source._applyMatrix);\n      this.setPivot(source._pivot);\n      this.setSelection(source._selection);\n      var data = source._data,\n          name = source._name;\n      this._data = data ? Base.clone(data) : null;\n      if (name) this.setName(name);\n    },\n    rasterize: function rasterize(resolution, insert) {\n      var bounds = this.getStrokeBounds(),\n          scale = (resolution || this.getView().getResolution()) / 72,\n          topLeft = bounds.getTopLeft().floor(),\n          bottomRight = bounds.getBottomRight().ceil(),\n          size = new Size(bottomRight.subtract(topLeft)),\n          raster = new Raster(Item.NO_INSERT);\n\n      if (!size.isZero()) {\n        var canvas = CanvasProvider.getCanvas(size.multiply(scale)),\n            ctx = canvas.getContext('2d'),\n            matrix = new Matrix().scale(scale).translate(topLeft.negate());\n        ctx.save();\n        matrix.applyToContext(ctx);\n        this.draw(ctx, new Base({\n          matrices: [matrix]\n        }));\n        ctx.restore();\n        raster.setCanvas(canvas);\n      }\n\n      raster.transform(new Matrix().translate(topLeft.add(size.divide(2))).scale(1 / scale));\n      if (insert === undefined || insert) raster.insertAbove(this);\n      return raster;\n    },\n    contains: function contains() {\n      var matrix = this._matrix;\n      return matrix.isInvertible() && !!this._contains(matrix._inverseTransform(Point.read(arguments)));\n    },\n    _contains: function _contains(point) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          if (children[i].contains(point)) return true;\n        }\n\n        return false;\n      }\n\n      return point.isInside(this.getInternalBounds());\n    },\n    isInside: function isInside() {\n      return _Rectangle.read(arguments).contains(this.getBounds());\n    },\n    _asPathItem: function _asPathItem() {\n      return new Path.Rectangle({\n        rectangle: this.getInternalBounds(),\n        matrix: this._matrix,\n        insert: false\n      });\n    },\n    intersects: function intersects(item, _matrix) {\n      if (!(item instanceof Item)) return false;\n      return this._asPathItem().getIntersections(item._asPathItem(), null, _matrix, true).length > 0;\n    }\n  }, new function () {\n    function hitTest() {\n      var args = arguments;\n      return this._hitTest(Point.read(args), HitResult.getOptions(args));\n    }\n\n    function hitTestAll() {\n      var args = arguments,\n          point = Point.read(args),\n          options = HitResult.getOptions(args),\n          all = [];\n\n      this._hitTest(point, new Base({\n        all: all\n      }, options));\n\n      return all;\n    }\n\n    function hitTestChildren(point, options, viewMatrix, _exclude) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          var child = children[i];\n\n          var res = child !== _exclude && child._hitTest(point, options, viewMatrix);\n\n          if (res && !options.all) return res;\n        }\n      }\n\n      return null;\n    }\n\n    Project.inject({\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTest: hitTestChildren\n    });\n    return {\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTestChildren: hitTestChildren\n    };\n  }(), {\n    _hitTest: function _hitTest(point, options, parentViewMatrix) {\n      if (this._locked || !this._visible || this._guide && !options.guides || this.isEmpty()) {\n        return null;\n      }\n\n      var matrix = this._matrix,\n          viewMatrix = parentViewMatrix ? parentViewMatrix.appended(matrix) : this.getGlobalMatrix().prepend(this.getView()._matrix),\n          tolerance = Math.max(options.tolerance, 1e-12),\n          tolerancePadding = options._tolerancePadding = new Size(Path._getStrokePadding(tolerance, matrix._shiftless().invert()));\n      point = matrix._inverseTransform(point);\n\n      if (!point || !this._children && !this.getBounds({\n        internal: true,\n        stroke: true,\n        handle: true\n      }).expand(tolerancePadding.multiply(2))._containsPoint(point)) {\n        return null;\n      }\n\n      var checkSelf = !(options.guides && !this._guide || options.selected && !this.isSelected() || options.type && options.type !== Base.hyphenate(this._class) || options[\"class\"] && !(this instanceof options[\"class\"])),\n          match = options.match,\n          that = this,\n          bounds,\n          res;\n\n      function filter(hit) {\n        if (hit && match && !match(hit)) hit = null;\n        if (hit && options.all) options.all.push(hit);\n        return hit;\n      }\n\n      function checkPoint(type, part) {\n        var pt = part ? bounds['get' + part]() : that.getPosition();\n\n        if (point.subtract(pt).divide(tolerancePadding).length <= 1) {\n          return new HitResult(type, that, {\n            name: part ? Base.hyphenate(part) : type,\n            point: pt\n          });\n        }\n      }\n\n      var checkPosition = options.position,\n          checkCenter = options.center,\n          checkBounds = options.bounds;\n\n      if (checkSelf && this._parent && (checkPosition || checkCenter || checkBounds)) {\n        if (checkCenter || checkBounds) {\n          bounds = this.getInternalBounds();\n        }\n\n        res = checkPosition && checkPoint('position') || checkCenter && checkPoint('center', 'Center');\n\n        if (!res && checkBounds) {\n          var points = ['TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'];\n\n          for (var i = 0; i < 8 && !res; i++) {\n            res = checkPoint('bounds', points[i]);\n          }\n        }\n\n        res = filter(res);\n      }\n\n      if (!res) {\n        res = this._hitTestChildren(point, options, viewMatrix) || checkSelf && filter(this._hitTestSelf(point, options, viewMatrix, this.getStrokeScaling() ? null : viewMatrix._shiftless().invert())) || null;\n      }\n\n      if (res && res.point) {\n        res.point = matrix.transform(res.point);\n      }\n\n      return res;\n    },\n    _hitTestSelf: function _hitTestSelf(point, options) {\n      if (options.fill && this.hasFill() && this._contains(point)) return new HitResult('fill', this);\n    },\n    matches: function matches(name, compare) {\n      function matchObject(obj1, obj2) {\n        for (var i in obj1) {\n          if (obj1.hasOwnProperty(i)) {\n            var val1 = obj1[i],\n                val2 = obj2[i];\n\n            if (Base.isPlainObject(val1) && Base.isPlainObject(val2)) {\n              if (!matchObject(val1, val2)) return false;\n            } else if (!Base.equals(val1, val2)) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      }\n\n      var type = typeof name;\n\n      if (type === 'object') {\n        for (var key in name) {\n          if (name.hasOwnProperty(key) && !this.matches(key, name[key])) return false;\n        }\n\n        return true;\n      } else if (type === 'function') {\n        return name(this);\n      } else if (name === 'match') {\n        return compare(this);\n      } else {\n        var value = /^(empty|editable)$/.test(name) ? this['is' + Base.capitalize(name)]() : name === 'type' ? Base.hyphenate(this._class) : this[name];\n\n        if (name === 'class') {\n          if (typeof compare === 'function') return this instanceof compare;\n          value = this._class;\n        }\n\n        if (typeof compare === 'function') {\n          return !!compare(value);\n        } else if (compare) {\n          if (compare.test) {\n            return compare.test(value);\n          } else if (Base.isPlainObject(compare)) {\n            return matchObject(compare, value);\n          }\n        }\n\n        return Base.equals(value, compare);\n      }\n    },\n    getItems: function getItems(options) {\n      return Item._getItems(this, options, this._matrix);\n    },\n    getItem: function getItem(options) {\n      return Item._getItems(this, options, this._matrix, null, true)[0] || null;\n    },\n    statics: {\n      _getItems: function _getItems(item, options, matrix, param, firstOnly) {\n        if (!param) {\n          var obj = typeof options === 'object' && options,\n              overlapping = obj && obj.overlapping,\n              inside = obj && obj.inside,\n              bounds = overlapping || inside,\n              rect = bounds && _Rectangle.read([bounds]);\n\n          param = {\n            items: [],\n            recursive: obj && obj.recursive !== false,\n            inside: !!inside,\n            overlapping: !!overlapping,\n            rect: rect,\n            path: overlapping && new Path.Rectangle({\n              rectangle: rect,\n              insert: false\n            })\n          };\n\n          if (obj) {\n            options = Base.filter({}, options, {\n              recursive: true,\n              inside: true,\n              overlapping: true\n            });\n          }\n        }\n\n        var children = item._children,\n            items = param.items,\n            rect = param.rect;\n        matrix = rect && (matrix || new Matrix());\n\n        for (var i = 0, l = children && children.length; i < l; i++) {\n          var child = children[i],\n              childMatrix = matrix && matrix.appended(child._matrix),\n              add = true;\n\n          if (rect) {\n            var bounds = child.getBounds(childMatrix);\n            if (!rect.intersects(bounds)) continue;\n            if (!(rect.contains(bounds) || param.overlapping && (bounds.contains(rect) || param.path.intersects(child, childMatrix)))) add = false;\n          }\n\n          if (add && child.matches(options)) {\n            items.push(child);\n            if (firstOnly) break;\n          }\n\n          if (param.recursive !== false) {\n            _getItems(child, options, childMatrix, param, firstOnly);\n          }\n\n          if (firstOnly && items.length > 0) break;\n        }\n\n        return items;\n      }\n    }\n  }, {\n    importJSON: function importJSON(json) {\n      var res = Base.importJSON(json, this);\n      return res !== this ? this.addChild(res) : res;\n    },\n    addChild: function addChild(item) {\n      return this.insertChild(undefined, item);\n    },\n    insertChild: function insertChild(index, item) {\n      var res = item ? this.insertChildren(index, [item]) : null;\n      return res && res[0];\n    },\n    addChildren: function addChildren(items) {\n      return this.insertChildren(this._children.length, items);\n    },\n    insertChildren: function insertChildren(index, items) {\n      var children = this._children;\n\n      if (children && items && items.length > 0) {\n        items = Base.slice(items);\n        var inserted = {};\n\n        for (var i = items.length - 1; i >= 0; i--) {\n          var item = items[i],\n              id = item && item._id;\n\n          if (!item || inserted[id]) {\n            items.splice(i, 1);\n          } else {\n            item._remove(false, true);\n\n            inserted[id] = true;\n          }\n        }\n\n        Base.splice(children, items, index, 0);\n        var project = this._project,\n            notifySelf = project._changes;\n\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i],\n              name = item._name;\n          item._parent = this;\n\n          item._setProject(project, true);\n\n          if (name) item.setName(name);\n          if (notifySelf) item._changed(5);\n        }\n\n        this._changed(11);\n      } else {\n        items = null;\n      }\n\n      return items;\n    },\n    _insertItem: '#insertChild',\n    _insertAt: function _insertAt(item, offset) {\n      var owner = item && item._getOwner(),\n          res = item !== this && owner ? this : null;\n\n      if (res) {\n        res._remove(false, true);\n\n        owner._insertItem(item._index + offset, res);\n      }\n\n      return res;\n    },\n    insertAbove: function insertAbove(item) {\n      return this._insertAt(item, 1);\n    },\n    insertBelow: function insertBelow(item) {\n      return this._insertAt(item, 0);\n    },\n    sendToBack: function sendToBack() {\n      var owner = this._getOwner();\n\n      return owner ? owner._insertItem(0, this) : null;\n    },\n    bringToFront: function bringToFront() {\n      var owner = this._getOwner();\n\n      return owner ? owner._insertItem(undefined, this) : null;\n    },\n    appendTop: '#addChild',\n    appendBottom: function appendBottom(item) {\n      return this.insertChild(0, item);\n    },\n    moveAbove: '#insertAbove',\n    moveBelow: '#insertBelow',\n    addTo: function addTo(owner) {\n      return owner._insertItem(undefined, this);\n    },\n    copyTo: function copyTo(owner) {\n      return this.clone(false).addTo(owner);\n    },\n    reduce: function reduce(options) {\n      var children = this._children;\n\n      if (children && children.length === 1) {\n        var child = children[0].reduce(options);\n\n        if (this._parent) {\n          child.insertAbove(this);\n          this.remove();\n        } else {\n          child.remove();\n        }\n\n        return child;\n      }\n\n      return this;\n    },\n    _removeNamed: function _removeNamed() {\n      var owner = this._getOwner();\n\n      if (owner) {\n        var children = owner._children,\n            namedChildren = owner._namedChildren,\n            name = this._name,\n            namedArray = namedChildren[name],\n            index = namedArray ? namedArray.indexOf(this) : -1;\n\n        if (index !== -1) {\n          if (children[name] == this) delete children[name];\n          namedArray.splice(index, 1);\n\n          if (namedArray.length) {\n            children[name] = namedArray[0];\n          } else {\n            delete namedChildren[name];\n          }\n        }\n      }\n    },\n    _remove: function _remove(notifySelf, notifyParent) {\n      var owner = this._getOwner(),\n          project = this._project,\n          index = this._index;\n\n      if (this._style) this._style._dispose();\n\n      if (owner) {\n        if (this._name) this._removeNamed();\n\n        if (index != null) {\n          if (project._activeLayer === this) project._activeLayer = this.getNextSibling() || this.getPreviousSibling();\n          Base.splice(owner._children, null, index, 1);\n        }\n\n        this._installEvents(false);\n\n        if (notifySelf && project._changes) this._changed(5);\n        if (notifyParent) owner._changed(11, this);\n        this._parent = null;\n        return true;\n      }\n\n      return false;\n    },\n    remove: function remove() {\n      return this._remove(true, true);\n    },\n    replaceWith: function replaceWith(item) {\n      var ok = item && item.insertBelow(this);\n      if (ok) this.remove();\n      return ok;\n    },\n    removeChildren: function removeChildren(start, end) {\n      if (!this._children) return null;\n      start = start || 0;\n      end = Base.pick(end, this._children.length);\n      var removed = Base.splice(this._children, null, start, end - start);\n\n      for (var i = removed.length - 1; i >= 0; i--) {\n        removed[i]._remove(true, false);\n      }\n\n      if (removed.length > 0) this._changed(11);\n      return removed;\n    },\n    clear: '#removeChildren',\n    reverseChildren: function reverseChildren() {\n      if (this._children) {\n        this._children.reverse();\n\n        for (var i = 0, l = this._children.length; i < l; i++) {\n          this._children[i]._index = i;\n        }\n\n        this._changed(11);\n      }\n    },\n    isEmpty: function isEmpty(recursively) {\n      var children = this._children;\n      var numChildren = children ? children.length : 0;\n\n      if (recursively) {\n        for (var i = 0; i < numChildren; i++) {\n          if (!children[i].isEmpty(recursively)) {\n            return false;\n          }\n        }\n\n        return true;\n      }\n\n      return !numChildren;\n    },\n    isEditable: function isEditable() {\n      var item = this;\n\n      while (item) {\n        if (!item._visible || item._locked) return false;\n        item = item._parent;\n      }\n\n      return true;\n    },\n    hasFill: function hasFill() {\n      return this.getStyle().hasFill();\n    },\n    hasStroke: function hasStroke() {\n      return this.getStyle().hasStroke();\n    },\n    hasShadow: function hasShadow() {\n      return this.getStyle().hasShadow();\n    },\n    _getOrder: function _getOrder(item) {\n      function getList(item) {\n        var list = [];\n\n        do {\n          list.unshift(item);\n        } while (item = item._parent);\n\n        return list;\n      }\n\n      var list1 = getList(this),\n          list2 = getList(item);\n\n      for (var i = 0, l = Math.min(list1.length, list2.length); i < l; i++) {\n        if (list1[i] != list2[i]) {\n          return list1[i]._index < list2[i]._index ? 1 : -1;\n        }\n      }\n\n      return 0;\n    },\n    hasChildren: function hasChildren() {\n      return this._children && this._children.length > 0;\n    },\n    isInserted: function isInserted() {\n      return this._parent ? this._parent.isInserted() : false;\n    },\n    isAbove: function isAbove(item) {\n      return this._getOrder(item) === -1;\n    },\n    isBelow: function isBelow(item) {\n      return this._getOrder(item) === 1;\n    },\n    isParent: function isParent(item) {\n      return this._parent === item;\n    },\n    isChild: function isChild(item) {\n      return item && item._parent === this;\n    },\n    isDescendant: function isDescendant(item) {\n      var parent = this;\n\n      while (parent = parent._parent) {\n        if (parent === item) return true;\n      }\n\n      return false;\n    },\n    isAncestor: function isAncestor(item) {\n      return item ? item.isDescendant(this) : false;\n    },\n    isSibling: function isSibling(item) {\n      return this._parent === item._parent;\n    },\n    isGroupedWith: function isGroupedWith(item) {\n      var parent = this._parent;\n\n      while (parent) {\n        if (parent._parent && /^(Group|Layer|CompoundPath)$/.test(parent._class) && item.isDescendant(parent)) return true;\n        parent = parent._parent;\n      }\n\n      return false;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n\n    this[key] = function () {\n      var args = arguments,\n          value = (rotate ? Base : Point).read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      return this.transform(new Matrix()[key](value, center || this.getPosition(true)));\n    };\n  }, {\n    translate: function translate() {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    transform: function transform(matrix, _applyRecursively, _setApplyMatrix) {\n      var _matrix = this._matrix,\n          transformMatrix = matrix && !matrix.isIdentity(),\n          applyMatrix = _setApplyMatrix && this._canApplyMatrix || this._applyMatrix && (transformMatrix || !_matrix.isIdentity() || _applyRecursively && this._children);\n      if (!transformMatrix && !applyMatrix) return this;\n\n      if (transformMatrix) {\n        if (!matrix.isInvertible() && _matrix.isInvertible()) _matrix._backup = _matrix.getValues();\n\n        _matrix.prepend(matrix, true);\n\n        var style = this._style,\n            fillColor = style.getFillColor(true),\n            strokeColor = style.getStrokeColor(true);\n        if (fillColor) fillColor.transform(matrix);\n        if (strokeColor) strokeColor.transform(matrix);\n      }\n\n      if (applyMatrix && (applyMatrix = this._transformContent(_matrix, _applyRecursively, _setApplyMatrix))) {\n        var pivot = this._pivot;\n        if (pivot) _matrix._transformPoint(pivot, pivot, true);\n\n        _matrix.reset(true);\n\n        if (_setApplyMatrix && this._canApplyMatrix) this._applyMatrix = true;\n      }\n\n      var bounds = this._bounds,\n          position = this._position;\n\n      if (transformMatrix || applyMatrix) {\n        this._changed(25);\n      }\n\n      var decomp = transformMatrix && bounds && matrix.decompose();\n\n      if (decomp && decomp.skewing.isZero() && decomp.rotation % 90 === 0) {\n        for (var key in bounds) {\n          var cache = bounds[key];\n\n          if (cache.nonscaling) {\n            delete bounds[key];\n          } else if (applyMatrix || !cache.internal) {\n            var rect = cache.rect;\n\n            matrix._transformBounds(rect, rect);\n          }\n        }\n\n        this._bounds = bounds;\n\n        var cached = bounds[this._getBoundsCacheKey(this._boundsOptions || {})];\n\n        if (cached) {\n          this._position = this._getPositionFromBounds(cached.rect);\n        }\n      } else if (transformMatrix && position && this._pivot) {\n        this._position = matrix._transformPoint(position, position);\n      }\n\n      return this;\n    },\n    _transformContent: function _transformContent(matrix, applyRecursively, setApplyMatrix) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) {\n          children[i].transform(matrix, applyRecursively, setApplyMatrix);\n        }\n\n        return true;\n      }\n    },\n    globalToLocal: function globalToLocal() {\n      return this.getGlobalMatrix(true)._inverseTransform(Point.read(arguments));\n    },\n    localToGlobal: function localToGlobal() {\n      return this.getGlobalMatrix(true)._transformPoint(Point.read(arguments));\n    },\n    parentToLocal: function parentToLocal() {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    localToParent: function localToParent() {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    fitBounds: function fitBounds(rectangle, fill) {\n      rectangle = _Rectangle.read(arguments);\n      var bounds = this.getBounds(),\n          itemRatio = bounds.height / bounds.width,\n          rectRatio = rectangle.height / rectangle.width,\n          scale = (fill ? itemRatio > rectRatio : itemRatio < rectRatio) ? rectangle.width / bounds.width : rectangle.height / bounds.height,\n          newBounds = new _Rectangle(new Point(), new Size(bounds.width * scale, bounds.height * scale));\n      newBounds.setCenter(rectangle.getCenter());\n      this.setBounds(newBounds);\n    }\n  }), {\n    _setStyles: function _setStyles(ctx, param, viewMatrix) {\n      var style = this._style,\n          matrix = this._matrix;\n\n      if (style.hasFill()) {\n        ctx.fillStyle = style.getFillColor().toCanvasStyle(ctx, matrix);\n      }\n\n      if (style.hasStroke()) {\n        ctx.strokeStyle = style.getStrokeColor().toCanvasStyle(ctx, matrix);\n        ctx.lineWidth = style.getStrokeWidth();\n        var strokeJoin = style.getStrokeJoin(),\n            strokeCap = style.getStrokeCap(),\n            miterLimit = style.getMiterLimit();\n        if (strokeJoin) ctx.lineJoin = strokeJoin;\n        if (strokeCap) ctx.lineCap = strokeCap;\n        if (miterLimit) ctx.miterLimit = miterLimit;\n\n        if (paper.support.nativeDash) {\n          var dashArray = style.getDashArray(),\n              dashOffset = style.getDashOffset();\n\n          if (dashArray && dashArray.length) {\n            if ('setLineDash' in ctx) {\n              ctx.setLineDash(dashArray);\n              ctx.lineDashOffset = dashOffset;\n            } else {\n              ctx.mozDash = dashArray;\n              ctx.mozDashOffset = dashOffset;\n            }\n          }\n        }\n      }\n\n      if (style.hasShadow()) {\n        var pixelRatio = param.pixelRatio || 1,\n            mx = viewMatrix._shiftless().prepend(new Matrix().scale(pixelRatio, pixelRatio)),\n            blur = mx.transform(new Point(style.getShadowBlur(), 0)),\n            offset = mx.transform(this.getShadowOffset());\n\n        ctx.shadowColor = style.getShadowColor().toCanvasStyle(ctx);\n        ctx.shadowBlur = blur.getLength();\n        ctx.shadowOffsetX = offset.x;\n        ctx.shadowOffsetY = offset.y;\n      }\n    },\n    draw: function draw(ctx, param, parentStrokeMatrix) {\n      var updateVersion = this._updateVersion = this._project._updateVersion;\n      if (!this._visible || this._opacity === 0) return;\n      var matrices = param.matrices,\n          viewMatrix = param.viewMatrix,\n          matrix = this._matrix,\n          globalMatrix = matrices[matrices.length - 1].appended(matrix);\n      if (!globalMatrix.isInvertible()) return;\n      viewMatrix = viewMatrix ? viewMatrix.appended(globalMatrix) : globalMatrix;\n      matrices.push(globalMatrix);\n\n      if (param.updateMatrix) {\n        this._globalMatrix = globalMatrix;\n      }\n\n      var blendMode = this._blendMode,\n          opacity = this._opacity,\n          normalBlend = blendMode === 'normal',\n          nativeBlend = BlendMode.nativeModes[blendMode],\n          direct = normalBlend && opacity === 1 || param.dontStart || param.clip || (nativeBlend || normalBlend && opacity < 1) && this._canComposite(),\n          pixelRatio = param.pixelRatio || 1,\n          mainCtx,\n          itemOffset,\n          prevOffset;\n\n      if (!direct) {\n        var bounds = this.getStrokeBounds(viewMatrix);\n\n        if (!bounds.width || !bounds.height) {\n          matrices.pop();\n          return;\n        }\n\n        prevOffset = param.offset;\n        itemOffset = param.offset = bounds.getTopLeft().floor();\n        mainCtx = ctx;\n        ctx = CanvasProvider.getContext(bounds.getSize().ceil().add(1).multiply(pixelRatio));\n        if (pixelRatio !== 1) ctx.scale(pixelRatio, pixelRatio);\n      }\n\n      ctx.save();\n      var strokeMatrix = parentStrokeMatrix ? parentStrokeMatrix.appended(matrix) : this._canScaleStroke && !this.getStrokeScaling(true) && viewMatrix,\n          clip = !direct && param.clipItem,\n          transform = !strokeMatrix || clip;\n\n      if (direct) {\n        ctx.globalAlpha = opacity;\n        if (nativeBlend) ctx.globalCompositeOperation = blendMode;\n      } else if (transform) {\n        ctx.translate(-itemOffset.x, -itemOffset.y);\n      }\n\n      if (transform) {\n        (direct ? matrix : viewMatrix).applyToContext(ctx);\n      }\n\n      if (clip) {\n        param.clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n\n      if (strokeMatrix) {\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n        var offset = param.offset;\n        if (offset) ctx.translate(-offset.x, -offset.y);\n      }\n\n      this._draw(ctx, param, viewMatrix, strokeMatrix);\n\n      ctx.restore();\n      matrices.pop();\n\n      if (param.clip && !param.dontFinish) {\n        ctx.clip(this.getFillRule());\n      }\n\n      if (!direct) {\n        BlendMode.process(blendMode, ctx, mainCtx, opacity, itemOffset.subtract(prevOffset).multiply(pixelRatio));\n        CanvasProvider.release(ctx);\n        param.offset = prevOffset;\n      }\n    },\n    _isUpdated: function _isUpdated(updateVersion) {\n      var parent = this._parent;\n      if (parent instanceof CompoundPath) return parent._isUpdated(updateVersion);\n      var updated = this._updateVersion === updateVersion;\n\n      if (!updated && parent && parent._visible && parent._isUpdated(updateVersion)) {\n        this._updateVersion = updateVersion;\n        updated = true;\n      }\n\n      return updated;\n    },\n    _drawSelection: function _drawSelection(ctx, matrix, size, selectionItems, updateVersion) {\n      var selection = this._selection,\n          itemSelected = selection & 1,\n          boundsSelected = selection & 2 || itemSelected && this._selectBounds,\n          positionSelected = selection & 4;\n      if (!this._drawSelected) itemSelected = false;\n\n      if ((itemSelected || boundsSelected || positionSelected) && this._isUpdated(updateVersion)) {\n        var layer,\n            color = this.getSelectedColor(true) || (layer = this.getLayer()) && layer.getSelectedColor(true),\n            mx = matrix.appended(this.getGlobalMatrix(true)),\n            half = size / 2;\n        ctx.strokeStyle = ctx.fillStyle = color ? color.toCanvasStyle(ctx) : '#009dec';\n        if (itemSelected) this._drawSelected(ctx, mx, selectionItems);\n\n        if (positionSelected) {\n          var pos = this.getPosition(true),\n              parent = this._parent,\n              point = parent ? parent.localToGlobal(pos) : pos,\n              x = point.x,\n              y = point.y;\n          ctx.beginPath();\n          ctx.arc(x, y, half, 0, Math.PI * 2, true);\n          ctx.stroke();\n          var deltas = [[0, -1], [1, 0], [0, 1], [-1, 0]],\n              start = half,\n              end = size + 1;\n\n          for (var i = 0; i < 4; i++) {\n            var delta = deltas[i],\n                dx = delta[0],\n                dy = delta[1];\n            ctx.moveTo(x + dx * start, y + dy * start);\n            ctx.lineTo(x + dx * end, y + dy * end);\n            ctx.stroke();\n          }\n        }\n\n        if (boundsSelected) {\n          var coords = mx._transformCorners(this.getInternalBounds());\n\n          ctx.beginPath();\n\n          for (var i = 0; i < 8; i++) {\n            ctx[!i ? 'moveTo' : 'lineTo'](coords[i], coords[++i]);\n          }\n\n          ctx.closePath();\n          ctx.stroke();\n\n          for (var i = 0; i < 8; i++) {\n            ctx.fillRect(coords[i] - half, coords[++i] - half, size, size);\n          }\n        }\n      }\n    },\n    _canComposite: function _canComposite() {\n      return false;\n    }\n  }, Base.each(['down', 'drag', 'up', 'move'], function (key) {\n    this['removeOn' + Base.capitalize(key)] = function () {\n      var hash = {};\n      hash[key] = true;\n      return this.removeOn(hash);\n    };\n  }, {\n    removeOn: function removeOn(obj) {\n      for (var name in obj) {\n        if (obj[name]) {\n          var key = 'mouse' + name,\n              project = this._project,\n              sets = project._removeSets = project._removeSets || {};\n          sets[key] = sets[key] || {};\n          sets[key][this._id] = this;\n        }\n      }\n\n      return this;\n    }\n  }), {\n    tween: function tween(from, to, options) {\n      if (!options) {\n        options = to;\n        to = from;\n        from = null;\n\n        if (!options) {\n          options = to;\n          to = null;\n        }\n      }\n\n      var easing = options && options.easing,\n          start = options && options.start,\n          duration = options != null && (typeof options === 'number' ? options : options.duration),\n          tween = new Tween(this, from, to, duration, easing, start);\n\n      function onFrame(event) {\n        tween._handleFrame(event.time * 1000);\n\n        if (!tween.running) {\n          this.off('frame', onFrame);\n        }\n      }\n\n      if (duration) {\n        this.on('frame', onFrame);\n      }\n\n      return tween;\n    },\n    tweenTo: function tweenTo(to, options) {\n      return this.tween(null, to, options);\n    },\n    tweenFrom: function tweenFrom(from, options) {\n      return this.tween(from, null, options);\n    }\n  });\n  var Group = Item.extend({\n    _class: 'Group',\n    _selectBounds: false,\n    _selectChildren: true,\n    _serializeFields: {\n      children: []\n    },\n    initialize: function Group(arg) {\n      this._children = [];\n      this._namedChildren = {};\n      if (!this._initialize(arg)) this.addChildren(Array.isArray(arg) ? arg : arguments);\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n\n      if (flags & 2050) {\n        this._clipItem = undefined;\n      }\n    },\n    _getClipItem: function _getClipItem() {\n      var clipItem = this._clipItem;\n\n      if (clipItem === undefined) {\n        clipItem = null;\n        var children = this._children;\n\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (children[i]._clipMask) {\n            clipItem = children[i];\n            break;\n          }\n        }\n\n        this._clipItem = clipItem;\n      }\n\n      return clipItem;\n    },\n    isClipped: function isClipped() {\n      return !!this._getClipItem();\n    },\n    setClipped: function setClipped(clipped) {\n      var child = this.getFirstChild();\n      if (child) child.setClipMask(clipped);\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var clipItem = this._getClipItem();\n\n      return clipItem ? clipItem._getCachedBounds(clipItem._matrix.prepended(matrix), Base.set({}, options, {\n        stroke: false\n      })) : _getBounds.base.call(this, matrix, options);\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      var clipItem = this._getClipItem();\n\n      return (!clipItem || clipItem.contains(point)) && _hitTestChildren.base.call(this, point, options, viewMatrix, clipItem);\n    },\n    _draw: function _draw(ctx, param) {\n      var clip = param.clip,\n          clipItem = !clip && this._getClipItem();\n\n      param = param.extend({\n        clipItem: clipItem,\n        clip: false\n      });\n\n      if (clip) {\n        ctx.beginPath();\n        param.dontStart = param.dontFinish = true;\n      } else if (clipItem) {\n        clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var item = children[i];\n        if (item !== clipItem) item.draw(ctx, param);\n      }\n    }\n  });\n  var Layer = Group.extend({\n    _class: 'Layer',\n    initialize: function Layer() {\n      Group.apply(this, arguments);\n    },\n    _getOwner: function _getOwner() {\n      return this._parent || this._index != null && this._project;\n    },\n    isInserted: function isInserted() {\n      return this._parent ? isInserted.base.call(this) : this._index != null;\n    },\n    activate: function activate() {\n      this._project._activeLayer = this;\n    },\n    _hitTestSelf: function _hitTestSelf() {}\n  });\n  var Shape = Item.extend({\n    _class: 'Shape',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _canScaleStroke: true,\n    _serializeFields: {\n      type: null,\n      size: null,\n      radius: null\n    },\n    initialize: function Shape(props, point) {\n      this._initialize(props, point);\n    },\n    _equals: function _equals(item) {\n      return this._type === item._type && this._size.equals(item._size) && Base.equals(this._radius, item._radius);\n    },\n    copyContent: function copyContent(source) {\n      this.setType(source._type);\n      this.setSize(source._size);\n      this.setRadius(source._radius);\n    },\n    getType: function getType() {\n      return this._type;\n    },\n    setType: function setType(type) {\n      this._type = type;\n    },\n    getShape: '#getType',\n    setShape: '#setType',\n    getSize: function getSize() {\n      var size = this._size;\n      return new LinkedSize(size.width, size.height, this, 'setSize');\n    },\n    setSize: function setSize() {\n      var size = Size.read(arguments);\n\n      if (!this._size) {\n        this._size = size.clone();\n      } else if (!this._size.equals(size)) {\n        var type = this._type,\n            width = size.width,\n            height = size.height;\n\n        if (type === 'rectangle') {\n          this._radius.set(Size.min(this._radius, size.divide(2).abs()));\n        } else if (type === 'circle') {\n          width = height = (width + height) / 2;\n          this._radius = width / 2;\n        } else if (type === 'ellipse') {\n          this._radius._set(width / 2, height / 2);\n        }\n\n        this._size._set(width, height);\n\n        this._changed(9);\n      }\n    },\n    getRadius: function getRadius() {\n      var rad = this._radius;\n      return this._type === 'circle' ? rad : new LinkedSize(rad.width, rad.height, this, 'setRadius');\n    },\n    setRadius: function setRadius(radius) {\n      var type = this._type;\n\n      if (type === 'circle') {\n        if (radius === this._radius) return;\n        var size = radius * 2;\n        this._radius = radius;\n\n        this._size._set(size, size);\n      } else {\n        radius = Size.read(arguments);\n\n        if (!this._radius) {\n          this._radius = radius.clone();\n        } else {\n          if (this._radius.equals(radius)) return;\n\n          this._radius.set(radius);\n\n          if (type === 'rectangle') {\n            var size = Size.max(this._size, radius.multiply(2));\n\n            this._size.set(size);\n          } else if (type === 'ellipse') {\n            this._size._set(radius.width * 2, radius.height * 2);\n          }\n        }\n      }\n\n      this._changed(9);\n    },\n    isEmpty: function isEmpty() {\n      return false;\n    },\n    toPath: function toPath(insert) {\n      var path = new Path[Base.capitalize(this._type)]({\n        center: new Point(),\n        size: this._size,\n        radius: this._radius,\n        insert: false\n      });\n      path.copyAttributes(this);\n      if (paper.settings.applyMatrix) path.setApplyMatrix(true);\n      if (insert === undefined || insert) path.insertAbove(this);\n      return path;\n    },\n    toShape: '#clone',\n    _asPathItem: function _asPathItem() {\n      return this.toPath(false);\n    },\n    _draw: function _draw(ctx, param, viewMatrix, strokeMatrix) {\n      var style = this._style,\n          hasFill = style.hasFill(),\n          hasStroke = style.hasStroke(),\n          dontPaint = param.dontFinish || param.clip,\n          untransformed = !strokeMatrix;\n\n      if (hasFill || hasStroke || dontPaint) {\n        var type = this._type,\n            radius = this._radius,\n            isCircle = type === 'circle';\n        if (!param.dontStart) ctx.beginPath();\n\n        if (untransformed && isCircle) {\n          ctx.arc(0, 0, radius, 0, Math.PI * 2, true);\n        } else {\n          var rx = isCircle ? radius : radius.width,\n              ry = isCircle ? radius : radius.height,\n              size = this._size,\n              width = size.width,\n              height = size.height;\n\n          if (untransformed && type === 'rectangle' && rx === 0 && ry === 0) {\n            ctx.rect(-width / 2, -height / 2, width, height);\n          } else {\n            var x = width / 2,\n                y = height / 2,\n                kappa = 1 - 0.5522847498307936,\n                cx = rx * kappa,\n                cy = ry * kappa,\n                c = [-x, -y + ry, -x, -y + cy, -x + cx, -y, -x + rx, -y, x - rx, -y, x - cx, -y, x, -y + cy, x, -y + ry, x, y - ry, x, y - cy, x - cx, y, x - rx, y, -x + rx, y, -x + cx, y, -x, y - cy, -x, y - ry];\n            if (strokeMatrix) strokeMatrix.transform(c, c, 32);\n            ctx.moveTo(c[0], c[1]);\n            ctx.bezierCurveTo(c[2], c[3], c[4], c[5], c[6], c[7]);\n            if (x !== rx) ctx.lineTo(c[8], c[9]);\n            ctx.bezierCurveTo(c[10], c[11], c[12], c[13], c[14], c[15]);\n            if (y !== ry) ctx.lineTo(c[16], c[17]);\n            ctx.bezierCurveTo(c[18], c[19], c[20], c[21], c[22], c[23]);\n            if (x !== rx) ctx.lineTo(c[24], c[25]);\n            ctx.bezierCurveTo(c[26], c[27], c[28], c[29], c[30], c[31]);\n          }\n        }\n\n        ctx.closePath();\n      }\n\n      if (!dontPaint && (hasFill || hasStroke)) {\n        this._setStyles(ctx, param, viewMatrix);\n\n        if (hasFill) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n\n        if (hasStroke) ctx.stroke();\n      }\n    },\n    _canComposite: function _canComposite() {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var rect = new _Rectangle(this._size).setCenter(0, 0),\n          style = this._style,\n          strokeWidth = options.stroke && style.hasStroke() && style.getStrokeWidth();\n      if (matrix) rect = matrix._transformBounds(rect);\n      return strokeWidth ? rect.expand(Path._getStrokePadding(strokeWidth, this._getStrokeMatrix(matrix, options))) : rect;\n    }\n  }, new function () {\n    function getCornerCenter(that, point, expand) {\n      var radius = that._radius;\n\n      if (!radius.isZero()) {\n        var halfSize = that._size.divide(2);\n\n        for (var q = 1; q <= 4; q++) {\n          var dir = new Point(q > 1 && q < 4 ? -1 : 1, q > 2 ? -1 : 1),\n              corner = dir.multiply(halfSize),\n              center = corner.subtract(dir.multiply(radius)),\n              rect = new _Rectangle(expand ? corner.add(dir.multiply(expand)) : corner, center);\n          if (rect.contains(point)) return {\n            point: center,\n            quadrant: q\n          };\n        }\n      }\n    }\n\n    function isOnEllipseStroke(point, radius, padding, quadrant) {\n      var vector = point.divide(radius);\n      return (!quadrant || vector.isInQuadrant(quadrant)) && vector.subtract(vector.normalize()).multiply(radius).divide(padding).length <= 1;\n    }\n\n    return {\n      _contains: function _contains(point) {\n        if (this._type === 'rectangle') {\n          var center = getCornerCenter(this, point);\n          return center ? point.subtract(center.point).divide(this._radius).getLength() <= 1 : _contains.base.call(this, point);\n        } else {\n          return point.divide(this.size).getLength() <= 0.5;\n        }\n      },\n      _hitTestSelf: function _hitTestSelf(point, options, viewMatrix, strokeMatrix) {\n        var hit = false,\n            style = this._style,\n            hitStroke = options.stroke && style.hasStroke(),\n            hitFill = options.fill && style.hasFill();\n\n        if (hitStroke || hitFill) {\n          var type = this._type,\n              radius = this._radius,\n              strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : 0,\n              strokePadding = options._tolerancePadding.add(Path._getStrokePadding(strokeRadius, !style.getStrokeScaling() && strokeMatrix));\n\n          if (type === 'rectangle') {\n            var padding = strokePadding.multiply(2),\n                center = getCornerCenter(this, point, padding);\n\n            if (center) {\n              hit = isOnEllipseStroke(point.subtract(center.point), radius, strokePadding, center.quadrant);\n            } else {\n              var rect = new _Rectangle(this._size).setCenter(0, 0),\n                  outer = rect.expand(padding),\n                  inner = rect.expand(padding.negate());\n              hit = outer._containsPoint(point) && !inner._containsPoint(point);\n            }\n          } else {\n            hit = isOnEllipseStroke(point, radius, strokePadding);\n          }\n        }\n\n        return hit ? new HitResult(hitStroke ? 'stroke' : 'fill', this) : _hitTestSelf.base.apply(this, arguments);\n      }\n    };\n  }(), {\n    statics: new function () {\n      function createShape(type, point, size, radius, args) {\n        var item = Base.create(Shape.prototype);\n        item._type = type;\n        item._size = size;\n        item._radius = radius;\n\n        item._initialize(Base.getNamed(args), point);\n\n        return item;\n      }\n\n      return {\n        Circle: function Circle() {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              radius = Base.readNamed(args, 'radius');\n          return createShape('circle', center, new Size(radius * 2), radius, args);\n        },\n        Rectangle: function Rectangle() {\n          var args = arguments,\n              rect = _Rectangle.readNamed(args, 'rectangle'),\n              radius = Size.min(Size.readNamed(args, 'radius'), rect.getSize(true).divide(2));\n\n          return createShape('rectangle', rect.getCenter(true), rect.getSize(true), radius, args);\n        },\n        Ellipse: function Ellipse() {\n          var args = arguments,\n              ellipse = Shape._readEllipse(args),\n              radius = ellipse.radius;\n\n          return createShape('ellipse', ellipse.center, radius.multiply(2), radius, args);\n        },\n        _readEllipse: function _readEllipse(args) {\n          var center, radius;\n\n          if (Base.hasNamed(args, 'radius')) {\n            center = Point.readNamed(args, 'center');\n            radius = Size.readNamed(args, 'radius');\n          } else {\n            var rect = _Rectangle.readNamed(args, 'rectangle');\n\n            center = rect.getCenter(true);\n            radius = rect.getSize(true).divide(2);\n          }\n\n          return {\n            center: center,\n            radius: radius\n          };\n        }\n      };\n    }()\n  });\n  var Raster = Item.extend({\n    _class: 'Raster',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    _serializeFields: {\n      crossOrigin: null,\n      source: null\n    },\n    _prioritize: ['crossOrigin'],\n    _smoothing: true,\n    beans: true,\n    initialize: function Raster(source, position) {\n      if (!this._initialize(source, position !== undefined && Point.read(arguments))) {\n        var image,\n            type = typeof source,\n            object = type === 'string' ? document.getElementById(source) : type === 'object' ? source : null;\n\n        if (object && object !== Item.NO_INSERT) {\n          if (object.getContent || object.naturalHeight != null) {\n            image = object;\n          } else if (object) {\n            var size = Size.read(arguments);\n\n            if (!size.isZero()) {\n              image = CanvasProvider.getCanvas(size);\n            }\n          }\n        }\n\n        if (image) {\n          this.setImage(image);\n        } else {\n          this.setSource(source);\n        }\n      }\n\n      if (!this._size) {\n        this._size = new Size();\n        this._loaded = false;\n      }\n    },\n    _equals: function _equals(item) {\n      return this.getSource() === item.getSource();\n    },\n    copyContent: function copyContent(source) {\n      var image = source._image,\n          canvas = source._canvas;\n\n      if (image) {\n        this._setImage(image);\n      } else if (canvas) {\n        var copyCanvas = CanvasProvider.getCanvas(source._size);\n        copyCanvas.getContext('2d').drawImage(canvas, 0, 0);\n\n        this._setImage(copyCanvas);\n      }\n\n      this._crossOrigin = source._crossOrigin;\n    },\n    getSize: function getSize() {\n      var size = this._size;\n      return new LinkedSize(size ? size.width : 0, size ? size.height : 0, this, 'setSize');\n    },\n    setSize: function setSize() {\n      var size = Size.read(arguments);\n\n      if (!size.equals(this._size)) {\n        if (size.width > 0 && size.height > 0) {\n          var element = this.getElement();\n\n          this._setImage(CanvasProvider.getCanvas(size));\n\n          if (element) this.getContext(true).drawImage(element, 0, 0, size.width, size.height);\n        } else {\n          if (this._canvas) CanvasProvider.release(this._canvas);\n          this._size = size.clone();\n        }\n      }\n    },\n    getWidth: function getWidth() {\n      return this._size ? this._size.width : 0;\n    },\n    setWidth: function setWidth(width) {\n      this.setSize(width, this.getHeight());\n    },\n    getHeight: function getHeight() {\n      return this._size ? this._size.height : 0;\n    },\n    setHeight: function setHeight(height) {\n      this.setSize(this.getWidth(), height);\n    },\n    getLoaded: function getLoaded() {\n      return this._loaded;\n    },\n    isEmpty: function isEmpty() {\n      var size = this._size;\n      return !size || size.width === 0 && size.height === 0;\n    },\n    getResolution: function getResolution() {\n      var matrix = this._matrix,\n          orig = new Point(0, 0).transform(matrix),\n          u = new Point(1, 0).transform(matrix).subtract(orig),\n          v = new Point(0, 1).transform(matrix).subtract(orig);\n      return new Size(72 / u.getLength(), 72 / v.getLength());\n    },\n    getPpi: '#getResolution',\n    getImage: function getImage() {\n      return this._image;\n    },\n    setImage: function setImage(image) {\n      var that = this;\n\n      function emit(event) {\n        var view = that.getView(),\n            type = event && event.type || 'load';\n\n        if (view && that.responds(type)) {\n          paper = view._scope;\n          that.emit(type, new Event(event));\n        }\n      }\n\n      this._setImage(image);\n\n      if (this._loaded) {\n        setTimeout(emit, 0);\n      } else if (image) {\n        DomEvent.add(image, {\n          load: function load(event) {\n            that._setImage(image);\n\n            emit(event);\n          },\n          error: emit\n        });\n      }\n    },\n    _setImage: function _setImage(image) {\n      if (this._canvas) CanvasProvider.release(this._canvas);\n\n      if (image && image.getContext) {\n        this._image = null;\n        this._canvas = image;\n        this._loaded = true;\n      } else {\n        this._image = image;\n        this._canvas = null;\n        this._loaded = !!(image && image.src && image.complete);\n      }\n\n      this._size = new Size(image ? image.naturalWidth || image.width : 0, image ? image.naturalHeight || image.height : 0);\n      this._context = null;\n\n      this._changed(1033);\n    },\n    getCanvas: function getCanvas() {\n      if (!this._canvas) {\n        var ctx = CanvasProvider.getContext(this._size);\n\n        try {\n          if (this._image) ctx.drawImage(this._image, 0, 0);\n          this._canvas = ctx.canvas;\n        } catch (e) {\n          CanvasProvider.release(ctx);\n        }\n      }\n\n      return this._canvas;\n    },\n    setCanvas: '#setImage',\n    getContext: function getContext(_change) {\n      if (!this._context) this._context = this.getCanvas().getContext('2d');\n\n      if (_change) {\n        this._image = null;\n\n        this._changed(1025);\n      }\n\n      return this._context;\n    },\n    setContext: function setContext(context) {\n      this._context = context;\n    },\n    getSource: function getSource() {\n      var image = this._image;\n      return image && image.src || this.toDataURL();\n    },\n    setSource: function setSource(src) {\n      var image = new self.Image(),\n          crossOrigin = this._crossOrigin;\n      if (crossOrigin) image.crossOrigin = crossOrigin;\n      if (src) image.src = src;\n      this.setImage(image);\n    },\n    getCrossOrigin: function getCrossOrigin() {\n      var image = this._image;\n      return image && image.crossOrigin || this._crossOrigin || '';\n    },\n    setCrossOrigin: function setCrossOrigin(crossOrigin) {\n      this._crossOrigin = crossOrigin;\n      var image = this._image;\n      if (image) image.crossOrigin = crossOrigin;\n    },\n    getSmoothing: function getSmoothing() {\n      return this._smoothing;\n    },\n    setSmoothing: function setSmoothing(smoothing) {\n      this._smoothing = smoothing;\n\n      this._changed(257);\n    },\n    getElement: function getElement() {\n      return this._canvas || this._loaded && this._image;\n    }\n  }, {\n    beans: false,\n    getSubCanvas: function getSubCanvas() {\n      var rect = _Rectangle.read(arguments),\n          ctx = CanvasProvider.getContext(rect.getSize());\n\n      ctx.drawImage(this.getCanvas(), rect.x, rect.y, rect.width, rect.height, 0, 0, rect.width, rect.height);\n      return ctx.canvas;\n    },\n    getSubRaster: function getSubRaster() {\n      var rect = _Rectangle.read(arguments),\n          raster = new Raster(Item.NO_INSERT);\n\n      raster._setImage(this.getSubCanvas(rect));\n\n      raster.translate(rect.getCenter().subtract(this.getSize().divide(2)));\n\n      raster._matrix.prepend(this._matrix);\n\n      raster.insertAbove(this);\n      return raster;\n    },\n    toDataURL: function toDataURL() {\n      var image = this._image,\n          src = image && image.src;\n      if (/^data:/.test(src)) return src;\n      var canvas = this.getCanvas();\n      return canvas ? canvas.toDataURL.apply(canvas, arguments) : null;\n    },\n    drawImage: function drawImage(image) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).drawImage(image, point.x, point.y);\n    },\n    getAverageColor: function getAverageColor(object) {\n      var bounds, path;\n\n      if (!object) {\n        bounds = this.getBounds();\n      } else if (object instanceof PathItem) {\n        path = object;\n        bounds = object.getBounds();\n      } else if (typeof object === 'object') {\n        if ('width' in object) {\n          bounds = new _Rectangle(object);\n        } else if ('x' in object) {\n          bounds = new _Rectangle(object.x - 0.5, object.y - 0.5, 1, 1);\n        }\n      }\n\n      if (!bounds) return null;\n      var sampleSize = 32,\n          width = Math.min(bounds.width, sampleSize),\n          height = Math.min(bounds.height, sampleSize);\n      var ctx = Raster._sampleContext;\n\n      if (!ctx) {\n        ctx = Raster._sampleContext = CanvasProvider.getContext(new Size(sampleSize));\n      } else {\n        ctx.clearRect(0, 0, sampleSize + 1, sampleSize + 1);\n      }\n\n      ctx.save();\n      var matrix = new Matrix().scale(width / bounds.width, height / bounds.height).translate(-bounds.x, -bounds.y);\n      matrix.applyToContext(ctx);\n      if (path) path.draw(ctx, new Base({\n        clip: true,\n        matrices: [matrix]\n      }));\n\n      this._matrix.applyToContext(ctx);\n\n      var element = this.getElement(),\n          size = this._size;\n      if (element) ctx.drawImage(element, -size.width / 2, -size.height / 2);\n      ctx.restore();\n      var pixels = ctx.getImageData(0.5, 0.5, Math.ceil(width), Math.ceil(height)).data,\n          channels = [0, 0, 0],\n          total = 0;\n\n      for (var i = 0, l = pixels.length; i < l; i += 4) {\n        var alpha = pixels[i + 3];\n        total += alpha;\n        alpha /= 255;\n        channels[0] += pixels[i] * alpha;\n        channels[1] += pixels[i + 1] * alpha;\n        channels[2] += pixels[i + 2] * alpha;\n      }\n\n      for (var i = 0; i < 3; i++) {\n        channels[i] /= total;\n      }\n\n      return total ? Color.read(channels) : null;\n    },\n    getPixel: function getPixel() {\n      var point = Point.read(arguments);\n      var data = this.getContext().getImageData(point.x, point.y, 1, 1).data;\n      return new Color('rgb', [data[0] / 255, data[1] / 255, data[2] / 255], data[3] / 255);\n    },\n    setPixel: function setPixel() {\n      var args = arguments,\n          point = Point.read(args),\n          color = Color.read(args),\n          components = color._convert('rgb'),\n          alpha = color._alpha,\n          ctx = this.getContext(true),\n          imageData = ctx.createImageData(1, 1),\n          data = imageData.data;\n\n      data[0] = components[0] * 255;\n      data[1] = components[1] * 255;\n      data[2] = components[2] * 255;\n      data[3] = alpha != null ? alpha * 255 : 255;\n      ctx.putImageData(imageData, point.x, point.y);\n    },\n    clear: function clear() {\n      var size = this._size;\n      this.getContext(true).clearRect(0, 0, size.width + 1, size.height + 1);\n    },\n    createImageData: function createImageData() {\n      var size = Size.read(arguments);\n      return this.getContext().createImageData(size.width, size.height);\n    },\n    getImageData: function getImageData() {\n      var rect = _Rectangle.read(arguments);\n\n      if (rect.isEmpty()) rect = new _Rectangle(this._size);\n      return this.getContext().getImageData(rect.x, rect.y, rect.width, rect.height);\n    },\n    setImageData: function setImageData(data) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).putImageData(data, point.x, point.y);\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var rect = new _Rectangle(this._size).setCenter(0, 0);\n      return matrix ? matrix._transformBounds(rect) : rect;\n    },\n    _hitTestSelf: function _hitTestSelf(point) {\n      if (this._contains(point)) {\n        var that = this;\n        return new HitResult('pixel', that, {\n          offset: point.add(that._size.divide(2)).round(),\n          color: {\n            get: function get() {\n              return that.getPixel(this.offset);\n            }\n          }\n        });\n      }\n    },\n    _draw: function _draw(ctx, param, viewMatrix) {\n      var element = this.getElement();\n\n      if (element && element.width > 0 && element.height > 0) {\n        ctx.globalAlpha = this._opacity;\n\n        this._setStyles(ctx, param, viewMatrix);\n\n        DomElement.setPrefixed(ctx, 'imageSmoothingEnabled', this._smoothing);\n        ctx.drawImage(element, -this._size.width / 2, -this._size.height / 2);\n      }\n    },\n    _canComposite: function _canComposite() {\n      return true;\n    }\n  });\n  var SymbolItem = Item.extend({\n    _class: 'SymbolItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: true\n    },\n    _serializeFields: {\n      symbol: null\n    },\n    initialize: function SymbolItem(arg0, arg1) {\n      if (!this._initialize(arg0, arg1 !== undefined && Point.read(arguments, 1))) this.setDefinition(arg0 instanceof SymbolDefinition ? arg0 : new SymbolDefinition(arg0));\n    },\n    _equals: function _equals(item) {\n      return this._definition === item._definition;\n    },\n    copyContent: function copyContent(source) {\n      this.setDefinition(source._definition);\n    },\n    getDefinition: function getDefinition() {\n      return this._definition;\n    },\n    setDefinition: function setDefinition(definition) {\n      this._definition = definition;\n\n      this._changed(9);\n    },\n    getSymbol: '#getDefinition',\n    setSymbol: '#setDefinition',\n    isEmpty: function isEmpty() {\n      return this._definition._item.isEmpty();\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var item = this._definition._item;\n      return item._getCachedBounds(item._matrix.prepended(matrix), options);\n    },\n    _hitTestSelf: function _hitTestSelf(point, options, viewMatrix) {\n      var opts = options.extend({\n        all: false\n      });\n\n      var res = this._definition._item._hitTest(point, opts, viewMatrix);\n\n      if (res) res.item = this;\n      return res;\n    },\n    _draw: function _draw(ctx, param) {\n      this._definition._item.draw(ctx, param);\n    }\n  });\n  var SymbolDefinition = Base.extend({\n    _class: 'SymbolDefinition',\n    initialize: function SymbolDefinition(item, dontCenter) {\n      this._id = UID.get();\n      this.project = paper.project;\n      if (item) this.setItem(item, dontCenter);\n    },\n    _serialize: function _serialize(options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._class, this._item], options, false, dictionary);\n      });\n    },\n    _changed: function _changed(flags) {\n      if (flags & 8) Item._clearBoundsCache(this);\n      if (flags & 1) this.project._changed(flags);\n    },\n    getItem: function getItem() {\n      return this._item;\n    },\n    setItem: function setItem(item, _dontCenter) {\n      if (item._symbol) item = item.clone();\n      if (this._item) this._item._symbol = null;\n      this._item = item;\n      item.remove();\n      item.setSelected(false);\n      if (!_dontCenter) item.setPosition(new Point());\n      item._symbol = this;\n\n      this._changed(9);\n    },\n    getDefinition: '#getItem',\n    setDefinition: '#setItem',\n    place: function place(position) {\n      return new SymbolItem(this, position);\n    },\n    clone: function clone() {\n      return new SymbolDefinition(this._item.clone(false));\n    },\n    equals: function equals(symbol) {\n      return symbol === this || symbol && this._item.equals(symbol._item) || false;\n    }\n  });\n  var HitResult = Base.extend({\n    _class: 'HitResult',\n    initialize: function HitResult(type, item, values) {\n      this.type = type;\n      this.item = item;\n      if (values) this.inject(values);\n    },\n    statics: {\n      getOptions: function getOptions(args) {\n        var options = args && Base.read(args);\n        return new Base({\n          type: null,\n          tolerance: paper.settings.hitTolerance,\n          fill: !options,\n          stroke: !options,\n          segments: !options,\n          handles: false,\n          ends: false,\n          position: false,\n          center: false,\n          bounds: false,\n          guides: false,\n          selected: false\n        }, options);\n      }\n    }\n  });\n  var Segment = Base.extend({\n    _class: 'Segment',\n    beans: true,\n    _selection: 0,\n    initialize: function Segment(arg0, arg1, arg2, arg3, arg4, arg5) {\n      var count = arguments.length,\n          point,\n          handleIn,\n          handleOut,\n          selection;\n\n      if (count > 0) {\n        if (arg0 == null || typeof arg0 === 'object') {\n          if (count === 1 && arg0 && 'point' in arg0) {\n            point = arg0.point;\n            handleIn = arg0.handleIn;\n            handleOut = arg0.handleOut;\n            selection = arg0.selection;\n          } else {\n            point = arg0;\n            handleIn = arg1;\n            handleOut = arg2;\n            selection = arg3;\n          }\n        } else {\n          point = [arg0, arg1];\n          handleIn = arg2 !== undefined ? [arg2, arg3] : null;\n          handleOut = arg4 !== undefined ? [arg4, arg5] : null;\n        }\n      }\n\n      new SegmentPoint(point, this, '_point');\n      new SegmentPoint(handleIn, this, '_handleIn');\n      new SegmentPoint(handleOut, this, '_handleOut');\n      if (selection) this.setSelection(selection);\n    },\n    _serialize: function _serialize(options, dictionary) {\n      var point = this._point,\n          selection = this._selection,\n          obj = selection || this.hasHandles() ? [point, this._handleIn, this._handleOut] : point;\n      if (selection) obj.push(selection);\n      return Base.serialize(obj, options, true, dictionary);\n    },\n    _changed: function _changed(point) {\n      var path = this._path;\n      if (!path) return;\n      var curves = path._curves,\n          index = this._index,\n          curve;\n\n      if (curves) {\n        if ((!point || point === this._point || point === this._handleIn) && (curve = index > 0 ? curves[index - 1] : path._closed ? curves[curves.length - 1] : null)) curve._changed();\n        if ((!point || point === this._point || point === this._handleOut) && (curve = curves[index])) curve._changed();\n      }\n\n      path._changed(41);\n    },\n    getPoint: function getPoint() {\n      return this._point;\n    },\n    setPoint: function setPoint() {\n      this._point.set(Point.read(arguments));\n    },\n    getHandleIn: function getHandleIn() {\n      return this._handleIn;\n    },\n    setHandleIn: function setHandleIn() {\n      this._handleIn.set(Point.read(arguments));\n    },\n    getHandleOut: function getHandleOut() {\n      return this._handleOut;\n    },\n    setHandleOut: function setHandleOut() {\n      this._handleOut.set(Point.read(arguments));\n    },\n    hasHandles: function hasHandles() {\n      return !this._handleIn.isZero() || !this._handleOut.isZero();\n    },\n    isSmooth: function isSmooth() {\n      var handleIn = this._handleIn,\n          handleOut = this._handleOut;\n      return !handleIn.isZero() && !handleOut.isZero() && handleIn.isCollinear(handleOut);\n    },\n    clearHandles: function clearHandles() {\n      this._handleIn._set(0, 0);\n\n      this._handleOut._set(0, 0);\n    },\n    getSelection: function getSelection() {\n      return this._selection;\n    },\n    setSelection: function setSelection(selection) {\n      var oldSelection = this._selection,\n          path = this._path;\n      this._selection = selection = selection || 0;\n\n      if (path && selection !== oldSelection) {\n        path._updateSelection(this, oldSelection, selection);\n\n        path._changed(257);\n      }\n    },\n    _changeSelection: function _changeSelection(flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function isSelected() {\n      return !!(this._selection & 7);\n    },\n    setSelected: function setSelected(selected) {\n      this._changeSelection(7, selected);\n    },\n    getIndex: function getIndex() {\n      return this._index !== undefined ? this._index : null;\n    },\n    getPath: function getPath() {\n      return this._path || null;\n    },\n    getCurve: function getCurve() {\n      var path = this._path,\n          index = this._index;\n\n      if (path) {\n        if (index > 0 && !path._closed && index === path._segments.length - 1) index--;\n        return path.getCurves()[index] || null;\n      }\n\n      return null;\n    },\n    getLocation: function getLocation() {\n      var curve = this.getCurve();\n      return curve ? new CurveLocation(curve, this === curve._segment1 ? 0 : 1) : null;\n    },\n    getNext: function getNext() {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index + 1] || this._path._closed && segments[0]) || null;\n    },\n    smooth: function smooth(options, _first, _last) {\n      var opts = options || {},\n          type = opts.type,\n          factor = opts.factor,\n          prev = this.getPrevious(),\n          next = this.getNext(),\n          p0 = (prev || this)._point,\n          p1 = this._point,\n          p2 = (next || this)._point,\n          d1 = p0.getDistance(p1),\n          d2 = p1.getDistance(p2);\n\n      if (!type || type === 'catmull-rom') {\n        var a = factor === undefined ? 0.5 : factor,\n            d1_a = Math.pow(d1, a),\n            d1_2a = d1_a * d1_a,\n            d2_a = Math.pow(d2, a),\n            d2_2a = d2_a * d2_a;\n\n        if (!_first && prev) {\n          var A = 2 * d2_2a + 3 * d2_a * d1_a + d1_2a,\n              N = 3 * d2_a * (d2_a + d1_a);\n          this.setHandleIn(N !== 0 ? new Point((d2_2a * p0._x + A * p1._x - d1_2a * p2._x) / N - p1._x, (d2_2a * p0._y + A * p1._y - d1_2a * p2._y) / N - p1._y) : new Point());\n        }\n\n        if (!_last && next) {\n          var A = 2 * d1_2a + 3 * d1_a * d2_a + d2_2a,\n              N = 3 * d1_a * (d1_a + d2_a);\n          this.setHandleOut(N !== 0 ? new Point((d1_2a * p2._x + A * p1._x - d2_2a * p0._x) / N - p1._x, (d1_2a * p2._y + A * p1._y - d2_2a * p0._y) / N - p1._y) : new Point());\n        }\n      } else if (type === 'geometric') {\n        if (prev && next) {\n          var vector = p0.subtract(p2),\n              t = factor === undefined ? 0.4 : factor,\n              k = t * d1 / (d1 + d2);\n          if (!_first) this.setHandleIn(vector.multiply(k));\n          if (!_last) this.setHandleOut(vector.multiply(k - t));\n        }\n      } else {\n        throw new Error('Smoothing method \\'' + type + '\\' not supported.');\n      }\n    },\n    getPrevious: function getPrevious() {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index - 1] || this._path._closed && segments[segments.length - 1]) || null;\n    },\n    isFirst: function isFirst() {\n      return !this._index;\n    },\n    isLast: function isLast() {\n      var path = this._path;\n      return path && this._index === path._segments.length - 1 || false;\n    },\n    reverse: function reverse() {\n      var handleIn = this._handleIn,\n          handleOut = this._handleOut,\n          tmp = handleIn.clone();\n      handleIn.set(handleOut);\n      handleOut.set(tmp);\n    },\n    reversed: function reversed() {\n      return new Segment(this._point, this._handleOut, this._handleIn);\n    },\n    remove: function remove() {\n      return this._path ? !!this._path.removeSegment(this._index) : false;\n    },\n    clone: function clone() {\n      return new Segment(this._point, this._handleIn, this._handleOut);\n    },\n    equals: function equals(segment) {\n      return segment === this || segment && this._class === segment._class && this._point.equals(segment._point) && this._handleIn.equals(segment._handleIn) && this._handleOut.equals(segment._handleOut) || false;\n    },\n    toString: function toString() {\n      var parts = ['point: ' + this._point];\n      if (!this._handleIn.isZero()) parts.push('handleIn: ' + this._handleIn);\n      if (!this._handleOut.isZero()) parts.push('handleOut: ' + this._handleOut);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    transform: function transform(matrix) {\n      this._transformCoordinates(matrix, new Array(6), true);\n\n      this._changed();\n    },\n    interpolate: function interpolate(from, to, factor) {\n      var u = 1 - factor,\n          v = factor,\n          point1 = from._point,\n          point2 = to._point,\n          handleIn1 = from._handleIn,\n          handleIn2 = to._handleIn,\n          handleOut2 = to._handleOut,\n          handleOut1 = from._handleOut;\n\n      this._point._set(u * point1._x + v * point2._x, u * point1._y + v * point2._y, true);\n\n      this._handleIn._set(u * handleIn1._x + v * handleIn2._x, u * handleIn1._y + v * handleIn2._y, true);\n\n      this._handleOut._set(u * handleOut1._x + v * handleOut2._x, u * handleOut1._y + v * handleOut2._y, true);\n\n      this._changed();\n    },\n    _transformCoordinates: function _transformCoordinates(matrix, coords, change) {\n      var point = this._point,\n          handleIn = !change || !this._handleIn.isZero() ? this._handleIn : null,\n          handleOut = !change || !this._handleOut.isZero() ? this._handleOut : null,\n          x = point._x,\n          y = point._y,\n          i = 2;\n      coords[0] = x;\n      coords[1] = y;\n\n      if (handleIn) {\n        coords[i++] = handleIn._x + x;\n        coords[i++] = handleIn._y + y;\n      }\n\n      if (handleOut) {\n        coords[i++] = handleOut._x + x;\n        coords[i++] = handleOut._y + y;\n      }\n\n      if (matrix) {\n        matrix._transformCoordinates(coords, coords, i / 2);\n\n        x = coords[0];\n        y = coords[1];\n\n        if (change) {\n          point._x = x;\n          point._y = y;\n          i = 2;\n\n          if (handleIn) {\n            handleIn._x = coords[i++] - x;\n            handleIn._y = coords[i++] - y;\n          }\n\n          if (handleOut) {\n            handleOut._x = coords[i++] - x;\n            handleOut._y = coords[i++] - y;\n          }\n        } else {\n          if (!handleIn) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n\n          if (!handleOut) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n        }\n      }\n\n      return coords;\n    }\n  });\n  var SegmentPoint = Point.extend({\n    initialize: function SegmentPoint(point, owner, key) {\n      var x, y, selected;\n\n      if (!point) {\n        x = y = 0;\n      } else if ((x = point[0]) !== undefined) {\n        y = point[1];\n      } else {\n        var pt = point;\n\n        if ((x = pt.x) === undefined) {\n          pt = Point.read(arguments);\n          x = pt.x;\n        }\n\n        y = pt.y;\n        selected = pt.selected;\n      }\n\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      owner[key] = this;\n      if (selected) this.setSelected(true);\n    },\n    _set: function _set(x, y) {\n      this._x = x;\n      this._y = y;\n\n      this._owner._changed(this);\n\n      return this;\n    },\n    getX: function getX() {\n      return this._x;\n    },\n    setX: function setX(x) {\n      this._x = x;\n\n      this._owner._changed(this);\n    },\n    getY: function getY() {\n      return this._y;\n    },\n    setY: function setY(y) {\n      this._y = y;\n\n      this._owner._changed(this);\n    },\n    isZero: function isZero() {\n      var isZero = Numerical.isZero;\n      return isZero(this._x) && isZero(this._y);\n    },\n    isSelected: function isSelected() {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function setSelected(selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function _getSelection() {\n      var owner = this._owner;\n      return this === owner._point ? 1 : this === owner._handleIn ? 2 : this === owner._handleOut ? 4 : 0;\n    }\n  });\n  var Curve = Base.extend({\n    _class: 'Curve',\n    beans: true,\n    initialize: function Curve(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n      var count = arguments.length,\n          seg1,\n          seg2,\n          point1,\n          point2,\n          handle1,\n          handle2;\n\n      if (count === 3) {\n        this._path = arg0;\n        seg1 = arg1;\n        seg2 = arg2;\n      } else if (!count) {\n        seg1 = new Segment();\n        seg2 = new Segment();\n      } else if (count === 1) {\n        if ('segment1' in arg0) {\n          seg1 = new Segment(arg0.segment1);\n          seg2 = new Segment(arg0.segment2);\n        } else if ('point1' in arg0) {\n          point1 = arg0.point1;\n          handle1 = arg0.handle1;\n          handle2 = arg0.handle2;\n          point2 = arg0.point2;\n        } else if (Array.isArray(arg0)) {\n          point1 = [arg0[0], arg0[1]];\n          point2 = [arg0[6], arg0[7]];\n          handle1 = [arg0[2] - arg0[0], arg0[3] - arg0[1]];\n          handle2 = [arg0[4] - arg0[6], arg0[5] - arg0[7]];\n        }\n      } else if (count === 2) {\n        seg1 = new Segment(arg0);\n        seg2 = new Segment(arg1);\n      } else if (count === 4) {\n        point1 = arg0;\n        handle1 = arg1;\n        handle2 = arg2;\n        point2 = arg3;\n      } else if (count === 8) {\n        point1 = [arg0, arg1];\n        point2 = [arg6, arg7];\n        handle1 = [arg2 - arg0, arg3 - arg1];\n        handle2 = [arg4 - arg6, arg5 - arg7];\n      }\n\n      this._segment1 = seg1 || new Segment(point1, null, handle1);\n      this._segment2 = seg2 || new Segment(point2, handle2, null);\n    },\n    _serialize: function _serialize(options, dictionary) {\n      return Base.serialize(this.hasHandles() ? [this.getPoint1(), this.getHandle1(), this.getHandle2(), this.getPoint2()] : [this.getPoint1(), this.getPoint2()], options, true, dictionary);\n    },\n    _changed: function _changed() {\n      this._length = this._bounds = undefined;\n    },\n    clone: function clone() {\n      return new Curve(this._segment1, this._segment2);\n    },\n    toString: function toString() {\n      var parts = ['point1: ' + this._segment1._point];\n      if (!this._segment1._handleOut.isZero()) parts.push('handle1: ' + this._segment1._handleOut);\n      if (!this._segment2._handleIn.isZero()) parts.push('handle2: ' + this._segment2._handleIn);\n      parts.push('point2: ' + this._segment2._point);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    classify: function classify() {\n      return Curve.classify(this.getValues());\n    },\n    remove: function remove() {\n      var removed = false;\n\n      if (this._path) {\n        var segment2 = this._segment2,\n            handleOut = segment2._handleOut;\n        removed = segment2.remove();\n        if (removed) this._segment1._handleOut.set(handleOut);\n      }\n\n      return removed;\n    },\n    getPoint1: function getPoint1() {\n      return this._segment1._point;\n    },\n    setPoint1: function setPoint1() {\n      this._segment1._point.set(Point.read(arguments));\n    },\n    getPoint2: function getPoint2() {\n      return this._segment2._point;\n    },\n    setPoint2: function setPoint2() {\n      this._segment2._point.set(Point.read(arguments));\n    },\n    getHandle1: function getHandle1() {\n      return this._segment1._handleOut;\n    },\n    setHandle1: function setHandle1() {\n      this._segment1._handleOut.set(Point.read(arguments));\n    },\n    getHandle2: function getHandle2() {\n      return this._segment2._handleIn;\n    },\n    setHandle2: function setHandle2() {\n      this._segment2._handleIn.set(Point.read(arguments));\n    },\n    getSegment1: function getSegment1() {\n      return this._segment1;\n    },\n    getSegment2: function getSegment2() {\n      return this._segment2;\n    },\n    getPath: function getPath() {\n      return this._path;\n    },\n    getIndex: function getIndex() {\n      return this._segment1._index;\n    },\n    getNext: function getNext() {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index + 1] || this._path._closed && curves[0]) || null;\n    },\n    getPrevious: function getPrevious() {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index - 1] || this._path._closed && curves[curves.length - 1]) || null;\n    },\n    isFirst: function isFirst() {\n      return !this._segment1._index;\n    },\n    isLast: function isLast() {\n      var path = this._path;\n      return path && this._segment1._index === path._curves.length - 1 || false;\n    },\n    isSelected: function isSelected() {\n      return this.getPoint1().isSelected() && this.getHandle1().isSelected() && this.getHandle2().isSelected() && this.getPoint2().isSelected();\n    },\n    setSelected: function setSelected(selected) {\n      this.getPoint1().setSelected(selected);\n      this.getHandle1().setSelected(selected);\n      this.getHandle2().setSelected(selected);\n      this.getPoint2().setSelected(selected);\n    },\n    getValues: function getValues(matrix) {\n      return Curve.getValues(this._segment1, this._segment2, matrix);\n    },\n    getPoints: function getPoints() {\n      var coords = this.getValues(),\n          points = [];\n\n      for (var i = 0; i < 8; i += 2) {\n        points.push(new Point(coords[i], coords[i + 1]));\n      }\n\n      return points;\n    }\n  }, {\n    getLength: function getLength() {\n      if (this._length == null) this._length = Curve.getLength(this.getValues(), 0, 1);\n      return this._length;\n    },\n    getArea: function getArea() {\n      return Curve.getArea(this.getValues());\n    },\n    getLine: function getLine() {\n      return new Line(this._segment1._point, this._segment2._point);\n    },\n    getPart: function getPart(from, to) {\n      return new Curve(Curve.getPart(this.getValues(), from, to));\n    },\n    getPartLength: function getPartLength(from, to) {\n      return Curve.getLength(this.getValues(), from, to);\n    },\n    divideAt: function divideAt(location) {\n      return this.divideAtTime(location && location.curve === this ? location.time : this.getTimeAt(location));\n    },\n    divideAtTime: function divideAtTime(time, _setHandles) {\n      var tMin = 1e-8,\n          tMax = 1 - tMin,\n          res = null;\n\n      if (time >= tMin && time <= tMax) {\n        var parts = Curve.subdivide(this.getValues(), time),\n            left = parts[0],\n            right = parts[1],\n            setHandles = _setHandles || this.hasHandles(),\n            seg1 = this._segment1,\n            seg2 = this._segment2,\n            path = this._path;\n\n        if (setHandles) {\n          seg1._handleOut._set(left[2] - left[0], left[3] - left[1]);\n\n          seg2._handleIn._set(right[4] - right[6], right[5] - right[7]);\n        }\n\n        var x = left[6],\n            y = left[7],\n            segment = new Segment(new Point(x, y), setHandles && new Point(left[4] - x, left[5] - y), setHandles && new Point(right[2] - x, right[3] - y));\n\n        if (path) {\n          path.insert(seg1._index + 1, segment);\n          res = this.getNext();\n        } else {\n          this._segment2 = segment;\n\n          this._changed();\n\n          res = new Curve(segment, seg2);\n        }\n      }\n\n      return res;\n    },\n    splitAt: function splitAt(location) {\n      var path = this._path;\n      return path ? path.splitAt(location) : null;\n    },\n    splitAtTime: function splitAtTime(time) {\n      return this.splitAt(this.getLocationAtTime(time));\n    },\n    divide: function divide(offset, isTime) {\n      return this.divideAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    split: function split(offset, isTime) {\n      return this.splitAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    reversed: function reversed() {\n      return new Curve(this._segment2.reversed(), this._segment1.reversed());\n    },\n    clearHandles: function clearHandles() {\n      this._segment1._handleOut._set(0, 0);\n\n      this._segment2._handleIn._set(0, 0);\n    },\n    statics: {\n      getValues: function getValues(segment1, segment2, matrix, straight) {\n        var p1 = segment1._point,\n            h1 = segment1._handleOut,\n            h2 = segment2._handleIn,\n            p2 = segment2._point,\n            x1 = p1.x,\n            y1 = p1.y,\n            x2 = p2.x,\n            y2 = p2.y,\n            values = straight ? [x1, y1, x1, y1, x2, y2, x2, y2] : [x1, y1, x1 + h1._x, y1 + h1._y, x2 + h2._x, y2 + h2._y, x2, y2];\n        if (matrix) matrix._transformCoordinates(values, values, 4);\n        return values;\n      },\n      subdivide: function subdivide(v, t) {\n        var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7];\n        if (t === undefined) t = 0.5;\n        var u = 1 - t,\n            x4 = u * x0 + t * x1,\n            y4 = u * y0 + t * y1,\n            x5 = u * x1 + t * x2,\n            y5 = u * y1 + t * y2,\n            x6 = u * x2 + t * x3,\n            y6 = u * y2 + t * y3,\n            x7 = u * x4 + t * x5,\n            y7 = u * y4 + t * y5,\n            x8 = u * x5 + t * x6,\n            y8 = u * y5 + t * y6,\n            x9 = u * x7 + t * x8,\n            y9 = u * y7 + t * y8;\n        return [[x0, y0, x4, y4, x7, y7, x9, y9], [x9, y9, x8, y8, x6, y6, x3, y3]];\n      },\n      getMonoCurves: function getMonoCurves(v, dir) {\n        var curves = [],\n            io = dir ? 0 : 1,\n            o0 = v[io + 0],\n            o1 = v[io + 2],\n            o2 = v[io + 4],\n            o3 = v[io + 6];\n\n        if (o0 >= o1 === o1 >= o2 && o1 >= o2 === o2 >= o3 || Curve.isStraight(v)) {\n          curves.push(v);\n        } else {\n          var a = 3 * (o1 - o2) - o0 + o3,\n              b = 2 * (o0 + o2) - 4 * o1,\n              c = o1 - o0,\n              tMin = 1e-8,\n              tMax = 1 - tMin,\n              roots = [],\n              n = Numerical.solveQuadratic(a, b, c, roots, tMin, tMax);\n\n          if (!n) {\n            curves.push(v);\n          } else {\n            roots.sort();\n            var t = roots[0],\n                parts = Curve.subdivide(v, t);\n            curves.push(parts[0]);\n\n            if (n > 1) {\n              t = (roots[1] - t) / (1 - t);\n              parts = Curve.subdivide(parts[1], t);\n              curves.push(parts[0]);\n            }\n\n            curves.push(parts[1]);\n          }\n        }\n\n        return curves;\n      },\n      solveCubic: function solveCubic(v, coord, val, roots, min, max) {\n        var v0 = v[coord],\n            v1 = v[coord + 2],\n            v2 = v[coord + 4],\n            v3 = v[coord + 6],\n            res = 0;\n\n        if (!(v0 < val && v3 < val && v1 < val && v2 < val || v0 > val && v3 > val && v1 > val && v2 > val)) {\n          var c = 3 * (v1 - v0),\n              b = 3 * (v2 - v1) - c,\n              a = v3 - v0 - c - b;\n          res = Numerical.solveCubic(a, b, c, v0 - val, roots, min, max);\n        }\n\n        return res;\n      },\n      getTimeOf: function getTimeOf(v, point) {\n        var p0 = new Point(v[0], v[1]),\n            p3 = new Point(v[6], v[7]),\n            epsilon = 1e-12,\n            geomEpsilon = 1e-7,\n            t = point.isClose(p0, epsilon) ? 0 : point.isClose(p3, epsilon) ? 1 : null;\n\n        if (t === null) {\n          var coords = [point.x, point.y],\n              roots = [];\n\n          for (var c = 0; c < 2; c++) {\n            var count = Curve.solveCubic(v, c, coords[c], roots, 0, 1);\n\n            for (var i = 0; i < count; i++) {\n              var u = roots[i];\n              if (point.isClose(Curve.getPoint(v, u), geomEpsilon)) return u;\n            }\n          }\n        }\n\n        return point.isClose(p0, geomEpsilon) ? 0 : point.isClose(p3, geomEpsilon) ? 1 : null;\n      },\n      getNearestTime: function getNearestTime(v, point) {\n        if (Curve.isStraight(v)) {\n          var x0 = v[0],\n              y0 = v[1],\n              x3 = v[6],\n              y3 = v[7],\n              vx = x3 - x0,\n              vy = y3 - y0,\n              det = vx * vx + vy * vy;\n          if (det === 0) return 0;\n          var u = ((point.x - x0) * vx + (point.y - y0) * vy) / det;\n          return u < 1e-12 ? 0 : u > 0.999999999999 ? 1 : Curve.getTimeOf(v, new Point(x0 + u * vx, y0 + u * vy));\n        }\n\n        var count = 100,\n            minDist = Infinity,\n            minT = 0;\n\n        function refine(t) {\n          if (t >= 0 && t <= 1) {\n            var dist = point.getDistance(Curve.getPoint(v, t), true);\n\n            if (dist < minDist) {\n              minDist = dist;\n              minT = t;\n              return true;\n            }\n          }\n        }\n\n        for (var i = 0; i <= count; i++) {\n          refine(i / count);\n        }\n\n        var step = 1 / (count * 2);\n\n        while (step > 1e-8) {\n          if (!refine(minT - step) && !refine(minT + step)) step /= 2;\n        }\n\n        return minT;\n      },\n      getPart: function getPart(v, from, to) {\n        var flip = from > to;\n\n        if (flip) {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n\n        if (from > 0) v = Curve.subdivide(v, from)[1];\n        if (to < 1) v = Curve.subdivide(v, (to - from) / (1 - from))[0];\n        return flip ? [v[6], v[7], v[4], v[5], v[2], v[3], v[0], v[1]] : v;\n      },\n      isFlatEnough: function isFlatEnough(v, flatness) {\n        var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7],\n            ux = 3 * x1 - 2 * x0 - x3,\n            uy = 3 * y1 - 2 * y0 - y3,\n            vx = 3 * x2 - 2 * x3 - x0,\n            vy = 3 * y2 - 2 * y3 - y0;\n        return Math.max(ux * ux, vx * vx) + Math.max(uy * uy, vy * vy) <= 16 * flatness * flatness;\n      },\n      getArea: function getArea(v) {\n        var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7];\n        return 3 * ((y3 - y0) * (x1 + x2) - (x3 - x0) * (y1 + y2) + y1 * (x0 - x2) - x1 * (y0 - y2) + y3 * (x2 + x0 / 3) - x3 * (y2 + y0 / 3)) / 20;\n      },\n      getBounds: function getBounds(v) {\n        var min = v.slice(0, 2),\n            max = min.slice(),\n            roots = [0, 0];\n\n        for (var i = 0; i < 2; i++) {\n          Curve._addBounds(v[i], v[i + 2], v[i + 4], v[i + 6], i, 0, min, max, roots);\n        }\n\n        return new _Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      _addBounds: function _addBounds(v0, v1, v2, v3, coord, padding, min, max, roots) {\n        function add(value, padding) {\n          var left = value - padding,\n              right = value + padding;\n          if (left < min[coord]) min[coord] = left;\n          if (right > max[coord]) max[coord] = right;\n        }\n\n        padding /= 2;\n        var minPad = min[coord] - padding,\n            maxPad = max[coord] + padding;\n\n        if (v0 < minPad || v1 < minPad || v2 < minPad || v3 < minPad || v0 > maxPad || v1 > maxPad || v2 > maxPad || v3 > maxPad) {\n          if (v1 < v0 != v1 < v3 && v2 < v0 != v2 < v3) {\n            add(v0, padding);\n            add(v3, padding);\n          } else {\n            var a = 3 * (v1 - v2) - v0 + v3,\n                b = 2 * (v0 + v2) - 4 * v1,\n                c = v1 - v0,\n                count = Numerical.solveQuadratic(a, b, c, roots),\n                tMin = 1e-8,\n                tMax = 1 - tMin;\n            add(v3, 0);\n\n            for (var i = 0; i < count; i++) {\n              var t = roots[i],\n                  u = 1 - t;\n              if (tMin <= t && t <= tMax) add(u * u * u * v0 + 3 * u * u * t * v1 + 3 * u * t * t * v2 + t * t * t * v3, padding);\n            }\n          }\n        }\n      }\n    }\n  }, Base.each(['getBounds', 'getStrokeBounds', 'getHandleBounds'], function (name) {\n    this[name] = function () {\n      if (!this._bounds) this._bounds = {};\n      var bounds = this._bounds[name];\n\n      if (!bounds) {\n        bounds = this._bounds[name] = Path[name]([this._segment1, this._segment2], false, this._path);\n      }\n\n      return bounds.clone();\n    };\n  }, {}), Base.each({\n    isStraight: function isStraight(p1, h1, h2, p2) {\n      if (h1.isZero() && h2.isZero()) {\n        return true;\n      } else {\n        var v = p2.subtract(p1);\n\n        if (v.isZero()) {\n          return false;\n        } else if (v.isCollinear(h1) && v.isCollinear(h2)) {\n          var l = new Line(p1, p2),\n              epsilon = 1e-7;\n\n          if (l.getDistance(p1.add(h1)) < epsilon && l.getDistance(p2.add(h2)) < epsilon) {\n            var div = v.dot(v),\n                s1 = v.dot(h1) / div,\n                s2 = v.dot(h2) / div;\n            return s1 >= 0 && s1 <= 1 && s2 <= 0 && s2 >= -1;\n          }\n        }\n      }\n\n      return false;\n    },\n    isLinear: function isLinear(p1, h1, h2, p2) {\n      var third = p2.subtract(p1).divide(3);\n      return h1.equals(third) && h2.negate().equals(third);\n    }\n  }, function (test, name) {\n    this[name] = function (epsilon) {\n      var seg1 = this._segment1,\n          seg2 = this._segment2;\n      return test(seg1._point, seg1._handleOut, seg2._handleIn, seg2._point, epsilon);\n    };\n\n    this.statics[name] = function (v, epsilon) {\n      var x0 = v[0],\n          y0 = v[1],\n          x3 = v[6],\n          y3 = v[7];\n      return test(new Point(x0, y0), new Point(v[2] - x0, v[3] - y0), new Point(v[4] - x3, v[5] - y3), new Point(x3, y3), epsilon);\n    };\n  }, {\n    statics: {},\n    hasHandles: function hasHandles() {\n      return !this._segment1._handleOut.isZero() || !this._segment2._handleIn.isZero();\n    },\n    hasLength: function hasLength(epsilon) {\n      return (!this.getPoint1().equals(this.getPoint2()) || this.hasHandles()) && this.getLength() > (epsilon || 0);\n    },\n    isCollinear: function isCollinear(curve) {\n      return curve && this.isStraight() && curve.isStraight() && this.getLine().isCollinear(curve.getLine());\n    },\n    isHorizontal: function isHorizontal() {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).y) < 1e-8;\n    },\n    isVertical: function isVertical() {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).x) < 1e-8;\n    }\n  }), {\n    beans: false,\n    getLocationAt: function getLocationAt(offset, _isTime) {\n      return this.getLocationAtTime(_isTime ? offset : this.getTimeAt(offset));\n    },\n    getLocationAtTime: function getLocationAtTime(t) {\n      return t != null && t >= 0 && t <= 1 ? new CurveLocation(this, t) : null;\n    },\n    getTimeAt: function getTimeAt(offset, start) {\n      return Curve.getTimeAt(this.getValues(), offset, start);\n    },\n    getParameterAt: '#getTimeAt',\n    getTimesWithTangent: function getTimesWithTangent() {\n      var tangent = Point.read(arguments);\n      return tangent.isZero() ? [] : Curve.getTimesWithTangent(this.getValues(), tangent);\n    },\n    getOffsetAtTime: function getOffsetAtTime(t) {\n      return this.getPartLength(0, t);\n    },\n    getLocationOf: function getLocationOf() {\n      return this.getLocationAtTime(this.getTimeOf(Point.read(arguments)));\n    },\n    getOffsetOf: function getOffsetOf() {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getTimeOf: function getTimeOf() {\n      return Curve.getTimeOf(this.getValues(), Point.read(arguments));\n    },\n    getParameterOf: '#getTimeOf',\n    getNearestLocation: function getNearestLocation() {\n      var point = Point.read(arguments),\n          values = this.getValues(),\n          t = Curve.getNearestTime(values, point),\n          pt = Curve.getPoint(values, t);\n      return new CurveLocation(this, t, pt, null, point.getDistance(pt));\n    },\n    getNearestPoint: function getNearestPoint() {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    }\n  }, new function () {\n    var methods = ['getPoint', 'getTangent', 'getNormal', 'getWeightedTangent', 'getWeightedNormal', 'getCurvature'];\n    return Base.each(methods, function (name) {\n      this[name + 'At'] = function (location, _isTime) {\n        var values = this.getValues();\n        return Curve[name](values, _isTime ? location : Curve.getTimeAt(values, location));\n      };\n\n      this[name + 'AtTime'] = function (time) {\n        return Curve[name](this.getValues(), time);\n      };\n    }, {\n      statics: {\n        _evaluateMethods: methods\n      }\n    });\n  }(), new function () {\n    function getLengthIntegrand(v) {\n      var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          ax = 9 * (x1 - x2) + 3 * (x3 - x0),\n          bx = 6 * (x0 + x2) - 12 * x1,\n          cx = 3 * (x1 - x0),\n          ay = 9 * (y1 - y2) + 3 * (y3 - y0),\n          by = 6 * (y0 + y2) - 12 * y1,\n          cy = 3 * (y1 - y0);\n      return function (t) {\n        var dx = (ax * t + bx) * t + cx,\n            dy = (ay * t + by) * t + cy;\n        return Math.sqrt(dx * dx + dy * dy);\n      };\n    }\n\n    function getIterations(a, b) {\n      return Math.max(2, Math.min(16, Math.ceil(Math.abs(b - a) * 32)));\n    }\n\n    function evaluate(v, t, type, normalized) {\n      if (t == null || t < 0 || t > 1) return null;\n      var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          isZero = Numerical.isZero;\n\n      if (isZero(x1 - x0) && isZero(y1 - y0)) {\n        x1 = x0;\n        y1 = y0;\n      }\n\n      if (isZero(x2 - x3) && isZero(y2 - y3)) {\n        x2 = x3;\n        y2 = y3;\n      }\n\n      var cx = 3 * (x1 - x0),\n          bx = 3 * (x2 - x1) - cx,\n          ax = x3 - x0 - cx - bx,\n          cy = 3 * (y1 - y0),\n          by = 3 * (y2 - y1) - cy,\n          ay = y3 - y0 - cy - by,\n          x,\n          y;\n\n      if (type === 0) {\n        x = t === 0 ? x0 : t === 1 ? x3 : ((ax * t + bx) * t + cx) * t + x0;\n        y = t === 0 ? y0 : t === 1 ? y3 : ((ay * t + by) * t + cy) * t + y0;\n      } else {\n        var tMin = 1e-8,\n            tMax = 1 - tMin;\n\n        if (t < tMin) {\n          x = cx;\n          y = cy;\n        } else if (t > tMax) {\n          x = 3 * (x3 - x2);\n          y = 3 * (y3 - y2);\n        } else {\n          x = (3 * ax * t + 2 * bx) * t + cx;\n          y = (3 * ay * t + 2 * by) * t + cy;\n        }\n\n        if (normalized) {\n          if (x === 0 && y === 0 && (t < tMin || t > tMax)) {\n            x = x2 - x1;\n            y = y2 - y1;\n          }\n\n          var len = Math.sqrt(x * x + y * y);\n\n          if (len) {\n            x /= len;\n            y /= len;\n          }\n        }\n\n        if (type === 3) {\n          var x2 = 6 * ax * t + 2 * bx,\n              y2 = 6 * ay * t + 2 * by,\n              d = Math.pow(x * x + y * y, 3 / 2);\n          x = d !== 0 ? (x * y2 - y * x2) / d : 0;\n          y = 0;\n        }\n      }\n\n      return type === 2 ? new Point(y, -x) : new Point(x, y);\n    }\n\n    return {\n      statics: {\n        classify: function classify(v) {\n          var x0 = v[0],\n              y0 = v[1],\n              x1 = v[2],\n              y1 = v[3],\n              x2 = v[4],\n              y2 = v[5],\n              x3 = v[6],\n              y3 = v[7],\n              a1 = x0 * (y3 - y2) + y0 * (x2 - x3) + x3 * y2 - y3 * x2,\n              a2 = x1 * (y0 - y3) + y1 * (x3 - x0) + x0 * y3 - y0 * x3,\n              a3 = x2 * (y1 - y0) + y2 * (x0 - x1) + x1 * y0 - y1 * x0,\n              d3 = 3 * a3,\n              d2 = d3 - a2,\n              d1 = d2 - a2 + a1,\n              l = Math.sqrt(d1 * d1 + d2 * d2 + d3 * d3),\n              s = l !== 0 ? 1 / l : 0,\n              isZero = Numerical.isZero,\n              serpentine = 'serpentine';\n          d1 *= s;\n          d2 *= s;\n          d3 *= s;\n\n          function type(type, t1, t2) {\n            var hasRoots = t1 !== undefined,\n                t1Ok = hasRoots && t1 > 0 && t1 < 1,\n                t2Ok = hasRoots && t2 > 0 && t2 < 1;\n\n            if (hasRoots && (!(t1Ok || t2Ok) || type === 'loop' && !(t1Ok && t2Ok))) {\n              type = 'arch';\n              t1Ok = t2Ok = false;\n            }\n\n            return {\n              type: type,\n              roots: t1Ok || t2Ok ? t1Ok && t2Ok ? t1 < t2 ? [t1, t2] : [t2, t1] : [t1Ok ? t1 : t2] : null\n            };\n          }\n\n          if (isZero(d1)) {\n            return isZero(d2) ? type(isZero(d3) ? 'line' : 'quadratic') : type(serpentine, d3 / (3 * d2));\n          }\n\n          var d = 3 * d2 * d2 - 4 * d1 * d3;\n\n          if (isZero(d)) {\n            return type('cusp', d2 / (2 * d1));\n          }\n\n          var f1 = d > 0 ? Math.sqrt(d / 3) : Math.sqrt(-d),\n              f2 = 2 * d1;\n          return type(d > 0 ? serpentine : 'loop', (d2 + f1) / f2, (d2 - f1) / f2);\n        },\n        getLength: function getLength(v, a, b, ds) {\n          if (a === undefined) a = 0;\n          if (b === undefined) b = 1;\n\n          if (Curve.isStraight(v)) {\n            var c = v;\n\n            if (b < 1) {\n              c = Curve.subdivide(c, b)[0];\n              a /= b;\n            }\n\n            if (a > 0) {\n              c = Curve.subdivide(c, a)[1];\n            }\n\n            var dx = c[6] - c[0],\n                dy = c[7] - c[1];\n            return Math.sqrt(dx * dx + dy * dy);\n          }\n\n          return Numerical.integrate(ds || getLengthIntegrand(v), a, b, getIterations(a, b));\n        },\n        getTimeAt: function getTimeAt(v, offset, start) {\n          if (start === undefined) start = offset < 0 ? 1 : 0;\n          if (offset === 0) return start;\n          var abs = Math.abs,\n              epsilon = 1e-12,\n              forward = offset > 0,\n              a = forward ? start : 0,\n              b = forward ? 1 : start,\n              ds = getLengthIntegrand(v),\n              rangeLength = Curve.getLength(v, a, b, ds),\n              diff = abs(offset) - rangeLength;\n\n          if (abs(diff) < epsilon) {\n            return forward ? b : a;\n          } else if (diff > epsilon) {\n            return null;\n          }\n\n          var guess = offset / rangeLength,\n              length = 0;\n\n          function f(t) {\n            length += Numerical.integrate(ds, start, t, getIterations(start, t));\n            start = t;\n            return length - offset;\n          }\n\n          return Numerical.findRoot(f, ds, start + guess, a, b, 32, 1e-12);\n        },\n        getPoint: function getPoint(v, t) {\n          return evaluate(v, t, 0, false);\n        },\n        getTangent: function getTangent(v, t) {\n          return evaluate(v, t, 1, true);\n        },\n        getWeightedTangent: function getWeightedTangent(v, t) {\n          return evaluate(v, t, 1, false);\n        },\n        getNormal: function getNormal(v, t) {\n          return evaluate(v, t, 2, true);\n        },\n        getWeightedNormal: function getWeightedNormal(v, t) {\n          return evaluate(v, t, 2, false);\n        },\n        getCurvature: function getCurvature(v, t) {\n          return evaluate(v, t, 3, false).x;\n        },\n        getPeaks: function getPeaks(v) {\n          var x0 = v[0],\n              y0 = v[1],\n              x1 = v[2],\n              y1 = v[3],\n              x2 = v[4],\n              y2 = v[5],\n              x3 = v[6],\n              y3 = v[7],\n              ax = -x0 + 3 * x1 - 3 * x2 + x3,\n              bx = 3 * x0 - 6 * x1 + 3 * x2,\n              cx = -3 * x0 + 3 * x1,\n              ay = -y0 + 3 * y1 - 3 * y2 + y3,\n              by = 3 * y0 - 6 * y1 + 3 * y2,\n              cy = -3 * y0 + 3 * y1,\n              tMin = 1e-8,\n              tMax = 1 - tMin,\n              roots = [];\n          Numerical.solveCubic(9 * (ax * ax + ay * ay), 9 * (ax * bx + by * ay), 2 * (bx * bx + by * by) + 3 * (cx * ax + cy * ay), cx * bx + by * cy, roots, tMin, tMax);\n          return roots.sort();\n        }\n      }\n    };\n  }(), new function () {\n    function addLocation(locations, include, c1, t1, c2, t2, overlap) {\n      var excludeStart = !overlap && c1.getPrevious() === c2,\n          excludeEnd = !overlap && c1 !== c2 && c1.getNext() === c2,\n          tMin = 1e-8,\n          tMax = 1 - tMin;\n\n      if (t1 !== null && t1 >= (excludeStart ? tMin : 0) && t1 <= (excludeEnd ? tMax : 1)) {\n        if (t2 !== null && t2 >= (excludeEnd ? tMin : 0) && t2 <= (excludeStart ? tMax : 1)) {\n          var loc1 = new CurveLocation(c1, t1, null, overlap),\n              loc2 = new CurveLocation(c2, t2, null, overlap);\n          loc1._intersection = loc2;\n          loc2._intersection = loc1;\n\n          if (!include || include(loc1)) {\n            CurveLocation.insert(locations, loc1, true);\n          }\n        }\n      }\n    }\n\n    function addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMin, tMax, uMin, uMax) {\n      if (++calls >= 4096 || ++recursion >= 40) return calls;\n      var fatLineEpsilon = 1e-9,\n          q0x = v2[0],\n          q0y = v2[1],\n          q3x = v2[6],\n          q3y = v2[7],\n          getSignedDistance = Line.getSignedDistance,\n          d1 = getSignedDistance(q0x, q0y, q3x, q3y, v2[2], v2[3]),\n          d2 = getSignedDistance(q0x, q0y, q3x, q3y, v2[4], v2[5]),\n          factor = d1 * d2 > 0 ? 3 / 4 : 4 / 9,\n          dMin = factor * Math.min(0, d1, d2),\n          dMax = factor * Math.max(0, d1, d2),\n          dp0 = getSignedDistance(q0x, q0y, q3x, q3y, v1[0], v1[1]),\n          dp1 = getSignedDistance(q0x, q0y, q3x, q3y, v1[2], v1[3]),\n          dp2 = getSignedDistance(q0x, q0y, q3x, q3y, v1[4], v1[5]),\n          dp3 = getSignedDistance(q0x, q0y, q3x, q3y, v1[6], v1[7]),\n          hull = getConvexHull(dp0, dp1, dp2, dp3),\n          top = hull[0],\n          bottom = hull[1],\n          tMinClip,\n          tMaxClip;\n      if (d1 === 0 && d2 === 0 && dp0 === 0 && dp1 === 0 && dp2 === 0 && dp3 === 0 || (tMinClip = clipConvexHull(top, bottom, dMin, dMax)) == null || (tMaxClip = clipConvexHull(top.reverse(), bottom.reverse(), dMin, dMax)) == null) return calls;\n      var tMinNew = tMin + (tMax - tMin) * tMinClip,\n          tMaxNew = tMin + (tMax - tMin) * tMaxClip;\n\n      if (Math.max(uMax - uMin, tMaxNew - tMinNew) < fatLineEpsilon) {\n        var t = (tMinNew + tMaxNew) / 2,\n            u = (uMin + uMax) / 2;\n        addLocation(locations, include, flip ? c2 : c1, flip ? u : t, flip ? c1 : c2, flip ? t : u);\n      } else {\n        v1 = Curve.getPart(v1, tMinClip, tMaxClip);\n        var uDiff = uMax - uMin;\n\n        if (tMaxClip - tMinClip > 0.8) {\n          if (tMaxNew - tMinNew > uDiff) {\n            var parts = Curve.subdivide(v1, 0.5),\n                t = (tMinNew + tMaxNew) / 2;\n            calls = addCurveIntersections(v2, parts[0], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, t);\n            calls = addCurveIntersections(v2, parts[1], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, t, tMaxNew);\n          } else {\n            var parts = Curve.subdivide(v2, 0.5),\n                u = (uMin + uMax) / 2;\n            calls = addCurveIntersections(parts[0], v1, c2, c1, locations, include, !flip, recursion, calls, uMin, u, tMinNew, tMaxNew);\n            calls = addCurveIntersections(parts[1], v1, c2, c1, locations, include, !flip, recursion, calls, u, uMax, tMinNew, tMaxNew);\n          }\n        } else {\n          if (uDiff === 0 || uDiff >= fatLineEpsilon) {\n            calls = addCurveIntersections(v2, v1, c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, tMaxNew);\n          } else {\n            calls = addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMinNew, tMaxNew, uMin, uMax);\n          }\n        }\n      }\n\n      return calls;\n    }\n\n    function getConvexHull(dq0, dq1, dq2, dq3) {\n      var p0 = [0, dq0],\n          p1 = [1 / 3, dq1],\n          p2 = [2 / 3, dq2],\n          p3 = [1, dq3],\n          dist1 = dq1 - (2 * dq0 + dq3) / 3,\n          dist2 = dq2 - (dq0 + 2 * dq3) / 3,\n          hull;\n\n      if (dist1 * dist2 < 0) {\n        hull = [[p0, p1, p3], [p0, p2, p3]];\n      } else {\n        var distRatio = dist1 / dist2;\n        hull = [distRatio >= 2 ? [p0, p1, p3] : distRatio <= 0.5 ? [p0, p2, p3] : [p0, p1, p2, p3], [p0, p3]];\n      }\n\n      return (dist1 || dist2) < 0 ? hull.reverse() : hull;\n    }\n\n    function clipConvexHull(hullTop, hullBottom, dMin, dMax) {\n      if (hullTop[0][1] < dMin) {\n        return clipConvexHullPart(hullTop, true, dMin);\n      } else if (hullBottom[0][1] > dMax) {\n        return clipConvexHullPart(hullBottom, false, dMax);\n      } else {\n        return hullTop[0][0];\n      }\n    }\n\n    function clipConvexHullPart(part, top, threshold) {\n      var px = part[0][0],\n          py = part[0][1];\n\n      for (var i = 1, l = part.length; i < l; i++) {\n        var qx = part[i][0],\n            qy = part[i][1];\n\n        if (top ? qy >= threshold : qy <= threshold) {\n          return qy === threshold ? qx : px + (threshold - py) * (qx - px) / (qy - py);\n        }\n\n        px = qx;\n        py = qy;\n      }\n\n      return null;\n    }\n\n    function getCurveLineIntersections(v, px, py, vx, vy) {\n      var isZero = Numerical.isZero;\n\n      if (isZero(vx) && isZero(vy)) {\n        var t = Curve.getTimeOf(v, new Point(px, py));\n        return t === null ? [] : [t];\n      }\n\n      var angle = Math.atan2(-vy, vx),\n          sin = Math.sin(angle),\n          cos = Math.cos(angle),\n          rv = [],\n          roots = [];\n\n      for (var i = 0; i < 8; i += 2) {\n        var x = v[i] - px,\n            y = v[i + 1] - py;\n        rv.push(x * cos - y * sin, x * sin + y * cos);\n      }\n\n      Curve.solveCubic(rv, 1, 0, roots, 0, 1);\n      return roots;\n    }\n\n    function addCurveLineIntersections(v1, v2, c1, c2, locations, include, flip) {\n      var x1 = v2[0],\n          y1 = v2[1],\n          x2 = v2[6],\n          y2 = v2[7],\n          roots = getCurveLineIntersections(v1, x1, y1, x2 - x1, y2 - y1);\n\n      for (var i = 0, l = roots.length; i < l; i++) {\n        var t1 = roots[i],\n            p1 = Curve.getPoint(v1, t1),\n            t2 = Curve.getTimeOf(v2, p1);\n\n        if (t2 !== null) {\n          addLocation(locations, include, flip ? c2 : c1, flip ? t2 : t1, flip ? c1 : c2, flip ? t1 : t2);\n        }\n      }\n    }\n\n    function addLineIntersection(v1, v2, c1, c2, locations, include) {\n      var pt = Line.intersect(v1[0], v1[1], v1[6], v1[7], v2[0], v2[1], v2[6], v2[7]);\n\n      if (pt) {\n        addLocation(locations, include, c1, Curve.getTimeOf(v1, pt), c2, Curve.getTimeOf(v2, pt));\n      }\n    }\n\n    function getCurveIntersections(v1, v2, c1, c2, locations, include) {\n      var epsilon = 1e-12,\n          min = Math.min,\n          max = Math.max;\n\n      if (max(v1[0], v1[2], v1[4], v1[6]) + epsilon > min(v2[0], v2[2], v2[4], v2[6]) && min(v1[0], v1[2], v1[4], v1[6]) - epsilon < max(v2[0], v2[2], v2[4], v2[6]) && max(v1[1], v1[3], v1[5], v1[7]) + epsilon > min(v2[1], v2[3], v2[5], v2[7]) && min(v1[1], v1[3], v1[5], v1[7]) - epsilon < max(v2[1], v2[3], v2[5], v2[7])) {\n        var overlaps = getOverlaps(v1, v2);\n\n        if (overlaps) {\n          for (var i = 0; i < 2; i++) {\n            var overlap = overlaps[i];\n            addLocation(locations, include, c1, overlap[0], c2, overlap[1], true);\n          }\n        } else {\n          var straight1 = Curve.isStraight(v1),\n              straight2 = Curve.isStraight(v2),\n              straight = straight1 && straight2,\n              flip = straight1 && !straight2,\n              before = locations.length;\n          (straight ? addLineIntersection : straight1 || straight2 ? addCurveLineIntersections : addCurveIntersections)(flip ? v2 : v1, flip ? v1 : v2, flip ? c2 : c1, flip ? c1 : c2, locations, include, flip, 0, 0, 0, 1, 0, 1);\n\n          if (!straight || locations.length === before) {\n            for (var i = 0; i < 4; i++) {\n              var t1 = i >> 1,\n                  t2 = i & 1,\n                  i1 = t1 * 6,\n                  i2 = t2 * 6,\n                  p1 = new Point(v1[i1], v1[i1 + 1]),\n                  p2 = new Point(v2[i2], v2[i2 + 1]);\n\n              if (p1.isClose(p2, epsilon)) {\n                addLocation(locations, include, c1, t1, c2, t2);\n              }\n            }\n          }\n        }\n      }\n\n      return locations;\n    }\n\n    function getSelfIntersection(v1, c1, locations, include) {\n      var info = Curve.classify(v1);\n\n      if (info.type === 'loop') {\n        var roots = info.roots;\n        addLocation(locations, include, c1, roots[0], c1, roots[1]);\n      }\n\n      return locations;\n    }\n\n    function getIntersections(curves1, curves2, include, matrix1, matrix2, _returnFirst) {\n      var epsilon = 1e-7,\n          self = !curves2;\n      if (self) curves2 = curves1;\n      var length1 = curves1.length,\n          length2 = curves2.length,\n          values1 = new Array(length1),\n          values2 = self ? values1 : new Array(length2),\n          locations = [];\n\n      for (var i = 0; i < length1; i++) {\n        values1[i] = curves1[i].getValues(matrix1);\n      }\n\n      if (!self) {\n        for (var i = 0; i < length2; i++) {\n          values2[i] = curves2[i].getValues(matrix2);\n        }\n      }\n\n      var boundsCollisions = CollisionDetection.findCurveBoundsCollisions(values1, values2, epsilon);\n\n      for (var index1 = 0; index1 < length1; index1++) {\n        var curve1 = curves1[index1],\n            v1 = values1[index1];\n\n        if (self) {\n          getSelfIntersection(v1, curve1, locations, include);\n        }\n\n        var collisions1 = boundsCollisions[index1];\n\n        if (collisions1) {\n          for (var j = 0; j < collisions1.length; j++) {\n            if (_returnFirst && locations.length) return locations;\n            var index2 = collisions1[j];\n\n            if (!self || index2 > index1) {\n              var curve2 = curves2[index2],\n                  v2 = values2[index2];\n              getCurveIntersections(v1, v2, curve1, curve2, locations, include);\n            }\n          }\n        }\n      }\n\n      return locations;\n    }\n\n    function getOverlaps(v1, v2) {\n      function getSquaredLineLength(v) {\n        var x = v[6] - v[0],\n            y = v[7] - v[1];\n        return x * x + y * y;\n      }\n\n      var abs = Math.abs,\n          getDistance = Line.getDistance,\n          timeEpsilon = 1e-8,\n          geomEpsilon = 1e-7,\n          straight1 = Curve.isStraight(v1),\n          straight2 = Curve.isStraight(v2),\n          straightBoth = straight1 && straight2,\n          flip = getSquaredLineLength(v1) < getSquaredLineLength(v2),\n          l1 = flip ? v2 : v1,\n          l2 = flip ? v1 : v2,\n          px = l1[0],\n          py = l1[1],\n          vx = l1[6] - px,\n          vy = l1[7] - py;\n\n      if (getDistance(px, py, vx, vy, l2[0], l2[1], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[6], l2[7], true) < geomEpsilon) {\n        if (!straightBoth && getDistance(px, py, vx, vy, l1[2], l1[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l1[4], l1[5], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[2], l2[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[4], l2[5], true) < geomEpsilon) {\n          straight1 = straight2 = straightBoth = true;\n        }\n      } else if (straightBoth) {\n        return null;\n      }\n\n      if (straight1 ^ straight2) {\n        return null;\n      }\n\n      var v = [v1, v2],\n          pairs = [];\n\n      for (var i = 0; i < 4 && pairs.length < 2; i++) {\n        var i1 = i & 1,\n            i2 = i1 ^ 1,\n            t1 = i >> 1,\n            t2 = Curve.getTimeOf(v[i1], new Point(v[i2][t1 ? 6 : 0], v[i2][t1 ? 7 : 1]));\n\n        if (t2 != null) {\n          var pair = i1 ? [t1, t2] : [t2, t1];\n\n          if (!pairs.length || abs(pair[0] - pairs[0][0]) > timeEpsilon && abs(pair[1] - pairs[0][1]) > timeEpsilon) {\n            pairs.push(pair);\n          }\n        }\n\n        if (i > 2 && !pairs.length) break;\n      }\n\n      if (pairs.length !== 2) {\n        pairs = null;\n      } else if (!straightBoth) {\n        var o1 = Curve.getPart(v1, pairs[0][0], pairs[1][0]),\n            o2 = Curve.getPart(v2, pairs[0][1], pairs[1][1]);\n        if (abs(o2[2] - o1[2]) > geomEpsilon || abs(o2[3] - o1[3]) > geomEpsilon || abs(o2[4] - o1[4]) > geomEpsilon || abs(o2[5] - o1[5]) > geomEpsilon) pairs = null;\n      }\n\n      return pairs;\n    }\n\n    function getTimesWithTangent(v, tangent) {\n      var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          normalized = tangent.normalize(),\n          tx = normalized.x,\n          ty = normalized.y,\n          ax = 3 * x3 - 9 * x2 + 9 * x1 - 3 * x0,\n          ay = 3 * y3 - 9 * y2 + 9 * y1 - 3 * y0,\n          bx = 6 * x2 - 12 * x1 + 6 * x0,\n          by = 6 * y2 - 12 * y1 + 6 * y0,\n          cx = 3 * x1 - 3 * x0,\n          cy = 3 * y1 - 3 * y0,\n          den = 2 * ax * ty - 2 * ay * tx,\n          times = [];\n\n      if (Math.abs(den) < Numerical.CURVETIME_EPSILON) {\n        var num = ax * cy - ay * cx,\n            den = ax * by - ay * bx;\n\n        if (den != 0) {\n          var t = -num / den;\n          if (t >= 0 && t <= 1) times.push(t);\n        }\n      } else {\n        var delta = (bx * bx - 4 * ax * cx) * ty * ty + (-2 * bx * by + 4 * ay * cx + 4 * ax * cy) * tx * ty + (by * by - 4 * ay * cy) * tx * tx,\n            k = bx * ty - by * tx;\n\n        if (delta >= 0 && den != 0) {\n          var d = Math.sqrt(delta),\n              t0 = -(k + d) / den,\n              t1 = (-k + d) / den;\n          if (t0 >= 0 && t0 <= 1) times.push(t0);\n          if (t1 >= 0 && t1 <= 1) times.push(t1);\n        }\n      }\n\n      return times;\n    }\n\n    return {\n      getIntersections: function getIntersections(curve) {\n        var v1 = this.getValues(),\n            v2 = curve && curve !== this && curve.getValues();\n        return v2 ? getCurveIntersections(v1, v2, this, curve, []) : getSelfIntersection(v1, this, []);\n      },\n      statics: {\n        getOverlaps: getOverlaps,\n        getIntersections: getIntersections,\n        getCurveLineIntersections: getCurveLineIntersections,\n        getTimesWithTangent: getTimesWithTangent\n      }\n    };\n  }());\n  var CurveLocation = Base.extend({\n    _class: 'CurveLocation',\n    initialize: function CurveLocation(curve, time, point, _overlap, _distance) {\n      if (time >= 0.99999999) {\n        var next = curve.getNext();\n\n        if (next) {\n          time = 0;\n          curve = next;\n        }\n      }\n\n      this._setCurve(curve);\n\n      this._time = time;\n      this._point = point || curve.getPointAtTime(time);\n      this._overlap = _overlap;\n      this._distance = _distance;\n      this._intersection = this._next = this._previous = null;\n    },\n    _setCurve: function _setCurve(curve) {\n      var path = curve._path;\n      this._path = path;\n      this._version = path ? path._version : 0;\n      this._curve = curve;\n      this._segment = null;\n      this._segment1 = curve._segment1;\n      this._segment2 = curve._segment2;\n    },\n    _setSegment: function _setSegment(segment) {\n      this._setCurve(segment.getCurve());\n\n      this._segment = segment;\n      this._time = segment === this._segment1 ? 0 : 1;\n      this._point = segment._point.clone();\n    },\n    getSegment: function getSegment() {\n      var segment = this._segment;\n\n      if (!segment) {\n        var curve = this.getCurve(),\n            time = this.getTime();\n\n        if (time === 0) {\n          segment = curve._segment1;\n        } else if (time === 1) {\n          segment = curve._segment2;\n        } else if (time != null) {\n          segment = curve.getPartLength(0, time) < curve.getPartLength(time, 1) ? curve._segment1 : curve._segment2;\n        }\n\n        this._segment = segment;\n      }\n\n      return segment;\n    },\n    getCurve: function getCurve() {\n      var path = this._path,\n          that = this;\n\n      if (path && path._version !== this._version) {\n        this._time = this._offset = this._curveOffset = this._curve = null;\n      }\n\n      function trySegment(segment) {\n        var curve = segment && segment.getCurve();\n\n        if (curve && (that._time = curve.getTimeOf(that._point)) != null) {\n          that._setCurve(curve);\n\n          return curve;\n        }\n      }\n\n      return this._curve || trySegment(this._segment) || trySegment(this._segment1) || trySegment(this._segment2.getPrevious());\n    },\n    getPath: function getPath() {\n      var curve = this.getCurve();\n      return curve && curve._path;\n    },\n    getIndex: function getIndex() {\n      var curve = this.getCurve();\n      return curve && curve.getIndex();\n    },\n    getTime: function getTime() {\n      var curve = this.getCurve(),\n          time = this._time;\n      return curve && time == null ? this._time = curve.getTimeOf(this._point) : time;\n    },\n    getParameter: '#getTime',\n    getPoint: function getPoint() {\n      return this._point;\n    },\n    getOffset: function getOffset() {\n      var offset = this._offset;\n\n      if (offset == null) {\n        offset = 0;\n        var path = this.getPath(),\n            index = this.getIndex();\n\n        if (path && index != null) {\n          var curves = path.getCurves();\n\n          for (var i = 0; i < index; i++) {\n            offset += curves[i].getLength();\n          }\n        }\n\n        this._offset = offset += this.getCurveOffset();\n      }\n\n      return offset;\n    },\n    getCurveOffset: function getCurveOffset() {\n      var offset = this._curveOffset;\n\n      if (offset == null) {\n        var curve = this.getCurve(),\n            time = this.getTime();\n        this._curveOffset = offset = time != null && curve && curve.getPartLength(0, time);\n      }\n\n      return offset;\n    },\n    getIntersection: function getIntersection() {\n      return this._intersection;\n    },\n    getDistance: function getDistance() {\n      return this._distance;\n    },\n    divide: function divide() {\n      var curve = this.getCurve(),\n          res = curve && curve.divideAtTime(this.getTime());\n\n      if (res) {\n        this._setSegment(res._segment1);\n      }\n\n      return res;\n    },\n    split: function split() {\n      var curve = this.getCurve(),\n          path = curve._path,\n          res = curve && curve.splitAtTime(this.getTime());\n\n      if (res) {\n        this._setSegment(path.getLastSegment());\n      }\n\n      return res;\n    },\n    equals: function equals(loc, _ignoreOther) {\n      var res = this === loc;\n\n      if (!res && loc instanceof CurveLocation) {\n        var c1 = this.getCurve(),\n            c2 = loc.getCurve(),\n            p1 = c1._path,\n            p2 = c2._path;\n\n        if (p1 === p2) {\n          var abs = Math.abs,\n              epsilon = 1e-7,\n              diff = abs(this.getOffset() - loc.getOffset()),\n              i1 = !_ignoreOther && this._intersection,\n              i2 = !_ignoreOther && loc._intersection;\n          res = (diff < epsilon || p1 && abs(p1.getLength() - diff) < epsilon) && (!i1 && !i2 || i1 && i2 && i1.equals(i2, true));\n        }\n      }\n\n      return res;\n    },\n    toString: function toString() {\n      var parts = [],\n          point = this.getPoint(),\n          f = Formatter.instance;\n      if (point) parts.push('point: ' + point);\n      var index = this.getIndex();\n      if (index != null) parts.push('index: ' + index);\n      var time = this.getTime();\n      if (time != null) parts.push('time: ' + f.number(time));\n      if (this._distance != null) parts.push('distance: ' + f.number(this._distance));\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    isTouching: function isTouching() {\n      var inter = this._intersection;\n\n      if (inter && this.getTangent().isCollinear(inter.getTangent())) {\n        var curve1 = this.getCurve(),\n            curve2 = inter.getCurve();\n        return !(curve1.isStraight() && curve2.isStraight() && curve1.getLine().intersect(curve2.getLine()));\n      }\n\n      return false;\n    },\n    isCrossing: function isCrossing() {\n      var inter = this._intersection;\n      if (!inter) return false;\n      var t1 = this.getTime(),\n          t2 = inter.getTime(),\n          tMin = 1e-8,\n          tMax = 1 - tMin,\n          t1Inside = t1 >= tMin && t1 <= tMax,\n          t2Inside = t2 >= tMin && t2 <= tMax;\n      if (t1Inside && t2Inside) return !this.isTouching();\n      var c2 = this.getCurve(),\n          c1 = c2 && t1 < tMin ? c2.getPrevious() : c2,\n          c4 = inter.getCurve(),\n          c3 = c4 && t2 < tMin ? c4.getPrevious() : c4;\n      if (t1 > tMax) c2 = c2.getNext();\n      if (t2 > tMax) c4 = c4.getNext();\n      if (!c1 || !c2 || !c3 || !c4) return false;\n      var offsets = [];\n\n      function addOffsets(curve, end) {\n        var v = curve.getValues(),\n            roots = Curve.classify(v).roots || Curve.getPeaks(v),\n            count = roots.length,\n            offset = Curve.getLength(v, end && count ? roots[count - 1] : 0, !end && count ? roots[0] : 1);\n        offsets.push(count ? offset : offset / 64);\n      }\n\n      function isInRange(angle, min, max) {\n        return min < max ? angle > min && angle < max : angle > min || angle < max;\n      }\n\n      if (!t1Inside) {\n        addOffsets(c1, true);\n        addOffsets(c2, false);\n      }\n\n      if (!t2Inside) {\n        addOffsets(c3, true);\n        addOffsets(c4, false);\n      }\n\n      var pt = this.getPoint(),\n          offset = Math.min.apply(Math, offsets),\n          v2 = t1Inside ? c2.getTangentAtTime(t1) : c2.getPointAt(offset).subtract(pt),\n          v1 = t1Inside ? v2.negate() : c1.getPointAt(-offset).subtract(pt),\n          v4 = t2Inside ? c4.getTangentAtTime(t2) : c4.getPointAt(offset).subtract(pt),\n          v3 = t2Inside ? v4.negate() : c3.getPointAt(-offset).subtract(pt),\n          a1 = v1.getAngle(),\n          a2 = v2.getAngle(),\n          a3 = v3.getAngle(),\n          a4 = v4.getAngle();\n      return !!(t1Inside ? isInRange(a1, a3, a4) ^ isInRange(a2, a3, a4) && isInRange(a1, a4, a3) ^ isInRange(a2, a4, a3) : isInRange(a3, a1, a2) ^ isInRange(a4, a1, a2) && isInRange(a3, a2, a1) ^ isInRange(a4, a2, a1));\n    },\n    hasOverlap: function hasOverlap() {\n      return !!this._overlap;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    var get = name + 'At';\n\n    this[name] = function () {\n      var curve = this.getCurve(),\n          time = this.getTime();\n      return time != null && curve && curve[get](time, true);\n    };\n  }, {\n    preserve: true\n  }), new function () {\n    function insert(locations, loc, merge) {\n      var length = locations.length,\n          l = 0,\n          r = length - 1;\n\n      function search(index, dir) {\n        for (var i = index + dir; i >= -1 && i <= length; i += dir) {\n          var loc2 = locations[(i % length + length) % length];\n          if (!loc.getPoint().isClose(loc2.getPoint(), 1e-7)) break;\n          if (loc.equals(loc2)) return loc2;\n        }\n\n        return null;\n      }\n\n      while (l <= r) {\n        var m = l + r >>> 1,\n            loc2 = locations[m],\n            found;\n\n        if (merge && (found = loc.equals(loc2) ? loc2 : search(m, -1) || search(m, 1))) {\n          if (loc._overlap) {\n            found._overlap = found._intersection._overlap = true;\n          }\n\n          return found;\n        }\n\n        var path1 = loc.getPath(),\n            path2 = loc2.getPath(),\n            diff = path1 !== path2 ? path1._id - path2._id : loc.getIndex() + loc.getTime() - (loc2.getIndex() + loc2.getTime());\n\n        if (diff < 0) {\n          r = m - 1;\n        } else {\n          l = m + 1;\n        }\n      }\n\n      locations.splice(l, 0, loc);\n      return loc;\n    }\n\n    return {\n      statics: {\n        insert: insert,\n        expand: function expand(locations) {\n          var expanded = locations.slice();\n\n          for (var i = locations.length - 1; i >= 0; i--) {\n            insert(expanded, locations[i]._intersection, false);\n          }\n\n          return expanded;\n        }\n      }\n    };\n  }());\n  var PathItem = Item.extend({\n    _class: 'PathItem',\n    _selectBounds: false,\n    _canScaleStroke: true,\n    beans: true,\n    initialize: function PathItem() {},\n    statics: {\n      create: function create(arg) {\n        var data, segments, compound;\n\n        if (Base.isPlainObject(arg)) {\n          segments = arg.segments;\n          data = arg.pathData;\n        } else if (Array.isArray(arg)) {\n          segments = arg;\n        } else if (typeof arg === 'string') {\n          data = arg;\n        }\n\n        if (segments) {\n          var first = segments[0];\n          compound = first && Array.isArray(first[0]);\n        } else if (data) {\n          compound = (data.match(/m/gi) || []).length > 1 || /z\\s*\\S+/i.test(data);\n        }\n\n        var ctor = compound ? CompoundPath : Path;\n        return new ctor(arg);\n      }\n    },\n    _asPathItem: function _asPathItem() {\n      return this;\n    },\n    isClockwise: function isClockwise() {\n      return this.getArea() >= 0;\n    },\n    setClockwise: function setClockwise(clockwise) {\n      if (this.isClockwise() != (clockwise = !!clockwise)) this.reverse();\n    },\n    setPathData: function setPathData(data) {\n      var parts = data && data.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),\n          coords,\n          relative = false,\n          previous,\n          control,\n          current = new Point(),\n          start = new Point();\n\n      function getCoord(index, coord) {\n        var val = +coords[index];\n        if (relative) val += current[coord];\n        return val;\n      }\n\n      function getPoint(index) {\n        return new Point(getCoord(index, 'x'), getCoord(index + 1, 'y'));\n      }\n\n      this.clear();\n\n      for (var i = 0, l = parts && parts.length; i < l; i++) {\n        var part = parts[i],\n            command = part[0],\n            lower = command.toLowerCase();\n        coords = part.match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g);\n        var length = coords && coords.length;\n        relative = command === lower;\n        if (previous === 'z' && !/[mz]/.test(lower)) this.moveTo(current);\n\n        switch (lower) {\n          case 'm':\n          case 'l':\n            var move = lower === 'm';\n\n            for (var j = 0; j < length; j += 2) {\n              this[move ? 'moveTo' : 'lineTo'](current = getPoint(j));\n\n              if (move) {\n                start = current;\n                move = false;\n              }\n            }\n\n            control = current;\n            break;\n\n          case 'h':\n          case 'v':\n            var coord = lower === 'h' ? 'x' : 'y';\n            current = current.clone();\n\n            for (var j = 0; j < length; j++) {\n              current[coord] = getCoord(j, coord);\n              this.lineTo(current);\n            }\n\n            control = current;\n            break;\n\n          case 'c':\n            for (var j = 0; j < length; j += 6) {\n              this.cubicCurveTo(getPoint(j), control = getPoint(j + 2), current = getPoint(j + 4));\n            }\n\n            break;\n\n          case 's':\n            for (var j = 0; j < length; j += 4) {\n              this.cubicCurveTo(/[cs]/.test(previous) ? current.multiply(2).subtract(control) : current, control = getPoint(j), current = getPoint(j + 2));\n              previous = lower;\n            }\n\n            break;\n\n          case 'q':\n            for (var j = 0; j < length; j += 4) {\n              this.quadraticCurveTo(control = getPoint(j), current = getPoint(j + 2));\n            }\n\n            break;\n\n          case 't':\n            for (var j = 0; j < length; j += 2) {\n              this.quadraticCurveTo(control = /[qt]/.test(previous) ? current.multiply(2).subtract(control) : current, current = getPoint(j));\n              previous = lower;\n            }\n\n            break;\n\n          case 'a':\n            for (var j = 0; j < length; j += 7) {\n              this.arcTo(current = getPoint(j + 5), new Size(+coords[j], +coords[j + 1]), +coords[j + 2], +coords[j + 4], +coords[j + 3]);\n            }\n\n            break;\n\n          case 'z':\n            this.closePath(1e-12);\n            current = start;\n            break;\n        }\n\n        previous = lower;\n      }\n    },\n    _canComposite: function _canComposite() {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _contains: function _contains(point) {\n      var winding = point.isInside(this.getBounds({\n        internal: true,\n        handle: true\n      })) ? this._getWinding(point) : {};\n      return winding.onPath || !!(this.getFillRule() === 'evenodd' ? winding.windingL & 1 || winding.windingR & 1 : winding.winding);\n    },\n    getIntersections: function getIntersections(path, include, _matrix, _returnFirst) {\n      var self = this === path || !path,\n          matrix1 = this._matrix._orNullIfIdentity(),\n          matrix2 = self ? matrix1 : (_matrix || path._matrix)._orNullIfIdentity();\n\n      return self || this.getBounds(matrix1).intersects(path.getBounds(matrix2), 1e-12) ? Curve.getIntersections(this.getCurves(), !self && path.getCurves(), include, matrix1, matrix2, _returnFirst) : [];\n    },\n    getCrossings: function getCrossings(path) {\n      return this.getIntersections(path, function (inter) {\n        return inter.isCrossing();\n      });\n    },\n    getNearestLocation: function getNearestLocation() {\n      var point = Point.read(arguments),\n          curves = this.getCurves(),\n          minDist = Infinity,\n          minLoc = null;\n\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getNearestLocation(point);\n\n        if (loc._distance < minDist) {\n          minDist = loc._distance;\n          minLoc = loc;\n        }\n      }\n\n      return minLoc;\n    },\n    getNearestPoint: function getNearestPoint() {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    },\n    interpolate: function interpolate(from, to, factor) {\n      var isPath = !this._children,\n          name = isPath ? '_segments' : '_children',\n          itemsFrom = from[name],\n          itemsTo = to[name],\n          items = this[name];\n\n      if (!itemsFrom || !itemsTo || itemsFrom.length !== itemsTo.length) {\n        throw new Error('Invalid operands in interpolate() call: ' + from + ', ' + to);\n      }\n\n      var current = items.length,\n          length = itemsTo.length;\n\n      if (current < length) {\n        var ctor = isPath ? Segment : Path;\n\n        for (var i = current; i < length; i++) {\n          this.add(new ctor());\n        }\n      } else if (current > length) {\n        this[isPath ? 'removeSegments' : 'removeChildren'](length, current);\n      }\n\n      for (var i = 0; i < length; i++) {\n        items[i].interpolate(itemsFrom[i], itemsTo[i], factor);\n      }\n\n      if (isPath) {\n        this.setClosed(from._closed);\n\n        this._changed(9);\n      }\n    },\n    compare: function compare(path) {\n      var ok = false;\n\n      if (path) {\n        var paths1 = this._children || [this],\n            paths2 = path._children ? path._children.slice() : [path],\n            length1 = paths1.length,\n            length2 = paths2.length,\n            matched = [],\n            count = 0;\n        ok = true;\n        var boundsOverlaps = CollisionDetection.findBoundsOverlaps(paths1, paths2, Numerical.GEOMETRIC_EPSILON);\n\n        for (var i1 = length1 - 1; i1 >= 0 && ok; i1--) {\n          var path1 = paths1[i1];\n          ok = false;\n          var pathBoundsOverlaps = boundsOverlaps[i1];\n\n          if (pathBoundsOverlaps) {\n            for (var i2 = pathBoundsOverlaps.length - 1; i2 >= 0 && !ok; i2--) {\n              if (path1.compare(paths2[pathBoundsOverlaps[i2]])) {\n                if (!matched[pathBoundsOverlaps[i2]]) {\n                  matched[pathBoundsOverlaps[i2]] = true;\n                  count++;\n                }\n\n                ok = true;\n              }\n            }\n          }\n        }\n\n        ok = ok && count === length2;\n      }\n\n      return ok;\n    }\n  });\n  var Path = PathItem.extend({\n    _class: 'Path',\n    _serializeFields: {\n      segments: [],\n      closed: false\n    },\n    initialize: function Path(arg) {\n      this._closed = false;\n      this._segments = [];\n      this._version = 0;\n      var args = arguments,\n          segments = Array.isArray(arg) ? typeof arg[0] === 'object' ? arg : args : arg && arg.size === undefined && (arg.x !== undefined || arg.point !== undefined) ? args : null;\n\n      if (segments && segments.length > 0) {\n        this.setSegments(segments);\n      } else {\n        this._curves = undefined;\n        this._segmentSelection = 0;\n\n        if (!segments && typeof arg === 'string') {\n          this.setPathData(arg);\n          arg = null;\n        }\n      }\n\n      this._initialize(!segments && arg);\n    },\n    _equals: function _equals(item) {\n      return this._closed === item._closed && Base.equals(this._segments, item._segments);\n    },\n    copyContent: function copyContent(source) {\n      this.setSegments(source._segments);\n      this._closed = source._closed;\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n\n      if (flags & 8) {\n        this._length = this._area = undefined;\n\n        if (flags & 32) {\n          this._version++;\n        } else if (this._curves) {\n          for (var i = 0, l = this._curves.length; i < l; i++) {\n            this._curves[i]._changed();\n          }\n        }\n      } else if (flags & 64) {\n        this._bounds = undefined;\n      }\n    },\n    getStyle: function getStyle() {\n      var parent = this._parent;\n      return (parent instanceof CompoundPath ? parent : this)._style;\n    },\n    getSegments: function getSegments() {\n      return this._segments;\n    },\n    setSegments: function setSegments(segments) {\n      var fullySelected = this.isFullySelected(),\n          length = segments && segments.length;\n      this._segments.length = 0;\n      this._segmentSelection = 0;\n      this._curves = undefined;\n\n      if (length) {\n        var last = segments[length - 1];\n\n        if (typeof last === 'boolean') {\n          this.setClosed(last);\n          length--;\n        }\n\n        this._add(Segment.readList(segments, 0, {}, length));\n      }\n\n      if (fullySelected) this.setFullySelected(true);\n    },\n    getFirstSegment: function getFirstSegment() {\n      return this._segments[0];\n    },\n    getLastSegment: function getLastSegment() {\n      return this._segments[this._segments.length - 1];\n    },\n    getCurves: function getCurves() {\n      var curves = this._curves,\n          segments = this._segments;\n\n      if (!curves) {\n        var length = this._countCurves();\n\n        curves = this._curves = new Array(length);\n\n        for (var i = 0; i < length; i++) {\n          curves[i] = new Curve(this, segments[i], segments[i + 1] || segments[0]);\n        }\n      }\n\n      return curves;\n    },\n    getFirstCurve: function getFirstCurve() {\n      return this.getCurves()[0];\n    },\n    getLastCurve: function getLastCurve() {\n      var curves = this.getCurves();\n      return curves[curves.length - 1];\n    },\n    isClosed: function isClosed() {\n      return this._closed;\n    },\n    setClosed: function setClosed(closed) {\n      if (this._closed != (closed = !!closed)) {\n        this._closed = closed;\n\n        if (this._curves) {\n          var length = this._curves.length = this._countCurves();\n\n          if (closed) this._curves[length - 1] = new Curve(this, this._segments[length - 1], this._segments[0]);\n        }\n\n        this._changed(41);\n      }\n    }\n  }, {\n    beans: true,\n    getPathData: function getPathData(_matrix, _precision) {\n      var segments = this._segments,\n          length = segments.length,\n          f = new Formatter(_precision),\n          coords = new Array(6),\n          first = true,\n          curX,\n          curY,\n          prevX,\n          prevY,\n          inX,\n          inY,\n          outX,\n          outY,\n          parts = [];\n\n      function addSegment(segment, skipLine) {\n        segment._transformCoordinates(_matrix, coords);\n\n        curX = coords[0];\n        curY = coords[1];\n\n        if (first) {\n          parts.push('M' + f.pair(curX, curY));\n          first = false;\n        } else {\n          inX = coords[2];\n          inY = coords[3];\n\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            if (!skipLine) {\n              var dx = curX - prevX,\n                  dy = curY - prevY;\n              parts.push(dx === 0 ? 'v' + f.number(dy) : dy === 0 ? 'h' + f.number(dx) : 'l' + f.pair(dx, dy));\n            }\n          } else {\n            parts.push('c' + f.pair(outX - prevX, outY - prevY) + ' ' + f.pair(inX - prevX, inY - prevY) + ' ' + f.pair(curX - prevX, curY - prevY));\n          }\n        }\n\n        prevX = curX;\n        prevY = curY;\n        outX = coords[4];\n        outY = coords[5];\n      }\n\n      if (!length) return '';\n\n      for (var i = 0; i < length; i++) {\n        addSegment(segments[i]);\n      }\n\n      if (this._closed && length > 0) {\n        addSegment(segments[0], true);\n        parts.push('z');\n      }\n\n      return parts.join('');\n    },\n    isEmpty: function isEmpty() {\n      return !this._segments.length;\n    },\n    _transformContent: function _transformContent(matrix) {\n      var segments = this._segments,\n          coords = new Array(6);\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        segments[i]._transformCoordinates(matrix, coords, true);\n      }\n\n      return true;\n    },\n    _add: function _add(segs, index) {\n      var segments = this._segments,\n          curves = this._curves,\n          amount = segs.length,\n          append = index == null,\n          index = append ? segments.length : index;\n\n      for (var i = 0; i < amount; i++) {\n        var segment = segs[i];\n        if (segment._path) segment = segs[i] = segment.clone();\n        segment._path = this;\n        segment._index = index + i;\n        if (segment._selection) this._updateSelection(segment, 0, segment._selection);\n      }\n\n      if (append) {\n        Base.push(segments, segs);\n      } else {\n        segments.splice.apply(segments, [index, 0].concat(segs));\n\n        for (var i = index + amount, l = segments.length; i < l; i++) {\n          segments[i]._index = i;\n        }\n      }\n\n      if (curves) {\n        var total = this._countCurves(),\n            start = index > 0 && index + amount - 1 === total ? index - 1 : index,\n            insert = start,\n            end = Math.min(start + amount, total);\n\n        if (segs._curves) {\n          curves.splice.apply(curves, [start, 0].concat(segs._curves));\n          insert += segs._curves.length;\n        }\n\n        for (var i = insert; i < end; i++) {\n          curves.splice(i, 0, new Curve(this, null, null));\n        }\n\n        this._adjustCurves(start, end);\n      }\n\n      this._changed(41);\n\n      return segs;\n    },\n    _adjustCurves: function _adjustCurves(start, end) {\n      var segments = this._segments,\n          curves = this._curves,\n          curve;\n\n      for (var i = start; i < end; i++) {\n        curve = curves[i];\n        curve._path = this;\n        curve._segment1 = segments[i];\n        curve._segment2 = segments[i + 1] || segments[0];\n\n        curve._changed();\n      }\n\n      if (curve = curves[this._closed && !start ? segments.length - 1 : start - 1]) {\n        curve._segment2 = segments[start] || segments[0];\n\n        curve._changed();\n      }\n\n      if (curve = curves[end]) {\n        curve._segment1 = segments[end];\n\n        curve._changed();\n      }\n    },\n    _countCurves: function _countCurves() {\n      var length = this._segments.length;\n      return !this._closed && length > 0 ? length - 1 : length;\n    },\n    add: function add(segment1) {\n      var args = arguments;\n      return args.length > 1 && typeof segment1 !== 'number' ? this._add(Segment.readList(args)) : this._add([Segment.read(args)])[0];\n    },\n    insert: function insert(index, segment1) {\n      var args = arguments;\n      return args.length > 2 && typeof segment1 !== 'number' ? this._add(Segment.readList(args, 1), index) : this._add([Segment.read(args, 1)], index)[0];\n    },\n    addSegment: function addSegment() {\n      return this._add([Segment.read(arguments)])[0];\n    },\n    insertSegment: function insertSegment(index) {\n      return this._add([Segment.read(arguments, 1)], index)[0];\n    },\n    addSegments: function addSegments(segments) {\n      return this._add(Segment.readList(segments));\n    },\n    insertSegments: function insertSegments(index, segments) {\n      return this._add(Segment.readList(segments), index);\n    },\n    removeSegment: function removeSegment(index) {\n      return this.removeSegments(index, index + 1)[0] || null;\n    },\n    removeSegments: function removeSegments(start, end, _includeCurves) {\n      start = start || 0;\n      end = Base.pick(end, this._segments.length);\n      var segments = this._segments,\n          curves = this._curves,\n          count = segments.length,\n          removed = segments.splice(start, end - start),\n          amount = removed.length;\n      if (!amount) return removed;\n\n      for (var i = 0; i < amount; i++) {\n        var segment = removed[i];\n        if (segment._selection) this._updateSelection(segment, segment._selection, 0);\n        segment._index = segment._path = null;\n      }\n\n      for (var i = start, l = segments.length; i < l; i++) {\n        segments[i]._index = i;\n      }\n\n      if (curves) {\n        var index = start > 0 && end === count + (this._closed ? 1 : 0) ? start - 1 : start,\n            curves = curves.splice(index, amount);\n\n        for (var i = curves.length - 1; i >= 0; i--) {\n          curves[i]._path = null;\n        }\n\n        if (_includeCurves) removed._curves = curves.slice(1);\n\n        this._adjustCurves(index, index);\n      }\n\n      this._changed(41);\n\n      return removed;\n    },\n    clear: '#removeSegments',\n    hasHandles: function hasHandles() {\n      var segments = this._segments;\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        if (segments[i].hasHandles()) return true;\n      }\n\n      return false;\n    },\n    clearHandles: function clearHandles() {\n      var segments = this._segments;\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        segments[i].clearHandles();\n      }\n    },\n    getLength: function getLength() {\n      if (this._length == null) {\n        var curves = this.getCurves(),\n            length = 0;\n\n        for (var i = 0, l = curves.length; i < l; i++) {\n          length += curves[i].getLength();\n        }\n\n        this._length = length;\n      }\n\n      return this._length;\n    },\n    getArea: function getArea() {\n      var area = this._area;\n\n      if (area == null) {\n        var segments = this._segments,\n            closed = this._closed;\n        area = 0;\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var last = i + 1 === l;\n          area += Curve.getArea(Curve.getValues(segments[i], segments[last ? 0 : i + 1], null, last && !closed));\n        }\n\n        this._area = area;\n      }\n\n      return area;\n    },\n    isFullySelected: function isFullySelected() {\n      var length = this._segments.length;\n      return this.isSelected() && length > 0 && this._segmentSelection === length * 7;\n    },\n    setFullySelected: function setFullySelected(selected) {\n      if (selected) this._selectSegments(true);\n      this.setSelected(selected);\n    },\n    setSelection: function setSelection(selection) {\n      if (!(selection & 1)) this._selectSegments(false);\n      setSelection.base.call(this, selection);\n    },\n    _selectSegments: function _selectSegments(selected) {\n      var segments = this._segments,\n          length = segments.length,\n          selection = selected ? 7 : 0;\n      this._segmentSelection = selection * length;\n\n      for (var i = 0; i < length; i++) {\n        segments[i]._selection = selection;\n      }\n    },\n    _updateSelection: function _updateSelection(segment, oldSelection, newSelection) {\n      segment._selection = newSelection;\n      var selection = this._segmentSelection += newSelection - oldSelection;\n      if (selection > 0) this.setSelected(true);\n    },\n    divideAt: function divideAt(location) {\n      var loc = this.getLocationAt(location),\n          curve;\n      return loc && (curve = loc.getCurve().divideAt(loc.getCurveOffset())) ? curve._segment1 : null;\n    },\n    splitAt: function splitAt(location) {\n      var loc = this.getLocationAt(location),\n          index = loc && loc.index,\n          time = loc && loc.time,\n          tMin = 1e-8,\n          tMax = 1 - tMin;\n\n      if (time > tMax) {\n        index++;\n        time = 0;\n      }\n\n      var curves = this.getCurves();\n\n      if (index >= 0 && index < curves.length) {\n        if (time >= tMin) {\n          curves[index++].divideAtTime(time);\n        }\n\n        var segs = this.removeSegments(index, this._segments.length, true),\n            path;\n\n        if (this._closed) {\n          this.setClosed(false);\n          path = this;\n        } else {\n          path = new Path(Item.NO_INSERT);\n          path.insertAbove(this);\n          path.copyAttributes(this);\n        }\n\n        path._add(segs, 0);\n\n        this.addSegment(segs[0]);\n        return path;\n      }\n\n      return null;\n    },\n    split: function split(index, time) {\n      var curve,\n          location = time === undefined ? index : (curve = this.getCurves()[index]) && curve.getLocationAtTime(time);\n      return location != null ? this.splitAt(location) : null;\n    },\n    join: function join(path, tolerance) {\n      var epsilon = tolerance || 0;\n\n      if (path && path !== this) {\n        var segments = path._segments,\n            last1 = this.getLastSegment(),\n            last2 = path.getLastSegment();\n        if (!last2) return this;\n        if (last1 && last1._point.isClose(last2._point, epsilon)) path.reverse();\n        var first2 = path.getFirstSegment();\n\n        if (last1 && last1._point.isClose(first2._point, epsilon)) {\n          last1.setHandleOut(first2._handleOut);\n\n          this._add(segments.slice(1));\n        } else {\n          var first1 = this.getFirstSegment();\n          if (first1 && first1._point.isClose(first2._point, epsilon)) path.reverse();\n          last2 = path.getLastSegment();\n\n          if (first1 && first1._point.isClose(last2._point, epsilon)) {\n            first1.setHandleIn(last2._handleIn);\n\n            this._add(segments.slice(0, segments.length - 1), 0);\n          } else {\n            this._add(segments.slice());\n          }\n        }\n\n        if (path._closed) this._add([segments[0]]);\n        path.remove();\n      }\n\n      var first = this.getFirstSegment(),\n          last = this.getLastSegment();\n\n      if (first !== last && first._point.isClose(last._point, epsilon)) {\n        first.setHandleIn(last._handleIn);\n        last.remove();\n        this.setClosed(true);\n      }\n\n      return this;\n    },\n    reduce: function reduce(options) {\n      var curves = this.getCurves(),\n          simplify = options && options.simplify,\n          tolerance = simplify ? 1e-7 : 0;\n\n      for (var i = curves.length - 1; i >= 0; i--) {\n        var curve = curves[i];\n        if (!curve.hasHandles() && (!curve.hasLength(tolerance) || simplify && curve.isCollinear(curve.getNext()))) curve.remove();\n      }\n\n      return this;\n    },\n    reverse: function reverse() {\n      this._segments.reverse();\n\n      for (var i = 0, l = this._segments.length; i < l; i++) {\n        var segment = this._segments[i];\n        var handleIn = segment._handleIn;\n        segment._handleIn = segment._handleOut;\n        segment._handleOut = handleIn;\n        segment._index = i;\n      }\n\n      this._curves = null;\n\n      this._changed(9);\n    },\n    flatten: function flatten(flatness) {\n      var flattener = new PathFlattener(this, flatness || 0.25, 256, true),\n          parts = flattener.parts,\n          length = parts.length,\n          segments = [];\n\n      for (var i = 0; i < length; i++) {\n        segments.push(new Segment(parts[i].curve.slice(0, 2)));\n      }\n\n      if (!this._closed && length > 0) {\n        segments.push(new Segment(parts[length - 1].curve.slice(6)));\n      }\n\n      this.setSegments(segments);\n    },\n    simplify: function simplify(tolerance) {\n      var segments = new PathFitter(this).fit(tolerance || 2.5);\n      if (segments) this.setSegments(segments);\n      return !!segments;\n    },\n    smooth: function smooth(options) {\n      var that = this,\n          opts = options || {},\n          type = opts.type || 'asymmetric',\n          segments = this._segments,\n          length = segments.length,\n          closed = this._closed;\n\n      function getIndex(value, _default) {\n        var index = value && value.index;\n\n        if (index != null) {\n          var path = value.path;\n          if (path && path !== that) throw new Error(value._class + ' ' + index + ' of ' + path + ' is not part of ' + that);\n          if (_default && value instanceof Curve) index++;\n        } else {\n          index = typeof value === 'number' ? value : _default;\n        }\n\n        return Math.min(index < 0 && closed ? index % length : index < 0 ? index + length : index, length - 1);\n      }\n\n      var loop = closed && opts.from === undefined && opts.to === undefined,\n          from = getIndex(opts.from, 0),\n          to = getIndex(opts.to, length - 1);\n\n      if (from > to) {\n        if (closed) {\n          from -= length;\n        } else {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n      }\n\n      if (/^(?:asymmetric|continuous)$/.test(type)) {\n        var asymmetric = type === 'asymmetric',\n            min = Math.min,\n            amount = to - from + 1,\n            n = amount - 1,\n            padding = loop ? min(amount, 4) : 1,\n            paddingLeft = padding,\n            paddingRight = padding,\n            knots = [];\n\n        if (!closed) {\n          paddingLeft = min(1, from);\n          paddingRight = min(1, length - to - 1);\n        }\n\n        n += paddingLeft + paddingRight;\n        if (n <= 1) return;\n\n        for (var i = 0, j = from - paddingLeft; i <= n; i++, j++) {\n          knots[i] = segments[(j < 0 ? j + length : j) % length]._point;\n        }\n\n        var x = knots[0]._x + 2 * knots[1]._x,\n            y = knots[0]._y + 2 * knots[1]._y,\n            f = 2,\n            n_1 = n - 1,\n            rx = [x],\n            ry = [y],\n            rf = [f],\n            px = [],\n            py = [];\n\n        for (var i = 1; i < n; i++) {\n          var internal = i < n_1,\n              a = internal ? 1 : asymmetric ? 1 : 2,\n              b = internal ? 4 : asymmetric ? 2 : 7,\n              u = internal ? 4 : asymmetric ? 3 : 8,\n              v = internal ? 2 : asymmetric ? 0 : 1,\n              m = a / f;\n          f = rf[i] = b - m;\n          x = rx[i] = u * knots[i]._x + v * knots[i + 1]._x - m * x;\n          y = ry[i] = u * knots[i]._y + v * knots[i + 1]._y - m * y;\n        }\n\n        px[n_1] = rx[n_1] / rf[n_1];\n        py[n_1] = ry[n_1] / rf[n_1];\n\n        for (var i = n - 2; i >= 0; i--) {\n          px[i] = (rx[i] - px[i + 1]) / rf[i];\n          py[i] = (ry[i] - py[i + 1]) / rf[i];\n        }\n\n        px[n] = (3 * knots[n]._x - px[n_1]) / 2;\n        py[n] = (3 * knots[n]._y - py[n_1]) / 2;\n\n        for (var i = paddingLeft, max = n - paddingRight, j = from; i <= max; i++, j++) {\n          var segment = segments[j < 0 ? j + length : j],\n              pt = segment._point,\n              hx = px[i] - pt._x,\n              hy = py[i] - pt._y;\n          if (loop || i < max) segment.setHandleOut(hx, hy);\n          if (loop || i > paddingLeft) segment.setHandleIn(-hx, -hy);\n        }\n      } else {\n        for (var i = from; i <= to; i++) {\n          segments[i < 0 ? i + length : i].smooth(opts, !loop && i === from, !loop && i === to);\n        }\n      }\n    },\n    toShape: function toShape(insert) {\n      if (!this._closed) return null;\n      var segments = this._segments,\n          type,\n          size,\n          radius,\n          topCenter;\n\n      function isCollinear(i, j) {\n        var seg1 = segments[i],\n            seg2 = seg1.getNext(),\n            seg3 = segments[j],\n            seg4 = seg3.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg3._handleOut.isZero() && seg4._handleIn.isZero() && seg2._point.subtract(seg1._point).isCollinear(seg4._point.subtract(seg3._point));\n      }\n\n      function isOrthogonal(i) {\n        var seg2 = segments[i],\n            seg1 = seg2.getPrevious(),\n            seg3 = seg2.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg2._handleOut.isZero() && seg3._handleIn.isZero() && seg2._point.subtract(seg1._point).isOrthogonal(seg3._point.subtract(seg2._point));\n      }\n\n      function isArc(i) {\n        var seg1 = segments[i],\n            seg2 = seg1.getNext(),\n            handle1 = seg1._handleOut,\n            handle2 = seg2._handleIn,\n            kappa = 0.5522847498307936;\n\n        if (handle1.isOrthogonal(handle2)) {\n          var pt1 = seg1._point,\n              pt2 = seg2._point,\n              corner = new Line(pt1, handle1, true).intersect(new Line(pt2, handle2, true), true);\n          return corner && Numerical.isZero(handle1.getLength() / corner.subtract(pt1).getLength() - kappa) && Numerical.isZero(handle2.getLength() / corner.subtract(pt2).getLength() - kappa);\n        }\n\n        return false;\n      }\n\n      function getDistance(i, j) {\n        return segments[i]._point.getDistance(segments[j]._point);\n      }\n\n      if (!this.hasHandles() && segments.length === 4 && isCollinear(0, 2) && isCollinear(1, 3) && isOrthogonal(1)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(0, 3), getDistance(0, 1));\n        topCenter = segments[1]._point.add(segments[2]._point).divide(2);\n      } else if (segments.length === 8 && isArc(0) && isArc(2) && isArc(4) && isArc(6) && isCollinear(1, 5) && isCollinear(3, 7)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(1, 6), getDistance(0, 3));\n        radius = size.subtract(new Size(getDistance(0, 7), getDistance(1, 2))).divide(2);\n        topCenter = segments[3]._point.add(segments[4]._point).divide(2);\n      } else if (segments.length === 4 && isArc(0) && isArc(1) && isArc(2) && isArc(3)) {\n        if (Numerical.isZero(getDistance(0, 2) - getDistance(1, 3))) {\n          type = Shape.Circle;\n          radius = getDistance(0, 2) / 2;\n        } else {\n          type = Shape.Ellipse;\n          radius = new Size(getDistance(2, 0) / 2, getDistance(3, 1) / 2);\n        }\n\n        topCenter = segments[1]._point;\n      }\n\n      if (type) {\n        var center = this.getPosition(true),\n            shape = new type({\n          center: center,\n          size: size,\n          radius: radius,\n          insert: false\n        });\n        shape.copyAttributes(this, true);\n\n        shape._matrix.prepend(this._matrix);\n\n        shape.rotate(topCenter.subtract(center).getAngle() + 90);\n        if (insert === undefined || insert) shape.insertAbove(this);\n        return shape;\n      }\n\n      return null;\n    },\n    toPath: '#clone',\n    compare: function compare(path) {\n      if (!path || path instanceof CompoundPath) return compare.base.call(this, path);\n      var curves1 = this.getCurves(),\n          curves2 = path.getCurves(),\n          length1 = curves1.length,\n          length2 = curves2.length;\n\n      if (!length1 || !length2) {\n        return length1 == length2;\n      }\n\n      var v1 = curves1[0].getValues(),\n          values2 = [],\n          pos1 = 0,\n          pos2,\n          end1 = 0,\n          end2;\n\n      for (var i = 0; i < length2; i++) {\n        var v2 = curves2[i].getValues();\n        values2.push(v2);\n        var overlaps = Curve.getOverlaps(v1, v2);\n\n        if (overlaps) {\n          pos2 = !i && overlaps[0][0] > 0 ? length2 - 1 : i;\n          end2 = overlaps[0][1];\n          break;\n        }\n      }\n\n      var abs = Math.abs,\n          epsilon = 1e-8,\n          v2 = values2[pos2],\n          start2;\n\n      while (v1 && v2) {\n        var overlaps = Curve.getOverlaps(v1, v2);\n\n        if (overlaps) {\n          var t1 = overlaps[0][0];\n\n          if (abs(t1 - end1) < epsilon) {\n            end1 = overlaps[1][0];\n\n            if (end1 === 1) {\n              v1 = ++pos1 < length1 ? curves1[pos1].getValues() : null;\n              end1 = 0;\n            }\n\n            var t2 = overlaps[0][1];\n\n            if (abs(t2 - end2) < epsilon) {\n              if (!start2) start2 = [pos2, t2];\n              end2 = overlaps[1][1];\n\n              if (end2 === 1) {\n                if (++pos2 >= length2) pos2 = 0;\n                v2 = values2[pos2] || curves2[pos2].getValues();\n                end2 = 0;\n              }\n\n              if (!v1) {\n                return start2[0] === pos2 && start2[1] === end2;\n              }\n\n              continue;\n            }\n          }\n        }\n\n        break;\n      }\n\n      return false;\n    },\n    _hitTestSelf: function _hitTestSelf(point, options, viewMatrix, strokeMatrix) {\n      var that = this,\n          style = this.getStyle(),\n          segments = this._segments,\n          numSegments = segments.length,\n          closed = this._closed,\n          tolerancePadding = options._tolerancePadding,\n          strokePadding = tolerancePadding,\n          join,\n          cap,\n          miterLimit,\n          area,\n          loc,\n          res,\n          hitStroke = options.stroke && style.hasStroke(),\n          hitFill = options.fill && style.hasFill(),\n          hitCurves = options.curves,\n          strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : hitFill && options.tolerance > 0 || hitCurves ? 0 : null;\n\n      if (strokeRadius !== null) {\n        if (strokeRadius > 0) {\n          join = style.getStrokeJoin();\n          cap = style.getStrokeCap();\n          miterLimit = style.getMiterLimit();\n          strokePadding = strokePadding.add(Path._getStrokePadding(strokeRadius, strokeMatrix));\n        } else {\n          join = cap = 'round';\n        }\n      }\n\n      function isCloseEnough(pt, padding) {\n        return point.subtract(pt).divide(padding).length <= 1;\n      }\n\n      function checkSegmentPoint(seg, pt, name) {\n        if (!options.selected || pt.isSelected()) {\n          var anchor = seg._point;\n          if (pt !== anchor) pt = pt.add(anchor);\n\n          if (isCloseEnough(pt, strokePadding)) {\n            return new HitResult(name, that, {\n              segment: seg,\n              point: pt\n            });\n          }\n        }\n      }\n\n      function checkSegmentPoints(seg, ends) {\n        return (ends || options.segments) && checkSegmentPoint(seg, seg._point, 'segment') || !ends && options.handles && (checkSegmentPoint(seg, seg._handleIn, 'handle-in') || checkSegmentPoint(seg, seg._handleOut, 'handle-out'));\n      }\n\n      function addToArea(point) {\n        area.add(point);\n      }\n\n      function checkSegmentStroke(segment) {\n        var isJoin = closed || segment._index > 0 && segment._index < numSegments - 1;\n\n        if ((isJoin ? join : cap) === 'round') {\n          return isCloseEnough(segment._point, strokePadding);\n        } else {\n          area = new Path({\n            internal: true,\n            closed: true\n          });\n\n          if (isJoin) {\n            if (!segment.isSmooth()) {\n              Path._addBevelJoin(segment, join, strokeRadius, miterLimit, null, strokeMatrix, addToArea, true);\n            }\n          } else if (cap === 'square') {\n            Path._addSquareCap(segment, cap, strokeRadius, null, strokeMatrix, addToArea, true);\n          }\n\n          if (!area.isEmpty()) {\n            var loc;\n            return area.contains(point) || (loc = area.getNearestLocation(point)) && isCloseEnough(loc.getPoint(), tolerancePadding);\n          }\n        }\n      }\n\n      if (options.ends && !options.segments && !closed) {\n        if (res = checkSegmentPoints(segments[0], true) || checkSegmentPoints(segments[numSegments - 1], true)) return res;\n      } else if (options.segments || options.handles) {\n        for (var i = 0; i < numSegments; i++) {\n          if (res = checkSegmentPoints(segments[i])) return res;\n        }\n      }\n\n      if (strokeRadius !== null) {\n        loc = this.getNearestLocation(point);\n\n        if (loc) {\n          var time = loc.getTime();\n\n          if (time === 0 || time === 1 && numSegments > 1) {\n            if (!checkSegmentStroke(loc.getSegment())) loc = null;\n          } else if (!isCloseEnough(loc.getPoint(), strokePadding)) {\n            loc = null;\n          }\n        }\n\n        if (!loc && join === 'miter' && numSegments > 1) {\n          for (var i = 0; i < numSegments; i++) {\n            var segment = segments[i];\n\n            if (point.getDistance(segment._point) <= miterLimit * strokeRadius && checkSegmentStroke(segment)) {\n              loc = segment.getLocation();\n              break;\n            }\n          }\n        }\n      }\n\n      return !loc && hitFill && this._contains(point) || loc && !hitStroke && !hitCurves ? new HitResult('fill', this) : loc ? new HitResult(hitStroke ? 'stroke' : 'curve', this, {\n        location: loc,\n        point: loc.getPoint()\n      }) : null;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var loc = this.getLocationAt(offset);\n      return loc && loc[name]();\n    };\n  }, {\n    beans: false,\n    getLocationOf: function getLocationOf() {\n      var point = Point.read(arguments),\n          curves = this.getCurves();\n\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getLocationOf(point);\n        if (loc) return loc;\n      }\n\n      return null;\n    },\n    getOffsetOf: function getOffsetOf() {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getLocationAt: function getLocationAt(offset) {\n      if (typeof offset === 'number') {\n        var curves = this.getCurves(),\n            length = 0;\n\n        for (var i = 0, l = curves.length; i < l; i++) {\n          var start = length,\n              curve = curves[i];\n          length += curve.getLength();\n\n          if (length > offset) {\n            return curve.getLocationAt(offset - start);\n          }\n        }\n\n        if (curves.length > 0 && offset <= this.getLength()) {\n          return new CurveLocation(curves[curves.length - 1], 1);\n        }\n      } else if (offset && offset.getPath && offset.getPath() === this) {\n        return offset;\n      }\n\n      return null;\n    },\n    getOffsetsWithTangent: function getOffsetsWithTangent() {\n      var tangent = Point.read(arguments);\n\n      if (tangent.isZero()) {\n        return [];\n      }\n\n      var offsets = [];\n      var curveStart = 0;\n      var curves = this.getCurves();\n\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var curve = curves[i];\n        var curveTimes = curve.getTimesWithTangent(tangent);\n\n        for (var j = 0, m = curveTimes.length; j < m; j++) {\n          var offset = curveStart + curve.getOffsetAtTime(curveTimes[j]);\n\n          if (offsets.indexOf(offset) < 0) {\n            offsets.push(offset);\n          }\n        }\n\n        curveStart += curve.length;\n      }\n\n      return offsets;\n    }\n  }), new function () {\n    function drawHandles(ctx, segments, matrix, size) {\n      if (size <= 0) return;\n      var half = size / 2,\n          miniSize = size - 2,\n          miniHalf = half - 1,\n          coords = new Array(6),\n          pX,\n          pY;\n\n      function drawHandle(index) {\n        var hX = coords[index],\n            hY = coords[index + 1];\n\n        if (pX != hX || pY != hY) {\n          ctx.beginPath();\n          ctx.moveTo(pX, pY);\n          ctx.lineTo(hX, hY);\n          ctx.stroke();\n          ctx.beginPath();\n          ctx.arc(hX, hY, half, 0, Math.PI * 2, true);\n          ctx.fill();\n        }\n      }\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var segment = segments[i],\n            selection = segment._selection;\n\n        segment._transformCoordinates(matrix, coords);\n\n        pX = coords[0];\n        pY = coords[1];\n        if (selection & 2) drawHandle(2);\n        if (selection & 4) drawHandle(4);\n        ctx.fillRect(pX - half, pY - half, size, size);\n\n        if (miniSize > 0 && !(selection & 1)) {\n          var fillStyle = ctx.fillStyle;\n          ctx.fillStyle = '#ffffff';\n          ctx.fillRect(pX - miniHalf, pY - miniHalf, miniSize, miniSize);\n          ctx.fillStyle = fillStyle;\n        }\n      }\n    }\n\n    function drawSegments(ctx, path, matrix) {\n      var segments = path._segments,\n          length = segments.length,\n          coords = new Array(6),\n          first = true,\n          curX,\n          curY,\n          prevX,\n          prevY,\n          inX,\n          inY,\n          outX,\n          outY;\n\n      function drawSegment(segment) {\n        if (matrix) {\n          segment._transformCoordinates(matrix, coords);\n\n          curX = coords[0];\n          curY = coords[1];\n        } else {\n          var point = segment._point;\n          curX = point._x;\n          curY = point._y;\n        }\n\n        if (first) {\n          ctx.moveTo(curX, curY);\n          first = false;\n        } else {\n          if (matrix) {\n            inX = coords[2];\n            inY = coords[3];\n          } else {\n            var handle = segment._handleIn;\n            inX = curX + handle._x;\n            inY = curY + handle._y;\n          }\n\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            ctx.lineTo(curX, curY);\n          } else {\n            ctx.bezierCurveTo(outX, outY, inX, inY, curX, curY);\n          }\n        }\n\n        prevX = curX;\n        prevY = curY;\n\n        if (matrix) {\n          outX = coords[4];\n          outY = coords[5];\n        } else {\n          var handle = segment._handleOut;\n          outX = prevX + handle._x;\n          outY = prevY + handle._y;\n        }\n      }\n\n      for (var i = 0; i < length; i++) {\n        drawSegment(segments[i]);\n      }\n\n      if (path._closed && length > 0) drawSegment(segments[0]);\n    }\n\n    return {\n      _draw: function _draw(ctx, param, viewMatrix, strokeMatrix) {\n        var dontStart = param.dontStart,\n            dontPaint = param.dontFinish || param.clip,\n            style = this.getStyle(),\n            hasFill = style.hasFill(),\n            hasStroke = style.hasStroke(),\n            dashArray = style.getDashArray(),\n            dashLength = !paper.support.nativeDash && hasStroke && dashArray && dashArray.length;\n        if (!dontStart) ctx.beginPath();\n\n        if (hasFill || hasStroke && !dashLength || dontPaint) {\n          drawSegments(ctx, this, strokeMatrix);\n          if (this._closed) ctx.closePath();\n        }\n\n        function getOffset(i) {\n          return dashArray[(i % dashLength + dashLength) % dashLength];\n        }\n\n        if (!dontPaint && (hasFill || hasStroke)) {\n          this._setStyles(ctx, param, viewMatrix);\n\n          if (hasFill) {\n            ctx.fill(style.getFillRule());\n            ctx.shadowColor = 'rgba(0,0,0,0)';\n          }\n\n          if (hasStroke) {\n            if (dashLength) {\n              if (!dontStart) ctx.beginPath();\n              var flattener = new PathFlattener(this, 0.25, 32, false, strokeMatrix),\n                  length = flattener.length,\n                  from = -style.getDashOffset(),\n                  to,\n                  i = 0;\n              from = from % length;\n\n              while (from > 0) {\n                from -= getOffset(i--) + getOffset(i--);\n              }\n\n              while (from < length) {\n                to = from + getOffset(i++);\n                if (from > 0 || to > 0) flattener.drawPart(ctx, Math.max(from, 0), Math.max(to, 0));\n                from = to + getOffset(i++);\n              }\n            }\n\n            ctx.stroke();\n          }\n        }\n      },\n      _drawSelected: function _drawSelected(ctx, matrix) {\n        ctx.beginPath();\n        drawSegments(ctx, this, matrix);\n        ctx.stroke();\n        drawHandles(ctx, this._segments, matrix, paper.settings.handleSize);\n      }\n    };\n  }(), new function () {\n    function getCurrentSegment(that) {\n      var segments = that._segments;\n      if (!segments.length) throw new Error('Use a moveTo() command first');\n      return segments[segments.length - 1];\n    }\n\n    return {\n      moveTo: function moveTo() {\n        var segments = this._segments;\n        if (segments.length === 1) this.removeSegment(0);\n        if (!segments.length) this._add([new Segment(Point.read(arguments))]);\n      },\n      moveBy: function moveBy() {\n        throw new Error('moveBy() is unsupported on Path items.');\n      },\n      lineTo: function lineTo() {\n        this._add([new Segment(Point.read(arguments))]);\n      },\n      cubicCurveTo: function cubicCurveTo() {\n        var args = arguments,\n            handle1 = Point.read(args),\n            handle2 = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this);\n        current.setHandleOut(handle1.subtract(current._point));\n\n        this._add([new Segment(to, handle2.subtract(to))]);\n      },\n      quadraticCurveTo: function quadraticCurveTo() {\n        var args = arguments,\n            handle = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.cubicCurveTo(handle.add(current.subtract(handle).multiply(1 / 3)), handle.add(to.subtract(handle).multiply(1 / 3)), to);\n      },\n      curveTo: function curveTo() {\n        var args = arguments,\n            through = Point.read(args),\n            to = Point.read(args),\n            t = Base.pick(Base.read(args), 0.5),\n            t1 = 1 - t,\n            current = getCurrentSegment(this)._point,\n            handle = through.subtract(current.multiply(t1 * t1)).subtract(to.multiply(t * t)).divide(2 * t * t1);\n\n        if (handle.isNaN()) throw new Error('Cannot put a curve through points with parameter = ' + t);\n        this.quadraticCurveTo(handle, to);\n      },\n      arcTo: function arcTo() {\n        var args = arguments,\n            abs = Math.abs,\n            sqrt = Math.sqrt,\n            current = getCurrentSegment(this),\n            from = current._point,\n            to = Point.read(args),\n            through,\n            peek = Base.peek(args),\n            clockwise = Base.pick(peek, true),\n            center,\n            extent,\n            vector,\n            matrix;\n\n        if (typeof clockwise === 'boolean') {\n          var middle = from.add(to).divide(2),\n              through = middle.add(middle.subtract(from).rotate(clockwise ? -90 : 90));\n        } else if (Base.remain(args) <= 2) {\n          through = to;\n          to = Point.read(args);\n        } else if (!from.equals(to)) {\n          var radius = Size.read(args),\n              isZero = Numerical.isZero;\n          if (isZero(radius.width) || isZero(radius.height)) return this.lineTo(to);\n          var rotation = Base.read(args),\n              clockwise = !!Base.read(args),\n              large = !!Base.read(args),\n              middle = from.add(to).divide(2),\n              pt = from.subtract(middle).rotate(-rotation),\n              x = pt.x,\n              y = pt.y,\n              rx = abs(radius.width),\n              ry = abs(radius.height),\n              rxSq = rx * rx,\n              rySq = ry * ry,\n              xSq = x * x,\n              ySq = y * y;\n          var factor = sqrt(xSq / rxSq + ySq / rySq);\n\n          if (factor > 1) {\n            rx *= factor;\n            ry *= factor;\n            rxSq = rx * rx;\n            rySq = ry * ry;\n          }\n\n          factor = (rxSq * rySq - rxSq * ySq - rySq * xSq) / (rxSq * ySq + rySq * xSq);\n          if (abs(factor) < 1e-12) factor = 0;\n          if (factor < 0) throw new Error('Cannot create an arc with the given arguments');\n          center = new Point(rx * y / ry, -ry * x / rx).multiply((large === clockwise ? -1 : 1) * sqrt(factor)).rotate(rotation).add(middle);\n          matrix = new Matrix().translate(center).rotate(rotation).scale(rx, ry);\n          vector = matrix._inverseTransform(from);\n          extent = vector.getDirectedAngle(matrix._inverseTransform(to));\n          if (!clockwise && extent > 0) extent -= 360;else if (clockwise && extent < 0) extent += 360;\n        }\n\n        if (through) {\n          var l1 = new Line(from.add(through).divide(2), through.subtract(from).rotate(90), true),\n              l2 = new Line(through.add(to).divide(2), to.subtract(through).rotate(90), true),\n              line = new Line(from, to),\n              throughSide = line.getSide(through);\n          center = l1.intersect(l2, true);\n\n          if (!center) {\n            if (!throughSide) return this.lineTo(to);\n            throw new Error('Cannot create an arc with the given arguments');\n          }\n\n          vector = from.subtract(center);\n          extent = vector.getDirectedAngle(to.subtract(center));\n          var centerSide = line.getSide(center, true);\n\n          if (centerSide === 0) {\n            extent = throughSide * abs(extent);\n          } else if (throughSide === centerSide) {\n            extent += extent < 0 ? 360 : -360;\n          }\n        }\n\n        if (extent) {\n          var epsilon = 1e-7,\n              ext = abs(extent),\n              count = ext >= 360 ? 4 : Math.ceil((ext - epsilon) / 90),\n              inc = extent / count,\n              half = inc * Math.PI / 360,\n              z = 4 / 3 * Math.sin(half) / (1 + Math.cos(half)),\n              segments = [];\n\n          for (var i = 0; i <= count; i++) {\n            var pt = to,\n                out = null;\n\n            if (i < count) {\n              out = vector.rotate(90).multiply(z);\n\n              if (matrix) {\n                pt = matrix._transformPoint(vector);\n                out = matrix._transformPoint(vector.add(out)).subtract(pt);\n              } else {\n                pt = center.add(vector);\n              }\n            }\n\n            if (!i) {\n              current.setHandleOut(out);\n            } else {\n              var _in = vector.rotate(-90).multiply(z);\n\n              if (matrix) {\n                _in = matrix._transformPoint(vector.add(_in)).subtract(pt);\n              }\n\n              segments.push(new Segment(pt, _in, out));\n            }\n\n            vector = vector.rotate(inc);\n          }\n\n          this._add(segments);\n        }\n      },\n      lineBy: function lineBy() {\n        var to = Point.read(arguments),\n            current = getCurrentSegment(this)._point;\n\n        this.lineTo(current.add(to));\n      },\n      curveBy: function curveBy() {\n        var args = arguments,\n            through = Point.read(args),\n            to = Point.read(args),\n            parameter = Base.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.curveTo(current.add(through), current.add(to), parameter);\n      },\n      cubicCurveBy: function cubicCurveBy() {\n        var args = arguments,\n            handle1 = Point.read(args),\n            handle2 = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.cubicCurveTo(current.add(handle1), current.add(handle2), current.add(to));\n      },\n      quadraticCurveBy: function quadraticCurveBy() {\n        var args = arguments,\n            handle = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.quadraticCurveTo(current.add(handle), current.add(to));\n      },\n      arcBy: function arcBy() {\n        var args = arguments,\n            current = getCurrentSegment(this)._point,\n            point = current.add(Point.read(args)),\n            clockwise = Base.pick(Base.peek(args), true);\n\n        if (typeof clockwise === 'boolean') {\n          this.arcTo(point, clockwise);\n        } else {\n          this.arcTo(point, current.add(Point.read(args)));\n        }\n      },\n      closePath: function closePath(tolerance) {\n        this.setClosed(true);\n        this.join(this, tolerance);\n      }\n    };\n  }(), {\n    _getBounds: function _getBounds(matrix, options) {\n      var method = options.handle ? 'getHandleBounds' : options.stroke ? 'getStrokeBounds' : 'getBounds';\n      return Path[method](this._segments, this._closed, this, matrix, options);\n    },\n    statics: {\n      getBounds: function getBounds(segments, closed, path, matrix, options, strokePadding) {\n        var first = segments[0];\n        if (!first) return new _Rectangle();\n\n        var coords = new Array(6),\n            prevCoords = first._transformCoordinates(matrix, new Array(6)),\n            min = prevCoords.slice(0, 2),\n            max = min.slice(),\n            roots = new Array(2);\n\n        function processSegment(segment) {\n          segment._transformCoordinates(matrix, coords);\n\n          for (var i = 0; i < 2; i++) {\n            Curve._addBounds(prevCoords[i], prevCoords[i + 4], coords[i + 2], coords[i], i, strokePadding ? strokePadding[i] : 0, min, max, roots);\n          }\n\n          var tmp = prevCoords;\n          prevCoords = coords;\n          coords = tmp;\n        }\n\n        for (var i = 1, l = segments.length; i < l; i++) {\n          processSegment(segments[i]);\n        }\n\n        if (closed) processSegment(first);\n        return new _Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      getStrokeBounds: function getStrokeBounds(segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n            stroke = style.hasStroke(),\n            strokeWidth = style.getStrokeWidth(),\n            strokeMatrix = stroke && path._getStrokeMatrix(matrix, options),\n            strokePadding = stroke && Path._getStrokePadding(strokeWidth, strokeMatrix),\n            bounds = Path.getBounds(segments, closed, path, matrix, options, strokePadding);\n\n        if (!stroke) return bounds;\n        var strokeRadius = strokeWidth / 2,\n            join = style.getStrokeJoin(),\n            cap = style.getStrokeCap(),\n            miterLimit = style.getMiterLimit(),\n            joinBounds = new _Rectangle(new Size(strokePadding));\n\n        function addPoint(point) {\n          bounds = bounds.include(point);\n        }\n\n        function addRound(segment) {\n          bounds = bounds.unite(joinBounds.setCenter(segment._point.transform(matrix)));\n        }\n\n        function addJoin(segment, join) {\n          if (join === 'round' || segment.isSmooth()) {\n            addRound(segment);\n          } else {\n            Path._addBevelJoin(segment, join, strokeRadius, miterLimit, matrix, strokeMatrix, addPoint);\n          }\n        }\n\n        function addCap(segment, cap) {\n          if (cap === 'round') {\n            addRound(segment);\n          } else {\n            Path._addSquareCap(segment, cap, strokeRadius, matrix, strokeMatrix, addPoint);\n          }\n        }\n\n        var length = segments.length - (closed ? 0 : 1);\n\n        for (var i = 1; i < length; i++) {\n          addJoin(segments[i], join);\n        }\n\n        if (closed) {\n          addJoin(segments[0], join);\n        } else if (length > 0) {\n          addCap(segments[0], cap);\n          addCap(segments[segments.length - 1], cap);\n        }\n\n        return bounds;\n      },\n      _getStrokePadding: function _getStrokePadding(radius, matrix) {\n        if (!matrix) return [radius, radius];\n        var hor = new Point(radius, 0).transform(matrix),\n            ver = new Point(0, radius).transform(matrix),\n            phi = hor.getAngleInRadians(),\n            a = hor.getLength(),\n            b = ver.getLength();\n        var sin = Math.sin(phi),\n            cos = Math.cos(phi),\n            tan = Math.tan(phi),\n            tx = Math.atan2(b * tan, a),\n            ty = Math.atan2(b, tan * a);\n        return [Math.abs(a * Math.cos(tx) * cos + b * Math.sin(tx) * sin), Math.abs(b * Math.sin(ty) * cos + a * Math.cos(ty) * sin)];\n      },\n      _addBevelJoin: function _addBevelJoin(segment, join, radius, miterLimit, matrix, strokeMatrix, addPoint, isArea) {\n        var curve2 = segment.getCurve(),\n            curve1 = curve2.getPrevious(),\n            point = curve2.getPoint1().transform(matrix),\n            normal1 = curve1.getNormalAtTime(1).multiply(radius).transform(strokeMatrix),\n            normal2 = curve2.getNormalAtTime(0).multiply(radius).transform(strokeMatrix),\n            angle = normal1.getDirectedAngle(normal2);\n\n        if (angle < 0 || angle >= 180) {\n          normal1 = normal1.negate();\n          normal2 = normal2.negate();\n        }\n\n        if (isArea) addPoint(point);\n        addPoint(point.add(normal1));\n\n        if (join === 'miter') {\n          var corner = new Line(point.add(normal1), new Point(-normal1.y, normal1.x), true).intersect(new Line(point.add(normal2), new Point(-normal2.y, normal2.x), true), true);\n\n          if (corner && point.getDistance(corner) <= miterLimit * radius) {\n            addPoint(corner);\n          }\n        }\n\n        addPoint(point.add(normal2));\n      },\n      _addSquareCap: function _addSquareCap(segment, cap, radius, matrix, strokeMatrix, addPoint, isArea) {\n        var point = segment._point.transform(matrix),\n            loc = segment.getLocation(),\n            normal = loc.getNormal().multiply(loc.getTime() === 0 ? radius : -radius).transform(strokeMatrix);\n\n        if (cap === 'square') {\n          if (isArea) {\n            addPoint(point.subtract(normal));\n            addPoint(point.add(normal));\n          }\n\n          point = point.add(normal.rotate(-90));\n        }\n\n        addPoint(point.add(normal));\n        addPoint(point.subtract(normal));\n      },\n      getHandleBounds: function getHandleBounds(segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n            stroke = options.stroke && style.hasStroke(),\n            strokePadding,\n            joinPadding;\n\n        if (stroke) {\n          var strokeMatrix = path._getStrokeMatrix(matrix, options),\n              strokeRadius = style.getStrokeWidth() / 2,\n              joinRadius = strokeRadius;\n\n          if (style.getStrokeJoin() === 'miter') joinRadius = strokeRadius * style.getMiterLimit();\n          if (style.getStrokeCap() === 'square') joinRadius = Math.max(joinRadius, strokeRadius * Math.SQRT2);\n          strokePadding = Path._getStrokePadding(strokeRadius, strokeMatrix);\n          joinPadding = Path._getStrokePadding(joinRadius, strokeMatrix);\n        }\n\n        var coords = new Array(6),\n            x1 = Infinity,\n            x2 = -x1,\n            y1 = x1,\n            y2 = x2;\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i];\n\n          segment._transformCoordinates(matrix, coords);\n\n          for (var j = 0; j < 6; j += 2) {\n            var padding = !j ? joinPadding : strokePadding,\n                paddingX = padding ? padding[0] : 0,\n                paddingY = padding ? padding[1] : 0,\n                x = coords[j],\n                y = coords[j + 1],\n                xn = x - paddingX,\n                xx = x + paddingX,\n                yn = y - paddingY,\n                yx = y + paddingY;\n            if (xn < x1) x1 = xn;\n            if (xx > x2) x2 = xx;\n            if (yn < y1) y1 = yn;\n            if (yx > y2) y2 = yx;\n          }\n        }\n\n        return new _Rectangle(x1, y1, x2 - x1, y2 - y1);\n      }\n    }\n  });\n  Path.inject({\n    statics: new function () {\n      var kappa = 0.5522847498307936,\n          ellipseSegments = [new Segment([-1, 0], [0, kappa], [0, -kappa]), new Segment([0, -1], [-kappa, 0], [kappa, 0]), new Segment([1, 0], [0, -kappa], [0, kappa]), new Segment([0, 1], [kappa, 0], [-kappa, 0])];\n\n      function createPath(segments, closed, args) {\n        var props = Base.getNamed(args),\n            path = new Path(props && props.insert == false && Item.NO_INSERT);\n\n        path._add(segments);\n\n        path._closed = closed;\n        return path.set(props, {\n          insert: true\n        });\n      }\n\n      function createEllipse(center, radius, args) {\n        var segments = new Array(4);\n\n        for (var i = 0; i < 4; i++) {\n          var segment = ellipseSegments[i];\n          segments[i] = new Segment(segment._point.multiply(radius).add(center), segment._handleIn.multiply(radius), segment._handleOut.multiply(radius));\n        }\n\n        return createPath(segments, true, args);\n      }\n\n      return {\n        Line: function Line() {\n          var args = arguments;\n          return createPath([new Segment(Point.readNamed(args, 'from')), new Segment(Point.readNamed(args, 'to'))], false, args);\n        },\n        Circle: function Circle() {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              radius = Base.readNamed(args, 'radius');\n          return createEllipse(center, new Size(radius), args);\n        },\n        Rectangle: function Rectangle() {\n          var args = arguments,\n              rect = _Rectangle.readNamed(args, 'rectangle'),\n              radius = Size.readNamed(args, 'radius', 0, {\n            readNull: true\n          }),\n              bl = rect.getBottomLeft(true),\n              tl = rect.getTopLeft(true),\n              tr = rect.getTopRight(true),\n              br = rect.getBottomRight(true),\n              segments;\n\n          if (!radius || radius.isZero()) {\n            segments = [new Segment(bl), new Segment(tl), new Segment(tr), new Segment(br)];\n          } else {\n            radius = Size.min(radius, rect.getSize(true).divide(2));\n            var rx = radius.width,\n                ry = radius.height,\n                hx = rx * kappa,\n                hy = ry * kappa;\n            segments = [new Segment(bl.add(rx, 0), null, [-hx, 0]), new Segment(bl.subtract(0, ry), [0, hy]), new Segment(tl.add(0, ry), null, [0, -hy]), new Segment(tl.add(rx, 0), [-hx, 0], null), new Segment(tr.subtract(rx, 0), null, [hx, 0]), new Segment(tr.add(0, ry), [0, -hy], null), new Segment(br.subtract(0, ry), null, [0, hy]), new Segment(br.subtract(rx, 0), [hx, 0])];\n          }\n\n          return createPath(segments, true, args);\n        },\n        RoundRectangle: '#Rectangle',\n        Ellipse: function Ellipse() {\n          var args = arguments,\n              ellipse = Shape._readEllipse(args);\n\n          return createEllipse(ellipse.center, ellipse.radius, args);\n        },\n        Oval: '#Ellipse',\n        Arc: function Arc() {\n          var args = arguments,\n              from = Point.readNamed(args, 'from'),\n              through = Point.readNamed(args, 'through'),\n              to = Point.readNamed(args, 'to'),\n              props = Base.getNamed(args),\n              path = new Path(props && props.insert == false && Item.NO_INSERT);\n          path.moveTo(from);\n          path.arcTo(through, to);\n          return path.set(props);\n        },\n        RegularPolygon: function RegularPolygon() {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              sides = Base.readNamed(args, 'sides'),\n              radius = Base.readNamed(args, 'radius'),\n              step = 360 / sides,\n              three = sides % 3 === 0,\n              vector = new Point(0, three ? -radius : radius),\n              offset = three ? -1 : 0.5,\n              segments = new Array(sides);\n\n          for (var i = 0; i < sides; i++) {\n            segments[i] = new Segment(center.add(vector.rotate((i + offset) * step)));\n          }\n\n          return createPath(segments, true, args);\n        },\n        Star: function Star() {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              points = Base.readNamed(args, 'points') * 2,\n              radius1 = Base.readNamed(args, 'radius1'),\n              radius2 = Base.readNamed(args, 'radius2'),\n              step = 360 / points,\n              vector = new Point(0, -1),\n              segments = new Array(points);\n\n          for (var i = 0; i < points; i++) {\n            segments[i] = new Segment(center.add(vector.rotate(step * i).multiply(i % 2 ? radius2 : radius1)));\n          }\n\n          return createPath(segments, true, args);\n        }\n      };\n    }()\n  });\n  var CompoundPath = PathItem.extend({\n    _class: 'CompoundPath',\n    _serializeFields: {\n      children: []\n    },\n    beans: true,\n    initialize: function CompoundPath(arg) {\n      this._children = [];\n      this._namedChildren = {};\n\n      if (!this._initialize(arg)) {\n        if (typeof arg === 'string') {\n          this.setPathData(arg);\n        } else {\n          this.addChildren(Array.isArray(arg) ? arg : arguments);\n        }\n      }\n    },\n    insertChildren: function insertChildren(index, items) {\n      var list = items,\n          first = list[0];\n      if (first && typeof first[0] === 'number') list = [list];\n\n      for (var i = items.length - 1; i >= 0; i--) {\n        var item = list[i];\n        if (list === items && !(item instanceof Path)) list = Base.slice(list);\n\n        if (Array.isArray(item)) {\n          list[i] = new Path({\n            segments: item,\n            insert: false\n          });\n        } else if (item instanceof CompoundPath) {\n          list.splice.apply(list, [i, 1].concat(item.removeChildren()));\n          item.remove();\n        }\n      }\n\n      return insertChildren.base.call(this, index, list);\n    },\n    reduce: function reduce(options) {\n      var children = this._children;\n\n      for (var i = children.length - 1; i >= 0; i--) {\n        var path = children[i].reduce(options);\n        if (path.isEmpty()) path.remove();\n      }\n\n      if (!children.length) {\n        var path = new Path(Item.NO_INSERT);\n        path.copyAttributes(this);\n        path.insertAbove(this);\n        this.remove();\n        return path;\n      }\n\n      return reduce.base.call(this);\n    },\n    isClosed: function isClosed() {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        if (!children[i]._closed) return false;\n      }\n\n      return true;\n    },\n    setClosed: function setClosed(closed) {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].setClosed(closed);\n      }\n    },\n    getFirstSegment: function getFirstSegment() {\n      var first = this.getFirstChild();\n      return first && first.getFirstSegment();\n    },\n    getLastSegment: function getLastSegment() {\n      var last = this.getLastChild();\n      return last && last.getLastSegment();\n    },\n    getCurves: function getCurves() {\n      var children = this._children,\n          curves = [];\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        Base.push(curves, children[i].getCurves());\n      }\n\n      return curves;\n    },\n    getFirstCurve: function getFirstCurve() {\n      var first = this.getFirstChild();\n      return first && first.getFirstCurve();\n    },\n    getLastCurve: function getLastCurve() {\n      var last = this.getLastChild();\n      return last && last.getLastCurve();\n    },\n    getArea: function getArea() {\n      var children = this._children,\n          area = 0;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        area += children[i].getArea();\n      }\n\n      return area;\n    },\n    getLength: function getLength() {\n      var children = this._children,\n          length = 0;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        length += children[i].getLength();\n      }\n\n      return length;\n    },\n    getPathData: function getPathData(_matrix, _precision) {\n      var children = this._children,\n          paths = [];\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n            mx = child._matrix;\n        paths.push(child.getPathData(_matrix && !mx.isIdentity() ? _matrix.appended(mx) : _matrix, _precision));\n      }\n\n      return paths.join('');\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      return _hitTestChildren.base.call(this, point, options[\"class\"] === Path || options.type === 'path' ? options : Base.set({}, options, {\n        fill: false\n      }), viewMatrix);\n    },\n    _draw: function _draw(ctx, param, viewMatrix, strokeMatrix) {\n      var children = this._children;\n      if (!children.length) return;\n      param = param.extend({\n        dontStart: true,\n        dontFinish: true\n      });\n      ctx.beginPath();\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].draw(ctx, param, strokeMatrix);\n      }\n\n      if (!param.clip) {\n        this._setStyles(ctx, param, viewMatrix);\n\n        var style = this._style;\n\n        if (style.hasFill()) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n\n        if (style.hasStroke()) ctx.stroke();\n      }\n    },\n    _drawSelected: function _drawSelected(ctx, matrix, selectionItems) {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n            mx = child._matrix;\n\n        if (!selectionItems[child._id]) {\n          child._drawSelected(ctx, mx.isIdentity() ? matrix : matrix.appended(mx));\n        }\n      }\n    }\n  }, new function () {\n    function getCurrentPath(that, check) {\n      var children = that._children;\n      if (check && !children.length) throw new Error('Use a moveTo() command first');\n      return children[children.length - 1];\n    }\n\n    return Base.each(['lineTo', 'cubicCurveTo', 'quadraticCurveTo', 'curveTo', 'arcTo', 'lineBy', 'cubicCurveBy', 'quadraticCurveBy', 'curveBy', 'arcBy'], function (key) {\n      this[key] = function () {\n        var path = getCurrentPath(this, true);\n        path[key].apply(path, arguments);\n      };\n    }, {\n      moveTo: function moveTo() {\n        var current = getCurrentPath(this),\n            path = current && current.isEmpty() ? current : new Path(Item.NO_INSERT);\n        if (path !== current) this.addChild(path);\n        path.moveTo.apply(path, arguments);\n      },\n      moveBy: function moveBy() {\n        var current = getCurrentPath(this, true),\n            last = current && current.getLastSegment(),\n            point = Point.read(arguments);\n        this.moveTo(last ? point.add(last._point) : point);\n      },\n      closePath: function closePath(tolerance) {\n        getCurrentPath(this, true).closePath(tolerance);\n      }\n    });\n  }(), Base.each(['reverse', 'flatten', 'simplify', 'smooth'], function (key) {\n    this[key] = function (param) {\n      var children = this._children,\n          res;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        res = children[i][key](param) || res;\n      }\n\n      return res;\n    };\n  }, {}));\n  PathItem.inject(new function () {\n    var min = Math.min,\n        max = Math.max,\n        abs = Math.abs,\n        operators = {\n      unite: {\n        '1': true,\n        '2': true\n      },\n      intersect: {\n        '2': true\n      },\n      subtract: {\n        '1': true\n      },\n      exclude: {\n        '1': true,\n        '-1': true\n      }\n    };\n\n    function getPaths(path) {\n      return path._children || [path];\n    }\n\n    function preparePath(path, resolve) {\n      var res = path.clone(false).reduce({\n        simplify: true\n      }).transform(null, true, true);\n\n      if (resolve) {\n        var paths = getPaths(res);\n\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n\n          if (!path._closed && !path.isEmpty()) {\n            path.closePath(1e-12);\n            path.getFirstSegment().setHandleIn(0, 0);\n            path.getLastSegment().setHandleOut(0, 0);\n          }\n        }\n\n        res = res.resolveCrossings().reorient(res.getFillRule() === 'nonzero', true);\n      }\n\n      return res;\n    }\n\n    function createResult(paths, simplify, path1, path2, options) {\n      var result = new CompoundPath(Item.NO_INSERT);\n      result.addChildren(paths, true);\n      result = result.reduce({\n        simplify: simplify\n      });\n\n      if (!(options && options.insert == false)) {\n        result.insertAbove(path2 && path1.isSibling(path2) && path1.getIndex() < path2.getIndex() ? path2 : path1);\n      }\n\n      result.copyAttributes(path1, true);\n      return result;\n    }\n\n    function filterIntersection(inter) {\n      return inter.hasOverlap() || inter.isCrossing();\n    }\n\n    function traceBoolean(path1, path2, operation, options) {\n      if (options && (options.trace == false || options.stroke) && /^(subtract|intersect)$/.test(operation)) return splitBoolean(path1, path2, operation);\n\n      var _path1 = preparePath(path1, true),\n          _path2 = path2 && path1 !== path2 && preparePath(path2, true),\n          operator = operators[operation];\n\n      operator[operation] = true;\n      if (_path2 && (operator.subtract || operator.exclude) ^ (_path2.isClockwise() ^ _path1.isClockwise())) _path2.reverse();\n\n      var crossings = divideLocations(CurveLocation.expand(_path1.getIntersections(_path2, filterIntersection))),\n          paths1 = getPaths(_path1),\n          paths2 = _path2 && getPaths(_path2),\n          segments = [],\n          curves = [],\n          paths;\n\n      function collectPaths(paths) {\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n          Base.push(segments, path._segments);\n          Base.push(curves, path.getCurves());\n          path._overlapsOnly = true;\n        }\n      }\n\n      function getCurves(indices) {\n        var list = [];\n\n        for (var i = 0, l = indices && indices.length; i < l; i++) {\n          list.push(curves[indices[i]]);\n        }\n\n        return list;\n      }\n\n      if (crossings.length) {\n        collectPaths(paths1);\n        if (paths2) collectPaths(paths2);\n        var curvesValues = new Array(curves.length);\n\n        for (var i = 0, l = curves.length; i < l; i++) {\n          curvesValues[i] = curves[i].getValues();\n        }\n\n        var curveCollisions = CollisionDetection.findCurveBoundsCollisions(curvesValues, curvesValues, 0, true);\n        var curveCollisionsMap = {};\n\n        for (var i = 0; i < curves.length; i++) {\n          var curve = curves[i],\n              id = curve._path._id,\n              map = curveCollisionsMap[id] = curveCollisionsMap[id] || {};\n          map[curve.getIndex()] = {\n            hor: getCurves(curveCollisions[i].hor),\n            ver: getCurves(curveCollisions[i].ver)\n          };\n        }\n\n        for (var i = 0, l = crossings.length; i < l; i++) {\n          propagateWinding(crossings[i]._segment, _path1, _path2, curveCollisionsMap, operator);\n        }\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i],\n              inter = segment._intersection;\n\n          if (!segment._winding) {\n            propagateWinding(segment, _path1, _path2, curveCollisionsMap, operator);\n          }\n\n          if (!(inter && inter._overlap)) segment._path._overlapsOnly = false;\n        }\n\n        paths = tracePaths(segments, operator);\n      } else {\n        paths = reorientPaths(paths2 ? paths1.concat(paths2) : paths1.slice(), function (w) {\n          return !!operator[w];\n        });\n      }\n\n      return createResult(paths, true, path1, path2, options);\n    }\n\n    function splitBoolean(path1, path2, operation) {\n      var _path1 = preparePath(path1),\n          _path2 = preparePath(path2),\n          crossings = _path1.getIntersections(_path2, filterIntersection),\n          subtract = operation === 'subtract',\n          divide = operation === 'divide',\n          added = {},\n          paths = [];\n\n      function addPath(path) {\n        if (!added[path._id] && (divide || _path2.contains(path.getPointAt(path.getLength() / 2)) ^ subtract)) {\n          paths.unshift(path);\n          return added[path._id] = true;\n        }\n      }\n\n      for (var i = crossings.length - 1; i >= 0; i--) {\n        var path = crossings[i].split();\n\n        if (path) {\n          if (addPath(path)) path.getFirstSegment().setHandleIn(0, 0);\n\n          _path1.getLastSegment().setHandleOut(0, 0);\n        }\n      }\n\n      addPath(_path1);\n      return createResult(paths, false, path1, path2);\n    }\n\n    function linkIntersections(from, to) {\n      var prev = from;\n\n      while (prev) {\n        if (prev === to) return;\n        prev = prev._previous;\n      }\n\n      while (from._next && from._next !== to) {\n        from = from._next;\n      }\n\n      if (!from._next) {\n        while (to._previous) {\n          to = to._previous;\n        }\n\n        from._next = to;\n        to._previous = from;\n      }\n    }\n\n    function clearCurveHandles(curves) {\n      for (var i = curves.length - 1; i >= 0; i--) {\n        curves[i].clearHandles();\n      }\n    }\n\n    function reorientPaths(paths, isInside, clockwise) {\n      var length = paths && paths.length;\n\n      if (length) {\n        var lookup = Base.each(paths, function (path, i) {\n          this[path._id] = {\n            container: null,\n            winding: path.isClockwise() ? 1 : -1,\n            index: i\n          };\n        }, {}),\n            sorted = paths.slice().sort(function (a, b) {\n          return abs(b.getArea()) - abs(a.getArea());\n        }),\n            first = sorted[0];\n        var collisions = CollisionDetection.findItemBoundsCollisions(sorted, null, Numerical.GEOMETRIC_EPSILON);\n        if (clockwise == null) clockwise = first.isClockwise();\n\n        for (var i = 0; i < length; i++) {\n          var path1 = sorted[i],\n              entry1 = lookup[path1._id],\n              containerWinding = 0,\n              indices = collisions[i];\n\n          if (indices) {\n            var point = null;\n\n            for (var j = indices.length - 1; j >= 0; j--) {\n              if (indices[j] < i) {\n                point = point || path1.getInteriorPoint();\n                var path2 = sorted[indices[j]];\n\n                if (path2.contains(point)) {\n                  var entry2 = lookup[path2._id];\n                  containerWinding = entry2.winding;\n                  entry1.winding += containerWinding;\n                  entry1.container = entry2.exclude ? entry2.container : path2;\n                  break;\n                }\n              }\n            }\n          }\n\n          if (isInside(entry1.winding) === isInside(containerWinding)) {\n            entry1.exclude = true;\n            paths[entry1.index] = null;\n          } else {\n            var container = entry1.container;\n            path1.setClockwise(container ? !container.isClockwise() : clockwise);\n          }\n        }\n      }\n\n      return paths;\n    }\n\n    function divideLocations(locations, include, clearLater) {\n      var results = include && [],\n          tMin = 1e-8,\n          tMax = 1 - tMin,\n          clearHandles = false,\n          clearCurves = clearLater || [],\n          clearLookup = clearLater && {},\n          renormalizeLocs,\n          prevCurve,\n          prevTime;\n\n      function getId(curve) {\n        return curve._path._id + '.' + curve._segment1._index;\n      }\n\n      for (var i = (clearLater && clearLater.length) - 1; i >= 0; i--) {\n        var curve = clearLater[i];\n        if (curve._path) clearLookup[getId(curve)] = true;\n      }\n\n      for (var i = locations.length - 1; i >= 0; i--) {\n        var loc = locations[i],\n            time = loc._time,\n            origTime = time,\n            exclude = include && !include(loc),\n            curve = loc._curve,\n            segment;\n\n        if (curve) {\n          if (curve !== prevCurve) {\n            clearHandles = !curve.hasHandles() || clearLookup && clearLookup[getId(curve)];\n            renormalizeLocs = [];\n            prevTime = null;\n            prevCurve = curve;\n          } else if (prevTime >= tMin) {\n            time /= prevTime;\n          }\n        }\n\n        if (exclude) {\n          if (renormalizeLocs) renormalizeLocs.push(loc);\n          continue;\n        } else if (include) {\n          results.unshift(loc);\n        }\n\n        prevTime = origTime;\n\n        if (time < tMin) {\n          segment = curve._segment1;\n        } else if (time > tMax) {\n          segment = curve._segment2;\n        } else {\n          var newCurve = curve.divideAtTime(time, true);\n          if (clearHandles) clearCurves.push(curve, newCurve);\n          segment = newCurve._segment1;\n\n          for (var j = renormalizeLocs.length - 1; j >= 0; j--) {\n            var l = renormalizeLocs[j];\n            l._time = (l._time - time) / (1 - time);\n          }\n        }\n\n        loc._setSegment(segment);\n\n        var inter = segment._intersection,\n            dest = loc._intersection;\n\n        if (inter) {\n          linkIntersections(inter, dest);\n          var other = inter;\n\n          while (other) {\n            linkIntersections(other._intersection, inter);\n            other = other._next;\n          }\n        } else {\n          segment._intersection = dest;\n        }\n      }\n\n      if (!clearLater) clearCurveHandles(clearCurves);\n      return results || locations;\n    }\n\n    function getWinding(point, curves, dir, closed, dontFlip) {\n      var curvesList = Array.isArray(curves) ? curves : curves[dir ? 'hor' : 'ver'];\n      var ia = dir ? 1 : 0,\n          io = ia ^ 1,\n          pv = [point.x, point.y],\n          pa = pv[ia],\n          po = pv[io],\n          windingEpsilon = 1e-9,\n          qualityEpsilon = 1e-6,\n          paL = pa - windingEpsilon,\n          paR = pa + windingEpsilon,\n          windingL = 0,\n          windingR = 0,\n          pathWindingL = 0,\n          pathWindingR = 0,\n          onPath = false,\n          onAnyPath = false,\n          quality = 1,\n          roots = [],\n          vPrev,\n          vClose;\n\n      function addWinding(v) {\n        var o0 = v[io + 0],\n            o3 = v[io + 6];\n\n        if (po < min(o0, o3) || po > max(o0, o3)) {\n          return;\n        }\n\n        var a0 = v[ia + 0],\n            a1 = v[ia + 2],\n            a2 = v[ia + 4],\n            a3 = v[ia + 6];\n\n        if (o0 === o3) {\n          if (a0 < paR && a3 > paL || a3 < paR && a0 > paL) {\n            onPath = true;\n          }\n\n          return;\n        }\n\n        var t = po === o0 ? 0 : po === o3 ? 1 : paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? 1 : Curve.solveCubic(v, io, po, roots, 0, 1) > 0 ? roots[0] : 1,\n            a = t === 0 ? a0 : t === 1 ? a3 : Curve.getPoint(v, t)[dir ? 'y' : 'x'],\n            winding = o0 > o3 ? 1 : -1,\n            windingPrev = vPrev[io] > vPrev[io + 6] ? 1 : -1,\n            a3Prev = vPrev[ia + 6];\n\n        if (po !== o0) {\n          if (a < paL) {\n            pathWindingL += winding;\n          } else if (a > paR) {\n            pathWindingR += winding;\n          } else {\n            onPath = true;\n          }\n\n          if (a > pa - qualityEpsilon && a < pa + qualityEpsilon) quality /= 2;\n        } else {\n          if (winding !== windingPrev) {\n            if (a0 < paL) {\n              pathWindingL += winding;\n            } else if (a0 > paR) {\n              pathWindingR += winding;\n            }\n          } else if (a0 != a3Prev) {\n            if (a3Prev < paR && a > paR) {\n              pathWindingR += winding;\n              onPath = true;\n            } else if (a3Prev > paL && a < paL) {\n              pathWindingL += winding;\n              onPath = true;\n            }\n          }\n\n          quality /= 4;\n        }\n\n        vPrev = v;\n        return !dontFlip && a > paL && a < paR && Curve.getTangent(v, t)[dir ? 'x' : 'y'] === 0 && getWinding(point, curves, !dir, closed, true);\n      }\n\n      function handleCurve(v) {\n        var o0 = v[io + 0],\n            o1 = v[io + 2],\n            o2 = v[io + 4],\n            o3 = v[io + 6];\n\n        if (po <= max(o0, o1, o2, o3) && po >= min(o0, o1, o2, o3)) {\n          var a0 = v[ia + 0],\n              a1 = v[ia + 2],\n              a2 = v[ia + 4],\n              a3 = v[ia + 6],\n              monoCurves = paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? [v] : Curve.getMonoCurves(v, dir),\n              res;\n\n          for (var i = 0, l = monoCurves.length; i < l; i++) {\n            if (res = addWinding(monoCurves[i])) return res;\n          }\n        }\n      }\n\n      for (var i = 0, l = curvesList.length; i < l; i++) {\n        var curve = curvesList[i],\n            path = curve._path,\n            v = curve.getValues(),\n            res;\n\n        if (!i || curvesList[i - 1]._path !== path) {\n          vPrev = null;\n\n          if (!path._closed) {\n            vClose = Curve.getValues(path.getLastCurve().getSegment2(), curve.getSegment1(), null, !closed);\n\n            if (vClose[io] !== vClose[io + 6]) {\n              vPrev = vClose;\n            }\n          }\n\n          if (!vPrev) {\n            vPrev = v;\n            var prev = path.getLastCurve();\n\n            while (prev && prev !== curve) {\n              var v2 = prev.getValues();\n\n              if (v2[io] !== v2[io + 6]) {\n                vPrev = v2;\n                break;\n              }\n\n              prev = prev.getPrevious();\n            }\n          }\n        }\n\n        if (res = handleCurve(v)) return res;\n\n        if (i + 1 === l || curvesList[i + 1]._path !== path) {\n          if (vClose && (res = handleCurve(vClose))) return res;\n\n          if (onPath && !pathWindingL && !pathWindingR) {\n            pathWindingL = pathWindingR = path.isClockwise(closed) ^ dir ? 1 : -1;\n          }\n\n          windingL += pathWindingL;\n          windingR += pathWindingR;\n          pathWindingL = pathWindingR = 0;\n\n          if (onPath) {\n            onAnyPath = true;\n            onPath = false;\n          }\n\n          vClose = null;\n        }\n      }\n\n      windingL = abs(windingL);\n      windingR = abs(windingR);\n      return {\n        winding: max(windingL, windingR),\n        windingL: windingL,\n        windingR: windingR,\n        quality: quality,\n        onPath: onAnyPath\n      };\n    }\n\n    function propagateWinding(segment, path1, path2, curveCollisionsMap, operator) {\n      var chain = [],\n          start = segment,\n          totalLength = 0,\n          winding;\n\n      do {\n        var curve = segment.getCurve();\n\n        if (curve) {\n          var length = curve.getLength();\n          chain.push({\n            segment: segment,\n            curve: curve,\n            length: length\n          });\n          totalLength += length;\n        }\n\n        segment = segment.getNext();\n      } while (segment && !segment._intersection && segment !== start);\n\n      var offsets = [0.5, 0.25, 0.75],\n          winding = {\n        winding: 0,\n        quality: -1\n      },\n          tMin = 1e-3,\n          tMax = 1 - tMin;\n\n      for (var i = 0; i < offsets.length && winding.quality < 0.5; i++) {\n        var length = totalLength * offsets[i];\n\n        for (var j = 0, l = chain.length; j < l; j++) {\n          var entry = chain[j],\n              curveLength = entry.length;\n\n          if (length <= curveLength) {\n            var curve = entry.curve,\n                path = curve._path,\n                parent = path._parent,\n                operand = parent instanceof CompoundPath ? parent : path,\n                t = Numerical.clamp(curve.getTimeAt(length), tMin, tMax),\n                pt = curve.getPointAtTime(t),\n                dir = abs(curve.getTangentAtTime(t).y) < Math.SQRT1_2;\n            var wind = null;\n\n            if (operator.subtract && path2) {\n              var otherPath = operand === path1 ? path2 : path1,\n                  pathWinding = otherPath._getWinding(pt, dir, true);\n\n              if (operand === path1 && pathWinding.winding || operand === path2 && !pathWinding.winding) {\n                if (pathWinding.quality < 1) {\n                  continue;\n                } else {\n                  wind = {\n                    winding: 0,\n                    quality: 1\n                  };\n                }\n              }\n            }\n\n            wind = wind || getWinding(pt, curveCollisionsMap[path._id][curve.getIndex()], dir, true);\n            if (wind.quality > winding.quality) winding = wind;\n            break;\n          }\n\n          length -= curveLength;\n        }\n      }\n\n      for (var j = chain.length - 1; j >= 0; j--) {\n        chain[j].segment._winding = winding;\n      }\n    }\n\n    function tracePaths(segments, operator) {\n      var paths = [],\n          starts;\n\n      function isValid(seg) {\n        var winding;\n        return !!(seg && !seg._visited && (!operator || operator[(winding = seg._winding || {}).winding] && !(operator.unite && winding.winding === 2 && winding.windingL && winding.windingR)));\n      }\n\n      function isStart(seg) {\n        if (seg) {\n          for (var i = 0, l = starts.length; i < l; i++) {\n            if (seg === starts[i]) return true;\n          }\n        }\n\n        return false;\n      }\n\n      function visitPath(path) {\n        var segments = path._segments;\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          segments[i]._visited = true;\n        }\n      }\n\n      function getCrossingSegments(segment, collectStarts) {\n        var inter = segment._intersection,\n            start = inter,\n            crossings = [];\n        if (collectStarts) starts = [segment];\n\n        function collect(inter, end) {\n          while (inter && inter !== end) {\n            var other = inter._segment,\n                path = other && other._path;\n\n            if (path) {\n              var next = other.getNext() || path.getFirstSegment(),\n                  nextInter = next._intersection;\n\n              if (other !== segment && (isStart(other) || isStart(next) || next && isValid(other) && (isValid(next) || nextInter && isValid(nextInter._segment)))) {\n                crossings.push(other);\n              }\n\n              if (collectStarts) starts.push(other);\n            }\n\n            inter = inter._next;\n          }\n        }\n\n        if (inter) {\n          collect(inter);\n\n          while (inter && inter._prev) {\n            inter = inter._prev;\n          }\n\n          collect(inter, start);\n        }\n\n        return crossings;\n      }\n\n      segments.sort(function (seg1, seg2) {\n        var inter1 = seg1._intersection,\n            inter2 = seg2._intersection,\n            over1 = !!(inter1 && inter1._overlap),\n            over2 = !!(inter2 && inter2._overlap),\n            path1 = seg1._path,\n            path2 = seg2._path;\n        return over1 ^ over2 ? over1 ? 1 : -1 : !inter1 ^ !inter2 ? inter1 ? 1 : -1 : path1 !== path2 ? path1._id - path2._id : seg1._index - seg2._index;\n      });\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var seg = segments[i],\n            valid = isValid(seg),\n            path = null,\n            finished = false,\n            closed = true,\n            branches = [],\n            branch,\n            visited,\n            handleIn;\n\n        if (valid && seg._path._overlapsOnly) {\n          var path1 = seg._path,\n              path2 = seg._intersection._segment._path;\n\n          if (path1.compare(path2)) {\n            if (path1.getArea()) paths.push(path1.clone(false));\n            visitPath(path1);\n            visitPath(path2);\n            valid = false;\n          }\n        }\n\n        while (valid) {\n          var first = !path,\n              crossings = getCrossingSegments(seg, first),\n              other = crossings.shift(),\n              finished = !first && (isStart(seg) || isStart(other)),\n              cross = !finished && other;\n\n          if (first) {\n            path = new Path(Item.NO_INSERT);\n            branch = null;\n          }\n\n          if (finished) {\n            if (seg.isFirst() || seg.isLast()) closed = seg._path._closed;\n            seg._visited = true;\n            break;\n          }\n\n          if (cross && branch) {\n            branches.push(branch);\n            branch = null;\n          }\n\n          if (!branch) {\n            if (cross) crossings.push(seg);\n            branch = {\n              start: path._segments.length,\n              crossings: crossings,\n              visited: visited = [],\n              handleIn: handleIn\n            };\n          }\n\n          if (cross) seg = other;\n\n          if (!isValid(seg)) {\n            path.removeSegments(branch.start);\n\n            for (var j = 0, k = visited.length; j < k; j++) {\n              visited[j]._visited = false;\n            }\n\n            visited.length = 0;\n\n            do {\n              seg = branch && branch.crossings.shift();\n\n              if (!seg || !seg._path) {\n                seg = null;\n                branch = branches.pop();\n\n                if (branch) {\n                  visited = branch.visited;\n                  handleIn = branch.handleIn;\n                }\n              }\n            } while (branch && !isValid(seg));\n\n            if (!seg) break;\n          }\n\n          var next = seg.getNext();\n          path.add(new Segment(seg._point, handleIn, next && seg._handleOut));\n          seg._visited = true;\n          visited.push(seg);\n          seg = next || seg._path.getFirstSegment();\n          handleIn = next && next._handleIn;\n        }\n\n        if (finished) {\n          if (closed) {\n            path.getFirstSegment().setHandleIn(handleIn);\n            path.setClosed(closed);\n          }\n\n          if (path.getArea() !== 0) {\n            paths.push(path);\n          }\n        }\n      }\n\n      return paths;\n    }\n\n    return {\n      _getWinding: function _getWinding(point, dir, closed) {\n        return getWinding(point, this.getCurves(), dir, closed);\n      },\n      unite: function unite(path, options) {\n        return traceBoolean(this, path, 'unite', options);\n      },\n      intersect: function intersect(path, options) {\n        return traceBoolean(this, path, 'intersect', options);\n      },\n      subtract: function subtract(path, options) {\n        return traceBoolean(this, path, 'subtract', options);\n      },\n      exclude: function exclude(path, options) {\n        return traceBoolean(this, path, 'exclude', options);\n      },\n      divide: function divide(path, options) {\n        return options && (options.trace == false || options.stroke) ? splitBoolean(this, path, 'divide') : createResult([this.subtract(path, options), this.intersect(path, options)], true, this, path, options);\n      },\n      resolveCrossings: function resolveCrossings() {\n        var children = this._children,\n            paths = children || [this];\n\n        function hasOverlap(seg, path) {\n          var inter = seg && seg._intersection;\n          return inter && inter._overlap && inter._path === path;\n        }\n\n        var hasOverlaps = false,\n            hasCrossings = false,\n            intersections = this.getIntersections(null, function (inter) {\n          return inter.hasOverlap() && (hasOverlaps = true) || inter.isCrossing() && (hasCrossings = true);\n        }),\n            clearCurves = hasOverlaps && hasCrossings && [];\n        intersections = CurveLocation.expand(intersections);\n\n        if (hasOverlaps) {\n          var overlaps = divideLocations(intersections, function (inter) {\n            return inter.hasOverlap();\n          }, clearCurves);\n\n          for (var i = overlaps.length - 1; i >= 0; i--) {\n            var overlap = overlaps[i],\n                path = overlap._path,\n                seg = overlap._segment,\n                prev = seg.getPrevious(),\n                next = seg.getNext();\n\n            if (hasOverlap(prev, path) && hasOverlap(next, path)) {\n              seg.remove();\n\n              prev._handleOut._set(0, 0);\n\n              next._handleIn._set(0, 0);\n\n              if (prev !== seg && !prev.getCurve().hasLength()) {\n                next._handleIn.set(prev._handleIn);\n\n                prev.remove();\n              }\n            }\n          }\n        }\n\n        if (hasCrossings) {\n          divideLocations(intersections, hasOverlaps && function (inter) {\n            var curve1 = inter.getCurve(),\n                seg1 = inter.getSegment(),\n                other = inter._intersection,\n                curve2 = other._curve,\n                seg2 = other._segment;\n            if (curve1 && curve2 && curve1._path && curve2._path) return true;\n            if (seg1) seg1._intersection = null;\n            if (seg2) seg2._intersection = null;\n          }, clearCurves);\n          if (clearCurves) clearCurveHandles(clearCurves);\n          paths = tracePaths(Base.each(paths, function (path) {\n            Base.push(this, path._segments);\n          }, []));\n        }\n\n        var length = paths.length,\n            item;\n\n        if (length > 1 && children) {\n          if (paths !== children) this.setChildren(paths);\n          item = this;\n        } else if (length === 1 && !children) {\n          if (paths[0] !== this) this.setSegments(paths[0].removeSegments());\n          item = this;\n        }\n\n        if (!item) {\n          item = new CompoundPath(Item.NO_INSERT);\n          item.addChildren(paths);\n          item = item.reduce();\n          item.copyAttributes(this);\n          this.replaceWith(item);\n        }\n\n        return item;\n      },\n      reorient: function reorient(nonZero, clockwise) {\n        var children = this._children;\n\n        if (children && children.length) {\n          this.setChildren(reorientPaths(this.removeChildren(), function (w) {\n            return !!(nonZero ? w : w & 1);\n          }, clockwise));\n        } else if (clockwise !== undefined) {\n          this.setClockwise(clockwise);\n        }\n\n        return this;\n      },\n      getInteriorPoint: function getInteriorPoint() {\n        var bounds = this.getBounds(),\n            point = bounds.getCenter(true);\n\n        if (!this.contains(point)) {\n          var curves = this.getCurves(),\n              y = point.y,\n              intercepts = [],\n              roots = [];\n\n          for (var i = 0, l = curves.length; i < l; i++) {\n            var v = curves[i].getValues(),\n                o0 = v[1],\n                o1 = v[3],\n                o2 = v[5],\n                o3 = v[7];\n\n            if (y >= min(o0, o1, o2, o3) && y <= max(o0, o1, o2, o3)) {\n              var monoCurves = Curve.getMonoCurves(v);\n\n              for (var j = 0, m = monoCurves.length; j < m; j++) {\n                var mv = monoCurves[j],\n                    mo0 = mv[1],\n                    mo3 = mv[7];\n\n                if (mo0 !== mo3 && (y >= mo0 && y <= mo3 || y >= mo3 && y <= mo0)) {\n                  var x = y === mo0 ? mv[0] : y === mo3 ? mv[6] : Curve.solveCubic(mv, 1, y, roots, 0, 1) === 1 ? Curve.getPoint(mv, roots[0]).x : (mv[0] + mv[6]) / 2;\n                  intercepts.push(x);\n                }\n              }\n            }\n          }\n\n          if (intercepts.length > 1) {\n            intercepts.sort(function (a, b) {\n              return a - b;\n            });\n            point.x = (intercepts[0] + intercepts[1]) / 2;\n          }\n        }\n\n        return point;\n      }\n    };\n  }());\n  var PathFlattener = Base.extend({\n    _class: 'PathFlattener',\n    initialize: function initialize(path, flatness, maxRecursion, ignoreStraight, matrix) {\n      var curves = [],\n          parts = [],\n          length = 0,\n          minSpan = 1 / (maxRecursion || 32),\n          segments = path._segments,\n          segment1 = segments[0],\n          segment2;\n\n      function addCurve(segment1, segment2) {\n        var curve = Curve.getValues(segment1, segment2, matrix);\n        curves.push(curve);\n        computeParts(curve, segment1._index, 0, 1);\n      }\n\n      function computeParts(curve, index, t1, t2) {\n        if (t2 - t1 > minSpan && !(ignoreStraight && Curve.isStraight(curve)) && !Curve.isFlatEnough(curve, flatness || 0.25)) {\n          var halves = Curve.subdivide(curve, 0.5),\n              tMid = (t1 + t2) / 2;\n          computeParts(halves[0], index, t1, tMid);\n          computeParts(halves[1], index, tMid, t2);\n        } else {\n          var dx = curve[6] - curve[0],\n              dy = curve[7] - curve[1],\n              dist = Math.sqrt(dx * dx + dy * dy);\n\n          if (dist > 0) {\n            length += dist;\n            parts.push({\n              offset: length,\n              curve: curve,\n              index: index,\n              time: t2\n            });\n          }\n        }\n      }\n\n      for (var i = 1, l = segments.length; i < l; i++) {\n        segment2 = segments[i];\n        addCurve(segment1, segment2);\n        segment1 = segment2;\n      }\n\n      if (path._closed) addCurve(segment2 || segment1, segments[0]);\n      this.curves = curves;\n      this.parts = parts;\n      this.length = length;\n      this.index = 0;\n    },\n    _get: function _get(offset) {\n      var parts = this.parts,\n          length = parts.length,\n          start,\n          i,\n          j = this.index;\n\n      for (;;) {\n        i = j;\n        if (!j || parts[--j].offset < offset) break;\n      }\n\n      for (; i < length; i++) {\n        var part = parts[i];\n\n        if (part.offset >= offset) {\n          this.index = i;\n          var prev = parts[i - 1],\n              prevTime = prev && prev.index === part.index ? prev.time : 0,\n              prevOffset = prev ? prev.offset : 0;\n          return {\n            index: part.index,\n            time: prevTime + (part.time - prevTime) * (offset - prevOffset) / (part.offset - prevOffset)\n          };\n        }\n      }\n\n      return {\n        index: parts[length - 1].index,\n        time: 1\n      };\n    },\n    drawPart: function drawPart(ctx, from, to) {\n      var start = this._get(from),\n          end = this._get(to);\n\n      for (var i = start.index, l = end.index; i <= l; i++) {\n        var curve = Curve.getPart(this.curves[i], i === start.index ? start.time : 0, i === end.index ? end.time : 1);\n        if (i === start.index) ctx.moveTo(curve[0], curve[1]);\n        ctx.bezierCurveTo.apply(ctx, curve.slice(2));\n      }\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var param = this._get(offset);\n\n      return Curve[name](this.curves[param.index], param.time);\n    };\n  }, {}));\n  var PathFitter = Base.extend({\n    initialize: function initialize(path) {\n      var points = this.points = [],\n          segments = path._segments,\n          closed = path._closed;\n\n      for (var i = 0, prev, l = segments.length; i < l; i++) {\n        var point = segments[i].point;\n\n        if (!prev || !prev.equals(point)) {\n          points.push(prev = point.clone());\n        }\n      }\n\n      if (closed) {\n        points.unshift(points[points.length - 1]);\n        points.push(points[1]);\n      }\n\n      this.closed = closed;\n    },\n    fit: function fit(error) {\n      var points = this.points,\n          length = points.length,\n          segments = null;\n\n      if (length > 0) {\n        segments = [new Segment(points[0])];\n\n        if (length > 1) {\n          this.fitCubic(segments, error, 0, length - 1, points[1].subtract(points[0]), points[length - 2].subtract(points[length - 1]));\n\n          if (this.closed) {\n            segments.shift();\n            segments.pop();\n          }\n        }\n      }\n\n      return segments;\n    },\n    fitCubic: function fitCubic(segments, error, first, last, tan1, tan2) {\n      var points = this.points;\n\n      if (last - first === 1) {\n        var pt1 = points[first],\n            pt2 = points[last],\n            dist = pt1.getDistance(pt2) / 3;\n        this.addCurve(segments, [pt1, pt1.add(tan1.normalize(dist)), pt2.add(tan2.normalize(dist)), pt2]);\n        return;\n      }\n\n      var uPrime = this.chordLengthParameterize(first, last),\n          maxError = Math.max(error, error * error),\n          split,\n          parametersInOrder = true;\n\n      for (var i = 0; i <= 4; i++) {\n        var curve = this.generateBezier(first, last, uPrime, tan1, tan2);\n        var max = this.findMaxError(first, last, curve, uPrime);\n\n        if (max.error < error && parametersInOrder) {\n          this.addCurve(segments, curve);\n          return;\n        }\n\n        split = max.index;\n        if (max.error >= maxError) break;\n        parametersInOrder = this.reparameterize(first, last, uPrime, curve);\n        maxError = max.error;\n      }\n\n      var tanCenter = points[split - 1].subtract(points[split + 1]);\n      this.fitCubic(segments, error, first, split, tan1, tanCenter);\n      this.fitCubic(segments, error, split, last, tanCenter.negate(), tan2);\n    },\n    addCurve: function addCurve(segments, curve) {\n      var prev = segments[segments.length - 1];\n      prev.setHandleOut(curve[1].subtract(curve[0]));\n      segments.push(new Segment(curve[3], curve[2].subtract(curve[3])));\n    },\n    generateBezier: function generateBezier(first, last, uPrime, tan1, tan2) {\n      var epsilon = 1e-12,\n          abs = Math.abs,\n          points = this.points,\n          pt1 = points[first],\n          pt2 = points[last],\n          C = [[0, 0], [0, 0]],\n          X = [0, 0];\n\n      for (var i = 0, l = last - first + 1; i < l; i++) {\n        var u = uPrime[i],\n            t = 1 - u,\n            b = 3 * u * t,\n            b0 = t * t * t,\n            b1 = b * t,\n            b2 = b * u,\n            b3 = u * u * u,\n            a1 = tan1.normalize(b1),\n            a2 = tan2.normalize(b2),\n            tmp = points[first + i].subtract(pt1.multiply(b0 + b1)).subtract(pt2.multiply(b2 + b3));\n        C[0][0] += a1.dot(a1);\n        C[0][1] += a1.dot(a2);\n        C[1][0] = C[0][1];\n        C[1][1] += a2.dot(a2);\n        X[0] += a1.dot(tmp);\n        X[1] += a2.dot(tmp);\n      }\n\n      var detC0C1 = C[0][0] * C[1][1] - C[1][0] * C[0][1],\n          alpha1,\n          alpha2;\n\n      if (abs(detC0C1) > epsilon) {\n        var detC0X = C[0][0] * X[1] - C[1][0] * X[0],\n            detXC1 = X[0] * C[1][1] - X[1] * C[0][1];\n        alpha1 = detXC1 / detC0C1;\n        alpha2 = detC0X / detC0C1;\n      } else {\n        var c0 = C[0][0] + C[0][1],\n            c1 = C[1][0] + C[1][1];\n        alpha1 = alpha2 = abs(c0) > epsilon ? X[0] / c0 : abs(c1) > epsilon ? X[1] / c1 : 0;\n      }\n\n      var segLength = pt2.getDistance(pt1),\n          eps = epsilon * segLength,\n          handle1,\n          handle2;\n\n      if (alpha1 < eps || alpha2 < eps) {\n        alpha1 = alpha2 = segLength / 3;\n      } else {\n        var line = pt2.subtract(pt1);\n        handle1 = tan1.normalize(alpha1);\n        handle2 = tan2.normalize(alpha2);\n\n        if (handle1.dot(line) - handle2.dot(line) > segLength * segLength) {\n          alpha1 = alpha2 = segLength / 3;\n          handle1 = handle2 = null;\n        }\n      }\n\n      return [pt1, pt1.add(handle1 || tan1.normalize(alpha1)), pt2.add(handle2 || tan2.normalize(alpha2)), pt2];\n    },\n    reparameterize: function reparameterize(first, last, u, curve) {\n      for (var i = first; i <= last; i++) {\n        u[i - first] = this.findRoot(curve, this.points[i], u[i - first]);\n      }\n\n      for (var i = 1, l = u.length; i < l; i++) {\n        if (u[i] <= u[i - 1]) return false;\n      }\n\n      return true;\n    },\n    findRoot: function findRoot(curve, point, u) {\n      var curve1 = [],\n          curve2 = [];\n\n      for (var i = 0; i <= 2; i++) {\n        curve1[i] = curve[i + 1].subtract(curve[i]).multiply(3);\n      }\n\n      for (var i = 0; i <= 1; i++) {\n        curve2[i] = curve1[i + 1].subtract(curve1[i]).multiply(2);\n      }\n\n      var pt = this.evaluate(3, curve, u),\n          pt1 = this.evaluate(2, curve1, u),\n          pt2 = this.evaluate(1, curve2, u),\n          diff = pt.subtract(point),\n          df = pt1.dot(pt1) + diff.dot(pt2);\n      return Numerical.isMachineZero(df) ? u : u - diff.dot(pt1) / df;\n    },\n    evaluate: function evaluate(degree, curve, t) {\n      var tmp = curve.slice();\n\n      for (var i = 1; i <= degree; i++) {\n        for (var j = 0; j <= degree - i; j++) {\n          tmp[j] = tmp[j].multiply(1 - t).add(tmp[j + 1].multiply(t));\n        }\n      }\n\n      return tmp[0];\n    },\n    chordLengthParameterize: function chordLengthParameterize(first, last) {\n      var u = [0];\n\n      for (var i = first + 1; i <= last; i++) {\n        u[i - first] = u[i - first - 1] + this.points[i].getDistance(this.points[i - 1]);\n      }\n\n      for (var i = 1, m = last - first; i <= m; i++) {\n        u[i] /= u[m];\n      }\n\n      return u;\n    },\n    findMaxError: function findMaxError(first, last, curve, u) {\n      var index = Math.floor((last - first + 1) / 2),\n          maxDist = 0;\n\n      for (var i = first + 1; i < last; i++) {\n        var P = this.evaluate(3, curve, u[i - first]);\n        var v = P.subtract(this.points[i]);\n        var dist = v.x * v.x + v.y * v.y;\n\n        if (dist >= maxDist) {\n          maxDist = dist;\n          index = i;\n        }\n      }\n\n      return {\n        error: maxDist,\n        index: index\n      };\n    }\n  });\n  var TextItem = Item.extend({\n    _class: 'TextItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _serializeFields: {\n      content: null\n    },\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    initialize: function TextItem(arg) {\n      this._content = '';\n      this._lines = [];\n      var hasProps = arg && Base.isPlainObject(arg) && arg.x === undefined && arg.y === undefined;\n\n      this._initialize(hasProps && arg, !hasProps && Point.read(arguments));\n    },\n    _equals: function _equals(item) {\n      return this._content === item._content;\n    },\n    copyContent: function copyContent(source) {\n      this.setContent(source._content);\n    },\n    getContent: function getContent() {\n      return this._content;\n    },\n    setContent: function setContent(content) {\n      this._content = '' + content;\n      this._lines = this._content.split(/\\r\\n|\\n|\\r/mg);\n\n      this._changed(521);\n    },\n    isEmpty: function isEmpty() {\n      return !this._content;\n    },\n    getCharacterStyle: '#getStyle',\n    setCharacterStyle: '#setStyle',\n    getParagraphStyle: '#getStyle',\n    setParagraphStyle: '#setStyle'\n  });\n  var PointText = TextItem.extend({\n    _class: 'PointText',\n    initialize: function PointText() {\n      TextItem.apply(this, arguments);\n    },\n    getPoint: function getPoint() {\n      var point = this._matrix.getTranslation();\n\n      return new LinkedPoint(point.x, point.y, this, 'setPoint');\n    },\n    setPoint: function setPoint() {\n      var point = Point.read(arguments);\n      this.translate(point.subtract(this._matrix.getTranslation()));\n    },\n    _draw: function _draw(ctx, param, viewMatrix) {\n      if (!this._content) return;\n\n      this._setStyles(ctx, param, viewMatrix);\n\n      var lines = this._lines,\n          style = this._style,\n          hasFill = style.hasFill(),\n          hasStroke = style.hasStroke(),\n          leading = style.getLeading(),\n          shadowColor = ctx.shadowColor;\n      ctx.font = style.getFontStyle();\n      ctx.textAlign = style.getJustification();\n\n      for (var i = 0, l = lines.length; i < l; i++) {\n        ctx.shadowColor = shadowColor;\n        var line = lines[i];\n\n        if (hasFill) {\n          ctx.fillText(line, 0, 0);\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n\n        if (hasStroke) ctx.strokeText(line, 0, 0);\n        ctx.translate(0, leading);\n      }\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var style = this._style,\n          lines = this._lines,\n          numLines = lines.length,\n          justification = style.getJustification(),\n          leading = style.getLeading(),\n          width = this.getView().getTextWidth(style.getFontStyle(), lines),\n          x = 0;\n      if (justification !== 'left') x -= width / (justification === 'center' ? 2 : 1);\n      var rect = new _Rectangle(x, numLines ? -0.75 * leading : 0, width, numLines * leading);\n      return matrix ? matrix._transformBounds(rect, rect) : rect;\n    }\n  });\n  var Color = Base.extend(new function () {\n    var types = {\n      gray: ['gray'],\n      rgb: ['red', 'green', 'blue'],\n      hsb: ['hue', 'saturation', 'brightness'],\n      hsl: ['hue', 'saturation', 'lightness'],\n      gradient: ['gradient', 'origin', 'destination', 'highlight']\n    };\n    var componentParsers = {},\n        namedColors = {\n      transparent: [0, 0, 0, 0]\n    },\n        colorCtx;\n\n    function fromCSS(string) {\n      var match = string.match(/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})?$/i) || string.match(/^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])?$/i),\n          type = 'rgb',\n          components;\n\n      if (match) {\n        var amount = match[4] ? 4 : 3;\n        components = new Array(amount);\n\n        for (var i = 0; i < amount; i++) {\n          var value = match[i + 1];\n          components[i] = parseInt(value.length == 1 ? value + value : value, 16) / 255;\n        }\n      } else if (match = string.match(/^(rgb|hsl)a?\\((.*)\\)$/)) {\n        type = match[1];\n        components = match[2].trim().split(/[,\\s]+/g);\n        var isHSL = type === 'hsl';\n\n        for (var i = 0, l = Math.min(components.length, 4); i < l; i++) {\n          var component = components[i];\n          var value = parseFloat(component);\n\n          if (isHSL) {\n            if (i === 0) {\n              var unit = component.match(/([a-z]*)$/)[1];\n              value *= {\n                turn: 360,\n                rad: 180 / Math.PI,\n                grad: 0.9\n              }[unit] || 1;\n            } else if (i < 3) {\n              value /= 100;\n            }\n          } else if (i < 3) {\n            value /= /%$/.test(component) ? 100 : 255;\n          }\n\n          components[i] = value;\n        }\n      } else {\n        var color = namedColors[string];\n\n        if (!color) {\n          if (window) {\n            if (!colorCtx) {\n              colorCtx = CanvasProvider.getContext(1, 1);\n              colorCtx.globalCompositeOperation = 'copy';\n            }\n\n            colorCtx.fillStyle = 'rgba(0,0,0,0)';\n            colorCtx.fillStyle = string;\n            colorCtx.fillRect(0, 0, 1, 1);\n            var data = colorCtx.getImageData(0, 0, 1, 1).data;\n            color = namedColors[string] = [data[0] / 255, data[1] / 255, data[2] / 255];\n          } else {\n            color = [0, 0, 0];\n          }\n        }\n\n        components = color.slice();\n      }\n\n      return [type, components];\n    }\n\n    var hsbIndices = [[0, 3, 1], [2, 0, 1], [1, 0, 3], [1, 2, 0], [3, 1, 0], [0, 1, 2]];\n    var converters = {\n      'rgb-hsb': function rgbHsb(r, g, b) {\n        var max = Math.max(r, g, b),\n            min = Math.min(r, g, b),\n            delta = max - min,\n            h = delta === 0 ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60;\n        return [h, max === 0 ? 0 : delta / max, max];\n      },\n      'hsb-rgb': function hsbRgb(h, s, b) {\n        h = (h / 60 % 6 + 6) % 6;\n        var i = Math.floor(h),\n            f = h - i,\n            i = hsbIndices[i],\n            v = [b, b * (1 - s), b * (1 - s * f), b * (1 - s * (1 - f))];\n        return [v[i[0]], v[i[1]], v[i[2]]];\n      },\n      'rgb-hsl': function rgbHsl(r, g, b) {\n        var max = Math.max(r, g, b),\n            min = Math.min(r, g, b),\n            delta = max - min,\n            achromatic = delta === 0,\n            h = achromatic ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60,\n            l = (max + min) / 2,\n            s = achromatic ? 0 : l < 0.5 ? delta / (max + min) : delta / (2 - max - min);\n        return [h, s, l];\n      },\n      'hsl-rgb': function hslRgb(h, s, l) {\n        h = (h / 360 % 1 + 1) % 1;\n        if (s === 0) return [l, l, l];\n        var t3s = [h + 1 / 3, h, h - 1 / 3],\n            t2 = l < 0.5 ? l * (1 + s) : l + s - l * s,\n            t1 = 2 * l - t2,\n            c = [];\n\n        for (var i = 0; i < 3; i++) {\n          var t3 = t3s[i];\n          if (t3 < 0) t3 += 1;\n          if (t3 > 1) t3 -= 1;\n          c[i] = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 : 2 * t3 < 1 ? t2 : 3 * t3 < 2 ? t1 + (t2 - t1) * (2 / 3 - t3) * 6 : t1;\n        }\n\n        return c;\n      },\n      'rgb-gray': function rgbGray(r, g, b) {\n        return [r * 0.2989 + g * 0.587 + b * 0.114];\n      },\n      'gray-rgb': function grayRgb(g) {\n        return [g, g, g];\n      },\n      'gray-hsb': function grayHsb(g) {\n        return [0, 0, g];\n      },\n      'gray-hsl': function grayHsl(g) {\n        return [0, 0, g];\n      },\n      'gradient-rgb': function gradientRgb() {\n        return [];\n      },\n      'rgb-gradient': function rgbGradient() {\n        return [];\n      }\n    };\n    return Base.each(types, function (properties, type) {\n      componentParsers[type] = [];\n      Base.each(properties, function (name, index) {\n        var part = Base.capitalize(name),\n            hasOverlap = /^(hue|saturation)$/.test(name),\n            parser = componentParsers[type][index] = type === 'gradient' ? name === 'gradient' ? function (value) {\n          var current = this._components[0];\n          value = Gradient.read(Array.isArray(value) ? value : arguments, 0, {\n            readNull: true\n          });\n\n          if (current !== value) {\n            if (current) current._removeOwner(this);\n            if (value) value._addOwner(this);\n          }\n\n          return value;\n        } : function () {\n          return Point.read(arguments, 0, {\n            readNull: name === 'highlight',\n            clone: true\n          });\n        } : function (value) {\n          return value == null || isNaN(value) ? 0 : +value;\n        };\n\n        this['get' + part] = function () {\n          return this._type === type || hasOverlap && /^hs[bl]$/.test(this._type) ? this._components[index] : this._convert(type)[index];\n        };\n\n        this['set' + part] = function (value) {\n          if (this._type !== type && !(hasOverlap && /^hs[bl]$/.test(this._type))) {\n            this._components = this._convert(type);\n            this._properties = types[type];\n            this._type = type;\n          }\n\n          this._components[index] = parser.call(this, value);\n\n          this._changed();\n        };\n      }, this);\n    }, {\n      _class: 'Color',\n      _readIndex: true,\n      initialize: function Color(arg) {\n        var args = arguments,\n            reading = this.__read,\n            read = 0,\n            type,\n            components,\n            alpha,\n            values;\n\n        if (Array.isArray(arg)) {\n          args = arg;\n          arg = args[0];\n        }\n\n        var argType = arg != null && typeof arg;\n\n        if (argType === 'string' && arg in types) {\n          type = arg;\n          arg = args[1];\n\n          if (Array.isArray(arg)) {\n            components = arg;\n            alpha = args[2];\n          } else {\n            if (reading) read = 1;\n            args = Base.slice(args, 1);\n            argType = typeof arg;\n          }\n        }\n\n        if (!components) {\n          values = argType === 'number' ? args : argType === 'object' && arg.length != null ? arg : null;\n\n          if (values) {\n            if (!type) type = values.length >= 3 ? 'rgb' : 'gray';\n            var length = types[type].length;\n            alpha = values[length];\n\n            if (reading) {\n              read += values === arguments ? length + (alpha != null ? 1 : 0) : 1;\n            }\n\n            if (values.length > length) values = Base.slice(values, 0, length);\n          } else if (argType === 'string') {\n            var converted = fromCSS(arg);\n            type = converted[0];\n            components = converted[1];\n\n            if (components.length === 4) {\n              alpha = components[3];\n              components.length--;\n            }\n          } else if (argType === 'object') {\n            if (arg.constructor === Color) {\n              type = arg._type;\n              components = arg._components.slice();\n              alpha = arg._alpha;\n\n              if (type === 'gradient') {\n                for (var i = 1, l = components.length; i < l; i++) {\n                  var point = components[i];\n                  if (point) components[i] = point.clone();\n                }\n              }\n            } else if (arg.constructor === Gradient) {\n              type = 'gradient';\n              values = args;\n            } else {\n              type = 'hue' in arg ? 'lightness' in arg ? 'hsl' : 'hsb' : 'gradient' in arg || 'stops' in arg || 'radial' in arg ? 'gradient' : 'gray' in arg ? 'gray' : 'rgb';\n              var properties = types[type],\n                  parsers = componentParsers[type];\n              this._components = components = [];\n\n              for (var i = 0, l = properties.length; i < l; i++) {\n                var value = arg[properties[i]];\n\n                if (value == null && !i && type === 'gradient' && 'stops' in arg) {\n                  value = {\n                    stops: arg.stops,\n                    radial: arg.radial\n                  };\n                }\n\n                value = parsers[i].call(this, value);\n                if (value != null) components[i] = value;\n              }\n\n              alpha = arg.alpha;\n            }\n          }\n\n          if (reading && type) read = 1;\n        }\n\n        this._type = type || 'rgb';\n\n        if (!components) {\n          this._components = components = [];\n          var parsers = componentParsers[this._type];\n\n          for (var i = 0, l = parsers.length; i < l; i++) {\n            var value = parsers[i].call(this, values && values[i]);\n            if (value != null) components[i] = value;\n          }\n        }\n\n        this._components = components;\n        this._properties = types[this._type];\n        this._alpha = alpha;\n        if (reading) this.__read = read;\n        return this;\n      },\n      set: '#initialize',\n      _serialize: function _serialize(options, dictionary) {\n        var components = this.getComponents();\n        return Base.serialize(/^(gray|rgb)$/.test(this._type) ? components : [this._type].concat(components), options, true, dictionary);\n      },\n      _changed: function _changed() {\n        this._canvasStyle = null;\n\n        if (this._owner) {\n          if (this._setter) {\n            this._owner[this._setter](this);\n          } else {\n            this._owner._changed(129);\n          }\n        }\n      },\n      _convert: function _convert(type) {\n        var converter;\n        return this._type === type ? this._components.slice() : (converter = converters[this._type + '-' + type]) ? converter.apply(this, this._components) : converters['rgb-' + type].apply(this, converters[this._type + '-rgb'].apply(this, this._components));\n      },\n      convert: function convert(type) {\n        return new Color(type, this._convert(type), this._alpha);\n      },\n      getType: function getType() {\n        return this._type;\n      },\n      setType: function setType(type) {\n        this._components = this._convert(type);\n        this._properties = types[type];\n        this._type = type;\n      },\n      getComponents: function getComponents() {\n        var components = this._components.slice();\n\n        if (this._alpha != null) components.push(this._alpha);\n        return components;\n      },\n      getAlpha: function getAlpha() {\n        return this._alpha != null ? this._alpha : 1;\n      },\n      setAlpha: function setAlpha(alpha) {\n        this._alpha = alpha == null ? null : Math.min(Math.max(alpha, 0), 1);\n\n        this._changed();\n      },\n      hasAlpha: function hasAlpha() {\n        return this._alpha != null;\n      },\n      equals: function equals(color) {\n        var col = Base.isPlainValue(color, true) ? Color.read(arguments) : color;\n        return col === this || col && this._class === col._class && this._type === col._type && this.getAlpha() === col.getAlpha() && Base.equals(this._components, col._components) || false;\n      },\n      toString: function toString() {\n        var properties = this._properties,\n            parts = [],\n            isGradient = this._type === 'gradient',\n            f = Formatter.instance;\n\n        for (var i = 0, l = properties.length; i < l; i++) {\n          var value = this._components[i];\n          if (value != null) parts.push(properties[i] + ': ' + (isGradient ? value : f.number(value)));\n        }\n\n        if (this._alpha != null) parts.push('alpha: ' + f.number(this._alpha));\n        return '{ ' + parts.join(', ') + ' }';\n      },\n      toCSS: function toCSS(hex) {\n        var components = this._convert('rgb'),\n            alpha = hex || this._alpha == null ? 1 : this._alpha;\n\n        function convert(val) {\n          return Math.round((val < 0 ? 0 : val > 1 ? 1 : val) * 255);\n        }\n\n        components = [convert(components[0]), convert(components[1]), convert(components[2])];\n        if (alpha < 1) components.push(alpha < 0 ? 0 : alpha);\n        return hex ? '#' + ((1 << 24) + (components[0] << 16) + (components[1] << 8) + components[2]).toString(16).slice(1) : (components.length == 4 ? 'rgba(' : 'rgb(') + components.join(',') + ')';\n      },\n      toCanvasStyle: function toCanvasStyle(ctx, matrix) {\n        if (this._canvasStyle) return this._canvasStyle;\n        if (this._type !== 'gradient') return this._canvasStyle = this.toCSS();\n        var components = this._components,\n            gradient = components[0],\n            stops = gradient._stops,\n            origin = components[1],\n            destination = components[2],\n            highlight = components[3],\n            inverse = matrix && matrix.inverted(),\n            canvasGradient;\n\n        if (inverse) {\n          origin = inverse._transformPoint(origin);\n          destination = inverse._transformPoint(destination);\n          if (highlight) highlight = inverse._transformPoint(highlight);\n        }\n\n        if (gradient._radial) {\n          var radius = destination.getDistance(origin);\n\n          if (highlight) {\n            var vector = highlight.subtract(origin);\n            if (vector.getLength() > radius) highlight = origin.add(vector.normalize(radius - 0.1));\n          }\n\n          var start = highlight || origin;\n          canvasGradient = ctx.createRadialGradient(start.x, start.y, 0, origin.x, origin.y, radius);\n        } else {\n          canvasGradient = ctx.createLinearGradient(origin.x, origin.y, destination.x, destination.y);\n        }\n\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n              offset = stop._offset;\n          canvasGradient.addColorStop(offset == null ? i / (l - 1) : offset, stop._color.toCanvasStyle());\n        }\n\n        return this._canvasStyle = canvasGradient;\n      },\n      transform: function transform(matrix) {\n        if (this._type === 'gradient') {\n          var components = this._components;\n\n          for (var i = 1, l = components.length; i < l; i++) {\n            var point = components[i];\n\n            matrix._transformPoint(point, point, true);\n          }\n\n          this._changed();\n        }\n      },\n      statics: {\n        _types: types,\n        random: function random() {\n          var random = Math.random;\n          return new Color(random(), random(), random());\n        },\n        _setOwner: function _setOwner(color, owner, setter) {\n          if (color) {\n            if (color._owner && owner && color._owner !== owner) {\n              color = color.clone();\n            }\n\n            if (!color._owner ^ !owner) {\n              color._owner = owner || null;\n              color._setter = setter || null;\n            }\n          }\n\n          return color;\n        }\n      }\n    });\n  }(), new function () {\n    var operators = {\n      add: function add(a, b) {\n        return a + b;\n      },\n      subtract: function subtract(a, b) {\n        return a - b;\n      },\n      multiply: function multiply(a, b) {\n        return a * b;\n      },\n      divide: function divide(a, b) {\n        return a / b;\n      }\n    };\n    return Base.each(operators, function (operator, name) {\n      this[name] = function (color) {\n        color = Color.read(arguments);\n\n        var type = this._type,\n            components1 = this._components,\n            components2 = color._convert(type);\n\n        for (var i = 0, l = components1.length; i < l; i++) {\n          components2[i] = operator(components1[i], components2[i]);\n        }\n\n        return new Color(type, components2, this._alpha != null ? operator(this._alpha, color.getAlpha()) : null);\n      };\n    }, {});\n  }());\n  var Gradient = Base.extend({\n    _class: 'Gradient',\n    initialize: function Gradient(stops, radial) {\n      this._id = UID.get();\n\n      if (stops && Base.isPlainObject(stops)) {\n        this.set(stops);\n        stops = radial = null;\n      }\n\n      if (this._stops == null) {\n        this.setStops(stops || ['white', 'black']);\n      }\n\n      if (this._radial == null) {\n        this.setRadial(typeof radial === 'string' && radial === 'radial' || radial || false);\n      }\n    },\n    _serialize: function _serialize(options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._stops, this._radial], options, true, dictionary);\n      });\n    },\n    _changed: function _changed() {\n      for (var i = 0, l = this._owners && this._owners.length; i < l; i++) {\n        this._owners[i]._changed();\n      }\n    },\n    _addOwner: function _addOwner(color) {\n      if (!this._owners) this._owners = [];\n\n      this._owners.push(color);\n    },\n    _removeOwner: function _removeOwner(color) {\n      var index = this._owners ? this._owners.indexOf(color) : -1;\n\n      if (index != -1) {\n        this._owners.splice(index, 1);\n\n        if (!this._owners.length) this._owners = undefined;\n      }\n    },\n    clone: function clone() {\n      var stops = [];\n\n      for (var i = 0, l = this._stops.length; i < l; i++) {\n        stops[i] = this._stops[i].clone();\n      }\n\n      return new Gradient(stops, this._radial);\n    },\n    getStops: function getStops() {\n      return this._stops;\n    },\n    setStops: function setStops(stops) {\n      if (stops.length < 2) {\n        throw new Error('Gradient stop list needs to contain at least two stops.');\n      }\n\n      var _stops = this._stops;\n\n      if (_stops) {\n        for (var i = 0, l = _stops.length; i < l; i++) {\n          _stops[i]._owner = undefined;\n        }\n      }\n\n      _stops = this._stops = GradientStop.readList(stops, 0, {\n        clone: true\n      });\n\n      for (var i = 0, l = _stops.length; i < l; i++) {\n        _stops[i]._owner = this;\n      }\n\n      this._changed();\n    },\n    getRadial: function getRadial() {\n      return this._radial;\n    },\n    setRadial: function setRadial(radial) {\n      this._radial = radial;\n\n      this._changed();\n    },\n    equals: function equals(gradient) {\n      if (gradient === this) return true;\n\n      if (gradient && this._class === gradient._class) {\n        var stops1 = this._stops,\n            stops2 = gradient._stops,\n            length = stops1.length;\n\n        if (length === stops2.length) {\n          for (var i = 0; i < length; i++) {\n            if (!stops1[i].equals(stops2[i])) return false;\n          }\n\n          return true;\n        }\n      }\n\n      return false;\n    }\n  });\n  var GradientStop = Base.extend({\n    _class: 'GradientStop',\n    initialize: function GradientStop(arg0, arg1) {\n      var color = arg0,\n          offset = arg1;\n\n      if (typeof arg0 === 'object' && arg1 === undefined) {\n        if (Array.isArray(arg0) && typeof arg0[0] !== 'number') {\n          color = arg0[0];\n          offset = arg0[1];\n        } else if ('color' in arg0 || 'offset' in arg0 || 'rampPoint' in arg0) {\n          color = arg0.color;\n          offset = arg0.offset || arg0.rampPoint || 0;\n        }\n      }\n\n      this.setColor(color);\n      this.setOffset(offset);\n    },\n    clone: function clone() {\n      return new GradientStop(this._color.clone(), this._offset);\n    },\n    _serialize: function _serialize(options, dictionary) {\n      var color = this._color,\n          offset = this._offset;\n      return Base.serialize(offset == null ? [color] : [color, offset], options, true, dictionary);\n    },\n    _changed: function _changed() {\n      if (this._owner) this._owner._changed(129);\n    },\n    getOffset: function getOffset() {\n      return this._offset;\n    },\n    setOffset: function setOffset(offset) {\n      this._offset = offset;\n\n      this._changed();\n    },\n    getRampPoint: '#getOffset',\n    setRampPoint: '#setOffset',\n    getColor: function getColor() {\n      return this._color;\n    },\n    setColor: function setColor() {\n      Color._setOwner(this._color, null);\n\n      this._color = Color._setOwner(Color.read(arguments, 0), this, 'setColor');\n\n      this._changed();\n    },\n    equals: function equals(stop) {\n      return stop === this || stop && this._class === stop._class && this._color.equals(stop._color) && this._offset == stop._offset || false;\n    }\n  });\n  var Style = Base.extend(new function () {\n    var itemDefaults = {\n      fillColor: null,\n      fillRule: 'nonzero',\n      strokeColor: null,\n      strokeWidth: 1,\n      strokeCap: 'butt',\n      strokeJoin: 'miter',\n      strokeScaling: true,\n      miterLimit: 10,\n      dashOffset: 0,\n      dashArray: [],\n      shadowColor: null,\n      shadowBlur: 0,\n      shadowOffset: new Point(),\n      selectedColor: null\n    },\n        groupDefaults = Base.set({}, itemDefaults, {\n      fontFamily: 'sans-serif',\n      fontWeight: 'normal',\n      fontSize: 12,\n      leading: null,\n      justification: 'left'\n    }),\n        textDefaults = Base.set({}, groupDefaults, {\n      fillColor: new Color()\n    }),\n        flags = {\n      strokeWidth: 193,\n      strokeCap: 193,\n      strokeJoin: 193,\n      strokeScaling: 201,\n      miterLimit: 193,\n      fontFamily: 9,\n      fontWeight: 9,\n      fontSize: 9,\n      font: 9,\n      leading: 9,\n      justification: 9\n    },\n        item = {\n      beans: true\n    },\n        fields = {\n      _class: 'Style',\n      beans: true,\n      initialize: function Style(style, _owner, _project) {\n        this._values = {};\n        this._owner = _owner;\n        this._project = _owner && _owner._project || _project || paper.project;\n        this._defaults = !_owner || _owner instanceof Group ? groupDefaults : _owner instanceof TextItem ? textDefaults : itemDefaults;\n        if (style) this.set(style);\n      }\n    };\n    Base.each(groupDefaults, function (value, key) {\n      var isColor = /Color$/.test(key),\n          isPoint = key === 'shadowOffset',\n          part = Base.capitalize(key),\n          flag = flags[key],\n          set = 'set' + part,\n          get = 'get' + part;\n\n      fields[set] = function (value) {\n        var owner = this._owner,\n            children = owner && owner._children,\n            applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath);\n\n        if (applyToChildren) {\n          for (var i = 0, l = children.length; i < l; i++) {\n            children[i]._style[set](value);\n          }\n        }\n\n        if ((key === 'selectedColor' || !applyToChildren) && key in this._defaults) {\n          var old = this._values[key];\n\n          if (old !== value) {\n            if (isColor) {\n              if (old) {\n                Color._setOwner(old, null);\n\n                old._canvasStyle = null;\n              }\n\n              if (value && value.constructor === Color) {\n                value = Color._setOwner(value, owner, applyToChildren && set);\n              }\n            }\n\n            this._values[key] = value;\n            if (owner) owner._changed(flag || 129);\n          }\n        }\n      };\n\n      fields[get] = function (_dontMerge) {\n        var owner = this._owner,\n            children = owner && owner._children,\n            applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath),\n            value;\n\n        if (applyToChildren && !_dontMerge) {\n          for (var i = 0, l = children.length; i < l; i++) {\n            var childValue = children[i]._style[get]();\n\n            if (!i) {\n              value = childValue;\n            } else if (!Base.equals(value, childValue)) {\n              return undefined;\n            }\n          }\n        } else if (key in this._defaults) {\n          var value = this._values[key];\n\n          if (value === undefined) {\n            value = this._defaults[key];\n\n            if (value && value.clone) {\n              value = value.clone();\n            }\n          } else {\n            var ctor = isColor ? Color : isPoint ? Point : null;\n\n            if (ctor && !(value && value.constructor === ctor)) {\n              this._values[key] = value = ctor.read([value], 0, {\n                readNull: true,\n                clone: true\n              });\n            }\n          }\n        }\n\n        if (value && isColor) {\n          value = Color._setOwner(value, owner, applyToChildren && set);\n        }\n\n        return value;\n      };\n\n      item[get] = function (_dontMerge) {\n        return this._style[get](_dontMerge);\n      };\n\n      item[set] = function (value) {\n        this._style[set](value);\n      };\n    });\n    Base.each({\n      Font: 'FontFamily',\n      WindingRule: 'FillRule'\n    }, function (value, key) {\n      var get = 'get' + key,\n          set = 'set' + key;\n      fields[get] = item[get] = '#get' + value;\n      fields[set] = item[set] = '#set' + value;\n    });\n    Item.inject(item);\n    return fields;\n  }(), {\n    set: function set(style) {\n      var isStyle = style instanceof Style,\n          values = isStyle ? style._values : style;\n\n      if (values) {\n        for (var key in values) {\n          if (key in this._defaults) {\n            var value = values[key];\n            this[key] = value && isStyle && value.clone ? value.clone() : value;\n          }\n        }\n      }\n    },\n    equals: function equals(style) {\n      function compare(style1, style2, secondary) {\n        var values1 = style1._values,\n            values2 = style2._values,\n            defaults2 = style2._defaults;\n\n        for (var key in values1) {\n          var value1 = values1[key],\n              value2 = values2[key];\n          if (!(secondary && key in values2) && !Base.equals(value1, value2 === undefined ? defaults2[key] : value2)) return false;\n        }\n\n        return true;\n      }\n\n      return style === this || style && this._class === style._class && compare(this, style) && compare(style, this, true) || false;\n    },\n    _dispose: function _dispose() {\n      var color;\n      color = this.getFillColor();\n      if (color) color._canvasStyle = null;\n      color = this.getStrokeColor();\n      if (color) color._canvasStyle = null;\n      color = this.getShadowColor();\n      if (color) color._canvasStyle = null;\n    },\n    hasFill: function hasFill() {\n      var color = this.getFillColor();\n      return !!color && color.alpha > 0;\n    },\n    hasStroke: function hasStroke() {\n      var color = this.getStrokeColor();\n      return !!color && color.alpha > 0 && this.getStrokeWidth() > 0;\n    },\n    hasShadow: function hasShadow() {\n      var color = this.getShadowColor();\n      return !!color && color.alpha > 0 && (this.getShadowBlur() > 0 || !this.getShadowOffset().isZero());\n    },\n    getView: function getView() {\n      return this._project._view;\n    },\n    getFontStyle: function getFontStyle() {\n      var fontSize = this.getFontSize();\n      return this.getFontWeight() + ' ' + fontSize + (/[a-z]/i.test(fontSize + '') ? ' ' : 'px ') + this.getFontFamily();\n    },\n    getFont: '#getFontFamily',\n    setFont: '#setFontFamily',\n    getLeading: function getLeading() {\n      var leading = getLeading.base.call(this),\n          fontSize = this.getFontSize();\n      if (/pt|em|%|px/.test(fontSize)) fontSize = this.getView().getPixelSize(fontSize);\n      return leading != null ? leading : fontSize * 1.2;\n    }\n  });\n  var DomElement = new function () {\n    function handlePrefix(el, name, set, value) {\n      var prefixes = ['', 'webkit', 'moz', 'Moz', 'ms', 'o'],\n          suffix = name[0].toUpperCase() + name.substring(1);\n\n      for (var i = 0; i < 6; i++) {\n        var prefix = prefixes[i],\n            key = prefix ? prefix + suffix : name;\n\n        if (key in el) {\n          if (set) {\n            el[key] = value;\n          } else {\n            return el[key];\n          }\n\n          break;\n        }\n      }\n    }\n\n    return {\n      getStyles: function getStyles(el) {\n        var doc = el && el.nodeType !== 9 ? el.ownerDocument : el,\n            view = doc && doc.defaultView;\n        return view && view.getComputedStyle(el, '');\n      },\n      getBounds: function getBounds(el, viewport) {\n        var doc = el.ownerDocument,\n            body = doc.body,\n            html = doc.documentElement,\n            rect;\n\n        try {\n          rect = el.getBoundingClientRect();\n        } catch (e) {\n          rect = {\n            left: 0,\n            top: 0,\n            width: 0,\n            height: 0\n          };\n        }\n\n        var x = rect.left - (html.clientLeft || body.clientLeft || 0),\n            y = rect.top - (html.clientTop || body.clientTop || 0);\n\n        if (!viewport) {\n          var view = doc.defaultView;\n          x += view.pageXOffset || html.scrollLeft || body.scrollLeft;\n          y += view.pageYOffset || html.scrollTop || body.scrollTop;\n        }\n\n        return new _Rectangle(x, y, rect.width, rect.height);\n      },\n      getViewportBounds: function getViewportBounds(el) {\n        var doc = el.ownerDocument,\n            view = doc.defaultView,\n            html = doc.documentElement;\n        return new _Rectangle(0, 0, view.innerWidth || html.clientWidth, view.innerHeight || html.clientHeight);\n      },\n      getOffset: function getOffset(el, viewport) {\n        return DomElement.getBounds(el, viewport).getPoint();\n      },\n      getSize: function getSize(el) {\n        return DomElement.getBounds(el, true).getSize();\n      },\n      isInvisible: function isInvisible(el) {\n        return DomElement.getSize(el).equals(new Size(0, 0));\n      },\n      isInView: function isInView(el) {\n        return !DomElement.isInvisible(el) && DomElement.getViewportBounds(el).intersects(DomElement.getBounds(el, true));\n      },\n      isInserted: function isInserted(el) {\n        return document.body.contains(el);\n      },\n      getPrefixed: function getPrefixed(el, name) {\n        return el && handlePrefix(el, name);\n      },\n      setPrefixed: function setPrefixed(el, name, value) {\n        if (typeof name === 'object') {\n          for (var key in name) {\n            handlePrefix(el, key, true, name[key]);\n          }\n        } else {\n          handlePrefix(el, name, true, value);\n        }\n      }\n    };\n  }();\n  var DomEvent = {\n    add: function add(el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n              parts = type.split(/[\\s,]+/g);\n\n          for (var i = 0, l = parts.length; i < l; i++) {\n            var name = parts[i];\n            var options = el === document && (name === 'touchstart' || name === 'touchmove') ? {\n              passive: false\n            } : false;\n            el.addEventListener(name, func, options);\n          }\n        }\n      }\n    },\n    remove: function remove(el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n              parts = type.split(/[\\s,]+/g);\n\n          for (var i = 0, l = parts.length; i < l; i++) {\n            el.removeEventListener(parts[i], func, false);\n          }\n        }\n      }\n    },\n    getPoint: function getPoint(event) {\n      var pos = event.targetTouches ? event.targetTouches.length ? event.targetTouches[0] : event.changedTouches[0] : event;\n      return new Point(pos.pageX || pos.clientX + document.documentElement.scrollLeft, pos.pageY || pos.clientY + document.documentElement.scrollTop);\n    },\n    getTarget: function getTarget(event) {\n      return event.target || event.srcElement;\n    },\n    getRelatedTarget: function getRelatedTarget(event) {\n      return event.relatedTarget || event.toElement;\n    },\n    getOffset: function getOffset(event, target) {\n      return DomEvent.getPoint(event).subtract(DomElement.getOffset(target || DomEvent.getTarget(event)));\n    }\n  };\n  DomEvent.requestAnimationFrame = new function () {\n    var nativeRequest = DomElement.getPrefixed(window, 'requestAnimationFrame'),\n        requested = false,\n        callbacks = [],\n        timer;\n\n    function handleCallbacks() {\n      var functions = callbacks;\n      callbacks = [];\n\n      for (var i = 0, l = functions.length; i < l; i++) {\n        functions[i]();\n      }\n\n      requested = nativeRequest && callbacks.length;\n      if (requested) nativeRequest(handleCallbacks);\n    }\n\n    return function (callback) {\n      callbacks.push(callback);\n\n      if (nativeRequest) {\n        if (!requested) {\n          nativeRequest(handleCallbacks);\n          requested = true;\n        }\n      } else if (!timer) {\n        timer = setInterval(handleCallbacks, 1000 / 60);\n      }\n    };\n  }();\n  var View = Base.extend(Emitter, {\n    _class: 'View',\n    initialize: function View(project, element) {\n      function getSize(name) {\n        return element[name] || parseInt(element.getAttribute(name), 10);\n      }\n\n      function getCanvasSize() {\n        var size = DomElement.getSize(element);\n        return size.isNaN() || size.isZero() ? new Size(getSize('width'), getSize('height')) : size;\n      }\n\n      var size;\n\n      if (window && element) {\n        this._id = element.getAttribute('id');\n        if (this._id == null) element.setAttribute('id', this._id = 'view-' + View._id++);\n        DomEvent.add(element, this._viewEvents);\n        var none = 'none';\n        DomElement.setPrefixed(element.style, {\n          userDrag: none,\n          userSelect: none,\n          touchCallout: none,\n          contentZooming: none,\n          tapHighlightColor: 'rgba(0,0,0,0)'\n        });\n\n        if (PaperScope.hasAttribute(element, 'resize')) {\n          var that = this;\n          DomEvent.add(window, this._windowEvents = {\n            resize: function resize() {\n              that.setViewSize(getCanvasSize());\n            }\n          });\n        }\n\n        size = getCanvasSize();\n\n        if (PaperScope.hasAttribute(element, 'stats') && typeof Stats !== 'undefined') {\n          this._stats = new Stats();\n          var stats = this._stats.domElement,\n              style = stats.style,\n              offset = DomElement.getOffset(element);\n          style.position = 'absolute';\n          style.left = offset.x + 'px';\n          style.top = offset.y + 'px';\n          document.body.appendChild(stats);\n        }\n      } else {\n        size = new Size(element);\n        element = null;\n      }\n\n      this._project = project;\n      this._scope = project._scope;\n      this._element = element;\n      if (!this._pixelRatio) this._pixelRatio = window && window.devicePixelRatio || 1;\n\n      this._setElementSize(size.width, size.height);\n\n      this._viewSize = size;\n\n      View._views.push(this);\n\n      View._viewsById[this._id] = this;\n      (this._matrix = new Matrix())._owner = this;\n      if (!View._focused) View._focused = this;\n      this._frameItems = {};\n      this._frameItemCount = 0;\n      this._itemEvents = {\n        \"native\": {},\n        virtual: {}\n      };\n      this._autoUpdate = !paper.agent.node;\n      this._needsUpdate = false;\n    },\n    remove: function remove() {\n      if (!this._project) return false;\n      if (View._focused === this) View._focused = null;\n\n      View._views.splice(View._views.indexOf(this), 1);\n\n      delete View._viewsById[this._id];\n      var project = this._project;\n      if (project._view === this) project._view = null;\n      DomEvent.remove(this._element, this._viewEvents);\n      DomEvent.remove(window, this._windowEvents);\n      this._element = this._project = null;\n      this.off('frame');\n      this._animate = false;\n      this._frameItems = {};\n      return true;\n    },\n    _events: Base.each(Item._itemHandlers.concat(['onResize', 'onKeyDown', 'onKeyUp']), function (name) {\n      this[name] = {};\n    }, {\n      onFrame: {\n        install: function install() {\n          this.play();\n        },\n        uninstall: function uninstall() {\n          this.pause();\n        }\n      }\n    }),\n    _animate: false,\n    _time: 0,\n    _count: 0,\n    getAutoUpdate: function getAutoUpdate() {\n      return this._autoUpdate;\n    },\n    setAutoUpdate: function setAutoUpdate(autoUpdate) {\n      this._autoUpdate = autoUpdate;\n      if (autoUpdate) this.requestUpdate();\n    },\n    update: function update() {},\n    draw: function draw() {\n      this.update();\n    },\n    requestUpdate: function requestUpdate() {\n      if (!this._requested) {\n        var that = this;\n        DomEvent.requestAnimationFrame(function () {\n          that._requested = false;\n\n          if (that._animate) {\n            that.requestUpdate();\n            var element = that._element;\n\n            if ((!DomElement.getPrefixed(document, 'hidden') || PaperScope.getAttribute(element, 'keepalive') === 'true') && DomElement.isInView(element)) {\n              that._handleFrame();\n            }\n          }\n\n          if (that._autoUpdate) that.update();\n        });\n        this._requested = true;\n      }\n    },\n    play: function play() {\n      this._animate = true;\n      this.requestUpdate();\n    },\n    pause: function pause() {\n      this._animate = false;\n    },\n    _handleFrame: function _handleFrame() {\n      paper = this._scope;\n      var now = Date.now() / 1000,\n          delta = this._last ? now - this._last : 0;\n      this._last = now;\n      this.emit('frame', new Base({\n        delta: delta,\n        time: this._time += delta,\n        count: this._count++\n      }));\n      if (this._stats) this._stats.update();\n    },\n    _animateItem: function _animateItem(item, animate) {\n      var items = this._frameItems;\n\n      if (animate) {\n        items[item._id] = {\n          item: item,\n          time: 0,\n          count: 0\n        };\n        if (++this._frameItemCount === 1) this.on('frame', this._handleFrameItems);\n      } else {\n        delete items[item._id];\n\n        if (--this._frameItemCount === 0) {\n          this.off('frame', this._handleFrameItems);\n        }\n      }\n    },\n    _handleFrameItems: function _handleFrameItems(event) {\n      for (var i in this._frameItems) {\n        var entry = this._frameItems[i];\n        entry.item.emit('frame', new Base(event, {\n          time: entry.time += event.delta,\n          count: entry.count++\n        }));\n      }\n    },\n    _changed: function _changed() {\n      this._project._changed(4097);\n\n      this._bounds = this._decomposed = undefined;\n    },\n    getElement: function getElement() {\n      return this._element;\n    },\n    getPixelRatio: function getPixelRatio() {\n      return this._pixelRatio;\n    },\n    getResolution: function getResolution() {\n      return this._pixelRatio * 72;\n    },\n    getViewSize: function getViewSize() {\n      var size = this._viewSize;\n      return new LinkedSize(size.width, size.height, this, 'setViewSize');\n    },\n    setViewSize: function setViewSize() {\n      var size = Size.read(arguments),\n          delta = size.subtract(this._viewSize);\n      if (delta.isZero()) return;\n\n      this._setElementSize(size.width, size.height);\n\n      this._viewSize.set(size);\n\n      this._changed();\n\n      this.emit('resize', {\n        size: size,\n        delta: delta\n      });\n\n      if (this._autoUpdate) {\n        this.update();\n      }\n    },\n    _setElementSize: function _setElementSize(width, height) {\n      var element = this._element;\n\n      if (element) {\n        if (element.width !== width) element.width = width;\n        if (element.height !== height) element.height = height;\n      }\n    },\n    getBounds: function getBounds() {\n      if (!this._bounds) this._bounds = this._matrix.inverted()._transformBounds(new _Rectangle(new Point(), this._viewSize));\n      return this._bounds;\n    },\n    getSize: function getSize() {\n      return this.getBounds().getSize();\n    },\n    isVisible: function isVisible() {\n      return DomElement.isInView(this._element);\n    },\n    isInserted: function isInserted() {\n      return DomElement.isInserted(this._element);\n    },\n    getPixelSize: function getPixelSize(size) {\n      var element = this._element,\n          pixels;\n\n      if (element) {\n        var parent = element.parentNode,\n            temp = document.createElement('div');\n        temp.style.fontSize = size;\n        parent.appendChild(temp);\n        pixels = parseFloat(DomElement.getStyles(temp).fontSize);\n        parent.removeChild(temp);\n      } else {\n        pixels = parseFloat(pixels);\n      }\n\n      return pixels;\n    },\n    getTextWidth: function getTextWidth(font, lines) {\n      return 0;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n\n    this[key] = function () {\n      var args = arguments,\n          value = (rotate ? Base : Point).read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      return this.transform(new Matrix()[key](value, center || this.getCenter(true)));\n    };\n  }, {\n    _decompose: function _decompose() {\n      return this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    translate: function translate() {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    getCenter: function getCenter() {\n      return this.getBounds().getCenter();\n    },\n    setCenter: function setCenter() {\n      var center = Point.read(arguments);\n      this.translate(this.getCenter().subtract(center));\n    },\n    getZoom: function getZoom() {\n      var scaling = this._decompose().scaling;\n\n      return (scaling.x + scaling.y) / 2;\n    },\n    setZoom: function setZoom(zoom) {\n      this.transform(new Matrix().scale(zoom / this.getZoom(), this.getCenter()));\n    },\n    getRotation: function getRotation() {\n      return this._decompose().rotation;\n    },\n    setRotation: function setRotation(rotation) {\n      var current = this.getRotation();\n\n      if (current != null && rotation != null) {\n        this.rotate(rotation - current);\n      }\n    },\n    getScaling: function getScaling() {\n      var scaling = this._decompose().scaling;\n\n      return new LinkedPoint(scaling.x, scaling.y, this, 'setScaling');\n    },\n    setScaling: function setScaling() {\n      var current = this.getScaling(),\n          scaling = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n\n      if (current && scaling) {\n        this.scale(scaling.x / current.x, scaling.y / current.y);\n      }\n    },\n    getMatrix: function getMatrix() {\n      return this._matrix;\n    },\n    setMatrix: function setMatrix() {\n      var matrix = this._matrix;\n      matrix.initialize.apply(matrix, arguments);\n    },\n    transform: function transform(matrix) {\n      this._matrix.append(matrix);\n    },\n    scrollBy: function scrollBy() {\n      this.translate(Point.read(arguments).negate());\n    }\n  }), {\n    projectToView: function projectToView() {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    viewToProject: function viewToProject() {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    getEventPoint: function getEventPoint(event) {\n      return this.viewToProject(DomEvent.getOffset(event, this._element));\n    }\n  }, {\n    statics: {\n      _views: [],\n      _viewsById: {},\n      _id: 0,\n      create: function create(project, element) {\n        if (document && typeof element === 'string') element = document.getElementById(element);\n        var ctor = window ? CanvasView : View;\n        return new ctor(project, element);\n      }\n    }\n  }, new function () {\n    if (!window) return;\n    var prevFocus,\n        tempFocus,\n        dragging = false,\n        mouseDown = false;\n\n    function getView(event) {\n      var target = DomEvent.getTarget(event);\n      return target.getAttribute && View._viewsById[target.getAttribute('id')];\n    }\n\n    function updateFocus() {\n      var view = View._focused;\n\n      if (!view || !view.isVisible()) {\n        for (var i = 0, l = View._views.length; i < l; i++) {\n          if ((view = View._views[i]).isVisible()) {\n            View._focused = tempFocus = view;\n            break;\n          }\n        }\n      }\n    }\n\n    function handleMouseMove(view, event, point) {\n      view._handleMouseEvent('mousemove', event, point);\n    }\n\n    var navigator = window.navigator,\n        mousedown,\n        mousemove,\n        mouseup;\n\n    if (navigator.pointerEnabled || navigator.msPointerEnabled) {\n      mousedown = 'pointerdown MSPointerDown';\n      mousemove = 'pointermove MSPointerMove';\n      mouseup = 'pointerup pointercancel MSPointerUp MSPointerCancel';\n    } else {\n      mousedown = 'touchstart';\n      mousemove = 'touchmove';\n      mouseup = 'touchend touchcancel';\n\n      if (!('ontouchstart' in window && navigator.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i))) {\n        mousedown += ' mousedown';\n        mousemove += ' mousemove';\n        mouseup += ' mouseup';\n      }\n    }\n\n    var viewEvents = {},\n        docEvents = {\n      mouseout: function mouseout(event) {\n        var view = View._focused,\n            target = DomEvent.getRelatedTarget(event);\n\n        if (view && (!target || target.nodeName === 'HTML')) {\n          var offset = DomEvent.getOffset(event, view._element),\n              x = offset.x,\n              abs = Math.abs,\n              ax = abs(x),\n              max = 1 << 25,\n              diff = ax - max;\n          offset.x = abs(diff) < ax ? diff * (x < 0 ? -1 : 1) : x;\n          handleMouseMove(view, event, view.viewToProject(offset));\n        }\n      },\n      scroll: updateFocus\n    };\n\n    viewEvents[mousedown] = function (event) {\n      var view = View._focused = getView(event);\n\n      if (!dragging) {\n        dragging = true;\n\n        view._handleMouseEvent('mousedown', event);\n      }\n    };\n\n    docEvents[mousemove] = function (event) {\n      var view = View._focused;\n\n      if (!mouseDown) {\n        var target = getView(event);\n\n        if (target) {\n          if (view !== target) {\n            if (view) handleMouseMove(view, event);\n            if (!prevFocus) prevFocus = view;\n            view = View._focused = tempFocus = target;\n          }\n        } else if (tempFocus && tempFocus === view) {\n          if (prevFocus && !prevFocus.isInserted()) prevFocus = null;\n          view = View._focused = prevFocus;\n          prevFocus = null;\n          updateFocus();\n        }\n      }\n\n      if (view) handleMouseMove(view, event);\n    };\n\n    docEvents[mousedown] = function () {\n      mouseDown = true;\n    };\n\n    docEvents[mouseup] = function (event) {\n      var view = View._focused;\n      if (view && dragging) view._handleMouseEvent('mouseup', event);\n      mouseDown = dragging = false;\n    };\n\n    DomEvent.add(document, docEvents);\n    DomEvent.add(window, {\n      load: updateFocus\n    });\n    var called = false,\n        prevented = false,\n        fallbacks = {\n      doubleclick: 'click',\n      mousedrag: 'mousemove'\n    },\n        wasInView = false,\n        overView,\n        downPoint,\n        lastPoint,\n        downItem,\n        overItem,\n        dragItem,\n        clickItem,\n        clickTime,\n        dblClick;\n\n    function emitMouseEvent(obj, target, type, event, point, prevPoint, stopItem) {\n      var stopped = false,\n          mouseEvent;\n\n      function emit(obj, type) {\n        if (obj.responds(type)) {\n          if (!mouseEvent) {\n            mouseEvent = new MouseEvent(type, event, point, target || obj, prevPoint ? point.subtract(prevPoint) : null);\n          }\n\n          if (obj.emit(type, mouseEvent)) {\n            called = true;\n            if (mouseEvent.prevented) prevented = true;\n            if (mouseEvent.stopped) return stopped = true;\n          }\n        } else {\n          var fallback = fallbacks[type];\n          if (fallback) return emit(obj, fallback);\n        }\n      }\n\n      while (obj && obj !== stopItem) {\n        if (emit(obj, type)) break;\n        obj = obj._parent;\n      }\n\n      return stopped;\n    }\n\n    function emitMouseEvents(view, hitItem, type, event, point, prevPoint) {\n      view._project.removeOn(type);\n\n      prevented = called = false;\n      return dragItem && emitMouseEvent(dragItem, null, type, event, point, prevPoint) || hitItem && hitItem !== dragItem && !hitItem.isDescendant(dragItem) && emitMouseEvent(hitItem, null, type === 'mousedrag' ? 'mousemove' : type, event, point, prevPoint, dragItem) || emitMouseEvent(view, dragItem || hitItem || view, type, event, point, prevPoint);\n    }\n\n    var itemEventsMap = {\n      mousedown: {\n        mousedown: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mouseup: {\n        mouseup: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mousemove: {\n        mousedrag: 1,\n        mousemove: 1,\n        mouseenter: 1,\n        mouseleave: 1\n      }\n    };\n    return {\n      _viewEvents: viewEvents,\n      _handleMouseEvent: function _handleMouseEvent(type, event, point) {\n        var itemEvents = this._itemEvents,\n            hitItems = itemEvents[\"native\"][type],\n            nativeMove = type === 'mousemove',\n            tool = this._scope.tool,\n            view = this;\n\n        function responds(type) {\n          return itemEvents.virtual[type] || view.responds(type) || tool && tool.responds(type);\n        }\n\n        if (nativeMove && dragging && responds('mousedrag')) type = 'mousedrag';\n        if (!point) point = this.getEventPoint(event);\n\n        var inView = this.getBounds().contains(point),\n            hit = hitItems && inView && view._project.hitTest(point, {\n          tolerance: 0,\n          fill: true,\n          stroke: true\n        }),\n            hitItem = hit && hit.item || null,\n            handle = false,\n            mouse = {};\n\n        mouse[type.substr(5)] = true;\n\n        if (hitItems && hitItem !== overItem) {\n          if (overItem) {\n            emitMouseEvent(overItem, null, 'mouseleave', event, point);\n          }\n\n          if (hitItem) {\n            emitMouseEvent(hitItem, null, 'mouseenter', event, point);\n          }\n\n          overItem = hitItem;\n        }\n\n        if (wasInView ^ inView) {\n          emitMouseEvent(this, null, inView ? 'mouseenter' : 'mouseleave', event, point);\n          overView = inView ? this : null;\n          handle = true;\n        }\n\n        if ((inView || mouse.drag) && !point.equals(lastPoint)) {\n          emitMouseEvents(this, hitItem, nativeMove ? type : 'mousemove', event, point, lastPoint);\n          handle = true;\n        }\n\n        wasInView = inView;\n\n        if (mouse.down && inView || mouse.up && downPoint) {\n          emitMouseEvents(this, hitItem, type, event, point, downPoint);\n\n          if (mouse.down) {\n            dblClick = hitItem === clickItem && Date.now() - clickTime < 300;\n            downItem = clickItem = hitItem;\n\n            if (!prevented && hitItem) {\n              var item = hitItem;\n\n              while (item && !item.responds('mousedrag')) {\n                item = item._parent;\n              }\n\n              if (item) dragItem = hitItem;\n            }\n\n            downPoint = point;\n          } else if (mouse.up) {\n            if (!prevented && hitItem === downItem) {\n              clickTime = Date.now();\n              emitMouseEvents(this, hitItem, dblClick ? 'doubleclick' : 'click', event, point, downPoint);\n              dblClick = false;\n            }\n\n            downItem = dragItem = null;\n          }\n\n          wasInView = false;\n          handle = true;\n        }\n\n        lastPoint = point;\n\n        if (handle && tool) {\n          called = tool._handleMouseEvent(type, event, point, mouse) || called;\n        }\n\n        if (event.cancelable !== false && (called && !mouse.move || mouse.down && responds('mouseup'))) {\n          event.preventDefault();\n        }\n      },\n      _handleKeyEvent: function _handleKeyEvent(type, event, key, character) {\n        var scope = this._scope,\n            tool = scope.tool,\n            keyEvent;\n\n        function emit(obj) {\n          if (obj.responds(type)) {\n            paper = scope;\n            obj.emit(type, keyEvent = keyEvent || new KeyEvent(type, event, key, character));\n          }\n        }\n\n        if (this.isVisible()) {\n          emit(this);\n          if (tool && tool.responds(type)) emit(tool);\n        }\n      },\n      _countItemEvent: function _countItemEvent(type, sign) {\n        var itemEvents = this._itemEvents,\n            _native = itemEvents[\"native\"],\n            virtual = itemEvents.virtual;\n\n        for (var key in itemEventsMap) {\n          _native[key] = (_native[key] || 0) + (itemEventsMap[key][type] || 0) * sign;\n        }\n\n        virtual[type] = (virtual[type] || 0) + sign;\n      },\n      statics: {\n        updateFocus: updateFocus,\n        _resetState: function _resetState() {\n          dragging = mouseDown = called = wasInView = false;\n          prevFocus = tempFocus = overView = downPoint = lastPoint = downItem = overItem = dragItem = clickItem = clickTime = dblClick = null;\n        }\n      }\n    };\n  }());\n  var CanvasView = View.extend({\n    _class: 'CanvasView',\n    initialize: function CanvasView(project, canvas) {\n      if (!(canvas instanceof window.HTMLCanvasElement)) {\n        var size = Size.read(arguments, 1);\n        if (size.isZero()) throw new Error('Cannot create CanvasView with the provided argument: ' + Base.slice(arguments, 1));\n        canvas = CanvasProvider.getCanvas(size);\n      }\n\n      var ctx = this._context = canvas.getContext('2d');\n      ctx.save();\n      this._pixelRatio = 1;\n\n      if (!/^off|false$/.test(PaperScope.getAttribute(canvas, 'hidpi'))) {\n        var deviceRatio = window.devicePixelRatio || 1,\n            backingStoreRatio = DomElement.getPrefixed(ctx, 'backingStorePixelRatio') || 1;\n        this._pixelRatio = deviceRatio / backingStoreRatio;\n      }\n\n      View.call(this, project, canvas);\n      this._needsUpdate = true;\n    },\n    remove: function remove() {\n      this._context.restore();\n\n      return remove.base.call(this);\n    },\n    _setElementSize: function _setElementSize(width, height) {\n      var pixelRatio = this._pixelRatio;\n\n      _setElementSize.base.call(this, width * pixelRatio, height * pixelRatio);\n\n      if (pixelRatio !== 1) {\n        var element = this._element,\n            ctx = this._context;\n\n        if (!PaperScope.hasAttribute(element, 'resize')) {\n          var style = element.style;\n          style.width = width + 'px';\n          style.height = height + 'px';\n        }\n\n        ctx.restore();\n        ctx.save();\n        ctx.scale(pixelRatio, pixelRatio);\n      }\n    },\n    getContext: function getContext() {\n      return this._context;\n    },\n    getPixelSize: function getPixelSize(size) {\n      var agent = paper.agent,\n          pixels;\n\n      if (agent && agent.firefox) {\n        pixels = getPixelSize.base.call(this, size);\n      } else {\n        var ctx = this._context,\n            prevFont = ctx.font;\n        ctx.font = size + ' serif';\n        pixels = parseFloat(ctx.font);\n        ctx.font = prevFont;\n      }\n\n      return pixels;\n    },\n    getTextWidth: function getTextWidth(font, lines) {\n      var ctx = this._context,\n          prevFont = ctx.font,\n          width = 0;\n      ctx.font = font;\n\n      for (var i = 0, l = lines.length; i < l; i++) {\n        width = Math.max(width, ctx.measureText(lines[i]).width);\n      }\n\n      ctx.font = prevFont;\n      return width;\n    },\n    update: function update() {\n      if (!this._needsUpdate) return false;\n      var project = this._project,\n          ctx = this._context,\n          size = this._viewSize;\n      ctx.clearRect(0, 0, size.width + 1, size.height + 1);\n      if (project) project.draw(ctx, this._matrix, this._pixelRatio);\n      this._needsUpdate = false;\n      return true;\n    }\n  });\n  var Event = Base.extend({\n    _class: 'Event',\n    initialize: function Event(event) {\n      this.event = event;\n      this.type = event && event.type;\n    },\n    prevented: false,\n    stopped: false,\n    preventDefault: function preventDefault() {\n      this.prevented = true;\n      this.event.preventDefault();\n    },\n    stopPropagation: function stopPropagation() {\n      this.stopped = true;\n      this.event.stopPropagation();\n    },\n    stop: function stop() {\n      this.stopPropagation();\n      this.preventDefault();\n    },\n    getTimeStamp: function getTimeStamp() {\n      return this.event.timeStamp;\n    },\n    getModifiers: function getModifiers() {\n      return Key.modifiers;\n    }\n  });\n  var KeyEvent = Event.extend({\n    _class: 'KeyEvent',\n    initialize: function KeyEvent(type, event, key, character) {\n      this.type = type;\n      this.event = event;\n      this.key = key;\n      this.character = character;\n    },\n    toString: function toString() {\n      return \"{ type: '\" + this.type + \"', key: '\" + this.key + \"', character: '\" + this.character + \"', modifiers: \" + this.getModifiers() + \" }\";\n    }\n  });\n  var Key = new function () {\n    var keyLookup = {\n      '\\t': 'tab',\n      ' ': 'space',\n      '\\b': 'backspace',\n      '\\x7f': 'delete',\n      'Spacebar': 'space',\n      'Del': 'delete',\n      'Win': 'meta',\n      'Esc': 'escape'\n    },\n        charLookup = {\n      'tab': '\\t',\n      'space': ' ',\n      'enter': '\\r'\n    },\n        keyMap = {},\n        charMap = {},\n        metaFixMap,\n        downKey,\n        modifiers = new Base({\n      shift: false,\n      control: false,\n      alt: false,\n      meta: false,\n      capsLock: false,\n      space: false\n    }).inject({\n      option: {\n        get: function get() {\n          return this.alt;\n        }\n      },\n      command: {\n        get: function get() {\n          var agent = paper && paper.agent;\n          return agent && agent.mac ? this.meta : this.control;\n        }\n      }\n    });\n\n    function getKey(event) {\n      var key = event.key || event.keyIdentifier;\n      key = /^U\\+/.test(key) ? String.fromCharCode(parseInt(key.substr(2), 16)) : /^Arrow[A-Z]/.test(key) ? key.substr(5) : key === 'Unidentified' || key === undefined ? String.fromCharCode(event.keyCode) : key;\n      return keyLookup[key] || (key.length > 1 ? Base.hyphenate(key) : key.toLowerCase());\n    }\n\n    function handleKey(down, key, character, event) {\n      var type = down ? 'keydown' : 'keyup',\n          view = View._focused,\n          name;\n      keyMap[key] = down;\n\n      if (down) {\n        charMap[key] = character;\n      } else {\n        delete charMap[key];\n      }\n\n      if (key.length > 1 && (name = Base.camelize(key)) in modifiers) {\n        modifiers[name] = down;\n        var agent = paper && paper.agent;\n\n        if (name === 'meta' && agent && agent.mac) {\n          if (down) {\n            metaFixMap = {};\n          } else {\n            for (var k in metaFixMap) {\n              if (k in charMap) handleKey(false, k, metaFixMap[k], event);\n            }\n\n            metaFixMap = null;\n          }\n        }\n      } else if (down && metaFixMap) {\n        metaFixMap[key] = character;\n      }\n\n      if (view) {\n        view._handleKeyEvent(down ? 'keydown' : 'keyup', event, key, character);\n      }\n    }\n\n    DomEvent.add(document, {\n      keydown: function keydown(event) {\n        var key = getKey(event),\n            agent = paper && paper.agent;\n\n        if (key.length > 1 || agent && agent.chrome && (event.altKey || agent.mac && event.metaKey || !agent.mac && event.ctrlKey)) {\n          handleKey(true, key, charLookup[key] || (key.length > 1 ? '' : key), event);\n        } else {\n          downKey = key;\n        }\n      },\n      keypress: function keypress(event) {\n        if (downKey) {\n          var key = getKey(event),\n              code = event.charCode,\n              character = code >= 32 ? String.fromCharCode(code) : key.length > 1 ? '' : key;\n\n          if (key !== downKey) {\n            key = character.toLowerCase();\n          }\n\n          handleKey(true, key, character, event);\n          downKey = null;\n        }\n      },\n      keyup: function keyup(event) {\n        var key = getKey(event);\n        if (key in charMap) handleKey(false, key, charMap[key], event);\n      }\n    });\n    DomEvent.add(window, {\n      blur: function blur(event) {\n        for (var key in charMap) {\n          handleKey(false, key, charMap[key], event);\n        }\n      }\n    });\n    return {\n      modifiers: modifiers,\n      isDown: function isDown(key) {\n        return !!keyMap[key];\n      }\n    };\n  }();\n  var MouseEvent = Event.extend({\n    _class: 'MouseEvent',\n    initialize: function MouseEvent(type, event, point, target, delta) {\n      this.type = type;\n      this.event = event;\n      this.point = point;\n      this.target = target;\n      this.delta = delta;\n    },\n    toString: function toString() {\n      return \"{ type: '\" + this.type + \"', point: \" + this.point + ', target: ' + this.target + (this.delta ? ', delta: ' + this.delta : '') + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var ToolEvent = Event.extend({\n    _class: 'ToolEvent',\n    _item: null,\n    initialize: function ToolEvent(tool, type, event) {\n      this.tool = tool;\n      this.type = type;\n      this.event = event;\n    },\n    _choosePoint: function _choosePoint(point, toolPoint) {\n      return point ? point : toolPoint ? toolPoint.clone() : null;\n    },\n    getPoint: function getPoint() {\n      return this._choosePoint(this._point, this.tool._point);\n    },\n    setPoint: function setPoint(point) {\n      this._point = point;\n    },\n    getLastPoint: function getLastPoint() {\n      return this._choosePoint(this._lastPoint, this.tool._lastPoint);\n    },\n    setLastPoint: function setLastPoint(lastPoint) {\n      this._lastPoint = lastPoint;\n    },\n    getDownPoint: function getDownPoint() {\n      return this._choosePoint(this._downPoint, this.tool._downPoint);\n    },\n    setDownPoint: function setDownPoint(downPoint) {\n      this._downPoint = downPoint;\n    },\n    getMiddlePoint: function getMiddlePoint() {\n      if (!this._middlePoint && this.tool._lastPoint) {\n        return this.tool._point.add(this.tool._lastPoint).divide(2);\n      }\n\n      return this._middlePoint;\n    },\n    setMiddlePoint: function setMiddlePoint(middlePoint) {\n      this._middlePoint = middlePoint;\n    },\n    getDelta: function getDelta() {\n      return !this._delta && this.tool._lastPoint ? this.tool._point.subtract(this.tool._lastPoint) : this._delta;\n    },\n    setDelta: function setDelta(delta) {\n      this._delta = delta;\n    },\n    getCount: function getCount() {\n      return this.tool[/^mouse(down|up)$/.test(this.type) ? '_downCount' : '_moveCount'];\n    },\n    setCount: function setCount(count) {\n      this.tool[/^mouse(down|up)$/.test(this.type) ? 'downCount' : 'count'] = count;\n    },\n    getItem: function getItem() {\n      if (!this._item) {\n        var result = this.tool._scope.project.hitTest(this.getPoint());\n\n        if (result) {\n          var item = result.item,\n              parent = item._parent;\n\n          while (/^(Group|CompoundPath)$/.test(parent._class)) {\n            item = parent;\n            parent = parent._parent;\n          }\n\n          this._item = item;\n        }\n      }\n\n      return this._item;\n    },\n    setItem: function setItem(item) {\n      this._item = item;\n    },\n    toString: function toString() {\n      return '{ type: ' + this.type + ', point: ' + this.getPoint() + ', count: ' + this.getCount() + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var Tool = PaperScopeItem.extend({\n    _class: 'Tool',\n    _list: 'tools',\n    _reference: 'tool',\n    _events: ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onMouseMove', 'onActivate', 'onDeactivate', 'onEditOptions', 'onKeyDown', 'onKeyUp'],\n    initialize: function Tool(props) {\n      PaperScopeItem.call(this);\n      this._moveCount = -1;\n      this._downCount = -1;\n      this.set(props);\n    },\n    getMinDistance: function getMinDistance() {\n      return this._minDistance;\n    },\n    setMinDistance: function setMinDistance(minDistance) {\n      this._minDistance = minDistance;\n\n      if (minDistance != null && this._maxDistance != null && minDistance > this._maxDistance) {\n        this._maxDistance = minDistance;\n      }\n    },\n    getMaxDistance: function getMaxDistance() {\n      return this._maxDistance;\n    },\n    setMaxDistance: function setMaxDistance(maxDistance) {\n      this._maxDistance = maxDistance;\n\n      if (this._minDistance != null && maxDistance != null && maxDistance < this._minDistance) {\n        this._minDistance = maxDistance;\n      }\n    },\n    getFixedDistance: function getFixedDistance() {\n      return this._minDistance == this._maxDistance ? this._minDistance : null;\n    },\n    setFixedDistance: function setFixedDistance(distance) {\n      this._minDistance = this._maxDistance = distance;\n    },\n    _handleMouseEvent: function _handleMouseEvent(type, event, point, mouse) {\n      paper = this._scope;\n      if (mouse.drag && !this.responds(type)) type = 'mousemove';\n      var move = mouse.move || mouse.drag,\n          responds = this.responds(type),\n          minDistance = this.minDistance,\n          maxDistance = this.maxDistance,\n          called = false,\n          tool = this;\n\n      function update(minDistance, maxDistance) {\n        var pt = point,\n            toolPoint = move ? tool._point : tool._downPoint || pt;\n\n        if (move) {\n          if (tool._moveCount >= 0 && pt.equals(toolPoint)) {\n            return false;\n          }\n\n          if (toolPoint && (minDistance != null || maxDistance != null)) {\n            var vector = pt.subtract(toolPoint),\n                distance = vector.getLength();\n            if (distance < (minDistance || 0)) return false;\n\n            if (maxDistance) {\n              pt = toolPoint.add(vector.normalize(Math.min(distance, maxDistance)));\n            }\n          }\n\n          tool._moveCount++;\n        }\n\n        tool._point = pt;\n        tool._lastPoint = toolPoint || pt;\n\n        if (mouse.down) {\n          tool._moveCount = -1;\n          tool._downPoint = pt;\n          tool._downCount++;\n        }\n\n        return true;\n      }\n\n      function emit() {\n        if (responds) {\n          called = tool.emit(type, new ToolEvent(tool, type, event)) || called;\n        }\n      }\n\n      if (mouse.down) {\n        update();\n        emit();\n      } else if (mouse.up) {\n        update(null, maxDistance);\n        emit();\n      } else if (responds) {\n        while (update(minDistance, maxDistance)) {\n          emit();\n        }\n      }\n\n      return called;\n    }\n  });\n  var Tween = Base.extend(Emitter, {\n    _class: 'Tween',\n    statics: {\n      easings: {\n        linear: function linear(t) {\n          return t;\n        },\n        easeInQuad: function easeInQuad(t) {\n          return t * t;\n        },\n        easeOutQuad: function easeOutQuad(t) {\n          return t * (2 - t);\n        },\n        easeInOutQuad: function easeInOutQuad(t) {\n          return t < 0.5 ? 2 * t * t : -1 + 2 * (2 - t) * t;\n        },\n        easeInCubic: function easeInCubic(t) {\n          return t * t * t;\n        },\n        easeOutCubic: function easeOutCubic(t) {\n          return --t * t * t + 1;\n        },\n        easeInOutCubic: function easeInOutCubic(t) {\n          return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n        },\n        easeInQuart: function easeInQuart(t) {\n          return t * t * t * t;\n        },\n        easeOutQuart: function easeOutQuart(t) {\n          return 1 - --t * t * t * t;\n        },\n        easeInOutQuart: function easeInOutQuart(t) {\n          return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n        },\n        easeInQuint: function easeInQuint(t) {\n          return t * t * t * t * t;\n        },\n        easeOutQuint: function easeOutQuint(t) {\n          return 1 + --t * t * t * t * t;\n        },\n        easeInOutQuint: function easeInOutQuint(t) {\n          return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n        }\n      }\n    },\n    initialize: function Tween(object, from, to, duration, easing, start) {\n      this.object = object;\n      var type = typeof easing;\n      var isFunction = type === 'function';\n      this.type = isFunction ? type : type === 'string' ? easing : 'linear';\n      this.easing = isFunction ? easing : Tween.easings[this.type];\n      this.duration = duration;\n      this.running = false;\n      this._then = null;\n      this._startTime = null;\n      var state = from || to;\n      this._keys = state ? Object.keys(state) : [];\n      this._parsedKeys = this._parseKeys(this._keys);\n      this._from = state && this._getState(from);\n      this._to = state && this._getState(to);\n\n      if (start !== false) {\n        this.start();\n      }\n    },\n    then: function then(_then) {\n      this._then = _then;\n      return this;\n    },\n    start: function start() {\n      this._startTime = null;\n      this.running = true;\n      return this;\n    },\n    stop: function stop() {\n      this.running = false;\n      return this;\n    },\n    update: function update(progress) {\n      if (this.running) {\n        if (progress > 1) {\n          progress = 1;\n          this.running = false;\n        }\n\n        var factor = this.easing(progress),\n            keys = this._keys,\n            getValue = function getValue(value) {\n          return typeof value === 'function' ? value(factor, progress) : value;\n        };\n\n        for (var i = 0, l = keys && keys.length; i < l; i++) {\n          var key = keys[i],\n              from = getValue(this._from[key]),\n              to = getValue(this._to[key]),\n              value = from && to && from.__add && to.__add ? to.__subtract(from).__multiply(factor).__add(from) : (to - from) * factor + from;\n\n          this._setProperty(this._parsedKeys[key], value);\n        }\n\n        if (!this.running && this._then) {\n          this._then(this.object);\n        }\n\n        if (this.responds('update')) {\n          this.emit('update', new Base({\n            progress: progress,\n            factor: factor\n          }));\n        }\n      }\n\n      return this;\n    },\n    _events: {\n      onUpdate: {}\n    },\n    _handleFrame: function _handleFrame(time) {\n      var startTime = this._startTime,\n          progress = startTime ? (time - startTime) / this.duration : 0;\n\n      if (!startTime) {\n        this._startTime = time;\n      }\n\n      this.update(progress);\n    },\n    _getState: function _getState(state) {\n      var keys = this._keys,\n          result = {};\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n            path = this._parsedKeys[key],\n            current = this._getProperty(path),\n            value;\n\n        if (state) {\n          var resolved = this._resolveValue(current, state[key]);\n\n          this._setProperty(path, resolved);\n\n          value = this._getProperty(path);\n          value = value && value.clone ? value.clone() : value;\n\n          this._setProperty(path, current);\n        } else {\n          value = current && current.clone ? current.clone() : current;\n        }\n\n        result[key] = value;\n      }\n\n      return result;\n    },\n    _resolveValue: function _resolveValue(current, value) {\n      if (value) {\n        if (Array.isArray(value) && value.length === 2) {\n          var operator = value[0];\n          return operator && operator.match && operator.match(/^[+\\-\\*\\/]=/) ? this._calculate(current, operator[0], value[1]) : value;\n        } else if (typeof value === 'string') {\n          var match = value.match(/^[+\\-*/]=(.*)/);\n\n          if (match) {\n            var parsed = JSON.parse(match[1].replace(/(['\"])?([a-zA-Z0-9_]+)(['\"])?:/g, '\"$2\": '));\n            return this._calculate(current, value[0], parsed);\n          }\n        }\n      }\n\n      return value;\n    },\n    _calculate: function _calculate(left, operator, right) {\n      return paper.PaperScript.calculateBinary(left, operator, right);\n    },\n    _parseKeys: function _parseKeys(keys) {\n      var parsed = {};\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n            path = key.replace(/\\.([^.]*)/g, '/$1').replace(/\\[['\"]?([^'\"\\]]*)['\"]?\\]/g, '/$1');\n        parsed[key] = path.split('/');\n      }\n\n      return parsed;\n    },\n    _getProperty: function _getProperty(path, offset) {\n      var obj = this.object;\n\n      for (var i = 0, l = path.length - (offset || 0); i < l && obj; i++) {\n        obj = obj[path[i]];\n      }\n\n      return obj;\n    },\n    _setProperty: function _setProperty(path, value) {\n      var dest = this._getProperty(path, 1);\n\n      if (dest) {\n        dest[path[path.length - 1]] = value;\n      }\n    }\n  });\n  var Http = {\n    request: function request(options) {\n      var xhr = new self.XMLHttpRequest();\n      xhr.open((options.method || 'get').toUpperCase(), options.url, Base.pick(options.async, true));\n      if (options.mimeType) xhr.overrideMimeType(options.mimeType);\n\n      xhr.onload = function () {\n        var status = xhr.status;\n\n        if (status === 0 || status === 200) {\n          if (options.onLoad) {\n            options.onLoad.call(xhr, xhr.responseText);\n          }\n        } else {\n          xhr.onerror();\n        }\n      };\n\n      xhr.onerror = function () {\n        var status = xhr.status,\n            message = 'Could not load \"' + options.url + '\" (Status: ' + status + ')';\n\n        if (options.onError) {\n          options.onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      };\n\n      return xhr.send(null);\n    }\n  };\n  var CanvasProvider = {\n    canvases: [],\n    getCanvas: function getCanvas(width, height) {\n      if (!window) return null;\n      var canvas,\n          clear = true;\n\n      if (typeof width === 'object') {\n        height = width.height;\n        width = width.width;\n      }\n\n      if (this.canvases.length) {\n        canvas = this.canvases.pop();\n      } else {\n        canvas = document.createElement('canvas');\n        clear = false;\n      }\n\n      var ctx = canvas.getContext('2d');\n\n      if (!ctx) {\n        throw new Error('Canvas ' + canvas + ' is unable to provide a 2D context.');\n      }\n\n      if (canvas.width === width && canvas.height === height) {\n        if (clear) ctx.clearRect(0, 0, width + 1, height + 1);\n      } else {\n        canvas.width = width;\n        canvas.height = height;\n      }\n\n      ctx.save();\n      return canvas;\n    },\n    getContext: function getContext(width, height) {\n      var canvas = this.getCanvas(width, height);\n      return canvas ? canvas.getContext('2d') : null;\n    },\n    release: function release(obj) {\n      var canvas = obj && obj.canvas ? obj.canvas : obj;\n\n      if (canvas && canvas.getContext) {\n        canvas.getContext('2d').restore();\n        this.canvases.push(canvas);\n      }\n    }\n  };\n  var BlendMode = new function () {\n    var min = Math.min,\n        max = Math.max,\n        abs = Math.abs,\n        sr,\n        sg,\n        sb,\n        sa,\n        br,\n        bg,\n        bb,\n        ba,\n        dr,\n        dg,\n        db;\n\n    function getLum(r, g, b) {\n      return 0.2989 * r + 0.587 * g + 0.114 * b;\n    }\n\n    function setLum(r, g, b, l) {\n      var d = l - getLum(r, g, b);\n      dr = r + d;\n      dg = g + d;\n      db = b + d;\n      var l = getLum(dr, dg, db),\n          mn = min(dr, dg, db),\n          mx = max(dr, dg, db);\n\n      if (mn < 0) {\n        var lmn = l - mn;\n        dr = l + (dr - l) * l / lmn;\n        dg = l + (dg - l) * l / lmn;\n        db = l + (db - l) * l / lmn;\n      }\n\n      if (mx > 255) {\n        var ln = 255 - l,\n            mxl = mx - l;\n        dr = l + (dr - l) * ln / mxl;\n        dg = l + (dg - l) * ln / mxl;\n        db = l + (db - l) * ln / mxl;\n      }\n    }\n\n    function getSat(r, g, b) {\n      return max(r, g, b) - min(r, g, b);\n    }\n\n    function setSat(r, g, b, s) {\n      var col = [r, g, b],\n          mx = max(r, g, b),\n          mn = min(r, g, b),\n          md;\n      mn = mn === r ? 0 : mn === g ? 1 : 2;\n      mx = mx === r ? 0 : mx === g ? 1 : 2;\n      md = min(mn, mx) === 0 ? max(mn, mx) === 1 ? 2 : 1 : 0;\n\n      if (col[mx] > col[mn]) {\n        col[md] = (col[md] - col[mn]) * s / (col[mx] - col[mn]);\n        col[mx] = s;\n      } else {\n        col[md] = col[mx] = 0;\n      }\n\n      col[mn] = 0;\n      dr = col[0];\n      dg = col[1];\n      db = col[2];\n    }\n\n    var modes = {\n      multiply: function multiply() {\n        dr = br * sr / 255;\n        dg = bg * sg / 255;\n        db = bb * sb / 255;\n      },\n      screen: function screen() {\n        dr = br + sr - br * sr / 255;\n        dg = bg + sg - bg * sg / 255;\n        db = bb + sb - bb * sb / 255;\n      },\n      overlay: function overlay() {\n        dr = br < 128 ? 2 * br * sr / 255 : 255 - 2 * (255 - br) * (255 - sr) / 255;\n        dg = bg < 128 ? 2 * bg * sg / 255 : 255 - 2 * (255 - bg) * (255 - sg) / 255;\n        db = bb < 128 ? 2 * bb * sb / 255 : 255 - 2 * (255 - bb) * (255 - sb) / 255;\n      },\n      'soft-light': function softLight() {\n        var t = sr * br / 255;\n        dr = t + br * (255 - (255 - br) * (255 - sr) / 255 - t) / 255;\n        t = sg * bg / 255;\n        dg = t + bg * (255 - (255 - bg) * (255 - sg) / 255 - t) / 255;\n        t = sb * bb / 255;\n        db = t + bb * (255 - (255 - bb) * (255 - sb) / 255 - t) / 255;\n      },\n      'hard-light': function hardLight() {\n        dr = sr < 128 ? 2 * sr * br / 255 : 255 - 2 * (255 - sr) * (255 - br) / 255;\n        dg = sg < 128 ? 2 * sg * bg / 255 : 255 - 2 * (255 - sg) * (255 - bg) / 255;\n        db = sb < 128 ? 2 * sb * bb / 255 : 255 - 2 * (255 - sb) * (255 - bb) / 255;\n      },\n      'color-dodge': function colorDodge() {\n        dr = br === 0 ? 0 : sr === 255 ? 255 : min(255, 255 * br / (255 - sr));\n        dg = bg === 0 ? 0 : sg === 255 ? 255 : min(255, 255 * bg / (255 - sg));\n        db = bb === 0 ? 0 : sb === 255 ? 255 : min(255, 255 * bb / (255 - sb));\n      },\n      'color-burn': function colorBurn() {\n        dr = br === 255 ? 255 : sr === 0 ? 0 : max(0, 255 - (255 - br) * 255 / sr);\n        dg = bg === 255 ? 255 : sg === 0 ? 0 : max(0, 255 - (255 - bg) * 255 / sg);\n        db = bb === 255 ? 255 : sb === 0 ? 0 : max(0, 255 - (255 - bb) * 255 / sb);\n      },\n      darken: function darken() {\n        dr = br < sr ? br : sr;\n        dg = bg < sg ? bg : sg;\n        db = bb < sb ? bb : sb;\n      },\n      lighten: function lighten() {\n        dr = br > sr ? br : sr;\n        dg = bg > sg ? bg : sg;\n        db = bb > sb ? bb : sb;\n      },\n      difference: function difference() {\n        dr = br - sr;\n        if (dr < 0) dr = -dr;\n        dg = bg - sg;\n        if (dg < 0) dg = -dg;\n        db = bb - sb;\n        if (db < 0) db = -db;\n      },\n      exclusion: function exclusion() {\n        dr = br + sr * (255 - br - br) / 255;\n        dg = bg + sg * (255 - bg - bg) / 255;\n        db = bb + sb * (255 - bb - bb) / 255;\n      },\n      hue: function hue() {\n        setSat(sr, sg, sb, getSat(br, bg, bb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      saturation: function saturation() {\n        setSat(br, bg, bb, getSat(sr, sg, sb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      luminosity: function luminosity() {\n        setLum(br, bg, bb, getLum(sr, sg, sb));\n      },\n      color: function color() {\n        setLum(sr, sg, sb, getLum(br, bg, bb));\n      },\n      add: function add() {\n        dr = min(br + sr, 255);\n        dg = min(bg + sg, 255);\n        db = min(bb + sb, 255);\n      },\n      subtract: function subtract() {\n        dr = max(br - sr, 0);\n        dg = max(bg - sg, 0);\n        db = max(bb - sb, 0);\n      },\n      average: function average() {\n        dr = (br + sr) / 2;\n        dg = (bg + sg) / 2;\n        db = (bb + sb) / 2;\n      },\n      negation: function negation() {\n        dr = 255 - abs(255 - sr - br);\n        dg = 255 - abs(255 - sg - bg);\n        db = 255 - abs(255 - sb - bb);\n      }\n    };\n    var nativeModes = this.nativeModes = Base.each(['source-over', 'source-in', 'source-out', 'source-atop', 'destination-over', 'destination-in', 'destination-out', 'destination-atop', 'lighter', 'darker', 'copy', 'xor'], function (mode) {\n      this[mode] = true;\n    }, {});\n    var ctx = CanvasProvider.getContext(1, 1);\n\n    if (ctx) {\n      Base.each(modes, function (func, mode) {\n        var darken = mode === 'darken',\n            ok = false;\n        ctx.save();\n\n        try {\n          ctx.fillStyle = darken ? '#300' : '#a00';\n          ctx.fillRect(0, 0, 1, 1);\n          ctx.globalCompositeOperation = mode;\n\n          if (ctx.globalCompositeOperation === mode) {\n            ctx.fillStyle = darken ? '#a00' : '#300';\n            ctx.fillRect(0, 0, 1, 1);\n            ok = ctx.getImageData(0, 0, 1, 1).data[0] !== darken ? 170 : 51;\n          }\n        } catch (e) {}\n\n        ctx.restore();\n        nativeModes[mode] = ok;\n      });\n      CanvasProvider.release(ctx);\n    }\n\n    this.process = function (mode, srcContext, dstContext, alpha, offset) {\n      var srcCanvas = srcContext.canvas,\n          normal = mode === 'normal';\n\n      if (normal || nativeModes[mode]) {\n        dstContext.save();\n        dstContext.setTransform(1, 0, 0, 1, 0, 0);\n        dstContext.globalAlpha = alpha;\n        if (!normal) dstContext.globalCompositeOperation = mode;\n        dstContext.drawImage(srcCanvas, offset.x, offset.y);\n        dstContext.restore();\n      } else {\n        var process = modes[mode];\n        if (!process) return;\n        var dstData = dstContext.getImageData(offset.x, offset.y, srcCanvas.width, srcCanvas.height),\n            dst = dstData.data,\n            src = srcContext.getImageData(0, 0, srcCanvas.width, srcCanvas.height).data;\n\n        for (var i = 0, l = dst.length; i < l; i += 4) {\n          sr = src[i];\n          br = dst[i];\n          sg = src[i + 1];\n          bg = dst[i + 1];\n          sb = src[i + 2];\n          bb = dst[i + 2];\n          sa = src[i + 3];\n          ba = dst[i + 3];\n          process();\n          var a1 = sa * alpha / 255,\n              a2 = 1 - a1;\n          dst[i] = a1 * dr + a2 * br;\n          dst[i + 1] = a1 * dg + a2 * bg;\n          dst[i + 2] = a1 * db + a2 * bb;\n          dst[i + 3] = sa * alpha + a2 * ba;\n        }\n\n        dstContext.putImageData(dstData, offset.x, offset.y);\n      }\n    };\n  }();\n  var SvgElement = new function () {\n    var svg = 'http://www.w3.org/2000/svg',\n        xmlns = 'http://www.w3.org/2000/xmlns',\n        xlink = 'http://www.w3.org/1999/xlink',\n        attributeNamespace = {\n      href: xlink,\n      xlink: xmlns,\n      xmlns: xmlns + '/',\n      'xmlns:xlink': xmlns + '/'\n    };\n\n    function create(tag, attributes, formatter) {\n      return set(document.createElementNS(svg, tag), attributes, formatter);\n    }\n\n    function get(node, name) {\n      var namespace = attributeNamespace[name],\n          value = namespace ? node.getAttributeNS(namespace, name) : node.getAttribute(name);\n      return value === 'null' ? null : value;\n    }\n\n    function set(node, attributes, formatter) {\n      for (var name in attributes) {\n        var value = attributes[name],\n            namespace = attributeNamespace[name];\n        if (typeof value === 'number' && formatter) value = formatter.number(value);\n\n        if (namespace) {\n          node.setAttributeNS(namespace, name, value);\n        } else {\n          node.setAttribute(name, value);\n        }\n      }\n\n      return node;\n    }\n\n    return {\n      svg: svg,\n      xmlns: xmlns,\n      xlink: xlink,\n      create: create,\n      get: get,\n      set: set\n    };\n  }();\n  var SvgStyles = Base.each({\n    fillColor: ['fill', 'color'],\n    fillRule: ['fill-rule', 'string'],\n    strokeColor: ['stroke', 'color'],\n    strokeWidth: ['stroke-width', 'number'],\n    strokeCap: ['stroke-linecap', 'string'],\n    strokeJoin: ['stroke-linejoin', 'string'],\n    strokeScaling: ['vector-effect', 'lookup', {\n      \"true\": 'none',\n      \"false\": 'non-scaling-stroke'\n    }, function (item, value) {\n      return !value && (item instanceof PathItem || item instanceof Shape || item instanceof TextItem);\n    }],\n    miterLimit: ['stroke-miterlimit', 'number'],\n    dashArray: ['stroke-dasharray', 'array'],\n    dashOffset: ['stroke-dashoffset', 'number'],\n    fontFamily: ['font-family', 'string'],\n    fontWeight: ['font-weight', 'string'],\n    fontSize: ['font-size', 'number'],\n    justification: ['text-anchor', 'lookup', {\n      left: 'start',\n      center: 'middle',\n      right: 'end'\n    }],\n    opacity: ['opacity', 'number'],\n    blendMode: ['mix-blend-mode', 'style']\n  }, function (entry, key) {\n    var part = Base.capitalize(key),\n        lookup = entry[2];\n    this[key] = {\n      type: entry[1],\n      property: key,\n      attribute: entry[0],\n      toSVG: lookup,\n      fromSVG: lookup && Base.each(lookup, function (value, name) {\n        this[value] = name;\n      }, {}),\n      exportFilter: entry[3],\n      get: 'get' + part,\n      set: 'set' + part\n    };\n  }, {});\n  new function () {\n    var formatter;\n\n    function getTransform(matrix, coordinates, center) {\n      var attrs = new Base(),\n          trans = matrix.getTranslation();\n\n      if (coordinates) {\n        var point;\n\n        if (matrix.isInvertible()) {\n          matrix = matrix._shiftless();\n          point = matrix._inverseTransform(trans);\n          trans = null;\n        } else {\n          point = new Point();\n        }\n\n        attrs[center ? 'cx' : 'x'] = point.x;\n        attrs[center ? 'cy' : 'y'] = point.y;\n      }\n\n      if (!matrix.isIdentity()) {\n        var decomposed = matrix.decompose();\n\n        if (decomposed) {\n          var parts = [],\n              angle = decomposed.rotation,\n              scale = decomposed.scaling,\n              skew = decomposed.skewing;\n          if (trans && !trans.isZero()) parts.push('translate(' + formatter.point(trans) + ')');\n          if (angle) parts.push('rotate(' + formatter.number(angle) + ')');\n          if (!Numerical.isZero(scale.x - 1) || !Numerical.isZero(scale.y - 1)) parts.push('scale(' + formatter.point(scale) + ')');\n          if (skew.x) parts.push('skewX(' + formatter.number(skew.x) + ')');\n          if (skew.y) parts.push('skewY(' + formatter.number(skew.y) + ')');\n          attrs.transform = parts.join(' ');\n        } else {\n          attrs.transform = 'matrix(' + matrix.getValues().join(',') + ')';\n        }\n      }\n\n      return attrs;\n    }\n\n    function exportGroup(item, options) {\n      var attrs = getTransform(item._matrix),\n          children = item._children;\n      var node = SvgElement.create('g', attrs, formatter);\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i];\n\n        var childNode = _exportSVG(child, options);\n\n        if (childNode) {\n          if (child.isClipMask()) {\n            var clip = SvgElement.create('clipPath');\n            clip.appendChild(childNode);\n            setDefinition(child, clip, 'clip');\n            SvgElement.set(node, {\n              'clip-path': 'url(#' + clip.id + ')'\n            });\n          } else {\n            node.appendChild(childNode);\n          }\n        }\n      }\n\n      return node;\n    }\n\n    function exportRaster(item, options) {\n      var attrs = getTransform(item._matrix, true),\n          size = item.getSize(),\n          image = item.getImage();\n      attrs.x -= size.width / 2;\n      attrs.y -= size.height / 2;\n      attrs.width = size.width;\n      attrs.height = size.height;\n      attrs.href = options.embedImages == false && image && image.src || item.toDataURL();\n      return SvgElement.create('image', attrs, formatter);\n    }\n\n    function exportPath(item, options) {\n      var matchShapes = options.matchShapes;\n\n      if (matchShapes) {\n        var shape = item.toShape(false);\n        if (shape) return exportShape(shape, options);\n      }\n\n      var segments = item._segments,\n          length = segments.length,\n          type,\n          attrs = getTransform(item._matrix);\n\n      if (matchShapes && length >= 2 && !item.hasHandles()) {\n        if (length > 2) {\n          type = item._closed ? 'polygon' : 'polyline';\n          var parts = [];\n\n          for (var i = 0; i < length; i++) {\n            parts.push(formatter.point(segments[i]._point));\n          }\n\n          attrs.points = parts.join(' ');\n        } else {\n          type = 'line';\n          var start = segments[0]._point,\n              end = segments[1]._point;\n          attrs.set({\n            x1: start.x,\n            y1: start.y,\n            x2: end.x,\n            y2: end.y\n          });\n        }\n      } else {\n        type = 'path';\n        attrs.d = item.getPathData(null, options.precision);\n      }\n\n      return SvgElement.create(type, attrs, formatter);\n    }\n\n    function exportShape(item) {\n      var type = item._type,\n          radius = item._radius,\n          attrs = getTransform(item._matrix, true, type !== 'rectangle');\n\n      if (type === 'rectangle') {\n        type = 'rect';\n        var size = item._size,\n            width = size.width,\n            height = size.height;\n        attrs.x -= width / 2;\n        attrs.y -= height / 2;\n        attrs.width = width;\n        attrs.height = height;\n        if (radius.isZero()) radius = null;\n      }\n\n      if (radius) {\n        if (type === 'circle') {\n          attrs.r = radius;\n        } else {\n          attrs.rx = radius.width;\n          attrs.ry = radius.height;\n        }\n      }\n\n      return SvgElement.create(type, attrs, formatter);\n    }\n\n    function exportCompoundPath(item, options) {\n      var attrs = getTransform(item._matrix);\n      var data = item.getPathData(null, options.precision);\n      if (data) attrs.d = data;\n      return SvgElement.create('path', attrs, formatter);\n    }\n\n    function exportSymbolItem(item, options) {\n      var attrs = getTransform(item._matrix, true),\n          definition = item._definition,\n          node = getDefinition(definition, 'symbol'),\n          definitionItem = definition._item,\n          bounds = definitionItem.getStrokeBounds();\n\n      if (!node) {\n        node = SvgElement.create('symbol', {\n          viewBox: formatter.rectangle(bounds)\n        });\n        node.appendChild(_exportSVG(definitionItem, options));\n        setDefinition(definition, node, 'symbol');\n      }\n\n      attrs.href = '#' + node.id;\n      attrs.x += bounds.x;\n      attrs.y += bounds.y;\n      attrs.width = bounds.width;\n      attrs.height = bounds.height;\n      attrs.overflow = 'visible';\n      return SvgElement.create('use', attrs, formatter);\n    }\n\n    function exportGradient(color) {\n      var gradientNode = getDefinition(color, 'color');\n\n      if (!gradientNode) {\n        var gradient = color.getGradient(),\n            radial = gradient._radial,\n            origin = color.getOrigin(),\n            destination = color.getDestination(),\n            attrs;\n\n        if (radial) {\n          attrs = {\n            cx: origin.x,\n            cy: origin.y,\n            r: origin.getDistance(destination)\n          };\n          var highlight = color.getHighlight();\n\n          if (highlight) {\n            attrs.fx = highlight.x;\n            attrs.fy = highlight.y;\n          }\n        } else {\n          attrs = {\n            x1: origin.x,\n            y1: origin.y,\n            x2: destination.x,\n            y2: destination.y\n          };\n        }\n\n        attrs.gradientUnits = 'userSpaceOnUse';\n        gradientNode = SvgElement.create((radial ? 'radial' : 'linear') + 'Gradient', attrs, formatter);\n        var stops = gradient._stops;\n\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n              stopColor = stop._color,\n              alpha = stopColor.getAlpha(),\n              offset = stop._offset;\n          attrs = {\n            offset: offset == null ? i / (l - 1) : offset\n          };\n          if (stopColor) attrs['stop-color'] = stopColor.toCSS(true);\n          if (alpha < 1) attrs['stop-opacity'] = alpha;\n          gradientNode.appendChild(SvgElement.create('stop', attrs, formatter));\n        }\n\n        setDefinition(color, gradientNode, 'color');\n      }\n\n      return 'url(#' + gradientNode.id + ')';\n    }\n\n    function exportText(item) {\n      var node = SvgElement.create('text', getTransform(item._matrix, true), formatter);\n      node.textContent = item._content;\n      return node;\n    }\n\n    var exporters = {\n      Group: exportGroup,\n      Layer: exportGroup,\n      Raster: exportRaster,\n      Path: exportPath,\n      Shape: exportShape,\n      CompoundPath: exportCompoundPath,\n      SymbolItem: exportSymbolItem,\n      PointText: exportText\n    };\n\n    function applyStyle(item, node, isRoot) {\n      var attrs = {},\n          parent = !isRoot && item.getParent(),\n          style = [];\n      if (item._name != null) attrs.id = item._name;\n      Base.each(SvgStyles, function (entry) {\n        var get = entry.get,\n            type = entry.type,\n            value = item[get]();\n\n        if (entry.exportFilter ? entry.exportFilter(item, value) : !parent || !Base.equals(parent[get](), value)) {\n          if (type === 'color' && value != null) {\n            var alpha = value.getAlpha();\n            if (alpha < 1) attrs[entry.attribute + '-opacity'] = alpha;\n          }\n\n          if (type === 'style') {\n            style.push(entry.attribute + ': ' + value);\n          } else {\n            attrs[entry.attribute] = value == null ? 'none' : type === 'color' ? value.gradient ? exportGradient(value, item) : value.toCSS(true) : type === 'array' ? value.join(',') : type === 'lookup' ? entry.toSVG[value] : value;\n          }\n        }\n      });\n      if (style.length) attrs.style = style.join(';');\n      if (attrs.opacity === 1) delete attrs.opacity;\n      if (!item._visible) attrs.visibility = 'hidden';\n      return SvgElement.set(node, attrs, formatter);\n    }\n\n    var definitions;\n\n    function getDefinition(item, type) {\n      if (!definitions) definitions = {\n        ids: {},\n        svgs: {}\n      };\n      return item && definitions.svgs[type + '-' + (item._id || item.__id || (item.__id = UID.get('svg')))];\n    }\n\n    function setDefinition(item, node, type) {\n      if (!definitions) getDefinition();\n      var typeId = definitions.ids[type] = (definitions.ids[type] || 0) + 1;\n      node.id = type + '-' + typeId;\n      definitions.svgs[type + '-' + (item._id || item.__id)] = node;\n    }\n\n    function exportDefinitions(node, options) {\n      var svg = node,\n          defs = null;\n\n      if (definitions) {\n        svg = node.nodeName.toLowerCase() === 'svg' && node;\n\n        for (var i in definitions.svgs) {\n          if (!defs) {\n            if (!svg) {\n              svg = SvgElement.create('svg');\n              svg.appendChild(node);\n            }\n\n            defs = svg.insertBefore(SvgElement.create('defs'), svg.firstChild);\n          }\n\n          defs.appendChild(definitions.svgs[i]);\n        }\n\n        definitions = null;\n      }\n\n      return options.asString ? new self.XMLSerializer().serializeToString(svg) : svg;\n    }\n\n    function _exportSVG(item, options, isRoot) {\n      var exporter = exporters[item._class],\n          node = exporter && exporter(item, options);\n\n      if (node) {\n        var onExport = options.onExport;\n        if (onExport) node = onExport(item, node, options) || node;\n        var data = JSON.stringify(item._data);\n        if (data && data !== '{}' && data !== 'null') node.setAttribute('data-paper-data', data);\n      }\n\n      return node && applyStyle(item, node, isRoot);\n    }\n\n    function setOptions(options) {\n      if (!options) options = {};\n      formatter = new Formatter(options.precision);\n      return options;\n    }\n\n    Item.inject({\n      exportSVG: function exportSVG(options) {\n        options = setOptions(options);\n        return exportDefinitions(_exportSVG(this, options, true), options);\n      }\n    });\n    Project.inject({\n      exportSVG: function exportSVG(options) {\n        options = setOptions(options);\n        var children = this._children,\n            view = this.getView(),\n            bounds = Base.pick(options.bounds, 'view'),\n            mx = options.matrix || bounds === 'view' && view._matrix,\n            matrix = mx && Matrix.read([mx]),\n            rect = bounds === 'view' ? new _Rectangle([0, 0], view.getViewSize()) : bounds === 'content' ? Item._getBounds(children, matrix, {\n          stroke: true\n        }).rect : _Rectangle.read([bounds], 0, {\n          readNull: true\n        }),\n            attrs = {\n          version: '1.1',\n          xmlns: SvgElement.svg,\n          'xmlns:xlink': SvgElement.xlink\n        };\n\n        if (rect) {\n          attrs.width = rect.width;\n          attrs.height = rect.height;\n          if (rect.x || rect.x === 0 || rect.y || rect.y === 0) attrs.viewBox = formatter.rectangle(rect);\n        }\n\n        var node = SvgElement.create('svg', attrs, formatter),\n            parent = node;\n\n        if (matrix && !matrix.isIdentity()) {\n          parent = node.appendChild(SvgElement.create('g', getTransform(matrix), formatter));\n        }\n\n        for (var i = 0, l = children.length; i < l; i++) {\n          parent.appendChild(_exportSVG(children[i], options, true));\n        }\n\n        return exportDefinitions(node, options);\n      }\n    });\n  }();\n  new function () {\n    var definitions = {},\n        rootSize;\n\n    function getValue(node, name, isString, allowNull, allowPercent, defaultValue) {\n      var value = SvgElement.get(node, name) || defaultValue,\n          res = value == null ? allowNull ? null : isString ? '' : 0 : isString ? value : parseFloat(value);\n      return /%\\s*$/.test(value) ? res / 100 * (allowPercent ? 1 : rootSize[/x|^width/.test(name) ? 'width' : 'height']) : res;\n    }\n\n    function getPoint(node, x, y, allowNull, allowPercent, defaultX, defaultY) {\n      x = getValue(node, x || 'x', false, allowNull, allowPercent, defaultX);\n      y = getValue(node, y || 'y', false, allowNull, allowPercent, defaultY);\n      return allowNull && (x == null || y == null) ? null : new Point(x, y);\n    }\n\n    function getSize(node, w, h, allowNull, allowPercent) {\n      w = getValue(node, w || 'width', false, allowNull, allowPercent);\n      h = getValue(node, h || 'height', false, allowNull, allowPercent);\n      return allowNull && (w == null || h == null) ? null : new Size(w, h);\n    }\n\n    function convertValue(value, type, lookup) {\n      return value === 'none' ? null : type === 'number' ? parseFloat(value) : type === 'array' ? value ? value.split(/[\\s,]+/g).map(parseFloat) : [] : type === 'color' ? getDefinition(value) || value : type === 'lookup' ? lookup[value] : value;\n    }\n\n    function importGroup(node, type, options, isRoot) {\n      var nodes = node.childNodes,\n          isClip = type === 'clippath',\n          isDefs = type === 'defs',\n          item = new Group(),\n          project = item._project,\n          currentStyle = project._currentStyle,\n          children = [];\n\n      if (!isClip && !isDefs) {\n        item = applyAttributes(item, node, isRoot);\n        project._currentStyle = item._style.clone();\n      }\n\n      if (isRoot) {\n        var defs = node.querySelectorAll('defs');\n\n        for (var i = 0, l = defs.length; i < l; i++) {\n          importNode(defs[i], options, false);\n        }\n      }\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        var childNode = nodes[i],\n            child;\n        if (childNode.nodeType === 1 && !/^defs$/i.test(childNode.nodeName) && (child = importNode(childNode, options, false)) && !(child instanceof SymbolDefinition)) children.push(child);\n      }\n\n      item.addChildren(children);\n      if (isClip) item = applyAttributes(item.reduce(), node, isRoot);\n      project._currentStyle = currentStyle;\n\n      if (isClip || isDefs) {\n        item.remove();\n        item = null;\n      }\n\n      return item;\n    }\n\n    function importPoly(node, type) {\n      var coords = node.getAttribute('points').match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g),\n          points = [];\n\n      for (var i = 0, l = coords.length; i < l; i += 2) {\n        points.push(new Point(parseFloat(coords[i]), parseFloat(coords[i + 1])));\n      }\n\n      var path = new Path(points);\n      if (type === 'polygon') path.closePath();\n      return path;\n    }\n\n    function importPath(node) {\n      return PathItem.create(node.getAttribute('d'));\n    }\n\n    function importGradient(node, type) {\n      var id = (getValue(node, 'href', true) || '').substring(1),\n          radial = type === 'radialgradient',\n          gradient;\n\n      if (id) {\n        gradient = definitions[id].getGradient();\n\n        if (gradient._radial ^ radial) {\n          gradient = gradient.clone();\n          gradient._radial = radial;\n        }\n      } else {\n        var nodes = node.childNodes,\n            stops = [];\n\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) stops.push(applyAttributes(new GradientStop(), child));\n        }\n\n        gradient = new Gradient(stops, radial);\n      }\n\n      var origin,\n          destination,\n          highlight,\n          scaleToBounds = getValue(node, 'gradientUnits', true) !== 'userSpaceOnUse';\n\n      if (radial) {\n        origin = getPoint(node, 'cx', 'cy', false, scaleToBounds, '50%', '50%');\n        destination = origin.add(getValue(node, 'r', false, false, scaleToBounds, '50%'), 0);\n        highlight = getPoint(node, 'fx', 'fy', true, scaleToBounds);\n      } else {\n        origin = getPoint(node, 'x1', 'y1', false, scaleToBounds, '0%', '0%');\n        destination = getPoint(node, 'x2', 'y2', false, scaleToBounds, '100%', '0%');\n      }\n\n      var color = applyAttributes(new Color(gradient, origin, destination, highlight), node);\n      color._scaleToBounds = scaleToBounds;\n      return null;\n    }\n\n    var importers = {\n      '#document': function document(node, type, options, isRoot) {\n        var nodes = node.childNodes;\n\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) return importNode(child, options, isRoot);\n        }\n      },\n      g: importGroup,\n      svg: importGroup,\n      clippath: importGroup,\n      polygon: importPoly,\n      polyline: importPoly,\n      path: importPath,\n      lineargradient: importGradient,\n      radialgradient: importGradient,\n      image: function image(node) {\n        var raster = new Raster(getValue(node, 'href', true));\n        raster.on('load', function () {\n          var size = getSize(node);\n          this.setSize(size);\n          var center = getPoint(node).add(size.divide(2));\n\n          this._matrix.append(new Matrix().translate(center));\n        });\n        return raster;\n      },\n      symbol: function symbol(node, type, options, isRoot) {\n        return new SymbolDefinition(importGroup(node, type, options, isRoot), true);\n      },\n      defs: importGroup,\n      use: function use(node) {\n        var id = (getValue(node, 'href', true) || '').substring(1),\n            definition = definitions[id],\n            point = getPoint(node);\n        return definition ? definition instanceof SymbolDefinition ? definition.place(point) : definition.clone().translate(point) : null;\n      },\n      circle: function circle(node) {\n        return new Shape.Circle(getPoint(node, 'cx', 'cy'), getValue(node, 'r'));\n      },\n      ellipse: function ellipse(node) {\n        return new Shape.Ellipse({\n          center: getPoint(node, 'cx', 'cy'),\n          radius: getSize(node, 'rx', 'ry')\n        });\n      },\n      rect: function rect(node) {\n        return new Shape.Rectangle(new _Rectangle(getPoint(node), getSize(node)), getSize(node, 'rx', 'ry'));\n      },\n      line: function line(node) {\n        return new Path.Line(getPoint(node, 'x1', 'y1'), getPoint(node, 'x2', 'y2'));\n      },\n      text: function text(node) {\n        var text = new PointText(getPoint(node).add(getPoint(node, 'dx', 'dy')));\n        text.setContent(node.textContent.trim() || '');\n        return text;\n      },\n      \"switch\": importGroup\n    };\n\n    function applyTransform(item, value, name, node) {\n      if (item.transform) {\n        var transforms = (node.getAttribute(name) || '').split(/\\)\\s*/g),\n            matrix = new Matrix();\n\n        for (var i = 0, l = transforms.length; i < l; i++) {\n          var transform = transforms[i];\n          if (!transform) break;\n          var parts = transform.split(/\\(\\s*/),\n              command = parts[0],\n              v = parts[1].split(/[\\s,]+/g);\n\n          for (var j = 0, m = v.length; j < m; j++) {\n            v[j] = parseFloat(v[j]);\n          }\n\n          switch (command) {\n            case 'matrix':\n              matrix.append(new Matrix(v[0], v[1], v[2], v[3], v[4], v[5]));\n              break;\n\n            case 'rotate':\n              matrix.rotate(v[0], v[1] || 0, v[2] || 0);\n              break;\n\n            case 'translate':\n              matrix.translate(v[0], v[1] || 0);\n              break;\n\n            case 'scale':\n              matrix.scale(v);\n              break;\n\n            case 'skewX':\n              matrix.skew(v[0], 0);\n              break;\n\n            case 'skewY':\n              matrix.skew(0, v[0]);\n              break;\n          }\n        }\n\n        item.transform(matrix);\n      }\n    }\n\n    function applyOpacity(item, value, name) {\n      var key = name === 'fill-opacity' ? 'getFillColor' : 'getStrokeColor',\n          color = item[key] && item[key]();\n      if (color) color.setAlpha(parseFloat(value));\n    }\n\n    var attributes = Base.set(Base.each(SvgStyles, function (entry) {\n      this[entry.attribute] = function (item, value) {\n        if (item[entry.set]) {\n          item[entry.set](convertValue(value, entry.type, entry.fromSVG));\n\n          if (entry.type === 'color') {\n            var color = item[entry.get]();\n\n            if (color) {\n              if (color._scaleToBounds) {\n                var bounds = item.getBounds();\n                color.transform(new Matrix().translate(bounds.getPoint()).scale(bounds.getSize()));\n              }\n            }\n          }\n        }\n      };\n    }, {}), {\n      id: function id(item, value) {\n        definitions[value] = item;\n        if (item.setName) item.setName(value);\n      },\n      'clip-path': function clipPath(item, value) {\n        var clip = getDefinition(value);\n\n        if (clip) {\n          clip = clip.clone();\n          clip.setClipMask(true);\n\n          if (item instanceof Group) {\n            item.insertChild(0, clip);\n          } else {\n            return new Group(clip, item);\n          }\n        }\n      },\n      gradientTransform: applyTransform,\n      transform: applyTransform,\n      'fill-opacity': applyOpacity,\n      'stroke-opacity': applyOpacity,\n      visibility: function visibility(item, value) {\n        if (item.setVisible) item.setVisible(value === 'visible');\n      },\n      display: function display(item, value) {\n        if (item.setVisible) item.setVisible(value !== null);\n      },\n      'stop-color': function stopColor(item, value) {\n        if (item.setColor) item.setColor(value);\n      },\n      'stop-opacity': function stopOpacity(item, value) {\n        if (item._color) item._color.setAlpha(parseFloat(value));\n      },\n      offset: function offset(item, value) {\n        if (item.setOffset) {\n          var percent = value.match(/(.*)%$/);\n          item.setOffset(percent ? percent[1] / 100 : parseFloat(value));\n        }\n      },\n      viewBox: function viewBox(item, value, name, node, styles) {\n        var rect = new _Rectangle(convertValue(value, 'array')),\n            size = getSize(node, null, null, true),\n            group,\n            matrix;\n\n        if (item instanceof Group) {\n          var scale = size ? size.divide(rect.getSize()) : 1,\n              matrix = new Matrix().scale(scale).translate(rect.getPoint().negate());\n          group = item;\n        } else if (item instanceof SymbolDefinition) {\n          if (size) rect.setSize(size);\n          group = item._item;\n        }\n\n        if (group) {\n          if (getAttribute(node, 'overflow', styles) !== 'visible') {\n            var clip = new Shape.Rectangle(rect);\n            clip.setClipMask(true);\n            group.addChild(clip);\n          }\n\n          if (matrix) group.transform(matrix);\n        }\n      }\n    });\n\n    function getAttribute(node, name, styles) {\n      var attr = node.attributes[name],\n          value = attr && attr.value;\n\n      if (!value && node.style) {\n        var style = Base.camelize(name);\n        value = node.style[style];\n        if (!value && styles.node[style] !== styles.parent[style]) value = styles.node[style];\n      }\n\n      return !value ? undefined : value === 'none' ? null : value;\n    }\n\n    function applyAttributes(item, node, isRoot) {\n      var parent = node.parentNode,\n          styles = {\n        node: DomElement.getStyles(node) || {},\n        parent: !isRoot && !/^defs$/i.test(parent.tagName) && DomElement.getStyles(parent) || {}\n      };\n      Base.each(attributes, function (apply, name) {\n        var value = getAttribute(node, name, styles);\n        item = value !== undefined && apply(item, value, name, node, styles) || item;\n      });\n      return item;\n    }\n\n    function getDefinition(value) {\n      var match = value && value.match(/\\((?:[\"'#]*)([^\"')]+)/),\n          name = match && match[1],\n          res = name && definitions[window ? name.replace(window.location.href.split('#')[0] + '#', '') : name];\n\n      if (res && res._scaleToBounds) {\n        res = res.clone();\n        res._scaleToBounds = true;\n      }\n\n      return res;\n    }\n\n    function importNode(node, options, isRoot) {\n      var type = node.nodeName.toLowerCase(),\n          isElement = type !== '#document',\n          body = document.body,\n          container,\n          parent,\n          next;\n\n      if (isRoot && isElement) {\n        rootSize = paper.getView().getSize();\n        rootSize = getSize(node, null, null, true) || rootSize;\n        container = SvgElement.create('svg', {\n          style: 'stroke-width: 1px; stroke-miterlimit: 10'\n        });\n        parent = node.parentNode;\n        next = node.nextSibling;\n        container.appendChild(node);\n        body.appendChild(container);\n      }\n\n      var settings = paper.settings,\n          applyMatrix = settings.applyMatrix,\n          insertItems = settings.insertItems;\n      settings.applyMatrix = false;\n      settings.insertItems = false;\n      var importer = importers[type],\n          item = importer && importer(node, type, options, isRoot) || null;\n      settings.insertItems = insertItems;\n      settings.applyMatrix = applyMatrix;\n\n      if (item) {\n        if (isElement && !(item instanceof Group)) item = applyAttributes(item, node, isRoot);\n        var onImport = options.onImport,\n            data = isElement && node.getAttribute('data-paper-data');\n        if (onImport) item = onImport(node, item, options) || item;\n\n        if (options.expandShapes && item instanceof Shape) {\n          item.remove();\n          item = item.toPath();\n        }\n\n        if (data) item._data = JSON.parse(data);\n      }\n\n      if (container) {\n        body.removeChild(container);\n\n        if (parent) {\n          if (next) {\n            parent.insertBefore(node, next);\n          } else {\n            parent.appendChild(node);\n          }\n        }\n      }\n\n      if (isRoot) {\n        definitions = {};\n        if (item && Base.pick(options.applyMatrix, applyMatrix)) item.matrix.apply(true, true);\n      }\n\n      return item;\n    }\n\n    function _importSVG(source, options, owner) {\n      if (!source) return null;\n      options = typeof options === 'function' ? {\n        onLoad: options\n      } : options || {};\n      var scope = paper,\n          item = null;\n\n      function onLoad(svg) {\n        try {\n          var node = typeof svg === 'object' ? svg : new self.DOMParser().parseFromString(svg, 'image/svg+xml');\n\n          if (!node.nodeName) {\n            node = null;\n            throw new Error('Unsupported SVG source: ' + source);\n          }\n\n          paper = scope;\n          item = importNode(node, options, true);\n\n          if (!options || options.insert !== false) {\n            owner._insertItem(undefined, item);\n          }\n\n          var onLoad = options.onLoad;\n          if (onLoad) onLoad(item, svg);\n        } catch (e) {\n          onError(e);\n        }\n      }\n\n      function onError(message, status) {\n        var onError = options.onError;\n\n        if (onError) {\n          onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      }\n\n      if (typeof source === 'string' && !/^.*</.test(source)) {\n        var node = document.getElementById(source);\n\n        if (node) {\n          onLoad(node);\n        } else {\n          Http.request({\n            url: source,\n            async: true,\n            onLoad: onLoad,\n            onError: onError\n          });\n        }\n      } else if (typeof File !== 'undefined' && source instanceof File) {\n        var reader = new FileReader();\n\n        reader.onload = function () {\n          onLoad(reader.result);\n        };\n\n        reader.onerror = function () {\n          onError(reader.error);\n        };\n\n        return reader.readAsText(source);\n      } else {\n        onLoad(source);\n      }\n\n      return item;\n    }\n\n    Item.inject({\n      importSVG: function importSVG(node, options) {\n        return _importSVG(node, options, this);\n      }\n    });\n    Project.inject({\n      importSVG: function importSVG(node, options) {\n        this.activate();\n        return _importSVG(node, options, this);\n      }\n    });\n  }();\n  var paper = new (PaperScope.inject(Base.exports, {\n    Base: Base,\n    Numerical: Numerical,\n    Key: Key,\n    DomEvent: DomEvent,\n    DomElement: DomElement,\n    document: document,\n    window: window,\n    Symbol: SymbolDefinition,\n    PlacedSymbol: SymbolItem\n  }))();\n\n  if (paper.agent.node) {\n    require('./node/extend.js')(paper);\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define('paper', paper);\n  } else if (typeof module === 'object' && module) {\n    module.exports = paper;\n  }\n\n  return paper;\n}.call(this, typeof self === 'object' ? self : null);"],"sourceRoot":""}